<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="A distributed transaction includes one or more statements that, individually or as a group, update data on two or more distinct nodes of a distributed database.">
      <meta name="description" content="A distributed transaction includes one or more statements that, individually or as a group, update data on two or more distinct nodes of a distributed database.">
      <title>Distributed Transactions</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content="A distributed transaction includes one or more statements that, individually or as a group, update data on two or more distinct nodes of a distributed database.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide for Microsoft Windows">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-data-provider-net.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-08-24T00:49:54-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E90593-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="InstallManagedConfig.html" title="Previous" type="text/html">
      <link rel="next" href="InstallConfigDiff.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OracleÂ® Data Provider for .NET">
    <meta name="dcterms.isVersionOf" content="ODPNT">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="InstallManagedConfig.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="InstallConfigDiff.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="install.html" property="item" typeof="WebPage"><span property="name">Installing and Configuring Oracle Data Provider for .NET</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Distributed Transactions</li>
            </ol>
            <a id="GUID-D8CE1DB4-A695-450B-B29C-9C6AD98077AA" name="GUID-D8CE1DB4-A695-450B-B29C-9C6AD98077AA"></a><a id="ODPNT8172"></a>
            
            <h2 id="ODPNT-GUID-D8CE1DB4-A695-450B-B29C-9C6AD98077AA" class="sect2"><span class="enumeration_section">2.10 </span>Distributed Transactions
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>A distributed transaction includes one or more statements that, individually or as a group, update data on two or more distinct nodes of a distributed database.</p>
               <p>ODP.NET, Managed and Unmanaged Drivers integrate with Microsoft Distributed Transaction Coordinator (MSDTC) and Oracle databases. MSDTC coordinates with all the resource managers that are enlisted to the same&nbsp;<code class="codeph">System.Transactions</code> object, to perform a 2-phrase commit or rollback atomically. With that, Oracle distributed transactions can then be committed or rolled back across networks properly.
               </p>
               <p>ODP.NET only supports the read committed isolation level for distributed transactions.</p>
            </div><a id="ODPNT8500"></a><div class="props_rev_3"><a id="GUID-9D0D5DA9-085D-439E-8DA3-5DB2C397E695" name="GUID-9D0D5DA9-085D-439E-8DA3-5DB2C397E695"></a><h3 id="ODPNT-GUID-9D0D5DA9-085D-439E-8DA3-5DB2C397E695" class="sect3"><span class="enumeration_section">2.10.1 </span>Microsoft Distributed Transaction Coordinator Integration
               </h3>
               <div>
                  <p>Managed ODP.NET includes a native fully managed implementation that supports integration with MSDTC for distributed transactions enlistments, commits, and rollbacks.</p>
                  <p>For unmanaged ODP.NET, Oracle Services for Microsoft Transaction (OraMTS) provides MSDTC integration that allows client components to participate in Oracle database distributed transactions. OraMTS act as a proxy for the Oracle database to MSDTC to ensure that Oracle distributed database transactions commit or rollback together with the rest of the distributed transaction.</p>
                  <p>Unmanaged ODP.NET can use either a managed or unmanaged OraMTS implementation. Oracle recommends using the managed OraMTS for applications requiring high availability from Oracle RAC or Data Guard.</p>
                  <p>If a failure occurs in a distributed transaction, such as a network failure or server hardware failure, then it can leave an in-process transaction in-doubt. Both managed and unmanaged ODP.NET use the OraMTS recovery service to resolve these in-doubt transactions. This recovery service runs as a Windows service. Administrators must install and configure the OraMTS Windows recovery service to manage recovery scenarios whether they use managed or unmanaged ODP.NET. Only one recovery service is needed per machine.</p>
                  <p>It is required to install the OraMTS Recovery Service on all the client machines where ODP.NET is running and participating in MSDTC. As a machine may have multiple IP addresses, administrators for managed ODP.NET applications can specify the host machine name or IP address that has the running recovery service in the application's .NET configuration file. ODP.NET, Unmanaged Driver resolves the IP/machine name for the recovery service automatically.</p>
                  <div class="tblformal" id="GUID-9D0D5DA9-085D-439E-8DA3-5DB2C397E695__GUID-D9ED0FDE-B9C0-44AB-A7DC-AF0A910288F5">
                     <p class="titleintable">Table 2-8 Supported ODP.NET Type and .NET Framework Version for Distributed Transaction </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Supported ODP.NET Type and .NET Framework Version for Distributed Transaction " summary="column 1 lists the ODP.NET type, column 2 the corresponding .NET Framework version, and column 3 its distributed transaction support" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d53946e46">ODP.NET Type</th>
                              <th align="left" valign="bottom" width="26%" id="d53946e49">.NET Framework Version</th>
                              <th align="left" valign="bottom" width="55%" id="d53946e52">Distributed Transaction Support</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d53946e57" headers="d53946e46 ">
                                 <p>Managed</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d53946e57 d53946e49 ">
                                 <p>4.5.2 and higher</p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d53946e57 d53946e52 ">
                                 <p>.NET Framework's native managed implementation for distributed transactions. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d53946e67" headers="d53946e46 ">
                                 <p>Unmanaged</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d53946e67 d53946e49 ">
                                 <p>4.5.2 and higher</p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d53946e67 d53946e52 ">
                                 <p>OraMTS (default) or managed OraMTS implementation. Oracle recommends using managed OraMTS for unmanaged ODP.NET applications requiring high availability from Oracle RAC or Data Guard.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d53946e77" headers="d53946e46 ">
                                 <p>Unmanaged</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d53946e77 d53946e49 ">
                                 <p>3.5</p>
                              </td>
                              <td align="left" valign="top" width="55%" headers="d53946e77 d53946e52 ">
                                 <p>OraMTS</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnote" id="GUID-9D0D5DA9-085D-439E-8DA3-5DB2C397E695__GUID-A08F472F-4631-4936-BD3C-1307EA79808B">
                     <p class="notep1">Note:</p>
                     <p>.NET Framework 4.5.1 and lower within the .NET Framework 4 family are no longer supported by Microsoft and Oracle. </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-9D0D5DA9-085D-439E-8DA3-5DB2C397E695__GUID-00901534-5DE4-48C5-81FD-1083A69E94CB">
                     <p class="notep1">See Also:</p>
                     <p>Manually Creating an Oracle MTS Recovery Service in <a href="../ntmts/install.html#NTMTS303" target="_blank"><span class="italic">Oracle Services for Microsoft Transaction Server Developer's Guide for Microsoft Windows</span></a>.
                     </p>
                  </div>
               </div>
            </div><a id="ODPNT8501"></a><div class="props_rev_3"><a id="GUID-CF7FB0C7-B8E8-425C-B1CB-8C72CDEC48D6" name="GUID-CF7FB0C7-B8E8-425C-B1CB-8C72CDEC48D6"></a><h3 id="ODPNT-GUID-CF7FB0C7-B8E8-425C-B1CB-8C72CDEC48D6" class="sect3"><span class="enumeration_section">2.10.2 </span>ODP.NET, Managed Driver Setup
               </h3>
               <div>
                  <p>This section explains the setup and configuration steps required for using distributed transactions with ODP.NET, Managed Driver. Follow these steps to configure distributed transactions in these .NET Framework versions:</p>
                  <ol>
                     <li>
                        <p>Create and setup the OraMTS recovery service or make sure an existing recovery service is running.</p>
                     </li>
                     <li>
                        <p>Set the value of&nbsp;<code class="codeph">OMTSRECO_PORT</code>&nbsp;in the .NET configuration to specify the port number that the OraMTS recovery service is running. 
                        </p>
                     </li>
                  </ol>
               </div>
            </div><a id="ODPNT8502"></a><div class="props_rev_3"><a id="GUID-91E8B4FF-08C7-46DF-8151-42A882D9ACD9" name="GUID-91E8B4FF-08C7-46DF-8151-42A882D9ACD9"></a><h3 id="ODPNT-GUID-91E8B4FF-08C7-46DF-8151-42A882D9ACD9" class="sect3"><span class="enumeration_section">2.10.3 </span>ODP.NET, Unmanaged Driver Setup
               </h3>
               <div>
                  <p>This section explains the setup and configuration steps required for using distributed transactions with ODP.NET, Unmanaged Driver.</p>
                  <p>For .NET Framework 4.5.2 and higher, ODP.NET, Unmanaged Driver includes managed OraMTS in its assembly. OraMTS is the default option for ODP.NET, Unmanaged Driver, to ensure implementation continuity during upgrades. However, Oracle recommends the managed OraMTS option when using any high availability FAN operations (HA Events = true) with Oracle Real Application Clusters or Oracle Data Guard. The managed OraMTS option support high availability functionality, while the traditional OraMTS does not.</p>
                  <p>Applications can set OraMTS (default) or managed OraMTS usage through the&nbsp;<code class="codeph">UseOraMTSManaged</code>&nbsp;parameter in the .NET configuration file.
                  </p>
                  <p>Install and configure OraMTS, including its recovery service to use traditional OraMTS implementation for ODP.NET, Unmanaged Driver.</p>
                  <p>To set managed OraMTS up, perform the following steps:</p>
                  <ol>
                     <li>
                        <p>Set <code class="codeph">UseOraMTSManaged</code> to <code class="codeph">true</code> in the .NET configuration file.
                        </p>
                     </li>
                     <li>
                        <p>Create and setup the OraMTS recovery service or make sure an existing recovery service is running.</p>
                     </li>
                  </ol>
                  <div class="infoboxnotealso" id="GUID-91E8B4FF-08C7-46DF-8151-42A882D9ACD9__GUID-FDCC3222-106E-4388-ADDB-5C723373FA40">
                     <p class="notep1">See Also:</p>
                     <p><a href="InstallManagedConfig.html#GUID-A82B8720-BF62-48C4-8D48-E48114759EBE">distributedTransaction section</a> for more information about .NET configuration setup
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>