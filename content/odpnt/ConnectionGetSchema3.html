<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>GetSchema (string collectionName, string[] restrictions)</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide for Microsoft Windows">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-data-provider-net.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-08-24T00:49:54-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E90593-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="ConnectionGetSchema2.html" title="Previous" type="text/html">
      <link rel="next" href="ConnectionGetSessionInfoOverloads.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OracleÂ® Data Provider for .NET">
    <meta name="dcterms.isVersionOf" content="ODPNT">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="ConnectionGetSchema2.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="ConnectionGetSessionInfoOverloads.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="odp-dot-net-classes.html" property="item" typeof="WebPage"><span property="name">Oracle Data Provider for .NET Classes</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="OracleConnectionClass.html" property="item" typeof="WebPage"><span property="name">OracleConnection Class</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="ConnectionPublicMethods.html" property="item" typeof="WebPage"><span property="name">OracleConnection Public Methods</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">GetSchema (string collectionName, string[] restrictions)</li>
            </ol>
            <a id="GUID-35E9B896-2953-4BE4-BB06-B0DE395DB367" name="GUID-35E9B896-2953-4BE4-BB06-B0DE395DB367"></a><a id="ODPNT962"></a><a id="ODPNT963"></a><a id="ODPNT964"></a><a id="ODPNT965"></a><a id="ODPNT966"></a><a id="ODPNT967"></a><a id="ODPNT961"></a>
            
            <h2 id="ODPNT-GUID-35E9B896-2953-4BE4-BB06-B0DE395DB367" class="sect2"><span class="enumeration_section">6.4.6.14 </span>GetSchema (string collectionName, string[] restrictions)
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>This method returns schema information for the data source of the <code class="codeph">OracleConnection</code> using the specified string for the collection name and the specified string array for the restriction values.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Declaration</p>
               </div>
               <!-- class="section" -->
               <div class="section"><pre class="oac_no_warn" dir="ltr">// C#
public override DataTable GetSchema (string <span class="italic">collectionName</span>, 
    string[] <span class="italic">restrictions</span>);
 </pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Parameters</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic"><code class="codeph">collectionName</code></span></p>
                        <p>The name of the collection of metadata being retrieved.</p>
                     </li>
                     <li>
                        <p><span class="italic"><code class="codeph">restrictions</code></span></p>
                        <p>An array of restrictions that apply to the metadata being retrieved.</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Return Value</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>A <code class="codeph">DataTable</code> object.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Exception</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">ArgumentException</code> &#x2013; The requested collection is not defined.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">InvalidOperationException</code> &#x2013; One of the following conditions exist:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The connection is closed.</p>
                           </li>
                           <li>
                              <p>The requested collection is not supported by the current version of Oracle database.</p>
                           </li>
                           <li>
                              <p>More restrictions were provided than the requested collection supports.</p>
                           </li>
                           <li>
                              <p>No population string is specified for requested collection.</p>
                           </li>
                        </ul>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Remarks</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>This method takes the name of a metadata collection and an array of String values that specify the restrictions for filtering the rows in the returned <code class="codeph">DataTable</code>. This returns a <code class="codeph">DataTable</code> that contains only rows from the specified metadata collection that match the specified restrictions.
                  </p>
                  <p>For example, if the <code class="codeph">Columns</code> collection has three restrictions (<code class="codeph">owner</code>, <code class="codeph">tablename</code>, and <code class="codeph">columnname</code>), to retrieve all the columns for the <code class="codeph">EMP</code> table regardless of schema, the <code class="codeph">GetSchema</code> method must pass in at least these values: null, <code class="codeph">EMP</code>. 
                  </p>
                  <p>If no restriction value is passed in, default values are used for that restriction, which is the same as passing in null. This differs from passing in an empty string for the parameter value. In this case, the empty string (<code class="codeph">""</code>) is considered the value for the specified parameter.
                  </p>
                  <p><span class="italic"><code class="codeph">collectionName</code></span> is not case-sensitive, but restrictions (string values) are.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Example</p>
               </div>
               <!-- class="section" -->
               <div class="section"><pre class="oac_no_warn" dir="ltr">// C#
 
using System;
using System.Data;
using System.Data.Common;
using Oracle.DataAccess.Client;
 
class GetSchemaSample
{
  static void Main(string[] args)
  {
    string constr = "User Id=scott; Password=tiger; Data Source=oracle;";
    string ProviderName = "Oracle.DataAccess.Client";
 
    DbProviderFactory factory = DbProviderFactories.GetFactory(ProviderName);
 
    using (DbConnection conn = factory.CreateConnection())
    {
      try
      {
        conn.ConnectionString = constr;
        conn.Open();
 
        //Get Restrictions
        DataTable dtRestrictions =
          conn.GetSchema(DbMetaDataCollectionNames.Restrictions);
        
        DataView dv = dtRestrictions.DefaultView;
 
        dv.RowFilter = "CollectionName = 'Columns'";
        dv.Sort = "RestrictionNumber";
 
        for (int i = 0; i &lt; dv.Count; i++)
          Console.WriteLine("{0} (default) {1}" , 
                            dtRestrictions.Rows[i]["RestrictionName"], 
                            dtRestrictions.Rows[i]["RestrictionDefault"]);
 
        //Set restriction string array
        string[] restrictions = new string[3];
 
        //Get all columns from all tables owned by "SCOTT"
        restrictions[0] = "SCOTT";
        DataTable dtAllScottCols = conn.GetSchema("Columns", restrictions);
 
        // clear collection
        for (int i = 0; i &lt; 3; i++)
          restrictions[i] = null;
 
        //Get all columns from all tables named "EMP" owned by any 
        //owner/schema
        restrictions[1] = "EMP";
        DataTable dtAllEmpCols = conn.GetSchema("Columns", restrictions);
 
        // clear collection
        for (int i = 0; i &lt; 3; i++)
          restrictions[i] = null;
 
        //Get columns named "EMPNO" from tables named "EMP", 
        //owned by any owner/schema
        restrictions[1] = "EMP";
        restrictions[2] = "EMPNO";
        DataTable dtAllScottEmpCols = conn.GetSchema("Columns", restrictions);
 
        // clear collection
        for (int i = 0; i &lt; 3; i++)
          restrictions[i] = null;
 
        //Get columns named "EMPNO" from all
        //tables, owned by any owner/schema
        restrictions[2] = "EMPNO";
        DataTable dtAllEmpNoCols = conn.GetSchema("Columns", restrictions);
      }
      catch (Exception ex)
      {
        Console.WriteLine(ex.Message);
        Console.WriteLine(ex.Source);
      }
    }
  }
}</pre><div class="infoboxnotealso" id="GUID-35E9B896-2953-4BE4-BB06-B0DE395DB367__GUID-B4DF7818-4E31-416A-9905-11558D3C6DDE">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="intro003.html#GUID-2A5A5F0B-E6C9-45AF-9477-FBD55F7FCDC5">Oracle.DataAccess.Client and Oracle.ManagedDataAccess.Client Namespaces</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="OracleConnectionClass.html#GUID-A8BFA792-97D6-423B-9548-80CA0652174E">OracleConnection Class</a></p>
                        </li>
                        <li>
                           <p><a href="ConnectionMembers.html#GUID-4DE91FF2-45DB-4996-904A-96B37B467EC3">OracleConnection Members</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>