<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>DeriveParameters</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Developer's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Developer's Guide for Microsoft Windows">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-data-provider-net.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-08-24T00:49:54-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E90593-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="CommandBuilderStaticMethods.html" title="Previous" type="text/html">
      <link rel="next" href="CommandBuilderProperties.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OracleÂ® Data Provider for .NET">
    <meta name="dcterms.isVersionOf" content="ODPNT">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CommandBuilderStaticMethods.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CommandBuilderProperties.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Developer's Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="odp-dot-net-classes.html" property="item" typeof="WebPage"><span property="name">Oracle Data Provider for .NET Classes</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="OracleCommandBuilderClass.html" property="item" typeof="WebPage"><span property="name">OracleCommandBuilder Class</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="CommandBuilderStaticMethods.html" property="item" typeof="WebPage"><span property="name">OracleCommandBuilder Static Methods</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DeriveParameters</li>
            </ol>
            <a id="GUID-D5D64EE5-4330-4E29-81E3-86D9524B03CF" name="GUID-D5D64EE5-4330-4E29-81E3-86D9524B03CF"></a><a id="ODPNT684"></a><a id="ODPNT685"></a><a id="ODPNT686"></a><a id="ODPNT687"></a><a id="ODPNT688"></a><a id="ODPNT683"></a>
            
            <h2 id="ODPNT-GUID-D5D64EE5-4330-4E29-81E3-86D9524B03CF" class="sect2"><span class="enumeration_section">6.3.3.1 </span>DeriveParameters
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p>This method queries for the parameters of a stored procedure or function, represented by a specified <code class="codeph">OracleCommand</code>, and populates the <code class="codeph">OracleParameterCollection</code> of the command with the return values.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Declaration</p>
               </div>
               <!-- class="section" -->
               <div class="section"><pre class="oac_no_warn" dir="ltr">// C#
public static void DeriveParameters(OracleCommand <span class="italic">command</span>);
</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Parameters</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="italic"><code class="codeph">command</code></span> 
                        </p>
                        <p>The command that represents the stored procedure or function for which parameters are to be derived.</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Exceptions</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">InvalidOperationException</code> - The <code class="codeph">CommandText</code> is not a valid stored procedure or function name, the <code class="codeph">CommandType</code> is not <code class="codeph">CommandType.StoredProcedure</code>, or the <code class="codeph">Connection.State</code> is not <code class="codeph">ConnectionState.Open</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Remarks</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>When <code class="codeph">DeriveParameters</code> is used to populate the <code class="codeph">Parameter</code> collection of an <code class="codeph">OracleCommand</code> Object that represents a stored function, the return value of the function is bound as the first parameter (at position <code class="codeph">0</code> of the <code class="codeph">OracleParameterCollection</code>).
                  </p>
                  <p><code class="codeph">DeriveParameters</code> can only be used for stored procedures or functions, not for anonymous PL/SQL blocks.
                  </p>
                  <p><code class="codeph">DeriveParameters</code> incurs a database round-trip to retrieve parameter metadata prior to executing the stored procedure/function. It should only be used during design time. To avoid unnecessary database round-trips in a production environment, the <code class="codeph">DeriveParameters</code> method itself should be replaced with the explicit parameter settings that were returned by the <code class="codeph">DeriveParameters</code> method at design time.
                  </p>
                  <p><code class="codeph">DeriveParameters</code> can only preserve the case of the stored procedure or function name if it is encapsulated by double-quotes. For example, if the stored procedure in the database is named <code class="codeph">GetEmployees</code> with mixed-case, the <code class="codeph">CommandText</code> property on the <code class="codeph">OracleCommand</code> object must be set appropriately as in the following example:
                  </p><pre class="oac_no_warn" dir="ltr">cmd.CommandText = "\"GetEmployees\"";
</pre><p>Stored procedures and functions in a package must be provided in the following format:</p><pre class="oac_no_warn" dir="ltr">&lt;package name&gt;.&lt;procedure or function name&gt; 
</pre><p>For example, to obtain parameters for a stored procedure named <code class="codeph">GetEmployees</code> (mixed-case) in a package named <code class="codeph">EmpProcedures</code> (mixed-case), the name provided to the <code class="codeph">OracleCommand</code> is:
                  </p><pre class="oac_no_warn" dir="ltr">"\"EmpProcedures\".\"GetEmployees\""
</pre><p><code class="codeph">DeriveParameters</code> cannot be used for object type methods.
                  </p>
                  <p>The derived parameters contain all the metadata information that is needed for the stored procedure to execute properly. The application must provide the value of the parameters before execution, if required. The application may also modify the metadata information of the parameters before execution. For example, the <code class="codeph">Size</code> property of the <code class="codeph">OracleParameter</code> may be modified for PL/SQL character and string types to optimize the execution of the stored procedure.
                  </p>
                  <p>The output values of derived parameters return as .NET Types by default. To obtain output parameters as provider types, the <code class="codeph">OracleDbType</code> property of the parameter must be set explicitly by the application to override this default behavior. One quick way to do this is to set the <code class="codeph">OracleDbType</code> to itself for all output parameters that should be returned as provider types. 
                  </p>
                  <p>The <code class="codeph">BindByName</code> property of the supplied <code class="codeph">OracleCommand</code> is left as is, but the application can change its value. 
                  </p>
                  <p>If the specified stored procedure or function is overloaded, the first overload is used to populate the parameters collection.</p><pre class="oac_no_warn" dir="ltr">// Database Setup
/*
connect scott/tiger@oracle
CREATE OR REPLACE PROCEDURE MyOracleStoredProc (arg_in IN VARCHAR2, 
  arg_out OUT VARCHAR2) IS
BEGIN
  arg_out := arg_in;
END;
/
*/
 
// C#
using System;
using System.Data;
using Oracle.DataAccess.Client; 
 
class DeriveParametersSample
{
  static void Main()
  {
    // Create the PL/SQL Stored Procedure MyOracleStoredProc as indicated in
    // the preceding Database Setup
 
    string constr = "User Id=scott;Password=tiger;Data Source=oracle";
    OracleConnection con = new OracleConnection(constr);
    con.Open();
 
    // Create an OracleCommand
    OracleCommand cmd = new OracleCommand("MyOracleStoredProc", con);
    cmd.CommandType = CommandType.StoredProcedure;
 
    // Derive Parameters
    OracleCommandBuilder.DeriveParameters(cmd); 
    Console.WriteLine("Parameters Derived");
 
    // Prints "Number of Parameters for MyOracleStoredProc = 2"
    Console.WriteLine("Number of Parameters for MyOracleStoredProc = {0}",
      cmd.Parameters.Count);
 
    // The PL/SQL stored procedure MyOracleStoredProc has one IN and 
    // one OUT parameter.  Set the Value for the IN parameter.
    cmd.Parameters[0].Value = "MyText";
 
    // The application may modify the other OracleParameter properties also
    // This sample uses the default Size for the IN parameter and modifies
    // the Size for the OUT parameter
 
    // The default size for OUT VARCHAR2 is 4000
    // Prints "cmd.Parameters[1].Size  = 4000"
    Console.WriteLine("cmd.Parameters[1].Size  = " + cmd.Parameters[1].Size);
 
    // Set the Size for the OUT parameter
    cmd.Parameters[1].Size = 6;
 
    // Execute the command
    cmd.ExecuteNonQuery();
 
    // Prints "cmd.Parameters[1].Value = MyText"
    Console.WriteLine("cmd.Parameters[1].Value = " + cmd.Parameters[1].Value);
 
    con.Close();
    con.Dispose();
  }
}
</pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Example</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-D5D64EE5-4330-4E29-81E3-86D9524B03CF__GUID-614E5B1B-74EF-4F3D-AE13-7A36723C0951">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="intro003.html#GUID-2A5A5F0B-E6C9-45AF-9477-FBD55F7FCDC5">Oracle.DataAccess.Client and Oracle.ManagedDataAccess.Client Namespaces</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="OracleCommandBuilderClass.html#GUID-FE018CDC-29C6-42DA-AD24-E0D874C4030C">OracleCommandBuilder Class</a></p>
                        </li>
                        <li>
                           <p><a href="CommandBuilderMembers.html#GUID-4170AB29-8F99-404F-9218-FBB758155FDF">OracleCommandBuilder Members</a></p>
                        </li>
                        <li>
                           <p><a href="OracleCommandClass.html#GUID-7C1D5BCC-0268-4F1B-A583-F401F30EB9C0">OracleCommand Class</a></p>
                        </li>
                        <li>
                           <p><a href="OracleParameterClass.html#GUID-F6A0A115-1AF6-4A74-991B-00C7F7D601AE">OracleParameter Class</a></p>
                        </li>
                        <li>
                           <p><a href="OracleParameterCollectionClass.html#GUID-92B284FF-6D80-4408-BD0A-DB625965EC04">OracleParameterCollection Class</a></p>
                        </li>
                        <li>
                           <p><a href="http://msdn.microsoft.com/library" target="_blank"><code class="codeph">http://msdn.microsoft.com/library</code></a> for detailed information about this Microsoft .NET Framework feature
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>