<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Comparing and Converging Data</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Replication Administrator’s Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Replication Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="streams-replication-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-01-24T23:25:23-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83780-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="managing-oracle-streams-replication.html" title="Previous" type="text/html">
      <link rel="next" href="managing-lcrs.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Streams Replication Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="STREP">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-oracle-streams-replication.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-lcrs.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Replication Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="administering-oracle-streams.html" property="item" typeof="WebPage"><span property="name">    Administering Oracle Streams Replication </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Comparing and Converging Data</li>
            </ol>
            <a id="GUID-A6644AD9-8EB7-4528-9E53-A6CF0616A5E9" name="GUID-A6644AD9-8EB7-4528-9E53-A6CF0616A5E9"></a><a id="STREP146"></a>
            
            <h2 id="STREP-GUID-A6644AD9-8EB7-4528-9E53-A6CF0616A5E9" class="sect2"><span class="enumeration_chapter">13 </span> Comparing and Converging Data
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d58061e100" class="indexterm-anchor"></a>This chapter contains instructions for comparing and converging data in database objects at two different databases using the <code class="codeph">DBMS_COMPARISON</code> package. It also contains instructions for managing comparisons after they are created and for querying data dictionary views to obtain information about comparisons and comparison results.
               </p>
               <p>This chapter contains these topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-C6F88A41-0E58-42B1-93B7-B8AEFC699248">About Comparing and Converging Data</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-BBE7C7D0-F997-44D9-9822-221FB4046463">Other Documentation About the DBMS_COMPARISON Package</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-C451D65E-659E-4C23-8B24-7C0EB546E543">Quick Start: A Simple Compare and Converge Scenario</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-E169666D-4804-46BC-ADC9-0FE981C0A93E">Diverging a Database Object at Two Databases to Complete Examples</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39">Comparing a Shared Database Object at Two Databases</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-4C7E9DCA-893D-4B83-BC4C-949AEE797B8D">Viewing Information About Comparisons and Comparison Results</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945">Rechecking the Comparison Results for a Comparison</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-23766756-FA44-47CC-8E55-32EDD5C69965">Purging Comparison Results</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-91E62DE9-0C50-484C-9A63-61CA7E14E587">Dropping a Comparison</a></p>
                  </li>
                  <li>
                     <p><a href="comparing-and-converging-data.html#GUID-7E23979E-221F-4B4D-A505-B7ADF2E76810">Using DBMS_COMPARISON in an Oracle Streams Replication Environment</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-A6644AD9-8EB7-4528-9E53-A6CF0616A5E9__GUID-99482DE0-196F-48C8-A37C-AC7C8E1F58FA">
                  <p class="notep1">See Also:</p>
                  <p><a href="../arpls/DBMS_COMPARISON.html#ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code class="codeph">DBMS_COMPARISON</code> package
                  </p>
               </div>
            </div><a id="STREP151"></a><div class="props_rev_3"><a id="GUID-C6F88A41-0E58-42B1-93B7-B8AEFC699248" name="GUID-C6F88A41-0E58-42B1-93B7-B8AEFC699248"></a><h3 id="STREP-GUID-C6F88A41-0E58-42B1-93B7-B8AEFC699248" class="sect3"><span class="enumeration_section">13.1 </span>About Comparing and Converging Data
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_COMPARISON</code> package enables you to compare database objects at different databases and identify differences in them. This package also enables you to converge the database objects so that they are consistent at different databases. Typically, this package is used in environments that share a database object at multiple databases. When copies of the same database object exist at multiple databases, the database object is a <span class="bold">shared database object</span>.
                  </p>
                  <p>Shared database objects might be maintained by data replication. For example, materialized views or Oracle Streams components might replicate the database objects and maintain them at multiple databases. A custom application might also maintain shared database objects. When a database object is shared, it can diverge at the databases that share it. You can use the <code class="codeph">DBMS_COMPARISON</code> package to identify differences in the shared database objects. After identifying the differences, you can optionally use this package to synchronize the shared database objects.
                  </p>
                  <p>The <code class="codeph">DBMS_COMPARISON</code> package can compare the following types of database objects:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Tables</p>
                     </li>
                     <li>
                        <p>Single-table views</p>
                     </li>
                     <li>
                        <p>Materialized views</p>
                     </li>
                     <li>
                        <p>Synonyms for tables, single-table views, and materialized views</p>
                     </li>
                  </ul>
                  <p>Database objects of different types can be compared and converged at different databases. For example, a table at one database and a materialized view at another database can be compared and converged with this package.</p>
                  <p>You create a comparison between two database objects using the <code class="codeph">CREATE_COMPARISON</code> procedure in the <code class="codeph">DBMS_COMPARISON</code> package. After you create a comparison, you can run the comparison at any time using the <code class="codeph">COMPARE</code> function. When you run the <code class="codeph">COMPARE</code> function, it records <span class="bold">comparison results</span> in the appropriate data dictionary views. Separate comparison results are generated for each execution of the <code class="codeph">COMPARE</code> function.
                  </p>
               </div><a id="STREP449"></a><div class="props_rev_3"><a id="GUID-13C64E24-C59E-4FDE-AFDB-840ED0C95682" name="GUID-13C64E24-C59E-4FDE-AFDB-840ED0C95682"></a><h4 id="STREP-GUID-13C64E24-C59E-4FDE-AFDB-840ED0C95682" class="sect4"><span class="enumeration_section">13.1.1 </span>Scans
                  </h4>
                  <div>
                     <p>Each time the <code class="codeph">COMPARE</code> function is run, one or more new <span class="bold">scan</span>s are performed for the specified comparison. A scan checks for differences in some or all of the rows in a shared database object at a single point in time. The comparison results for a single execution of the <code class="codeph">COMPARE</code> function can include one or more scans. You can compare database objects multiple times, and a unique scan ID identifies each scan in the comparison results.
                     </p>
                  </div>
               </div><a id="STREP450"></a><div class="props_rev_3"><a id="GUID-86F03802-8C7F-4FC7-86DD-4AFD19931DD7" name="GUID-86F03802-8C7F-4FC7-86DD-4AFD19931DD7"></a><h4 id="STREP-GUID-86F03802-8C7F-4FC7-86DD-4AFD19931DD7" class="sect4"><span class="enumeration_section">13.1.2 </span>Buckets
                  </h4>
                  <div>
                     <p>A <span class="bold">bucket</span> is a range of rows in a database object that is being compared. Buckets improve performance by splitting the database object into ranges and comparing the ranges independently. Every comparison divides the rows being compared into an appropriate number of buckets. The number of buckets used depends on the size of the database object and is always less than the maximum number of buckets specified for the comparison by the <code class="codeph">max_num_buckets</code> parameter in the <code class="codeph">CREATE_COMPARISON</code> procedure.
                     </p>
                     <p>When a bucket is compared using the <code class="codeph">COMPARE</code> function, the following results are possible: 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>No differences are found. In this case, the comparison proceeds to the next bucket.</p>
                        </li>
                        <li>
                           <p>Differences are found. In this case, the comparison can split the bucket into smaller buckets and compare each smaller bucket. When differences are found in a smaller bucket, the bucket is split into still smaller buckets. This process continues until the minimum number of rows allowed in a bucket is reached. The minimum number of rows in a bucket for a comparison is specified by the <code class="codeph">min_rows_in_bucket</code> parameter in the <code class="codeph">CREATE_COMPARISON</code> procedure. 
                           </p>
                           <p>When the minimum number of rows in a bucket is reached, the <code class="codeph">COMPARE</code> function reports whether there are differences in the bucket. The <code class="codeph">COMPARE</code> function includes the <code class="codeph">perform_row_dif</code> parameter. This parameter controls whether the <code class="codeph">COMPARE</code> function identifies each row difference in a bucket that has differences. When this parameter is set to <code class="codeph">TRUE</code>, the <code class="codeph">COMPARE</code> function identifies each row difference. When this parameter is set to <code class="codeph">FALSE</code>, the <code class="codeph">COMPARE</code> function does not identify specific row differences. Instead, it only reports that there are differences in the bucket.
                           </p>
                        </li>
                     </ul>
                     <p>You can adjust the <code class="codeph">max_num_buckets</code> and <code class="codeph">min_rows_in_bucket</code> parameters in the <code class="codeph">CREATE_COMPARISON</code> procedure to achieve the best performance when comparing a particular database object. After a comparison is created, you can view the bucket specifications for the comparison by querying the <code class="codeph">MAX_NUM_BUCKETS</code> and <code class="codeph">MIN_ROWS_IN_BUCKET</code> columns in the <code class="codeph">DBA_COMPARISON</code> data dictionary view.
                     </p>
                     <p>The <code class="codeph">DBMS_COMPARISON</code> package uses the <code class="codeph">ORA_HASH</code> function on the specified columns in all the rows in a bucket to compute a hash value for the bucket. If the hash values for two corresponding buckets match, then the contents of the buckets are assumed to match. The <code class="codeph">ORA_HASH</code> function is an efficient way to compare buckets because row values are not transferred between databases. Instead, only the hash value is transferred.
                     </p>
                     <div class="infoboxnote" id="GUID-86F03802-8C7F-4FC7-86DD-4AFD19931DD7__GUID-C01429B7-9692-4837-AC69-6CE74E344364">
                        <p class="notep1">Note:</p>
                        <p>If an index column for a comparison is a <code class="codeph">VARCHAR2</code> or <code class="codeph">CHAR</code> column, then the number of buckets might exceed the value specified for the <code class="codeph">max_num_buckets</code> parameter.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-86F03802-8C7F-4FC7-86DD-4AFD19931DD7__GUID-68236188-F1B6-44BA-9027-2ADF743893FD">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../sqlrf/ORA_HASH.html#SQLRF06313"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code class="codeph">ORA_HASH</code> function
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS882"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about index columns
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="STREP451"></a><div class="props_rev_3"><a id="GUID-52AF3A5B-A890-41DD-A59B-FD922BDCA8C1" name="GUID-52AF3A5B-A890-41DD-A59B-FD922BDCA8C1"></a><h4 id="STREP-GUID-52AF3A5B-A890-41DD-A59B-FD922BDCA8C1" class="sect4"><span class="enumeration_section">13.1.3 </span>Parent Scans and Root Scans
                  </h4>
                  <div>
                     <p>Each time the <code class="codeph">COMPARE</code> function splits a bucket into smaller buckets, it performs new scans of the smaller buckets. The scan that analyzes a larger bucket is the <span class="bold">parent scan</span> of each scan that analyzes the smaller buckets into which the larger bucket was split. The <span class="bold">root scan</span> in the comparison results is the highest level parent scan. The root scan does not have a parent. You can identify parent and root scan IDs by querying the <code class="codeph">DBA_COMPARISON_SCAN</code> data dictionary view.
                     </p>
                     <p>You can recheck a scan using the <code class="codeph">RECHECK</code> function, and you can converge a scan using the <code class="codeph">CONVERGE</code> procedure. When you want to recheck or converge all of the rows in the comparison results, specify the root scan ID for the comparison results in the appropriate subprogram. When you want to recheck or converge a portion of the rows in comparison results, specify the scan ID of the scan that contains the differences.
                     </p>
                     <p>For example, a scan with differences in 20 buckets is the parent scan for 20 additional scans, if each bucket with differences has more rows than the specified minimum number of rows in a bucket for the comparison. To view the minimum number of rows in a bucket for the comparison, query the <code class="codeph">MIN_ROWS_IN_BUCKET</code> column in the <code class="codeph">DBA_COMPARISON</code> data dictionary view.
                     </p>
                     <div class="infoboxnotealso" id="GUID-52AF3A5B-A890-41DD-A59B-FD922BDCA8C1__GUID-91D922A3-AA33-4194-95BB-1C091E634960">
                        <p class="notep1">See Also:</p>
                        <p><a href="../refrn/index.html"><span class="italic">Oracle Database Reference</span></a> for information about the views related to the <code class="codeph">DBMS_COMPARISON</code> package
                        </p>
                     </div>
                  </div>
               </div><a id="STREP453"></a><a id="STREP454"></a><a id="STREP452"></a><div class="props_rev_3"><a id="GUID-20487EA3-B7F1-4273-A997-9529A504A2A0" name="GUID-20487EA3-B7F1-4273-A997-9529A504A2A0"></a><h4 id="STREP-GUID-20487EA3-B7F1-4273-A997-9529A504A2A0" class="sect4"><span class="enumeration_section">13.1.4 </span>How Scans and Buckets Identify Differences
                  </h4>
                  <div>
                     <p>This section describes two different comparison scenarios to show how scans and buckets identify differences in shared database objects. In each scenario, the <code class="codeph">max_num_buckets</code> parameter is set to <code class="codeph">3</code> in the <code class="codeph">CREATE_COMPARISON</code> procedure. Therefore, when the <code class="codeph">COMPARE</code> or <code class="codeph">RECHECK</code> function is run for the comparison, the comparison uses a maximum of three buckets in each scan.
                     </p>
                     <p><a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABDDDCB">Figure 13-1</a> shows the first scenario.
                     </p>
                     <div class="figure" id="GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABDDDCB">
                        <p class="titleinfigure">Figure 13-1 Comparison with max_num_buckets=3 and Differences in Each Bucket of Each Scan</p><img width="589" src="img/strep063.gif" alt="Description of Figure 13-1 follows" title="Description of Figure 13-1 follows" longdesc="img_text/strep063.html"><br><a href="img_text/strep063.html">Description of "Figure 13-1 Comparison with max_num_buckets=3 and Differences in Each Bucket of Each Scan"</a></div>
                     <!-- class="figure" -->
                     <p><a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABDDDCB">Figure 13-1</a> shows a line that represents the rows being compared in the shared database object. This figure illustrates how scans and buckets are used to identify differences when each bucket used by each scan has differences.
                     </p>
                     <p>With the <code class="codeph">max_num_buckets</code> parameter set to <code class="codeph">3</code>, the comparison is executed in the following steps:
                     </p>
                     <ol>
                        <li>
                           <p>The root scan compares all of the rows in the current comparison. The root scan uses three buckets, and differences are found in each bucket.</p>
                        </li>
                        <li id="GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABHHFAG">
                           <p>A separate scan is performed on the rows in each bucket that was used by the root scan in the previous step. The current step uses three scans, and each scan uses three buckets. Therefore, this step uses a total of nine buckets. Differences are found in each bucket. In <a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABDDDCB">Figure 13-1</a>, arrows show how each bucket from the root scan is split into three buckets for each of the scans in the current step.
                           </p>
                        </li>
                        <li id="GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABCGDDE">
                           <p>A separate scan is performed on the rows in each bucket used by the scans in Step&nbsp;<a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABHHFAG">2</a>. This step uses nine scans, and each scan uses three buckets. Therefore, this step uses a total of 27 buckets. In <a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABDDDCB">Figure 13-1</a>, arrows show how each bucket from Step <a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABHHFAG">2</a> is split into three buckets for each of the scans in the current step.
                           </p>
                        </li>
                     </ol>
                     <p>After Step <a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABCGDDE">3</a>, the comparison results are recorded in the appropriate data dictionary views.
                     </p>
                     <p><a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABGEGCI">Figure 13-2</a> shows the second scenario.
                     </p>
                     <div class="figure" id="GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABGEGCI">
                        <p class="titleinfigure">Figure 13-2 Comparison with max_num_buckets=3 and Differences in One Bucket of Each Scan</p><img width="590" src="img/strep064.gif" alt="Description of Figure 13-2 follows" title="Description of Figure 13-2 follows" longdesc="img_text/strep064.html"><br><a href="img_text/strep064.html">Description of "Figure 13-2 Comparison with max_num_buckets=3 and Differences in One Bucket of Each Scan"</a></div>
                     <!-- class="figure" -->
                     <p><a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABGEGCI">Figure 13-2</a> shows a line that represents the rows being compared in the shared database object. This figure illustrates how scans and buckets are used to identify differences when only one bucket used by each scan has differences.
                     </p>
                     <p>With the <code class="codeph">max_num_buckets</code> parameter set to <code class="codeph">3</code>, the comparison is executed in the following steps:
                     </p>
                     <ol>
                        <li>
                           <p>The root scan compares all of the rows in the current comparison. The root scan uses three buckets, but differences are found in only one bucket.</p>
                        </li>
                        <li id="GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABGHBID">
                           <p>A separate scan is performed on the rows in the one bucket that had differences. This step uses one scan, and the scan uses three buckets. Differences are found in only one bucket. In <a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABGEGCI">Figure 13-2</a>, arrows show how the bucket with differences from the root scan is split into three buckets for the scan in the current step.
                           </p>
                        </li>
                        <li id="GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABEEAHC">
                           <p>A separate scan is performed on the rows in the one bucket that had differences in Step <a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABGHBID">2</a>. This step uses one scan, and the scan uses three buckets. In <a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABGEGCI">Figure 13-2</a>, arrows show how the bucket with differences in Step <a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABGHBID">2</a> is split into three buckets for the scan in the current step.
                           </p>
                        </li>
                     </ol>
                     <p>After Step <a href="comparing-and-converging-data.html#GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__BABEEAHC">3</a>, the comparison results are recorded in the appropriate data dictionary views.
                     </p>
                     <div class="infoboxnote" id="GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__GUID-D18FC487-DB88-4A14-892A-EE6AE31567E5">
                        <p class="notep1">Note:</p>
                        <p>This section describes scenarios in which the <code class="codeph">max_num_buckets</code> parameter is set to <code class="codeph">3</code> in the <code class="codeph">CREATE_COMPARISON</code> procedure. This setting was chosen to illustrate how scans and buckets identify differences. Typically, the <code class="codeph">max_num_buckets</code> parameter is set to a higher value. The default for this parameter is <code class="codeph">1000</code>. You can adjust the parameter setting to achieve the best performance.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-20487EA3-B7F1-4273-A997-9529A504A2A0__GUID-B883EAFC-B4BA-4203-9527-C2FD97C5E586">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39">Comparing a Shared Database Object at Two Databases</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-4C7E9DCA-893D-4B83-BC4C-949AEE797B8D">Viewing Information About Comparisons and Comparison Results</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="STREP455"></a><div class="props_rev_3"><a id="GUID-BBE7C7D0-F997-44D9-9822-221FB4046463" name="GUID-BBE7C7D0-F997-44D9-9822-221FB4046463"></a><h3 id="STREP-GUID-BBE7C7D0-F997-44D9-9822-221FB4046463" class="sect3"><span class="enumeration_section">13.2 </span>Other Documentation About the DBMS_COMPARISON Package
               </h3>
               <div>
                  <p>The chapter about the <code class="codeph">DBMS_COMPARISON</code> package in the <a href="../arpls/DBMS_COMPARISON.html#ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> contains advanced conceptual information about the package and detailed information about the subprograms in the package, including:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Requirements for using the package</p>
                     </li>
                     <li>
                        <p>Descriptions of constants used in the package</p>
                     </li>
                     <li>
                        <p>Descriptions of each subprogram in the package and its parameters</p>
                     </li>
                  </ul>
               </div>
            </div><a id="STREP655"></a><div class="props_rev_3"><a id="GUID-C451D65E-659E-4C23-8B24-7C0EB546E543" name="GUID-C451D65E-659E-4C23-8B24-7C0EB546E543"></a><h3 id="STREP-GUID-C451D65E-659E-4C23-8B24-7C0EB546E543" class="sect3"><span class="enumeration_section">13.3 </span>Quick Start: A Simple Compare and Converge Scenario
               </h3>
               <div>
                  <p>This section describes a simple scenario that compares and converges the <code class="codeph">hr.departments</code> table. This section is designed to get you started with using the <code class="codeph">DBMS_COMPARISON</code> package by illustrating how to compare and converge a single table.
                  </p>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9">Tutorial: Preparing to Compare and Converge Data</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C">Tutorial: Comparing Data in Two Different Databases</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-865155AB-53FC-4556-A4E2-B1A4F6536EA1">Tutorial: Converging Divergent Data</a></p>
                     </li>
                  </ul>
               </div><a id="STREP656"></a><div class="props_rev_3"><a id="GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9" name="GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9"></a><h4 id="STREP-GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9" class="sect4"><span class="enumeration_section">13.3.1 </span>Tutorial: Preparing to Compare and Converge Data
                  </h4>
                  <div>
                     <div class="section">
                        <p>Suppose you share the <code class="codeph">hr.departments</code> table in two databases. You want to compare this table at these databases to see if their data is consistent. If the tables have diverged at the two databases, then you want to converge them to make them consistent.
                        </p>
                        <p>Meet the following prerequisites to complete this tutorial:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Configure network connectivity so that the two databases can communicate with each other. See <a href="../admqs/configuring-the-network-environment.html#ADMQS004"><span class="italic">Oracle Database 2 Day DBA</span></a> for information about configuring network connectivity between databases.
                              </p>
                           </li>
                           <li>
                              <p>Ensure that the <code class="codeph">hr</code> sample schema is installed on both databases.
                              </p>
                           </li>
                        </ul>
                        <p>In this example, the global names of the databases are <code class="codeph">ii1.example.com</code> and <code class="codeph">ii2.example.com</code>, but you can substitute any two databases in your environment that meet the prerequisites.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To prepare for comparison and convergence of the hr.departments table at the ii1.example.com and ii2.example.com databases:</p>
                        <ol>
                           <li id="GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9__CEGGDAAD">
                              <p>For the purposes of this example, make the <code class="codeph">hr.departments</code> table diverge at the two databases:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>On a command line, open SQL*Plus and connect to the <code class="codeph">ii2.example.com</code> database as <code class="codeph">hr</code> user.
                                    </p>
                                    <p>See <a href="../admqs/getting-started-with-database-administration.html#ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about starting SQL*Plus.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Delete the department in the <code class="codeph">hr.departments</code> table with the <code class="codeph">department_id</code> equal to&nbsp;<code class="codeph">270</code>:
                                    </p><pre class="oac_no_warn" dir="ltr">DELETE FROM hr.departments WHERE department_id=270;
COMMIT;
</pre></li>
                                 <li>
                                    <p>Modify the data in a row in the <code class="codeph">hr.departments</code> table:
                                    </p><pre class="oac_no_warn" dir="ltr">UPDATE hr.departments SET manager_id=114 WHERE department_id=10;
COMMIT;
</pre></li>
                                 <li>
                                    <p>Insert a row into the <code class="codeph">hr.departments</code> table:
                                    </p><pre class="oac_no_warn" dir="ltr">INSERT INTO hr.departments VALUES(280, 'Bean Counters', 108, 2700);
COMMIT;
</pre></li>
                                 <li>
                                    <p>Exit SQL*Plus:</p><pre class="oac_no_warn" dir="ltr">EXIT;
</pre></li>
                              </ol>
                              <div class="infoboxnote" id="GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9__GUID-3DDAE3B2-8CEC-4A1E-A0D6-BEDCF61DF0ED">
                                 <p class="notep1">Note:</p>
                                 <p>Usually, Step <a href="comparing-and-converging-data.html#GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9__CEGGDAAD">1</a> is not required. It is included in this example to ensure that the <code class="codeph">hr.departments</code> table diverges at the two databases.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>Create a database link from the <code class="codeph">ii1.example.com</code> database to the <code class="codeph">ii2.example.com</code> database.
                              </p>
                              <p>The database link should connect from an administrative user in <code class="codeph">ii1.example.com</code> to an administrative user schema in <code class="codeph">ii2.example.com</code>. The administrative user at both databases should have the necessary privileges to access and modify the <code class="codeph">hr.departments</code> table and the necessary privileges to run subprograms in the <code class="codeph">DBMS_COMPARISON</code> package. If you are not sure which user has these privileges, then use <code class="codeph">SYSTEM</code> user. Also, both the name and the service name of the database link must be <code class="codeph">ii2.example.com</code>. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-7867112D-DAC3-4693-811E-B1B1052C7847">Configuring Network Connectivity and Database Links</a>"</span> for more information.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9__GUID-B1282FF8-9A13-474C-9D1D-53D90EDAF671">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about the <code class="codeph">DBMS_COMPARISON</code> package
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP657"></a><div class="props_rev_3"><a id="GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C" name="GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C"></a><h4 id="STREP-GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C" class="sect4"><span class="enumeration_section">13.3.2 </span>Tutorial: Comparing Data in Two Different Databases
                  </h4>
                  <div>
                     <div class="section">
                        <p>This example continues the scenario described in <span class="q">"<a href="comparing-and-converging-data.html#GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9">Tutorial: Preparing to Compare and Converge Data</a>"</span>. Complete the steps in that topic before continuing.
                        </p>
                        <p>You can use the <code class="codeph">CREATE_COMPARISON</code> procedure in the <code class="codeph">DBMS_COMPARISON</code> package to define a comparison of a shared database object at two different databases. Once the comparison is defined, you can use the <code class="codeph">COMPARE</code> function in this package to compare the database object specified in the comparison at the current point in time. You can run the <code class="codeph">COMPARE</code> function multiple times for a specific comparison. Each time you run the function, it results one or more scans of the database objects, and each scan has its own scan ID.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To compare the entire hr.departments table at the ii1.example.com and ii2.example.com databases:</p>
                        <ol>
                           <li>
                              <p>On a command line, open SQL*Plus and connect to the <code class="codeph">ii1.example.com</code> database as the administrative user who owns the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9">Tutorial: Preparing to Compare and Converge Data</a>"</span>. For example, if <code class="codeph">SYSTEM</code> user owns the database link, then connect as <code class="codeph">SYSTEM</code> user:
                              </p><pre class="oac_no_warn" dir="ltr">sqlplus system@ii1.example.com
Enter password: <span class="italic">password</span>
</pre><p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about starting SQL*Plus.
                              </p>
                           </li>
                           <li id="GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C__CEGIDDJJ">
                              <p>Run the <code class="codeph">CREATE_COMPARISON</code> procedure to create the comparison for the <code class="codeph">hr.departments</code> table:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_COMPARISON.CREATE_COMPARISON(
    comparison_name =&gt; 'compare_departments',
    schema_name     =&gt; 'hr',
    object_name     =&gt; 'departments',
    dblink_name     =&gt; 'ii2.example.com');
END;
/
</pre><p>Note that the name of the new comparison is <code class="codeph">compare_departments</code>. This comparison is owned by the user who runs the <code class="codeph">CREATE_COMPARISON</code> procedure.
                              </p>
                           </li>
                           <li id="GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C__CEGEFEFB">
                              <p>Run the <code class="codeph">COMPARE</code> function to compare the <code class="codeph">hr.departments</code> table at the two databases:
                              </p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  consistent   BOOLEAN;
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  consistent := DBMS_COMPARISON.COMPARE(
                  comparison_name =&gt; 'compare_departments',
                  scan_info       =&gt; scan_info,
                  perform_row_dif =&gt; TRUE);
  DBMS_OUTPUT.PUT_LINE('Scan ID: '||scan_info.scan_id);
  IF consistent=TRUE THEN
    DBMS_OUTPUT.PUT_LINE('No differences were found.');
  ELSE
    DBMS_OUTPUT.PUT_LINE('Differences were found.');
  END IF;
END;
/

<span class="bold">Scan ID: 1</span>
<span class="bold">Differences were found.</span>
 
<span class="bold">PL/SQL procedure successfully completed.</span>
</pre><p>Specify the name of the comparison created in Step <a href="comparing-and-converging-data.html#GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C__CEGIDDJJ">2</a> for the <code class="codeph">comparison_name</code> parameter.
                              </p>
                              <p>The function prints the scan ID for the comparison. The scan ID is important when you are querying data dictionary views for information about the comparison and when you are converging the database objects.</p>
                              <p>The function also prints whether differences were found in the table at the two databases:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If the function prints <code class="codeph">'No differences were found'</code>, then the table is consistent at the two databases.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If the function prints <code class="codeph">'Differences were found'</code>, then the table has diverged at the two databases.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li id="GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C__CEGFHEEA">
                              <p>Make a note of the scan ID returned by the function in the previous step. In this example, assume the scan ID is <code class="codeph">1</code>.
                              </p>
                           </li>
                           <li>
                              <p><a id="d58061e1816" class="indexterm-anchor"></a><a id="d58061e1818" class="indexterm-anchor"></a>If differences were found in Step <a href="comparing-and-converging-data.html#GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C__CEGEFEFB">3</a>, then run the following query to show the number of differences found:
                              </p><pre class="oac_no_warn" dir="ltr">COLUMN OWNER HEADING 'Comparison Owner' FORMAT A16
COLUMN COMPARISON_NAME HEADING 'Comparison Name' FORMAT A20
COLUMN SCHEMA_NAME HEADING 'Schema Name' FORMAT A11
COLUMN OBJECT_NAME HEADING 'Object Name' FORMAT A11
COLUMN CURRENT_DIF_COUNT HEADING 'Differences' FORMAT 9999999
 
SELECT c.OWNER, 
       c.COMPARISON_NAME, 
       c.SCHEMA_NAME, 
       c.OBJECT_NAME, 
       s.CURRENT_DIF_COUNT 
  FROM DBA_COMPARISON c, DBA_COMPARISON_SCAN s
  WHERE c.COMPARISON_NAME = s.COMPARISON_NAME AND
        c.OWNER           = s.OWNER AND
        s.SCAN_ID         = 1;
</pre><p>Specify the scan ID you recorded in Step <a href="comparing-and-converging-data.html#GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C__CEGFHEEA">4</a> in the <code class="codeph">WHERE</code> clause of the query.
                              </p>
                              <p>The output will be similar to the following:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">Comparison Owner Comparison Name      Schema Name Object Name Differences</span>
<span class="bold">---------------- -------------------- ----------- ----------- -----------</span>
<span class="bold">SYSTEM           COMPARE_DEPARTMENTS  HR          DEPARTMENTS           3</span>
</pre></li>
                           <li>
                              <p><a id="d58061e1848" class="indexterm-anchor"></a><a id="d58061e1850" class="indexterm-anchor"></a><a id="d58061e1852" class="indexterm-anchor"></a>To see which rows were different in the database object being compared, run the following query:
                              </p><pre class="oac_no_warn" dir="ltr">COLUMN COLUMN_NAME HEADING 'Index Column' FORMAT A15
COLUMN INDEX_VALUE HEADING 'Index Value' FORMAT A15
COLUMN LOCAL_ROWID HEADING 'Local Row Exists?' FORMAT A20
COLUMN REMOTE_ROWID HEADING 'Remote Row Exists?' FORMAT A20
 
SELECT c.COLUMN_NAME,
       r.INDEX_VALUE, 
       DECODE(r.LOCAL_ROWID,
                NULL, 'No',
                      'Yes') LOCAL_ROWID,
       DECODE(r.REMOTE_ROWID,
                NULL, 'No',
                      'Yes') REMOTE_ROWID
  FROM DBA_COMPARISON_COLUMNS c,
       DBA_COMPARISON_ROW_DIF r,
       DBA_COMPARISON_SCAN s
  WHERE c.COMPARISON_NAME = 'COMPARE_DEPARTMENTS' AND
        r.SCAN_ID         = s.SCAN_ID AND
        s.PARENT_SCAN_ID  = 1 AND
        r.STATUS          = 'DIF' AND
        c.INDEX_COLUMN    = 'Y' AND
        c.COMPARISON_NAME = r.COMPARISON_NAME AND
        c.OWNER           = r.OWNER
  ORDER BY r.INDEX_VALUE;
</pre><p>In the <code class="codeph">WHERE</code> clause, specify the name of the comparison and the scan ID for the comparison. In this example, the name of the comparison is <code class="codeph">compare_departments</code> and the scan ID is <code class="codeph">1</code>.
                              </p>
                              <p>The output will be similar to the following:</p><pre class="oac_no_warn" dir="ltr"><span class="bold">Index Column    Index Value     Local Row Exists?    Remote Row Exists?</span>
<span class="bold">--------------- --------------- -------------------- --------------------</span>
<span class="bold">DEPARTMENT_ID   10              Yes                  Yes</span>
<span class="bold">DEPARTMENT_ID   270             Yes                  No</span>
<span class="bold">DEPARTMENT_ID   280             No                   Yes</span>
</pre><p>This output shows the index column for the table being compared and the index value for each row that is different in the shared database object. In this example, the index column is the primary key column for the <code class="codeph">hr.departments</code> table (<code class="codeph">department_id</code>). The output also shows the type of difference for each row:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If <code class="codeph">Local</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> and <code class="codeph">Remote</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> are both <code class="codeph">Yes</code> for a row, then the row exists in both instances of the database object, but the data in the row is different.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If <code class="codeph">Local</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> is <code class="codeph">Yes</code> and <code class="codeph">Remote</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> is <code class="codeph">No</code> for a row, then the row exists in the local database object but not in the remote database object.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If <code class="codeph">Local</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> is <code class="codeph">No</code> and <code class="codeph">Remote</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> is <code class="codeph">Yes</code> for a row, then the row exists in the remote database object but not in the local database object.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C__GUID-4A39F36B-B0F9-48DA-808E-50F32244E675">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about the <code class="codeph">DBMS_COMPARISON</code> package
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP658"></a><div class="props_rev_3"><a id="GUID-865155AB-53FC-4556-A4E2-B1A4F6536EA1" name="GUID-865155AB-53FC-4556-A4E2-B1A4F6536EA1"></a><h4 id="STREP-GUID-865155AB-53FC-4556-A4E2-B1A4F6536EA1" class="sect4"><span class="enumeration_section">13.3.3 </span>Tutorial: Converging Divergent Data
                  </h4>
                  <div>
                     <div class="section">
                        <p>This example continues the scenario described in <span class="q">"<a href="comparing-and-converging-data.html#GUID-5102303E-2A17-4F3D-9CC2-064AB71DE56C">Tutorial: Comparing Data in Two Different Databases</a>"</span>. Complete the steps in that topic before continuing.
                        </p>
                        <p>When a shared database object has diverged at two different databases, you can use the <code class="codeph">CONVERGE</code> procedure in the <code class="codeph">DBMS_COMPARISON</code> package to converge the two instances of the database object. After the <code class="codeph">CONVERGE</code> procedure runs successfully, the shared database object is consistent at the two databases. To run the <code class="codeph">CONVERGE</code> procedure, you must specify the following information:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The name of an existing comparison created using the <code class="codeph">CREATE_COMPARISON</code> procedure in the <code class="codeph">DBMS_COMPARISON</code> package
                              </p>
                           </li>
                           <li>
                              <p>The scan ID of the comparison that you want to converge</p>
                           </li>
                        </ul>
                        <p>The scan ID contains information about the differences that will be converged. In this example, the name of the comparison is <code class="codeph">compare_departments</code> and the scan ID is&nbsp;<code class="codeph">1</code>.
                        </p>
                        <p>Also, when you run the <code class="codeph">CONVERGE</code> procedure, you must specify which database "wins" when the shared database object is converged. If you specify that the local database wins, then the data in the database object at the local database replaces the data in the database object at the remote database when the data is different. If you specify that the remote database wins, then the data in the database object at the remote database replaces the data in the database object at the local database when the data is different. In this example, the local database <code class="codeph">ii1.example.com</code> wins.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To converge divergent data in the hr.departments table at the ii1.example.com and ii2.example.com databases:</p>
                        <ol>
                           <li>
                              <p>On a command line, open SQL*Plus and connect to the <code class="codeph">ii1.example.com</code> database as the administrative user who owns the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-65203E1B-8DAA-4DAA-A849-E4CAD05C2CD9">Tutorial: Preparing to Compare and Converge Data</a>"</span>. For example, if the <code class="codeph">SYSTEM</code> user owns the database link, then connect as the <code class="codeph">SYSTEM</code> user:
                              </p><pre class="oac_no_warn" dir="ltr">sqlplus system@ii1.example.com
Enter password: <span class="italic">password</span>
</pre><p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about starting SQL*Plus.
                              </p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">CONVERGE</code> procedure to converge the <code class="codeph">hr.departments</code> table at the two databases:
                              </p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  DBMS_COMPARISON.CONVERGE(
    comparison_name  =&gt; 'compare_departments',
    scan_id          =&gt; 1,
    scan_info        =&gt; scan_info,
    converge_options =&gt; DBMS_COMPARISON.CMP_CONVERGE_LOCAL_WINS);
  DBMS_OUTPUT.PUT_LINE('Local Rows Merged: '||scan_info.loc_rows_merged);
  DBMS_OUTPUT.PUT_LINE('Remote Rows Merged: '||scan_info.rmt_rows_merged);
  DBMS_OUTPUT.PUT_LINE('Local Rows Deleted: '||scan_info.loc_rows_deleted);
  DBMS_OUTPUT.PUT_LINE('Remote Rows Deleted: '||scan_info.rmt_rows_deleted);
END;
/

<span class="bold">Local Rows Merged: 0</span>
<span class="bold">Remote Rows Merged: 2</span>
<span class="bold">Local Rows Deleted: 0</span>
<span class="bold">Remote Rows Deleted: 1</span>

<span class="bold">PL/SQL procedure successfully completed.</span>
</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The <code class="codeph">CONVERGE</code> procedure synchronizes the portion of the database object compared by the specified scan and returns information about the changes it made. Some scans might compare a subset of the database object. In this example, the specified scan compared the entire table. So, the entire table is synchronized, assuming no new differences appeared after the comparison scan completed.
                        </p>
                        <p>The local table wins in this example because the <code class="codeph">converge_options</code> parameter is set to <code class="codeph">DBMS_COMPARISON.CMP_CONVERGE_LOCAL_WINS</code> in the procedure. That is, for the rows that are different in the two databases, the rows at the local database replace the corresponding rows at the remote database. If some rows exist at the remote database but not at the local database, then the extra rows at the remote database are deleted. If instead you want the remote database to win, then set the <code class="codeph">converge_options</code> parameter to <code class="codeph">DBMS_COMPARISON.CMP_CONVERGE_REMOTE_WINS</code> in the procedure.
                        </p>
                        <p><a id="d58061e2231" class="indexterm-anchor"></a><a id="d58061e2235" class="indexterm-anchor"></a>In addition, if you run the <code class="codeph">CONVERGE</code> procedure on a shared database object that is part of an Oracle Streams replication environment, then you might not want the changes made by the procedure to be replicated to other databases. In this case, you can set the following parameters in the <code class="codeph">CONVERGE</code> procedure to values that will prevent the changes from being replicated:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">local_converge_tag</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">remote_converge_tag</code></p>
                           </li>
                        </ul>
                        <p>When one of these parameters is set to a non-<code class="codeph">NULL</code> value, a tag is set in the session that makes the changes during convergence. The <code class="codeph">local_converge_tag</code> parameter sets the tag in the session at the local database, while the <code class="codeph">remote_converge_tag</code> parameter sets the tag in the session at the remote database. If you do not want the changes made by the <code class="codeph">CONVERGE</code> procedure to be replicated, then set these parameters to a value that will prevent Oracle Streams capture processes and synchronous captures from capturing the changes.
                        </p>
                        <div class="infoboxnotealso" id="GUID-865155AB-53FC-4556-A4E2-B1A4F6536EA1__GUID-18C108E4-D001-4163-9F50-8E01D0767CC4">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about the <code class="codeph">DBMS_COMPARISON</code> package
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="STREP456"></a><div class="props_rev_3"><a id="GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1" name="GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1"></a><h3 id="STREP-GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1" class="sect3"><span class="enumeration_section">13.4 </span>Preparing To Compare and Converge a Shared Database Object
               </h3>
               <div>
                  <div class="section">
                     <p>Meet the following prerequisites before comparing and converging a shared database object at two databases:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Configure network connectivity so that the two databases can communicate with each other. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=NETAG"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for information about configuring network connectivity between databases.
                           </p>
                        </li>
                        <li>
                           <p>Identify or create a database user who will create, run, and manage comparisons. The database user must meet the privilege requirements described in the documentation for the <code class="codeph">DBMS_COMPARISON</code> package in the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.
                           </p>
                           <p>After you identify or create a user with the required privileges, create a database link from the database that will run the subprograms in the <code class="codeph">DBMS_COMPARISON</code> package to the other database that shares the database object. The identified user should own the database link, and the link should connect to a user with the required privileges on the remote database.
                           </p>
                           <p>For example, the following example creates a database link owned by a user named <code class="codeph">admin</code> at the <code class="codeph">comp1.example.com</code> database that connects to the <code class="codeph">admin</code> user at the remote database <code class="codeph">comp2.example.com</code>:
                           </p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, connect to the local database as <code class="codeph">admin</code> user.
                                 </p>
                                 <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                                 </p>
                              </li>
                              <li>
                                 <p>Create the database link:</p><pre class="oac_no_warn" dir="ltr">CREATE DATABASE LINK comp2.example.com CONNECT TO admin
   IDENTIFIED BY <span class="italic">password</span> USING 'comp2.example.com';</pre></li>
                           </ol>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="STREP457"></a><div class="props_rev_3"><a id="GUID-E169666D-4804-46BC-ADC9-0FE981C0A93E" name="GUID-E169666D-4804-46BC-ADC9-0FE981C0A93E"></a><h3 id="STREP-GUID-E169666D-4804-46BC-ADC9-0FE981C0A93E" class="sect3"><span class="enumeration_section">13.5 </span>Diverging a Database Object at Two Databases to Complete Examples
               </h3>
               <div>
                  <div class="section">
                     <p>The following sections contain examples that compare and converge a shared database object at two databases:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39">Comparing a Shared Database Object at Two Databases</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span></p>
                        </li>
                     </ul>
                     <p>Most of these examples compare and converge data in the <code class="codeph">oe.orders</code> table. This table is part of the <code class="codeph">oe</code> sample schema. In these examples, the global names of the databases are <code class="codeph">comp1.example.com</code> and <code class="codeph">comp2.example.com</code>, but you can substitute any two databases in your environment that meet the prerequisites described in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.
                     </p>
                     <p>For the purposes of the examples, make the <code class="codeph">oe.orders</code> table diverge at two databases by completing the following steps:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">comp2.example.com</code> database as <code class="codeph">oe</code> user.</span><div>
                           <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Delete the orders in the <code class="codeph">oe.orders</code> table with a <code class="codeph">customer_id</code> equal to <code class="codeph">147</code>:</span><div><pre class="oac_no_warn" dir="ltr">DELETE FROM oe.orders WHERE customer_id=147;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Modify the data in a row in the <code class="codeph">oe.orders</code> table:</span><div><pre class="oac_no_warn" dir="ltr">UPDATE oe.orders SET sales_rep_id=163 WHERE order_id=2440;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Insert a row into the <code class="codeph">oe.orders</code> table:</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO oe.orders VALUES(3000, TIMESTAMP '2006-01-01 2:00:00', 'direct', 107, 3, 16285.21, 156, NULL);
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Commit your changes and exit SQL*Plus:</span><div><pre class="oac_no_warn" dir="ltr">COMMIT;
EXIT
</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-E169666D-4804-46BC-ADC9-0FE981C0A93E__GUID-74DCE2B0-DA08-44D8-9468-F4F5820CEE56">
                        <p class="notep1">Note:</p>
                        <p>Usually, these steps are not required. They are included to ensure that the <code class="codeph">oe.orders</code> table diverges at the two databases.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="STREP458"></a><div class="props_rev_3"><a id="GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39" name="GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39"></a><h3 id="STREP-GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39" class="sect3"><span class="enumeration_section">13.6 </span>Comparing a Shared Database Object at Two Databases
               </h3>
               <div>
                  <p>The examples in this section use the <code class="codeph">DBMS_COMPARISON</code> package to compare the <code class="codeph">oe.orders</code> table at the <code class="codeph">comp1.example.com</code> and <code class="codeph">comp2.example.com</code> databases. The examples use the package to create different types of comparisons and compare the tables with the comparisons.
                  </p>
                  <p>This section contains the following examples:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-C3CBB4A6-97FC-4872-BE60-D33C4DA97485">Comparing a Subset of Columns in a Shared Database Object</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-37B8F51E-177C-49A7-AE8F-F63AF9CFD2C4">Comparing a Shared Database Object without Identifying Row Differences</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-A260F13A-DD58-4B3D-A3E1-285FBCBDB8E2">Comparing a Random Portion of a Shared Database Object</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A">Comparing a Shared Database Object Cyclically</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-66714C82-06B6-4920-82F4-98CF66285825">Comparing a Custom Portion of a Shared Database Object</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-1FBBB5DF-39A6-4449-94FC-2DC234432C62">Comparing a Shared Database Object That Contains CLOB or BLOB Columns</a></p>
                     </li>
                  </ul>
               </div><a id="STREP459"></a><div class="props_rev_3"><a id="GUID-C3CBB4A6-97FC-4872-BE60-D33C4DA97485" name="GUID-C3CBB4A6-97FC-4872-BE60-D33C4DA97485"></a><h4 id="STREP-GUID-C3CBB4A6-97FC-4872-BE60-D33C4DA97485" class="sect4"><span class="enumeration_section">13.6.1 </span>Comparing a Subset of Columns in a Shared Database Object
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">column_list</code> parameter in the <code class="codeph">CREATE_COMPARISON</code> procedure enables you to compare a subset of the columns in a database object. The following are reasons to compare a subset of columns:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A database object contains extra columns that do not exist in the database object to which it is being compared. In this case, the <code class="codeph">column_list</code> parameter must only contain the columns that exist in both database objects.
                              </p>
                           </li>
                           <li>
                              <p>You want to focus a comparison on a specific set of columns. For example, if a table contains hundreds of columns, then you might want to list specific columns in the <code class="codeph">column_list</code> parameter to make the comparison more efficient.
                              </p>
                           </li>
                           <li>
                              <p>Differences are expected in some columns. In this case, exclude the columns in which differences are expected from the <code class="codeph">column_list</code> parameter.
                              </p>
                           </li>
                        </ul>
                        <p>The columns in the column list must meet the following requirements:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The column list must meet the index column requirements for the <code class="codeph">DBMS_COMPARISON</code> package. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about index column requirements.
                              </p>
                           </li>
                           <li>
                              <p>If you plan to use the <code class="codeph">CONVERGE</code> procedure to make changes to a database object based on comparison results, then you must include in the column list any column in this database object that has a <code class="codeph">NOT</code> <code class="codeph">NULL</code> constraint but no default value.
                              </p>
                           </li>
                        </ul>
                        <p>This example compares the <code class="codeph">order_id</code>, <code class="codeph">order_date</code>, and <code class="codeph">customer_id</code> columns in the <code class="codeph">oe.orders</code> table at the <code class="codeph">comp1.example.com</code> and <code class="codeph">comp2.example.com</code> databases:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Complete the tasks described in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span> and <span class="q">"<a href="comparing-and-converging-data.html#GUID-E169666D-4804-46BC-ADC9-0FE981C0A93E">Diverging a Database Object at Two Databases to Complete Examples</a>"</span>.</span></li>
                        <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the administrative user who owns the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE_COMPARISON</code> procedure to create the comparison:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_COMPARISON.CREATE_COMPARISON(
    comparison_name =&gt; 'compare_subset_columns',
    schema_name     =&gt; 'oe',
    object_name     =&gt; 'orders',
    dblink_name     =&gt; 'comp2.example.com',
    column_list     =&gt; 'order_id,order_date,customer_id');
END;
/
</pre><p>Note that the name of the new comparison is <code class="codeph">compare_subset_columns</code>. This comparison is owned by the user who runs the <code class="codeph">CREATE_COMPARISON</code> procedure.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">COMPARE</code> function to compare the <code class="codeph">oe.orders</code> table at the two databases:</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  consistent   BOOLEAN;
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  consistent := DBMS_COMPARISON.COMPARE(
                  comparison_name =&gt; 'compare_subset_columns',
                  scan_info       =&gt; scan_info,
                  perform_row_dif =&gt; TRUE);
  DBMS_OUTPUT.PUT_LINE('Scan ID: '||scan_info.scan_id);
  IF consistent=TRUE THEN
    DBMS_OUTPUT.PUT_LINE('No differences were found.');
  ELSE
    DBMS_OUTPUT.PUT_LINE('Differences were found.');
  END IF;
END;
/
</pre><p>Notice that the <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">TRUE</code> in the <code class="codeph">COMPARE</code> function. This setting instructs the <code class="codeph">COMPARE</code> function to identify each individual row difference in the tables. When the <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">FALSE</code>, the <code class="codeph">COMPARE</code> function records whether there are differences in the tables, but does not record each individual row difference.
                              </p>
                              <p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Scan ID: 1
Differences were found.

PL/SQL procedure successfully completed.
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-C3CBB4A6-97FC-4872-BE60-D33C4DA97485__GUID-3565710F-A50D-41B3-AF57-469DD2E54246">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-AF1D9F6A-4A13-48CA-BE35-9BAA73E22A20">Viewing Detailed Information About the Row Differences Found in a Scan</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span> to converge the differences found in the comparison results
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945">Rechecking the Comparison Results for a Comparison</a>"</span> to recheck the comparison results
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP460"></a><div class="props_rev_3"><a id="GUID-37B8F51E-177C-49A7-AE8F-F63AF9CFD2C4" name="GUID-37B8F51E-177C-49A7-AE8F-F63AF9CFD2C4"></a><h4 id="STREP-GUID-37B8F51E-177C-49A7-AE8F-F63AF9CFD2C4" class="sect4"><span class="enumeration_section">13.6.2 </span>Comparing a Shared Database Object without Identifying Row Differences
                  </h4>
                  <div>
                     <div class="section">
                        <p>When you run the <code class="codeph">COMPARE</code> procedure for an existing comparison, the <code class="codeph">perform_row_dif</code> parameter controls whether the <code class="codeph">COMPARE</code> procedure identifies each individual row difference in the database objects:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When the <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">TRUE</code>, the <code class="codeph">COMPARE</code> procedure records whether there are differences in the database objects, and it records each individual row difference. Set this parameter to <code class="codeph">TRUE</code> when you must identify each difference in the database objects.
                              </p>
                           </li>
                           <li>
                              <p>When the <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">FALSE</code>, the <code class="codeph">COMPARE</code> procedure records whether there are differences in the database objects, but does not record each individual row difference. Set this parameter to <code class="codeph">FALSE</code> when you want to know if there are differences in the database objects, but you do not need to identify each individual difference. Setting this parameter to <code class="codeph">FALSE</code> is the most efficient way to perform a comparison.
                              </p>
                           </li>
                        </ul>
                        <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">perform_row_dif</code> parameter in the <code class="codeph">COMPARE</code> function.
                        </p>
                        <p>This example compares the entire <code class="codeph">oe.orders</code> table at the <code class="codeph">comp1.example.com</code> and <code class="codeph">comp2.example.com</code> databases without identifying individual row differences:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Complete the tasks described in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span> and <span class="q">"<a href="comparing-and-converging-data.html#GUID-E169666D-4804-46BC-ADC9-0FE981C0A93E">Diverging a Database Object at Two Databases to Complete Examples</a>"</span>.</span></li>
                        <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the administrative user who owns the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE_COMPARISON</code> procedure to create the comparison:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_COMPARISON.CREATE_COMPARISON(
    comparison_name =&gt; 'compare_orders',
    schema_name     =&gt; 'oe',
    object_name     =&gt; 'orders',
    dblink_name     =&gt; 'comp2.example.com');
END;
/
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">COMPARE</code> function to compare the <code class="codeph">oe.orders</code> table at the two databases:</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  consistent   BOOLEAN;
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  consistent := DBMS_COMPARISON.COMPARE(
                  comparison_name =&gt; 'compare_orders',
                  scan_info       =&gt; scan_info,
                  perform_row_dif =&gt; FALSE);
  DBMS_OUTPUT.PUT_LINE('Scan ID: '||scan_info.scan_id);
  IF consistent=TRUE THEN
    DBMS_OUTPUT.PUT_LINE('No differences were found.');
  ELSE
    DBMS_OUTPUT.PUT_LINE('Differences were found.');
  END IF;
END;
/
</pre><p>Notice that the <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">FALSE</code> in the <code class="codeph">COMPARE</code> function.
                              </p>
                              <p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Scan ID: 4
Differences were found.

PL/SQL procedure successfully completed.
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-37B8F51E-177C-49A7-AE8F-F63AF9CFD2C4__GUID-053CA60C-7453-4732-AEFA-5164847C3F17">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-AF1D9F6A-4A13-48CA-BE35-9BAA73E22A20">Viewing Detailed Information About the Row Differences Found in a Scan</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span> to converge the differences found in the comparison results
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945">Rechecking the Comparison Results for a Comparison</a>"</span> to recheck the comparison results
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP461"></a><div class="props_rev_3"><a id="GUID-A260F13A-DD58-4B3D-A3E1-285FBCBDB8E2" name="GUID-A260F13A-DD58-4B3D-A3E1-285FBCBDB8E2"></a><h4 id="STREP-GUID-A260F13A-DD58-4B3D-A3E1-285FBCBDB8E2" class="sect4"><span class="enumeration_section">13.6.3 </span>Comparing a Random Portion of a Shared Database Object
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">scan_percent</code> and <code class="codeph">scan_mode</code> parameters in the <code class="codeph">CREATE_COMPARISON</code> procedure enable you to compare a random portion of a shared database object instead of the entire database object. Typically, you use this option under the following conditions:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You are comparing a relatively large shared database object, and you want to determine whether there might be differences without devoting the resources and time to comparing the entire database object.</p>
                           </li>
                           <li>
                              <p>You do not intend to use subsequent comparisons to compare different portions of the database object. If you want to compare different portions of the database object in subsequent comparisons, then see <span class="q">"<a href="comparing-and-converging-data.html#GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A">Comparing a Shared Database Object Cyclically</a>"</span> for instructions.
                              </p>
                           </li>
                        </ul>
                        <p>This example compares a random portion of the <code class="codeph">oe.orders</code> table at the <code class="codeph">comp1.example.com</code> and <code class="codeph">comp2.example.com</code> databases:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Complete the tasks described in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span> and <span class="q">"<a href="comparing-and-converging-data.html#GUID-E169666D-4804-46BC-ADC9-0FE981C0A93E">Diverging a Database Object at Two Databases to Complete Examples</a>"</span>.</span></li>
                        <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the administrative user who owns the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CREATE_COMPARISON</code> procedure to create the comparison:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_COMPARISON.CREATE_COMPARISON(
    comparison_name =&gt; 'compare_random',
    schema_name     =&gt; 'oe',
    object_name     =&gt; 'orders',
    dblink_name     =&gt; 'comp2.example.com',
    scan_mode       =&gt;  DBMS_COMPARISON.CMP_SCAN_MODE_RANDOM,
    scan_percent    =&gt;  50);
END;
/
</pre><p>Notice that the <code class="codeph">scan_percent</code> parameter is set to <code class="codeph">50</code> to specify that the comparison scans half of the table. The <code class="codeph">scan_mode</code> parameter is set to <code class="codeph">DBMS_COMPARISON.CMP_SCAN_MODE_RANDOM</code> to specify that the comparison compares random rows in the table.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">COMPARE</code> function to compare the <code class="codeph">oe.orders</code> table at the two databases:</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  consistent   BOOLEAN;
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  consistent := DBMS_COMPARISON.COMPARE(
                  comparison_name =&gt; 'compare_random',
                  scan_info       =&gt; scan_info,
                  perform_row_dif =&gt; TRUE);
  DBMS_OUTPUT.PUT_LINE('Scan ID: '||scan_info.scan_id);
  IF consistent=TRUE THEN
    DBMS_OUTPUT.PUT_LINE('No differences were found.');
  ELSE
    DBMS_OUTPUT.PUT_LINE('Differences were found.');
  END IF;
END;
/
</pre><p>Notice that the <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">TRUE</code> in the <code class="codeph">COMPARE</code> function. This setting instructs the <code class="codeph">COMPARE</code> function to identify each individual row difference in the tables. When the <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">FALSE</code>, the <code class="codeph">COMPARE</code> function records whether there are differences in the tables, but does not record each individual row difference.
                              </p>
                              <p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Scan ID: 7
Differences were found.

PL/SQL procedure successfully completed.
</pre><p>This comparison scan might or might not find differences, depending on the portion of the table that is compared.</p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-A260F13A-DD58-4B3D-A3E1-285FBCBDB8E2__GUID-D02FDFE6-D7B2-4DE8-83F3-0862E78050DA">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-AF1D9F6A-4A13-48CA-BE35-9BAA73E22A20">Viewing Detailed Information About the Row Differences Found in a Scan</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span> to converge the differences found in the comparison results
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945">Rechecking the Comparison Results for a Comparison</a>"</span> to recheck the comparison results
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP462"></a><div class="props_rev_3"><a id="GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A" name="GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A"></a><h4 id="STREP-GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A" class="sect4"><span class="enumeration_section">13.6.4 </span>Comparing a Shared Database Object Cyclically
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">scan_percent</code> and <code class="codeph">scan_mode</code> parameters in the <code class="codeph">CREATE_COMPARISON</code> procedure enable you to compare a portion of a shared database object cyclically. A cyclic comparison scans a portion of the database object being compared during a single comparison. When the database object is compared again, another portion of the database object is compared, starting where the last comparison ended.
                        </p>
                        <p>Typically, you use this option under the following conditions:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You are comparing a relatively large shared database object, and you want to determine whether there might be differences without devoting the resources and time to comparing the entire database object.</p>
                           </li>
                           <li>
                              <p>You want each comparison to compare a different portion of the shared database object, so that the entire database object is compared with the appropriate number of scans. For example, if you compare 25% of the shared database object, then the entire database object is compared after four comparisons. If you do not want to compare different portions of the database object in subsequent comparisons, see <span class="q">"<a href="comparing-and-converging-data.html#GUID-A260F13A-DD58-4B3D-A3E1-285FBCBDB8E2">Comparing a Random Portion of a Shared Database Object</a>"</span> for instructions.
                              </p>
                           </li>
                        </ul>
                        <p>This example compares <code class="codeph">oe.orders</code> table cyclically at the <code class="codeph">comp1.example.com</code> and <code class="codeph">comp2.example.com</code> databases:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Complete the tasks described in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span> and <span class="q">"<a href="comparing-and-converging-data.html#GUID-E169666D-4804-46BC-ADC9-0FE981C0A93E">Diverging a Database Object at Two Databases to Complete Examples</a>"</span>.</span></li>
                        <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the administrative user who owns the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A__BABJBBJE"><span>Run the <code class="codeph">CREATE_COMPARISON</code> procedure to create the comparison:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_COMPARISON.CREATE_COMPARISON(
    comparison_name =&gt; 'compare_cyclic',
    schema_name     =&gt; 'oe',
    object_name     =&gt; 'orders',
    dblink_name     =&gt; 'comp2.example.com',
    scan_mode       =&gt;  DBMS_COMPARISON.CMP_SCAN_MODE_CYCLIC,
    scan_percent    =&gt;  50);
END;
/
</pre><p>Notice that the <code class="codeph">scan_percent</code> parameter is set to <code class="codeph">50</code> to specify that the comparison scans half of the table. The <code class="codeph">scan_mode</code> parameter is set to <code class="codeph">DBMS_COMPARISON.CMP_SCAN_MODE_CYCLIC</code> to specify that the comparison compares rows in the table cyclically.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A__BABJFBGH"><span>Run the <code class="codeph">COMPARE</code> function to compare the <code class="codeph">oe.orders</code> table at the two databases:</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  consistent   BOOLEAN;
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  consistent := DBMS_COMPARISON.COMPARE(
                  comparison_name =&gt; 'compare_cyclic',
                  scan_info       =&gt; scan_info,
                  perform_row_dif =&gt; TRUE);
  DBMS_OUTPUT.PUT_LINE('Scan ID: '||scan_info.scan_id);
  IF consistent=TRUE THEN
    DBMS_OUTPUT.PUT_LINE('No differences were found.');
  ELSE
    DBMS_OUTPUT.PUT_LINE('Differences were found.');
  END IF;
END;
/
</pre><p>Notice that the <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">TRUE</code> in the <code class="codeph">COMPARE</code> function. This setting instructs the <code class="codeph">COMPARE</code> function to identify each individual row difference in the tables. When the <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">FALSE</code>, the <code class="codeph">COMPARE</code> function records whether there are differences in the tables, but does not record each individual row difference.
                              </p>
                              <p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Scan ID: 8
Differences were found.

PL/SQL procedure successfully completed.
</pre><p>This comparison scan might or might not find differences, depending on the portion of the table that is compared.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>To compare the next portion of the database object, starting where the last comparison ended, rerun the <code class="codeph">COMPARE</code> function that was run in Step <a href="comparing-and-converging-data.html#GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A__BABJFBGH">4</a>. In this example, running the <code class="codeph">COMPARE</code> function twice compares the entire database object because the <code class="codeph">scan_percent</code> parameter was set to <code class="codeph">50</code> in Step <a href="comparing-and-converging-data.html#GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A__BABJBBJE">3</a>.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A__GUID-FC09F840-DDF7-4600-83E0-764739145E6C">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-AF1D9F6A-4A13-48CA-BE35-9BAA73E22A20">Viewing Detailed Information About the Row Differences Found in a Scan</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span> to converge the differences found in the comparison results
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945">Rechecking the Comparison Results for a Comparison</a>"</span> to recheck the comparison results
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP463"></a><div class="props_rev_3"><a id="GUID-66714C82-06B6-4920-82F4-98CF66285825" name="GUID-66714C82-06B6-4920-82F4-98CF66285825"></a><h4 id="STREP-GUID-66714C82-06B6-4920-82F4-98CF66285825" class="sect4"><span class="enumeration_section">13.6.5 </span>Comparing a Custom Portion of a Shared Database Object
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">scan_mode</code> parameter in the <code class="codeph">CREATE_COMPARISON</code> procedure enables you to compare a custom portion of a shared database object. After a comparison is created with the <code class="codeph">scan_mode</code> parameter set to <code class="codeph">CMP_SCAN_MODE_CUSTOM</code> in the <code class="codeph">CREATE_COMPARISON</code> procedure, you can specify the exact portion of the database object to compare when you run the <code class="codeph">COMPARE</code> function.
                        </p>
                        <p>Typically, you use this option under the following conditions:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You have a specific portion of a shared database object that you want to compare.</p>
                           </li>
                           <li>
                              <p>You are comparing a relatively large shared database object, and you want to determine whether there might be difference in a specific portion of it without devoting the resources and time to comparing the entire database object.</p>
                           </li>
                        </ul>
                        <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code class="codeph">scan_mode</code> parameter in the <code class="codeph">CREATE_COMPARISON</code> procedure.
                        </p>
                        <p>This example compares a custom portion of the <code class="codeph">oe.orders</code> table at the <code class="codeph">comp1.example.com</code> and <code class="codeph">comp2.example.com</code> databases:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Complete the tasks described in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span> and <span class="q">"<a href="comparing-and-converging-data.html#GUID-E169666D-4804-46BC-ADC9-0FE981C0A93E">Diverging a Database Object at Two Databases to Complete Examples</a>"</span>.</span></li>
                        <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the administrative user who owns the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-66714C82-06B6-4920-82F4-98CF66285825__BABIDCIE"><span>Run the <code class="codeph">CREATE_COMPARISON</code> procedure to create the comparison:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_COMPARISON.CREATE_COMPARISON(
    comparison_name   =&gt; 'compare_custom',
    schema_name       =&gt; 'oe',
    object_name       =&gt; 'orders',
    dblink_name       =&gt; 'comp2.example.com',
    index_schema_name =&gt; 'oe',
    index_name        =&gt; 'order_pk',
    scan_mode         =&gt;  DBMS_COMPARISON.CMP_SCAN_MODE_CUSTOM);
END;
/
</pre><p>Notice that the <code class="codeph">scan_mode</code> parameter is set to <code class="codeph">DBMS_COMPARISON.CMP_SCAN_MODE_CUSTOM</code>. When you specify this scan mode, you should specify the index to use for the comparison. This example specifies the <code class="codeph">or.order_pk</code> index.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Identify the index column or columns for the comparison created in Step <a href="comparing-and-converging-data.html#GUID-66714C82-06B6-4920-82F4-98CF66285825__BABIDCIE">3</a> by running the following query:</span><div><pre class="oac_no_warn" dir="ltr">SELECT COLUMN_NAME, COLUMN_POSITION FROM DBA_COMPARISON_COLUMNS 
  WHERE COMPARISON_NAME = 'COMPARE_CUSTOM' AND
        INDEX_COLUMN    = 'Y';
</pre><p>For a custom comparison, you use the index column to specify the portion of the table to compare when you run the <code class="codeph">COMPARE</code> function in the next step. In this example, the query should return the following output:
                              </p><pre class="oac_no_warn" dir="ltr">COLUMN_NAME                    COLUMN_POSITION
------------------------------ ---------------
ORDER_ID                                     1
</pre><p>This output shows that the <code class="codeph">order_id</code> column in the <code class="codeph">oe.orders</code> table is the index column for the comparison.
                              </p>
                              <p>For other database objects, the <code class="codeph">CREATE_COMPARISON</code> procedure might identify multiple index columns. If there are multiple index columns, then specify values for the lead index column in the next step. The lead index column shows <code class="codeph">1</code> for its <code class="codeph">COLUMN_POSITION</code> value.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">COMPARE</code> function to compare the <code class="codeph">oe.orders</code> table at the two databases:</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  consistent   BOOLEAN;
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  consistent := DBMS_COMPARISON.COMPARE(
                  comparison_name =&gt; 'compare_custom',
                  scan_info       =&gt; scan_info,
                  min_value       =&gt; '2430',
                  max_value       =&gt; '2460',
                  perform_row_dif =&gt; TRUE);
  DBMS_OUTPUT.PUT_LINE('Scan ID: '||scan_info.scan_id);
  IF consistent=TRUE THEN
    DBMS_OUTPUT.PUT_LINE('No differences were found.');
  ELSE
    DBMS_OUTPUT.PUT_LINE('Differences were found.');
  END IF;
END;
/
</pre><p>Notice the following parameter settings in the <code class="codeph">COMPARE</code> function:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">min_value</code> and <code class="codeph">max_value</code> parameters are set to <code class="codeph">2430</code> and <code class="codeph">2460</code>, respectively. Therefore, the <code class="codeph">COMPARE</code> function only compares the range of rows that begins with <code class="codeph">2430</code> and ends with <code class="codeph">2460</code> in the <code class="codeph">order_id</code> column.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">min_value</code> and <code class="codeph">max_value</code> parameters are specified as <code class="codeph">VARCHAR2</code> data type values, even though the column data type for the <code class="codeph">order_id</code> column is <code class="codeph">NUMBER</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">TRUE</code> in the <code class="codeph">COMPARE</code> function. This setting instructs the <code class="codeph">COMPARE</code> function to identify each individual row difference in the tables. When the <code class="codeph">perform_row_dif</code> parameter is set to <code class="codeph">FALSE</code>, the <code class="codeph">COMPARE</code> function records whether there are differences in the tables, but does not record each individual row difference.
                                    </p>
                                 </li>
                              </ul>
                              <p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Scan ID: 10
Differences were found.
 
PL/SQL procedure successfully completed.
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-66714C82-06B6-4920-82F4-98CF66285825__GUID-07D73B04-B9CA-4847-A28E-007059650914">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-AF1D9F6A-4A13-48CA-BE35-9BAA73E22A20">Viewing Detailed Information About the Row Differences Found in a Scan</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span> to converge the differences found in the comparison results
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945">Rechecking the Comparison Results for a Comparison</a>"</span> to recheck the comparison results
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP597"></a><div class="props_rev_3"><a id="GUID-1FBBB5DF-39A6-4449-94FC-2DC234432C62" name="GUID-1FBBB5DF-39A6-4449-94FC-2DC234432C62"></a><h4 id="STREP-GUID-1FBBB5DF-39A6-4449-94FC-2DC234432C62" class="sect4"><span class="enumeration_section">13.6.6 </span>Comparing a Shared Database Object That Contains CLOB or BLOB Columns
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">DBMS_COMPARISON</code> package does not support directly comparing a shared database object that contains a column of either <code class="codeph">CLOB</code> or <code class="codeph">BLOB</code> data type. However, you can complete these basic steps to compare a table with a <code class="codeph">CLOB</code> or <code class="codeph">BLOB</code> column:
                        </p>
                        <ol>
                           <li id="GUID-1FBBB5DF-39A6-4449-94FC-2DC234432C62__BABCJACB">
                              <p>At each database, create a view based on the table and replace the <code class="codeph">CLOB</code> or <code class="codeph">BLOB</code> column with a <code class="codeph">RAW</code> data type column that is generated using the <code class="codeph">DBMS_CRYPTO.HASH</code> function.
                              </p>
                           </li>
                           <li>
                              <p>Compare the views created in Step <a href="comparing-and-converging-data.html#GUID-1FBBB5DF-39A6-4449-94FC-2DC234432C62__BABCJACB">1</a>.
                              </p>
                           </li>
                        </ol>
                        <p>The illustrates how complete these steps for a simple table with a <code class="codeph">NUMBER</code> column and a <code class="codeph">CLOB</code> column. In this example, the global names of the databases are <code class="codeph">comp1.example.com</code> and <code class="codeph">comp2.example.com</code>, but you can substitute any two databases in your environment that meet the prerequisites described in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.
                        </p>
                        <div class="infoboxnote" id="GUID-1FBBB5DF-39A6-4449-94FC-2DC234432C62__GUID-2CE356E5-4E4F-45D0-9FAA-B03FDD3232B1">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">DBMS_COMPARISON</code> package cannot converge a shared database object that contains LOB columns.
                           </p>
                        </div>
                        <p>Complete the following steps:</p>
                        <ol>
                           <li>
                              <p>Complete the tasks described in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>At the <code class="codeph">comp1.example.com</code> database, ensure that the user who owns or will own the table with the <code class="codeph">CLOB</code> or <code class="codeph">BLOB</code> column has <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_CRYPTO</code> package.
                              </p>
                              <p>In this example, assume the user who will own the table is <code class="codeph">oe</code>. Complete the following steps to grant this privilege to <code class="codeph">oe</code> user:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as an administrative user who can grant privileges.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Grant <code class="codeph">EXECUTE</code> on the <code class="codeph">DBMS_CRYPTO</code> package to the user:
                                    </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON DBMS_CRYPTO TO oe;
</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>At the <code class="codeph">comp2.example.com</code> database, ensure that the user who owns or will own the table with the <code class="codeph">CLOB</code> or <code class="codeph">BLOB</code> column has <code class="codeph">EXECUTE</code> privilege on the <code class="codeph">DBMS_CRYPTO</code> package.
                              </p>
                              <p>In this example, assume the user who will own the table is <code class="codeph">oe</code>. Complete the following steps to grant this privilege to <code class="codeph">oe</code> user:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>In SQL*Plus, connect to the <code class="codeph">comp2.example.com</code> database as an administrative user who can grant privileges.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Grant <code class="codeph">EXECUTE</code> on the <code class="codeph">DBMS_CRYPTO</code> package to the user:
                                    </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON DBMS_CRYPTO TO oe;
</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>Create the table with the <code class="codeph">CLOB</code> column and the view based on the table in the <code class="codeph">comp1.example.com</code> database:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the user who will own the table.
                                    </p>
                                    <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Create the table:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE oe.tab_lob(
  c1 NUMBER PRIMARY KEY, 
  c2 CLOB DEFAULT to_clob('c2'));
</pre></li>
                                 <li>
                                    <p>Insert a row into the <code class="codeph">tab_lob</code> table and commit the change:
                                    </p><pre class="oac_no_warn" dir="ltr">INSERT INTO oe.tab_lob VALUES(1, TO_CLOB('row 1'));COMMIT;
</pre></li>
                                 <li>
                                    <p>Create the view:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  EXECUTE IMMEDIATE 'CREATE VIEW view_lob AS SELECT 
      c1, 
      DBMS_CRYPTO.HASH(c2, '||DBMS_CRYPTO.HASH_SH1||') c2_hash 
    FROM tab_lob';
END;
/
</pre></li>
                              </ol>
                              <div class="infoboxnotealso" id="GUID-1FBBB5DF-39A6-4449-94FC-2DC234432C62__GUID-2856A902-BB64-439D-B78C-3E5438B14B3B">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS65676"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the cryptographic hash functions used in the <code class="codeph">DBMS_CRYPTO</code> package
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>Create the table with the <code class="codeph">CLOB</code> column and the view based on the table in the <code class="codeph">comp2.example.com</code> database:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>In SQL*Plus, connect to the <code class="codeph">comp2.example.com</code> database as the user who will own the table.
                                    </p>
                                    <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Create the table:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE oe.tab_lob(
  c1 NUMBER PRIMARY KEY, 
  c2 CLOB DEFAULT to_clob('c2'));
</pre></li>
                                 <li>
                                    <p>Insert a row into the <code class="codeph">tab_lob</code> table and commit the change:
                                    </p><pre class="oac_no_warn" dir="ltr">INSERT INTO oe.tab_lob VALUES(1, TO_CLOB('row 1'));COMMIT;
</pre></li>
                                 <li>
                                    <p>Create the view:</p><pre class="oac_no_warn" dir="ltr">BEGIN
  EXECUTE IMMEDIATE 'CREATE VIEW view_lob AS SELECT 
      c1, 
      DBMS_CRYPTO.HASH(c2, '||DBMS_CRYPTO.HASH_SH1||') c2_hash 
    FROM tab_lob';
END;
/
</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the administrative user who owns the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">CREATE_COMPARISON</code> procedure to create the comparison:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_COMPARISON.CREATE_COMPARISON(
    comparison_name =&gt; 'compare_lob',
    schema_name     =&gt; 'oe',
    object_name     =&gt; 'view_lob',
    dblink_name     =&gt; 'comp2.example.com');
END;
/
</pre><p>Notice that the <code class="codeph">schema_name</code> and <code class="codeph">object_name</code> parameters specify the view <code class="codeph">oe.view_lob</code> and not the table that contains the <code class="codeph">CLOB</code> column.
                              </p>
                           </li>
                           <li id="GUID-1FBBB5DF-39A6-4449-94FC-2DC234432C62__BABBIGGG">
                              <p>Run the <code class="codeph">COMPARE</code> function to compare the <code class="codeph">oe.view_lob</code> view at the two databases:
                              </p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  consistent   BOOLEAN;
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  consistent := DBMS_COMPARISON.COMPARE(
                  comparison_name =&gt; 'compare_lob',
                  scan_info       =&gt; scan_info,
                  perform_row_dif =&gt; TRUE);
  DBMS_OUTPUT.PUT_LINE('Scan ID: '||scan_info.scan_id);
  IF consistent=TRUE THEN
    DBMS_OUTPUT.PUT_LINE('No differences were found.');
  ELSE
    DBMS_OUTPUT.PUT_LINE('Differences were found.');
  END IF;
END;
/
 
Scan ID: 1
No differences were found.
 
PL/SQL procedure successfully completed.
</pre></li>
                           <li>
                              <p>Make the <code class="codeph">oe.tab_lob</code> table diverge at two databases by completing the following steps:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the user who owns the table.
                                    </p>
                                    <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Insert a row and commit the change:</p><pre class="oac_no_warn" dir="ltr">INSERT INTO oe.tab_lob VALUES(2, TO_CLOB('row a'));
COMMIT;
</pre></li>
                                 <li>
                                    <p>In SQL*Plus, connect to the <code class="codeph">comp2.example.com</code> database as the user who owns the table.
                                    </p>
                                    <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Insert a row and commit the change:</p><pre class="oac_no_warn" dir="ltr">INSERT INTO oe.tab_lob VALUES(2, TO_CLOB('row b'));
COMMIT;
</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">COMPARE</code> function again to compare the <code class="codeph">oe.view_lob</code> view at the two databases. See Step <a href="comparing-and-converging-data.html#GUID-1FBBB5DF-39A6-4449-94FC-2DC234432C62__BABBIGGG">8</a>.
                              </p>
                              <p>The shared table with the <code class="codeph">CLOB</code> column has diverged at the two databases. Therefore, when you compare the view, the <code class="codeph">COMPARE</code> function returns the following output:
                              </p><pre class="oac_no_warn" dir="ltr">Scan ID: 2
Differences were found.
 
PL/SQL procedure successfully completed.
</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="STREP464"></a><div class="props_rev_3"><a id="GUID-4C7E9DCA-893D-4B83-BC4C-949AEE797B8D" name="GUID-4C7E9DCA-893D-4B83-BC4C-949AEE797B8D"></a><h3 id="STREP-GUID-4C7E9DCA-893D-4B83-BC4C-949AEE797B8D" class="sect3"><span class="enumeration_section">13.7 </span>Viewing Information About Comparisons and Comparison Results
               </h3>
               <div>
                  <p>The following data dictionary views contain information about comparisons created with the <code class="codeph">DBMS_COMPARISON</code> package:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">DBA_COMPARISON</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">USER_COMPARISON</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">DBA_COMPARISON_COLUMNS</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">USER_COMPARISON_COLUMNS</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">DBA_COMPARISON_SCAN</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">USER_COMPARISON_SCAN</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">DBA_COMPARISON_SCAN_VALUES</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">USER_COMPARISON_SCAN_VALUES</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">DBA_COMPARISON_ROW_DIF</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">USER_COMPARISON_ROW_DIF</code></p>
                     </li>
                  </ul>
                  <p>The following sections contain sample queries that you can use to monitor comparisons and comparison results:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-93B851FB-FDC0-4115-86D9-EA2A3D5F8F1B">Viewing General Information About the Comparisons in a Database</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-23E2AA54-70F7-4A99-BFFC-AC8C4245D98E">Viewing Information Specific to Random and Cyclic Comparisons</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-1DAD2588-7AB5-4E06-9AF5-23127846C2A2">Viewing the Columns Compared by Each Comparison in a Database</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-8FE56DB8-AE2C-4E16-8654-A477DBBF8F84">Viewing General Information About Each Scan in a Database</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-DF174976-2625-4CCE-B46C-F5E93E7061DE">Viewing the Parent Scan ID and Root Scan ID for Each Scan in a Database</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-AF1D9F6A-4A13-48CA-BE35-9BAA73E22A20">Viewing Detailed Information About the Row Differences Found in a Scan</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-73174B3C-4A42-47E0-A3DE-443424F2F2F0">Viewing Information About the Rows Compared in Specific Scans</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-4C7E9DCA-893D-4B83-BC4C-949AEE797B8D__GUID-FE92B035-A7A7-4A98-872C-583A7CC7B33C">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=REFRN"><span class="italic">Oracle Database Reference</span></a> for detailed information about the data dictionary views related to comparisons
                     </p>
                  </div>
               </div><a id="STREP465"></a><div class="props_rev_3"><a id="GUID-93B851FB-FDC0-4115-86D9-EA2A3D5F8F1B" name="GUID-93B851FB-FDC0-4115-86D9-EA2A3D5F8F1B"></a><h4 id="STREP-GUID-93B851FB-FDC0-4115-86D9-EA2A3D5F8F1B" class="sect4"><span class="enumeration_section">13.7.1 </span>Viewing General Information About the Comparisons in a Database
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">DBA_COMPARISON</code> data dictionary view contains information about the comparisons in the local database. The query in this section displays the following information about each comparison:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The owner of the comparison</p>
                           </li>
                           <li>
                              <p>The name of the comparison</p>
                           </li>
                           <li>
                              <p>The schema that contains the database object compared by the comparison</p>
                           </li>
                           <li>
                              <p>The name of the database object compared by the comparison</p>
                           </li>
                           <li>
                              <p>The data type of the database object compared by the comparison</p>
                           </li>
                           <li>
                              <p>The scan mode used by the comparison. The following scan modes are possible:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">FULL</code> indicates that the entire database object is compared.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">RANDOM</code> indicates that a random portion of the database object is compared.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CYCLIC</code> indicates that a portion of the database object is compared during a single comparison. When the database object is compared again, another portion of the database object is compared, starting where the last compare ended.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">CUSTOM</code> indicates that the <code class="codeph">COMPARE</code> function specifies the range to compare in the database object.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>The name of the database link used to connect with the remote database</p>
                           </li>
                        </ul>
                        <p>To view this information, run the following query:</p><pre class="oac_no_warn" dir="ltr">COLUMN OWNER HEADING 'Comparison|Owner' FORMAT A10
COLUMN COMPARISON_NAME HEADING 'Comparison|Name' FORMAT A22
COLUMN SCHEMA_NAME HEADING 'Schema|Name' FORMAT A8
COLUMN OBJECT_NAME HEADING 'Object|Name' FORMAT A8
COLUMN OBJECT_TYPE HEADING 'Object|Type' FORMAT A8
COLUMN SCAN_MODE HEADING 'Scan|Mode' FORMAT A6
COLUMN DBLINK_NAME HEADING 'Database|Link' FORMAT A15
 
SELECT OWNER,
       COMPARISON_NAME,
       SCHEMA_NAME,
       OBJECT_NAME,
       OBJECT_TYPE,
       SCAN_MODE,
       DBLINK_NAME
  FROM DBA_COMPARISON;
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Comparison Comparison             Schema   Object   Object   Scan   Database
Owner      Name                   Name     Name     Type     Mode   Link
---------- ---------------------- -------- -------- -------- ------ ----------
ADMIN      COMPARE_SUBSET_COLUMNS OE       ORDERS   TABLE    FULL   COMP2.EXAM
                                                                    PLE
ADMIN      COMPARE_ORDERS         OE       ORDERS   TABLE    FULL   COMP2.EXAM
                                                                    PLE
ADMIN      COMPARE_RANDOM         OE       ORDERS   TABLE    RANDOM COMP2.EXAM
                                                                    PLE
ADMIN      COMPARE_CYCLIC         OE       ORDERS   TABLE    CYCLIC COMP2.EXAM
                                                                    PLE
ADMIN      COMPARE_CUSTOM         OE       ORDERS   TABLE    CUSTOM COMP2.EXAM
                                                                    PLE
</pre><p>A comparison compares the local database object with a database object at a remote database. The comparison uses the database link shown by the query to connect to the remote database and perform the comparison.</p>
                        <p>By default, a comparison assumes that the owner, name, and data type of the database objects being compared are the same at both databases. However, they can be different at the local and remote databases. The query in this section does not display information about the remote database object, but you can query the <code class="codeph">REMOTE_SCHEMA_NAME</code>, <code class="codeph">REMOTE_OBJECT_NAME</code>, and <code class="codeph">REMOTE_OBJECT_TYPE</code> columns to view this information.
                        </p>
                        <div class="infoboxnotealso" id="GUID-93B851FB-FDC0-4115-86D9-EA2A3D5F8F1B__GUID-E727D945-CF86-4C79-A3D4-CD4D662D43F4">
                           <p class="notep1">See Also:</p>
                           <p><a href="comparing-and-converging-data.html#GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39">Comparing a Shared Database Object at Two Databases</a> for information about creating the comparisons shown in the output of this query
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP466"></a><div class="props_rev_3"><a id="GUID-23E2AA54-70F7-4A99-BFFC-AC8C4245D98E" name="GUID-23E2AA54-70F7-4A99-BFFC-AC8C4245D98E"></a><h4 id="STREP-GUID-23E2AA54-70F7-4A99-BFFC-AC8C4245D98E" class="sect4"><span class="enumeration_section">13.7.2 </span>Viewing Information Specific to Random and Cyclic Comparisons
                  </h4>
                  <div>
                     <div class="section">
                        <p>When you create comparisons that use the scan modes <code class="codeph">RANDOM</code> or <code class="codeph">CYCLIC</code>, you specify the percentage of the shared database object to compare. The query in this section shows the following information about random and cyclic comparisons:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The owner of the comparison</p>
                           </li>
                           <li>
                              <p>The name of the comparison</p>
                           </li>
                           <li>
                              <p>The schema that contains the database object compared by the comparison</p>
                           </li>
                           <li>
                              <p>The name of the database object compared by the comparison</p>
                           </li>
                           <li>
                              <p>The data type of the database object compared by the comparison</p>
                           </li>
                           <li>
                              <p>The scan percentage for the comparison. Each time the <code class="codeph">COMPARE</code> function is run to perform a comparison scan, the specified percentage of the database object is compared.
                              </p>
                           </li>
                           <li>
                              <p>The last lead index column value used by the comparison. The next time the <code class="codeph">COMPARE</code> function is run, it will start with row that has a lead index column value that directly follows the value shown by the query. This value only applies to cyclic comparisons.
                              </p>
                           </li>
                        </ul>
                        <p>To view this information, run the following query:</p><pre class="oac_no_warn" dir="ltr">COLUMN OWNER HEADING 'Comparison|Owner' FORMAT A10
COLUMN COMPARISON_NAME HEADING 'Comparison|Name' FORMAT A22
COLUMN SCHEMA_NAME HEADING 'Schema|Name' FORMAT A8
COLUMN OBJECT_NAME HEADING 'Object|Name' FORMAT A8
COLUMN OBJECT_TYPE HEADING 'Object|Type' FORMAT A8
COLUMN SCAN_PERCENT HEADING 'Scan|Percent' FORMAT 999
COLUMN CYCLIC_INDEX_VALUE HEADING 'Cyclic|Index|Value' FORMAT A10
 
SELECT OWNER,
       COMPARISON_NAME,
       SCHEMA_NAME,
       OBJECT_NAME,
       OBJECT_TYPE,
       SCAN_PERCENT,
       CYCLIC_INDEX_VALUE
  FROM DBA_COMPARISON
  WHERE SCAN_PERCENT IS NOT NULL;
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">                                                                     Cyclic
Comparison Comparison             Schema   Object   Object      Scan Index
Owner      Name                   Name     Name     Type     Percent Value
---------- ---------------------- -------- -------- -------- ------- ----------
ADMIN      COMPARE_RANDOM         OE       ORDERS   TABLE         50
ADMIN      COMPARE_CYCLIC         OE       ORDERS   TABLE         50 2677
</pre><div class="infoboxnotealso" id="GUID-23E2AA54-70F7-4A99-BFFC-AC8C4245D98E__GUID-9146C162-6335-49C6-9A5C-E6BC92E52FED">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-A260F13A-DD58-4B3D-A3E1-285FBCBDB8E2">Comparing a Random Portion of a Shared Database Object</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-FCCE4DB4-5C93-4389-9EA9-9713EC5CB19A">Comparing a Shared Database Object Cyclically</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-93B851FB-FDC0-4115-86D9-EA2A3D5F8F1B">Viewing General Information About the Comparisons in a Database</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP467"></a><div class="props_rev_3"><a id="GUID-1DAD2588-7AB5-4E06-9AF5-23127846C2A2" name="GUID-1DAD2588-7AB5-4E06-9AF5-23127846C2A2"></a><h4 id="STREP-GUID-1DAD2588-7AB5-4E06-9AF5-23127846C2A2" class="sect4"><span class="enumeration_section">13.7.3 </span>Viewing the Columns Compared by Each Comparison in a Database
                  </h4>
                  <div>
                     <div class="section">
                        <p>When you create a comparison, you can specify that the comparison compares all of the columns in the shared database object or a subset of the columns. Also, you can specify an index for the comparison to use or let the system identify an index automatically.</p>
                        <p>The query in this section displays the following information:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The owner of the comparison</p>
                           </li>
                           <li>
                              <p>The name of the comparison</p>
                           </li>
                           <li>
                              <p>The schema that contains the database object compared by the comparison</p>
                           </li>
                           <li>
                              <p>The name of the database object compared by the comparison</p>
                           </li>
                           <li>
                              <p>The column name of each column being compared in each database object</p>
                           </li>
                           <li>
                              <p>The column position of each column</p>
                           </li>
                           <li>
                              <p>Whether a column is an index column</p>
                           </li>
                        </ul>
                        <p>To display this information, run the following query:</p><pre class="oac_no_warn" dir="ltr">COLUMN OWNER HEADING 'Comparison|Owner' FORMAT A10
COLUMN COMPARISON_NAME HEADING 'Comparison|Name' FORMAT A15
COLUMN SCHEMA_NAME HEADING 'Schema|Name' FORMAT A10
COLUMN OBJECT_NAME HEADING 'Object|Name' FORMAT A10
COLUMN COLUMN_NAME HEADING 'Column|Name' FORMAT A12
COLUMN COLUMN_POSITION HEADING 'Column|Position' FORMAT 9999
COLUMN INDEX_COLUMN HEADING 'Index|Column?' FORMAT A7
 
SELECT c.OWNER,
       c.COMPARISON_NAME,
       c.SCHEMA_NAME,
       c.OBJECT_NAME,
       o.COLUMN_NAME,
       o.COLUMN_POSITION,
       o.INDEX_COLUMN
  FROM DBA_COMPARISON c, DBA_COMPARISON_COLUMNS o
  WHERE c.OWNER           = o.OWNER AND
        c.COMPARISON_NAME = o.COMPARISON_NAME
  ORDER BY COMPARISON_NAME, COLUMN_POSITION;
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Comparison Comparison      Schema     Object     Column         Column Index
Owner      Name            Name       Name       Name         Position Column?
---------- --------------- ---------- ---------- ------------ -------- -------
ADMIN      COMPARE_CUSTOM  OE         ORDERS     ORDER_ID            1 Y
ADMIN      COMPARE_CUSTOM  OE         ORDERS     ORDER_DATE          2 N
ADMIN      COMPARE_CUSTOM  OE         ORDERS     ORDER_MODE          3 N
ADMIN      COMPARE_CUSTOM  OE         ORDERS     CUSTOMER_ID         4 N
ADMIN      COMPARE_CUSTOM  OE         ORDERS     ORDER_STATUS        5 N
ADMIN      COMPARE_CUSTOM  OE         ORDERS     ORDER_TOTAL         6 N
ADMIN      COMPARE_CUSTOM  OE         ORDERS     SALES_REP_ID        7 N
ADMIN      COMPARE_CUSTOM  OE         ORDERS     PROMOTION_ID        8 N
ADMIN      COMPARE_CYCLIC  OE         ORDERS     ORDER_ID            1 Y
ADMIN      COMPARE_CYCLIC  OE         ORDERS     ORDER_DATE          2 N
ADMIN      COMPARE_CYCLIC  OE         ORDERS     ORDER_MODE          3 N
ADMIN      COMPARE_CYCLIC  OE         ORDERS     CUSTOMER_ID         4 N
ADMIN      COMPARE_CYCLIC  OE         ORDERS     ORDER_STATUS        5 N
ADMIN      COMPARE_CYCLIC  OE         ORDERS     ORDER_TOTAL         6 N
ADMIN      COMPARE_CYCLIC  OE         ORDERS     SALES_REP_ID        7 N
ADMIN      COMPARE_CYCLIC  OE         ORDERS     PROMOTION_ID        8 N
.
.
.
</pre><div class="infoboxnotealso" id="GUID-1DAD2588-7AB5-4E06-9AF5-23127846C2A2__GUID-8F182648-861D-45AE-B556-EECA9247777F">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-C6F88A41-0E58-42B1-93B7-B8AEFC699248">About Comparing and Converging Data</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_COMPARISON.html#ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP468"></a><div class="props_rev_3"><a id="GUID-8FE56DB8-AE2C-4E16-8654-A477DBBF8F84" name="GUID-8FE56DB8-AE2C-4E16-8654-A477DBBF8F84"></a><h4 id="STREP-GUID-8FE56DB8-AE2C-4E16-8654-A477DBBF8F84" class="sect4"><span class="enumeration_section">13.7.4 </span>Viewing General Information About Each Scan in a Database
                  </h4>
                  <div>
                     <div class="section">
                        <p>Each scan compares a bucket at the local database with a bucket at the remote database. The buckets being compared contain the same range of rows in the shared database object. The comparison results generated by a single execution of the <code class="codeph">COMPARE</code> function can include multiple buckets and multiple scans. Each scan has a unique scan ID.
                        </p>
                        <p>The query in this section shows the following information about each scan:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The owner of the comparison that ran the scan</p>
                           </li>
                           <li>
                              <p>The name of the comparison that ran the scan</p>
                           </li>
                           <li>
                              <p>The schema that contains the database object compared by the scan</p>
                           </li>
                           <li>
                              <p>The name of the database object compared by the scan</p>
                           </li>
                           <li>
                              <p>The scan ID of the scan</p>
                           </li>
                           <li>
                              <p>The status of the scan. The following status values are possible:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">SUC</code> indicates that the two buckets in the two tables matched the last time this data dictionary row was updated.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">BUCKET</code> <code class="codeph">DIF</code> indicates that the two buckets in the two tables did not match. Each bucket consists of smaller buckets.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">FINAL</code> <code class="codeph">BUCKET</code> <code class="codeph">DIF</code> indicates that the two buckets in the two tables did not match. Neither bucket is composed of smaller buckets. Because the <code class="codeph">perform_row_dif</code> parameter in the <code class="codeph">COMPARE</code> function or the <code class="codeph">RECHECK</code> function was set to <code class="codeph">FALSE</code>, individual row differences were not identified for the bucket.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ROW</code> <code class="codeph">DIF</code> indicates that the two buckets in the two tables did not match. Neither bucket is composed of smaller buckets. Because the <code class="codeph">perform_row_dif</code> parameter in the <code class="codeph">COMPARE</code> function or the <code class="codeph">RECHECK</code> function was set to <code class="codeph">TRUE</code>, individual row differences were identified for the bucket.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>The number of rows compared in the scan</p>
                           </li>
                           <li>
                              <p>The last time the scan was updated</p>
                           </li>
                        </ul>
                        <p>To view this information, run the following query:</p><pre class="oac_no_warn" dir="ltr">COLUMN OWNER HEADING 'Comparison|Owner' FORMAT A10
COLUMN COMPARISON_NAME HEADING 'Comparison|Name' FORMAT A15
COLUMN SCHEMA_NAME HEADING 'Schema|Name' FORMAT A6
COLUMN OBJECT_NAME HEADING 'Object|Name' FORMAT A6
COLUMN SCAN_ID HEADING 'Scan|ID' FORMAT 9999
COLUMN STATUS HEADING 'Scan|Status' FORMAT A10
COLUMN COUNT_ROWS HEADING 'Number|of|Rows' FORMAT 9999999
COLUMN SCAN_NULLS HEADING 'Scan|NULLs?' FORMAT A6
COLUMN LAST_UPDATE_TIME HEADING 'Last|Update' FORMAT A11

SELECT c.OWNER,
       c.COMPARISON_NAME,
       c.SCHEMA_NAME,
       c.OBJECT_NAME,
       s.SCAN_ID,
       s.STATUS,
       s.COUNT_ROWS,
       TO_CHAR(s.LAST_UPDATE_TIME, 'DD-MON-YYYY HH24:MI:SS') LAST_UPDATE_TIME 
  FROM DBA_COMPARISON c, DBA_COMPARISON_SCAN s
  WHERE c.OWNER           = s.OWNER AND
        c.COMPARISON_NAME = s.COMPARISON_NAME
  ORDER BY SCAN_ID;
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">                                                            Number
Comparison Comparison      Schema Object  Scan Scan             of Last
Owner      Name            Name   Name      ID Status         Rows Update
---------- --------------- ------ ------ ----- ---------- -------- -----------
ADMIN      COMPARE_SUBSET_ OE     ORDERS     1 BUCKET DIF          20-DEC-2006
           COLUMNS                                                  09:46:34
ADMIN      COMPARE_SUBSET_ OE     ORDERS     2 ROW DIF         105 20-DEC-2006
           COLUMNS                                                  09:46:34
ADMIN      COMPARE_SUBSET_ OE     ORDERS     3 ROW DIF           1 20-DEC-2006
           COLUMNS                                                  09:46:35
ADMIN      COMPARE_ORDERS  OE     ORDERS     4 BUCKET DIF          20-DEC-2006
                                                                    09:47:02
ADMIN      COMPARE_ORDERS  OE     ORDERS     5 FINAL BUCK      105 20-DEC-2006
                                               ET DIF               09:47:02
ADMIN      COMPARE_ORDERS  OE     ORDERS     6 FINAL BUCK        1 20-DEC-2006
                                               ET DIF               09:47:02
ADMIN      COMPARE_RANDOM  OE     ORDERS     7 SUC                 20-DEC-2006
                                                                    09:47:37
ADMIN      COMPARE_CYCLIC  OE     ORDERS     8 BUCKET DIF          20-DEC-2006
                                                                    09:48:22
ADMIN      COMPARE_CYCLIC  OE     ORDERS     9 ROW DIF         105 20-DEC-2006
                                                                    09:48:22
ADMIN      COMPARE_CUSTOM  OE     ORDERS    10 BUCKET DIF          20-DEC-2006
                                                                    09:49:15
ADMIN      COMPARE_CUSTOM  OE     ORDERS    11 ROW DIF          16 20-DEC-2006
                                                                    09:49:15
ADMIN      COMPARE_CUSTOM  OE     ORDERS    12 ROW DIF          13 20-DEC-2006
                                                                    09:49:15
</pre><p>When a scan has a status of <code class="codeph">BUCKET</code> <code class="codeph">DIF</code>, <code class="codeph">FINAL</code> <code class="codeph">BUCKET</code> <code class="codeph">DIF</code>, or <code class="codeph">ROW</code> <code class="codeph">DIF</code>, you can converge the differences found in the scan by running the <code class="codeph">CONVERGE</code> procedure and specifying the scan ID. However, to converge the all of the rows in the comparison results instead of the portion checked in a specific scan, specify the root scan ID for the comparison results when you run the <code class="codeph">CONVERGE</code> procedure.
                        </p>
                        <p>Also, when a scan shows that differences were found, you can recheck the scan using the <code class="codeph">RECHECK</code> function. To recheck all of the rows in the comparison results, run the <code class="codeph">RECHECK</code> function and specify the root scan ID for the comparison results.
                        </p>
                        <div class="infoboxnotealso" id="GUID-8FE56DB8-AE2C-4E16-8654-A477DBBF8F84__GUID-7C52C8C2-75DA-4B95-8282-C066FF664800">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-DF174976-2625-4CCE-B46C-F5E93E7061DE">Viewing the Parent Scan ID and Root Scan ID for Each Scan in a Database</a>"</span> for information about viewing the root scan for a scan
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945">Rechecking the Comparison Results for a Comparison</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-C6F88A41-0E58-42B1-93B7-B8AEFC699248">About Comparing and Converging Data</a>"</span> for more information about scans and buckets
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../arpls/DBMS_COMPARISON.html#ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP469"></a><div class="props_rev_3"><a id="GUID-DF174976-2625-4CCE-B46C-F5E93E7061DE" name="GUID-DF174976-2625-4CCE-B46C-F5E93E7061DE"></a><h4 id="STREP-GUID-DF174976-2625-4CCE-B46C-F5E93E7061DE" class="sect4"><span class="enumeration_section">13.7.5 </span>Viewing the Parent Scan ID and Root Scan ID for Each Scan in a Database
                  </h4>
                  <div>
                     <div class="section">
                        <p>The query in this section shows the parent scan ID and root scan ID of each scan in the database. Specifically, the query shows the following information:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The owner of the comparison that ran the scan</p>
                           </li>
                           <li>
                              <p>The name of the comparison that ran the scan</p>
                           </li>
                           <li>
                              <p>The schema that contains the database object compared by the scan</p>
                           </li>
                           <li>
                              <p>The name of the database object compared by the scan</p>
                           </li>
                           <li>
                              <p>The scan ID of the scan</p>
                           </li>
                           <li>
                              <p>The scan ID of the scan's parent scan</p>
                           </li>
                           <li>
                              <p>The scan ID of the scan's root scan</p>
                           </li>
                        </ul>
                        <p>To view this information, run the following query:</p><pre class="oac_no_warn" dir="ltr">COLUMN OWNER HEADING 'Comparison|Owner' FORMAT A10
COLUMN COMPARISON_NAME HEADING 'Comparison|Name' FORMAT A15
COLUMN SCHEMA_NAME HEADING 'Schema|Name' FORMAT A10
COLUMN OBJECT_NAME HEADING 'Object|Name' FORMAT A10
COLUMN SCAN_ID HEADING 'Scan|ID' FORMAT 9999
COLUMN PARENT_SCAN_ID HEADING 'Parent|Scan ID' FORMAT 9999
COLUMN ROOT_SCAN_ID HEADING 'Root|Scan ID' FORMAT 9999
 
SELECT c.OWNER,
       c.COMPARISON_NAME,
       c.SCHEMA_NAME,
       c.OBJECT_NAME,
       s.SCAN_ID,
       s.PARENT_SCAN_ID,
       s.ROOT_SCAN_ID
  FROM DBA_COMPARISON c, DBA_COMPARISON_SCAN s
  WHERE c.OWNER           = s.OWNER AND
        c.COMPARISON_NAME = s.COMPARISON_NAME
  ORDER BY s.SCAN_ID;
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Comparison Comparison      Schema     Object      Scan  Parent    Root
Owner      Name            Name       Name          ID Scan ID Scan ID
---------- --------------- ---------- ---------- ----- ------- -------
ADMIN      COMPARE_SUBSET_ OE         ORDERS         1               1
           COLUMNS
ADMIN      COMPARE_SUBSET_ OE         ORDERS         2       1       1
           COLUMNS
ADMIN      COMPARE_SUBSET_ OE         ORDERS         3       1       1
           COLUMNS
ADMIN      COMPARE_ORDERS  OE         ORDERS         4               4
ADMIN      COMPARE_ORDERS  OE         ORDERS         5       4       4
ADMIN      COMPARE_ORDERS  OE         ORDERS         6       4       4
ADMIN      COMPARE_RANDOM  OE         ORDERS         7               7
ADMIN      COMPARE_CYCLIC  OE         ORDERS         8               8
ADMIN      COMPARE_CYCLIC  OE         ORDERS         9       8       8
ADMIN      COMPARE_CUSTOM  OE         ORDERS        10              10
ADMIN      COMPARE_CUSTOM  OE         ORDERS        11      10      10
ADMIN      COMPARE_CUSTOM  OE         ORDERS        12      10      10
</pre><p>This output shows, for example, that the scan with scan ID <code class="codeph">1</code> is the root scan in the comparison results for the <code class="codeph">COMPARE_SUBSET_COLUMNS</code> comparison. Differences were found in this root scan, and it was split into two smaller buckets. The scan with scan ID <code class="codeph">2</code> and the scan with scan ID <code class="codeph">3</code> are the scans for these smaller buckets.
                        </p>
                        <p>To see if there were differences found in a specific scan, run the query in <span class="q">"<a href="comparing-and-converging-data.html#GUID-8FE56DB8-AE2C-4E16-8654-A477DBBF8F84">Viewing General Information About Each Scan in a Database</a>"</span>. When you <code class="codeph">RECHECK</code> for differences or <code class="codeph">CONVERGE</code> differences in a shared database object, you specify the scan ID of the scan you want to recheck or converge. To recheck or converge all of the rows in the comparison results, specify the root scan ID for the comparison results.
                        </p>
                        <div class="infoboxnotealso" id="GUID-DF174976-2625-4CCE-B46C-F5E93E7061DE__GUID-99B20624-2008-4A4C-AF8C-86C47B92B604">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945">Rechecking the Comparison Results for a Comparison</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-C6F88A41-0E58-42B1-93B7-B8AEFC699248">About Comparing and Converging Data</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP470"></a><div class="props_rev_3"><a id="GUID-AF1D9F6A-4A13-48CA-BE35-9BAA73E22A20" name="GUID-AF1D9F6A-4A13-48CA-BE35-9BAA73E22A20"></a><h4 id="STREP-GUID-AF1D9F6A-4A13-48CA-BE35-9BAA73E22A20" class="sect4"><span class="enumeration_section">13.7.6 </span>Viewing Detailed Information About the Row Differences Found in a Scan
                  </h4>
                  <div>
                     <div class="section">
                        <p>The queries in this section display detailed information about the row differences found in comparison results. To view the information in the queries in this section, the <code class="codeph">perform_row_dif</code> parameter in the <code class="codeph">COMPARE</code> function or the <code class="codeph">RECHECK</code> function that performed the comparison must have been set to <code class="codeph">TRUE</code>.
                        </p>
                        <p>If this parameter was set to <code class="codeph">FALSE</code>, then you can query the <code class="codeph">STATUS</code> column in the <code class="codeph">DBA_COMPARISON_SCAN</code> view to determine whether the scan found any differences, without showing detailed information about the differences. See <span class="q">"<a href="comparing-and-converging-data.html#GUID-8FE56DB8-AE2C-4E16-8654-A477DBBF8F84">Viewing General Information About Each Scan in a Database</a>"</span> for more information and a sample query.
                        </p>
                        <p>The following query shows the total number of differences found for a scan with the scan ID of <code class="codeph">8</code>:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN OWNER HEADING 'Comparison Owner' FORMAT A16
COLUMN COMPARISON_NAME HEADING 'Comparison Name' FORMAT A25
COLUMN SCHEMA_NAME HEADING 'Schema Name' FORMAT A11
COLUMN OBJECT_NAME HEADING 'Object Name' FORMAT A11
COLUMN CURRENT_DIF_COUNT HEADING 'Differences' FORMAT 9999999

SELECT c.OWNER, 
       c.COMPARISON_NAME, 
       c.SCHEMA_NAME, 
       c.OBJECT_NAME, 
       s.CURRENT_DIF_COUNT 
  FROM DBA_COMPARISON c, DBA_COMPARISON_SCAN s
  WHERE c.COMPARISON_NAME = s.COMPARISON_NAME AND
        c.OWNER           = s.OWNER AND
        s.SCAN_ID         = 8;
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Comparison Owner Comparison Name           Schema Name Object Name Differences
---------------- ------------------------- ----------- ----------- -----------
ADMIN            COMPARE_CYCLIC            OE          ORDERS                6
</pre><p>To view detailed information about each row difference found in the scan with scan ID <code class="codeph">8</code> of the comparison results for the <code class="codeph">COMPARE_CYCLIC</code> comparison, run the following query:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN COLUMN_NAME HEADING 'Index Column' FORMAT A15
COLUMN INDEX_VALUE HEADING 'Index Value' FORMAT A15
COLUMN LOCAL_ROWID HEADING 'Local Row Exists?' FORMAT A20
COLUMN REMOTE_ROWID HEADING 'Remote Row Exists?' FORMAT A20

SELECT c.COLUMN_NAME,
       r.INDEX_VALUE, 
       DECODE(r.LOCAL_ROWID,
                NULL, 'No',
                      'Yes') LOCAL_ROWID,
       DECODE(r.REMOTE_ROWID,
                NULL, 'No',
                      'Yes') REMOTE_ROWID
  FROM DBA_COMPARISON_COLUMNS c,
       DBA_COMPARISON_ROW_DIF r,
       DBA_COMPARISON_SCAN s
  WHERE c.COMPARISON_NAME = 'COMPARE_CYCLIC' AND
        r.SCAN_ID         = s.SCAN_ID AND
        s.PARENT_SCAN_ID  = 8 AND
        r.STATUS          = 'DIF' AND
        c.INDEX_COLUMN    = 'Y' AND
        c.COMPARISON_NAME = r.COMPARISON_NAME AND
        c.OWNER           = r.OWNER
  ORDER BY r.INDEX_VALUE;
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Index Column    Index Value     Local Row Exists?    Remote Row Exists?
--------------- --------------- -------------------- --------------------
ORDER_ID        2366            Yes                  No
ORDER_ID        2385            Yes                  No
ORDER_ID        2396            Yes                  No
ORDER_ID        2425            Yes                  No
ORDER_ID        2440            Yes                  Yes
ORDER_ID        2450            Yes                  No
</pre><p>This output shows the index column for the table being compared and the index value for each row that is different in the shared database object. In this example, the index column is the primary key column for the <code class="codeph">oe.orders</code> table (<code class="codeph">order_id</code>). The output also shows the type of difference for each row:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If <code class="codeph">Local</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> and <code class="codeph">Remote</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> are both <code class="codeph">Yes</code> for a row, then the row exists in both instances of the database object, but the data in the row is different.
                              </p>
                           </li>
                           <li>
                              <p>If <code class="codeph">Local</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> is <code class="codeph">Yes</code> and <code class="codeph">Remote</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> is <code class="codeph">No</code> for a row, then the row exists in the local database object but not in the remote database object.
                              </p>
                           </li>
                           <li>
                              <p>If <code class="codeph">Local</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> is <code class="codeph">No</code> and <code class="codeph">Remote</code> <code class="codeph">Row</code> <code class="codeph">Exists?</code> is <code class="codeph">Yes</code> for a row, then the row exists in the remote database object but not in the local database object.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP471"></a><div class="props_rev_3"><a id="GUID-73174B3C-4A42-47E0-A3DE-443424F2F2F0" name="GUID-73174B3C-4A42-47E0-A3DE-443424F2F2F0"></a><h4 id="STREP-GUID-73174B3C-4A42-47E0-A3DE-443424F2F2F0" class="sect4"><span class="enumeration_section">13.7.7 </span>Viewing Information About the Rows Compared in Specific Scans
                  </h4>
                  <div>
                     <div class="section">
                        <p>Each scan compares a range of rows in a shared database object. The query in this section provides the following information about the rows compared in each scan in the database:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The owner of the comparison that ran the scan</p>
                           </li>
                           <li>
                              <p>The name of the comparison that ran the scan</p>
                           </li>
                           <li>
                              <p>The column position of the row values displayed by the query</p>
                           </li>
                           <li>
                              <p>The minimum value for the range of rows compared by the scan</p>
                           </li>
                           <li>
                              <p>The maximum value for the range of rows compared by the scan</p>
                           </li>
                        </ul>
                        <p>A scan compares the row with the minimum value, the row with the maximum value, and all of the rows in between the minimum and maximum values in the database object. For each row returned by the query, the value displayed for the minimum value and the maximum value are the values for the column in the displayed the column position. The column position is an index column for the comparison.</p>
                        <p>To view this information, run the following query:</p><pre class="oac_no_warn" dir="ltr">COLUMN OWNER HEADING 'Comparison|Owner' FORMAT A10
COLUMN COMPARISON_NAME HEADING 'Comparison|Name' FORMAT A22
COLUMN SCAN_ID HEADING 'Scan|ID' FORMAT 9999
COLUMN COLUMN_POSITION HEADING 'Column|Position' FORMAT 999
COLUMN MIN_VALUE HEADING 'Minimum|Value' FORMAT A15
COLUMN MAX_VALUE HEADING 'Maximum|Value' FORMAT A15
 
SELECT OWNER,
       COMPARISON_NAME,
       SCAN_ID,
       COLUMN_POSITION,
       MIN_VALUE,
       MAX_VALUE
  FROM DBA_COMPARISON_SCAN_VALUES
  ORDER BY SCAN_ID;
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Comparison Comparison              Scan   Column Minimum         Maximum
Owner      Name                      ID Position Value           Value
---------- ---------------------- ----- -------- --------------- ---------------
ADMIN      COMPARE_SUBSET_COLUMNS     1        1 2354            3000
ADMIN      COMPARE_SUBSET_COLUMNS     2        1 2354            2458
ADMIN      COMPARE_SUBSET_COLUMNS     3        1 3000            3000
ADMIN      COMPARE_ORDERS             4        1 2354            3000
ADMIN      COMPARE_ORDERS             5        1 2354            2458
ADMIN      COMPARE_ORDERS             6        1 3000            3000
ADMIN      COMPARE_RANDOM             7        1 2617.3400241505 2940.3400241505
                                                 667163579712423 667163579712423
                                                 44590999096     44590999096
ADMIN      COMPARE_CYCLIC             8        1 2354            2677
ADMIN      COMPARE_CYCLIC             9        1 2354            2458
ADMIN      COMPARE_CUSTOM            10        1 2430            2460
ADMIN      COMPARE_CUSTOM            11        1 2430            2445
ADMIN      COMPARE_CUSTOM            12        1 2446            2458
</pre><p>This output shows the rows that were compared in each scan. For some comparisons, the scan was split into smaller buckets, and the query shows the rows compared in each smaller bucket.</p>
                        <p>For example, consider the output for the comparison results of the <code class="codeph">COMPARE_CUSTOM</code> comparison:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Each scan in the comparison results displays column position <code class="codeph">1</code>. To determine which column is in column position <code class="codeph">1</code> for the scan, run the query in <span class="q">"<a href="comparing-and-converging-data.html#GUID-1DAD2588-7AB5-4E06-9AF5-23127846C2A2">Viewing the Columns Compared by Each Comparison in a Database</a>"</span>. In this example, the column in column position <code class="codeph">1</code> for the <code class="codeph">COMPARE_CUSTOM</code> comparison is the <code class="codeph">order_id</code> column in the <code class="codeph">oe.orders</code> table.
                              </p>
                           </li>
                           <li>
                              <p>Scan ID <code class="codeph">10</code> is a root scan. This scan found differences, and the rows were split into two buckets that are represented by scan ID <code class="codeph">11</code> and scan ID <code class="codeph">12</code>.
                              </p>
                           </li>
                           <li>
                              <p>Scan ID <code class="codeph">11</code> compared the rows from the row with <code class="codeph">2430</code> for <code class="codeph">order_id</code> to the row with <code class="codeph">2445</code> for <code class="codeph">order_id</code>.
                              </p>
                           </li>
                           <li>
                              <p>Scan ID <code class="codeph">12</code> compared the rows from the row with <code class="codeph">2446</code> for <code class="codeph">order_id</code> to the row with <code class="codeph">2458</code> for <code class="codeph">order_id</code>.
                              </p>
                           </li>
                        </ul>
                        <p>To recheck or converge the differences found in a scan, you can run the <code class="codeph">RECHECK</code> function or <code class="codeph">CONVERGE</code> procedure, respectively. Specify the scan ID of the scan you want to recheck or converge. To recheck or converge all of the rows in comparison results, specify the root scan ID for the comparison results.
                        </p>
                        <div class="infoboxnotealso" id="GUID-73174B3C-4A42-47E0-A3DE-443424F2F2F0__GUID-DB54A858-3BC8-41F2-A55D-DC67040477D3">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945">Rechecking the Comparison Results for a Comparison</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-C6F88A41-0E58-42B1-93B7-B8AEFC699248">About Comparing and Converging Data</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="STREP472"></a><div class="props_rev_3"><a id="GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2" name="GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2"></a><h3 id="STREP-GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2" class="sect3"><span class="enumeration_section">13.8 </span>Converging a Shared Database Object
               </h3>
               <div>
                  <p>The <code class="codeph">CONVERGE</code> procedure in the <code class="codeph">DBMS_COMPARISON</code> package synchronizes the portion of the database object compared by the specified comparison scan and returns information about the changes it made. The <code class="codeph">CONVERGE</code> procedure only converges the differences identified in the specified scan. A scan might only identify differences in a subset of the rows or columns in a table, and differences might arise after the specified scan completed. In these cases, the <code class="codeph">CONVERGE</code> procedure might not make the shared database object completely consistent.
                  </p>
                  <p>To ensure that a scan has the most current differences, it is usually best to run the <code class="codeph">CONVERGE</code> procedure as soon as possible after running the comparison scan that is being converged. Also, you should only converge rows that are not being updated on either database. For example, if the shared database object is updated by replication components, then only converge rows for which replication changes have already been applied and ensure that no new changes are in the process of being replicated for these rows.
                  </p>
                  <div class="infoboxnote" id="GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2__GUID-83E3026E-E922-4D9D-8F14-60352216A0A5">
                     <p class="notep1">Note:</p>
                     <p>If a scan identifies that a row is different in the shared database object at two databases, and the row is modified after the scan, then it can result in unexpected data in the row after the <code class="codeph">CONVERGE</code> procedure is run.
                     </p>
                  </div>
                  <p>This section contains the following examples:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-251A23FD-2956-4613-BE45-7ABAE10A2C2B">Converging a Shared Database Object for Consistency with the Local Object</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-FFEC5F1D-D65A-4CE9-9DC4-2E298120D12E">Converging a Shared Database Object for Consistency with the Remote Object</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-E098F515-7F5F-4CDB-98EA-98B99DC66E06">Converging a Shared Database Object with a Session Tag Set</a></p>
                     </li>
                  </ul>
                  <p>These examples converge the comparison results generated in <span class="q">"<a href="comparing-and-converging-data.html#GUID-37B8F51E-177C-49A7-AE8F-F63AF9CFD2C4">Comparing a Shared Database Object without Identifying Row Differences</a>"</span>. In that example, the comparison name is <code class="codeph">compare_orders</code> and the returned scan ID is&nbsp;<code class="codeph">4</code>. If you completed this example, then the scan ID returned on your system might have been different. Run the following query to determine the scan ID:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT DISTINCT ROOT_SCAN_ID FROM DBA_COMPARISON_SCAN 
  WHERE COMPARISON_NAME = 'COMPARE_ORDERS';
</pre><p>If multiple values are returned, then the comparison was run more than once. In this case, use the largest scan ID returned.</p>
                  <p>When you want to converge all of the rows in comparison results, specify the root scan ID for the comparison results. If, however, you want to converge a portion of the rows in comparison results, then you can specify the scan ID of the scan that contains differences you want to converge. </p>
                  <div class="infoboxnotealso" id="GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2__GUID-DC78602E-A8B0-411E-BEBA-B3B676735DA5">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39">Comparing a Shared Database Object at Two Databases</a>"</span> for information about comparing database objects and comparison scans
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8FE56DB8-AE2C-4E16-8654-A477DBBF8F84">Viewing General Information About Each Scan in a Database</a>"</span> for a query that shows which scans found differences
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-DF174976-2625-4CCE-B46C-F5E93E7061DE">Viewing the Parent Scan ID and Root Scan ID for Each Scan in a Database</a>"</span> for a query that shows the root scan ID of each scan
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS871"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code class="codeph">CONVERGE</code> procedure
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="STREP473"></a><div class="props_rev_3"><a id="GUID-251A23FD-2956-4613-BE45-7ABAE10A2C2B" name="GUID-251A23FD-2956-4613-BE45-7ABAE10A2C2B"></a><h4 id="STREP-GUID-251A23FD-2956-4613-BE45-7ABAE10A2C2B" class="sect4"><span class="enumeration_section">13.8.1 </span>Converging a Shared Database Object for Consistency with the Local Object
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">converge_options</code> parameter in the <code class="codeph">CONVERGE</code> procedure determines which database "wins" during a conversion. To specify that the local database wins, set the <code class="codeph">converge_options</code> parameter to <code class="codeph">DBMS_COMPARISON.CMP_CONVERGE_LOCAL_WINS</code>. When you specify that the local database wins, the data in the database object at the local database replaces the data in the database object at the remote database for each difference found in the specified comparison scan.
                        </p>
                        <p>To converge a scan of the <code class="codeph">compare_orders</code> comparison so that both database objects are consistent with the local database, complete the following steps:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the administrative user who owns the comparison. The user must also have access to the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CONVERGE</code> procedure:</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  DBMS_COMPARISON.CONVERGE(
    comparison_name  =&gt; 'compare_orders',
    scan_id          =&gt; 4, <span class="bold">-- Substitute the scan ID from your scan.</span>
    scan_info        =&gt; scan_info,
    converge_options =&gt; DBMS_COMPARISON.CMP_CONVERGE_LOCAL_WINS);
DBMS_OUTPUT.PUT_LINE('Local Rows Merged: '||scan_info.loc_rows_merged);
DBMS_OUTPUT.PUT_LINE('Remote Rows Merged: '||scan_info.rmt_rows_merged);
DBMS_OUTPUT.PUT_LINE('Local Rows Deleted: '||scan_info.loc_rows_deleted);
DBMS_OUTPUT.PUT_LINE('Remote Rows Deleted: '||scan_info.rmt_rows_deleted);
END;
/
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Local Rows Merged: 0
Remote Rows Merged: 6
Local Rows Deleted: 0
Remote Rows Deleted: 1
 
PL/SQL procedure successfully completed.
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="STREP474"></a><div class="props_rev_3"><a id="GUID-FFEC5F1D-D65A-4CE9-9DC4-2E298120D12E" name="GUID-FFEC5F1D-D65A-4CE9-9DC4-2E298120D12E"></a><h4 id="STREP-GUID-FFEC5F1D-D65A-4CE9-9DC4-2E298120D12E" class="sect4"><span class="enumeration_section">13.8.2 </span>Converging a Shared Database Object for Consistency with the Remote Object
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">converge_options</code> parameter in the <code class="codeph">CONVERGE</code> procedure determines which database "wins" during a conversion. To specify that the remote database wins, set the <code class="codeph">converge_options</code> parameter to <code class="codeph">DBMS_COMPARISON.CMP_CONVERGE_REMOTE_WINS</code>. When you specify that the remote database wins, the data in the database object at the remote database replaces the data in the database object at the local database for each difference found in the specified comparison scan.
                        </p>
                        <p>To converge a scan of the <code class="codeph">compare_orders</code> comparison so that both database objects are consistent with the remote database, complete the following steps:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the administrative user who owns the comparison. The user must also have access to the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CONVERGE</code> procedure:</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  DBMS_COMPARISON.CONVERGE(
    comparison_name  =&gt; 'compare_orders',
    scan_id          =&gt; 4, <span class="bold">-- Substitute the scan ID from your scan.</span>
    scan_info        =&gt; scan_info,
    converge_options =&gt; DBMS_COMPARISON.CMP_CONVERGE_REMOTE_WINS);
DBMS_OUTPUT.PUT_LINE('Local Rows Merged: '||scan_info.loc_rows_merged);
DBMS_OUTPUT.PUT_LINE('Remote Rows Merged: '||scan_info.rmt_rows_merged);
DBMS_OUTPUT.PUT_LINE('Local Rows Deleted: '||scan_info.loc_rows_deleted);
DBMS_OUTPUT.PUT_LINE('Remote Rows Deleted: '||scan_info.rmt_rows_deleted);
END;
/
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Local Rows Merged: 2
Remote Rows Merged: 0
Local Rows Deleted: 5
Remote Rows Deleted: 0

PL/SQL procedure successfully completed.
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="STREP475"></a><div class="props_rev_3"><a id="GUID-E098F515-7F5F-4CDB-98EA-98B99DC66E06" name="GUID-E098F515-7F5F-4CDB-98EA-98B99DC66E06"></a><h4 id="STREP-GUID-E098F515-7F5F-4CDB-98EA-98B99DC66E06" class="sect4"><span class="enumeration_section">13.8.3 </span>Converging a Shared Database Object with a Session Tag Set
                  </h4>
                  <div>
                     <div class="section">
                        <p>If the shared database object being converged is part of an Oracle Streams replication environment, then you can set a session tag so that changes made by the <code class="codeph">CONVERGE</code> procedure are not replicated. Typically, changes made by the <code class="codeph">CONVERGE</code> procedure should not be replicated to avoid change cycling, which means sending a change back to the database where it originated. In an Oracle Streams replication environment, you can use session tags to ensure that changes made by the <code class="codeph">CONVERGE</code> procedure are not captured by Oracle Streams capture processes or synchronous captures and therefore not replicated. 
                        </p>
                        <p>To set a session tag in the session running the <code class="codeph">CONVERGE</code> procedure, use the following procedure parameters:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">local_converge_tag</code> parameter sets a session tag at the local database. Set this parameter to a value that prevents replication when the remote database wins and the <code class="codeph">CONVERGE</code> procedure makes changes to the local database.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">remote_converge_tag</code> parameter sets a session tag at the remote database. Set this parameter to a value that prevents replication when the local database wins and the <code class="codeph">CONVERGE</code> procedure makes changes to the remote database.
                              </p>
                           </li>
                        </ul>
                        <p>The appropriate value for a session tag depends on the Oracle Streams replication environment. Set the tag to a value that prevents capture processes and synchronous captures from capturing changes made by the session.</p>
                        <div class="infoboxnotealso" id="GUID-E098F515-7F5F-4CDB-98EA-98B99DC66E06__GUID-B957BC5B-CF11-4960-9D78-82F30EEEA6CE">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="oracle-streams-tags.html#GUID-DEA16475-320C-4256-A4E0-C341712AF7F7">Oracle Streams Tags in a Replication Environment</a>"</span></p>
                        </div>
                        <p>The example in this section specifies that the local database wins the converge operation by setting the <code class="codeph">converge_options</code> parameter to <code class="codeph">DBMS_COMPARISON.CMP_CONVERGE_LOCAL_WINS</code>. Therefore, the example sets the <code class="codeph">remote_converge_tag</code> parameter to the hexadecimal equivalent of <code class="codeph">'11'</code>. The session tag can be set to any non-<code class="codeph">NULL</code> value that prevents the changes made by the <code class="codeph">CONVERGE</code> procedure to the remote database from being replicated.
                        </p>
                        <p>To converge a scan of the <code class="codeph">compare_orders</code> comparison so that the database objects are consistent with the local database and a session tag is set at the remote database, complete the following steps:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">comp1.example.com</code> database as the administrative user who owns the comparison. The user must also have access to the database link created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-0F865C0C-FF1C-4E81-BD13-72985DB66BF1">Preparing To Compare and Converge a Shared Database Object</a>"</span>.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for instructions about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">CONVERGE</code> procedure:</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  scan_info    DBMS_COMPARISON.COMPARISON_TYPE;
BEGIN
  DBMS_COMPARISON.CONVERGE(
    comparison_name     =&gt; 'compare_orders',
    scan_id             =&gt; 4, <span class="bold">-- Substitute the scan ID from your scan.</span>
    scan_info           =&gt; scan_info,
    converge_options    =&gt; DBMS_COMPARISON.CMP_CONVERGE_LOCAL_WINS,
    remote_converge_tag =&gt; HEXTORAW('11'));
DBMS_OUTPUT.PUT_LINE('Local Rows Merged: '||scan_info.loc_rows_merged);
DBMS_OUTPUT.PUT_LINE('Remote Rows Merged: '||scan_info.rmt_rows_merged);
DBMS_OUTPUT.PUT_LINE('Local Rows Deleted: '||scan_info.loc_rows_deleted);
DBMS_OUTPUT.PUT_LINE('Remote Rows Deleted: '||scan_info.rmt_rows_deleted);
END;
/
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Local Rows Merged: 0
Remote Rows Merged: 6
Local Rows Deleted: 0
Remote Rows Deleted: 1

PL/SQL procedure successfully completed.
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-E098F515-7F5F-4CDB-98EA-98B99DC66E06__GUID-B04B09E1-2799-4C3D-A8D8-A5BF1E974EE3">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">CREATE_COMPARISON</code> procedure also enables you to set local and remote convergence tag values. If a tag parameter in the <code class="codeph">CONVERGE</code> procedure is non-<code class="codeph">NULL</code>, then it takes precedence over the corresponding tag parameter in the <code class="codeph">CREATE_COMPARISON</code> procedure. If a tag parameter in the <code class="codeph">CONVERGE</code> procedure is <code class="codeph">NULL</code>, then it is ignored, and the corresponding tag value in the <code class="codeph">CREATE_COMPARISON</code> procedure is used.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="STREP476"></a><div class="props_rev_3"><a id="GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945" name="GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945"></a><h3 id="STREP-GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945" class="sect3"><span class="enumeration_section">13.9 </span>Rechecking the Comparison Results for a Comparison
               </h3>
               <div>
                  <div class="section">
                     <p>You can recheck a previous comparison scan by using the <code class="codeph">RECHECK</code> function in the <code class="codeph">DBMS_COMPARISON</code> package. The <code class="codeph">RECHECK</code> function checks the current data in the database objects for differences that were recorded in the specified comparison scan.
                     </p>
                     <p>For example, to recheck the results for scan ID <code class="codeph">4</code> of a comparison named <code class="codeph">compare_orders</code>, log in to SQL*Plus as the owner of the comparison, and run the following procedure:
                     </p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
  consistent   BOOLEAN;
BEGIN
  consistent := DBMS_COMPARISON.RECHECK(
                  comparison_name =&gt; 'compare_orders',
                  scan_id         =&gt; 4);
  IF consistent=TRUE THEN
    DBMS_OUTPUT.PUT_LINE('No differences were found.');
  ELSE
    DBMS_OUTPUT.PUT_LINE('Differences were found.');
  END IF;
END;
/
</pre><p>Your output is similar to the following:</p><pre class="oac_no_warn" dir="ltr">Differences were found.

PL/SQL procedure successfully completed.
</pre><p>The function returns <code class="codeph">TRUE</code> if no differences were found or <code class="codeph">FALSE</code> if differences were found. The <code class="codeph">compare_orders</code> comparison is created in <span class="q">"<a href="comparing-and-converging-data.html#GUID-37B8F51E-177C-49A7-AE8F-F63AF9CFD2C4">Comparing a Shared Database Object without Identifying Row Differences</a>"</span>.
                     </p>
                     <div class="infoboxnote" id="GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945__GUID-6126EB71-2BAB-415A-A2F5-773091E3A76E">
                        <p class="notep1">Note:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">RECHECK</code> function does not compare the shared database object for differences that were not recorded in the specified comparison scan. To check for those differences, run the <code class="codeph">COMPARE</code> function.
                              </p>
                           </li>
                           <li>
                              <p>If the specified comparison scan did not complete successfully, then the <code class="codeph">RECHECK</code> function starts where the comparison scan previously ended.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945__GUID-972F8414-7957-4CA9-BA99-8C5E8624D1A5">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39">Comparing a Shared Database Object at Two Databases</a>"</span> for information about the compare function
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="STREP477"></a><div class="props_rev_3"><a id="GUID-23766756-FA44-47CC-8E55-32EDD5C69965" name="GUID-23766756-FA44-47CC-8E55-32EDD5C69965"></a><h3 id="STREP-GUID-23766756-FA44-47CC-8E55-32EDD5C69965" class="sect3"><span class="enumeration_section">13.10 </span>Purging Comparison Results
               </h3>
               <div>
                  <p>You can purge the comparison results of one or more comparisons when they are no longer needed by using the <code class="codeph">PURGE_COMPARISON</code> procedure in the <code class="codeph">DBMS_COMPARISON</code> package. You can either purge all of the comparison results for a comparison or a subset of the comparison results. When comparison results are purged, they can no longer be used to recheck the comparison or converge divergent data. Also, information about the comparison results is removed from data dictionary views.
                  </p>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-88B9AD7E-294D-49A3-ACEE-C9388FA0BCB7">Purging All of the Comparison Results for a Comparison</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-202DA157-2AFB-4160-B0FB-3C1126C068A5">Purging the Comparison Results for a Specific Scan ID of a Comparison</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-4F4696B7-63D6-4745-9205-AD850665F9CA">Purging the Comparison Results of a Comparison Before a Specified Time</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-23766756-FA44-47CC-8E55-32EDD5C69965__GUID-8FA6D37E-2F8F-4690-B174-57FF1287F124">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-C6F88A41-0E58-42B1-93B7-B8AEFC699248">About Comparing and Converging Data</a>"</span></p>
                  </div>
               </div><a id="STREP478"></a><div class="props_rev_3"><a id="GUID-88B9AD7E-294D-49A3-ACEE-C9388FA0BCB7" name="GUID-88B9AD7E-294D-49A3-ACEE-C9388FA0BCB7"></a><h4 id="STREP-GUID-88B9AD7E-294D-49A3-ACEE-C9388FA0BCB7" class="sect4"><span class="enumeration_section">13.10.1 </span>Purging All of the Comparison Results for a Comparison
                  </h4>
                  <div>
                     <div class="section">
                        <p>To purge all of the comparison results for a comparison, specify the comparison name in the <code class="codeph">comparison_name</code> parameter, and specify the default value of <code class="codeph">NULL</code> for the <code class="codeph">scan_id</code> and <code class="codeph">purge_time</code> parameters.
                        </p>
                        <p>For example, to purge all of the comparison results for a comparison named <code class="codeph">compare_orders</code>, log in to SQL*Plus as the owner of the comparison, and run the following procedure:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_COMPARISON.PURGE_COMPARISON(
    comparison_name =&gt; 'compare_orders',
    scan_id         =&gt; NULL,
    purge_time      =&gt; NULL);
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP479"></a><div class="props_rev_3"><a id="GUID-202DA157-2AFB-4160-B0FB-3C1126C068A5" name="GUID-202DA157-2AFB-4160-B0FB-3C1126C068A5"></a><h4 id="STREP-GUID-202DA157-2AFB-4160-B0FB-3C1126C068A5" class="sect4"><span class="enumeration_section">13.10.2 </span>Purging the Comparison Results for a Specific Scan ID of a Comparison
                  </h4>
                  <div>
                     <div class="section">
                        <p>To purge the comparison results for a specific scan of a comparison, specify the comparison name in the <code class="codeph">comparison_name</code> parameter, and specify the scan ID in the <code class="codeph">scan_id</code> parameter. The specified scan ID must identify a root scan. The root scan in comparison results is the highest level parent scan. The root scan does not have a parent. You can identify root scan IDs by querying the <code class="codeph">ROOT_SCAN_ID</code> column of the <code class="codeph">DBA_COMPARISON_SCAN</code> data dictionary view.
                        </p>
                        <p>When you run the <code class="codeph">PURGE_COMPARISON</code> procedure and specify a root scan, the root scan is purged. In addition, all direct and indirect child scans of the specified root scan are purged. Results for other scans are not purged.
                        </p>
                        <p>For example, to purge the comparison results for scan ID <code class="codeph">4</code> of a comparison named <code class="codeph">compare_orders</code>, log in to SQL*Plus as the owner of the comparison, and run the following procedure:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_COMPARISON.PURGE_COMPARISON(
    comparison_name =&gt; 'compare_orders',
    scan_id         =&gt; 4); <span class="bold">-- Substitute the scan ID from your scan.</span>
END;
/
</pre><div class="infoboxnotealso" id="GUID-202DA157-2AFB-4160-B0FB-3C1126C068A5__GUID-C0093458-A42E-40A5-B1E8-B98043B3DF0B">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-DF174976-2625-4CCE-B46C-F5E93E7061DE">Viewing the Parent Scan ID and Root Scan ID for Each Scan in a Database</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS868"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP480"></a><div class="props_rev_3"><a id="GUID-4F4696B7-63D6-4745-9205-AD850665F9CA" name="GUID-4F4696B7-63D6-4745-9205-AD850665F9CA"></a><h4 id="STREP-GUID-4F4696B7-63D6-4745-9205-AD850665F9CA" class="sect4"><span class="enumeration_section">13.10.3 </span>Purging the Comparison Results of a Comparison Before a Specified Time
                  </h4>
                  <div>
                     <div class="section">
                        <p>To purge the comparison results that were recorded on or before a specific date and time for a comparison, specify the comparison name in the <code class="codeph">comparison_name</code> parameter, and specify the date and time in the <code class="codeph">purge_time</code> parameter. Results are purged regardless of scan ID. Comparison results that were recorded after the specified date and time are retained.
                        </p>
                        <p>For example, assume that the <code class="codeph">NLS_TIMESTAMP_FORMAT</code> initialization parameter setting in the current session is <code class="codeph">YYYY-MM-DD HH24:MI:SS</code>. To purge the results for any scans that were recorded before 1PM on August 16, 2006 for the <code class="codeph">compare_orders</code> comparison, log in to SQL*Plus as the owner of the comparison, and run the following procedure:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_COMPARISON.PURGE_COMPARISON(
    comparison_name =&gt; 'compare_orders',
    purge_time      =&gt; '2006-08-16 13:00:00');
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="STREP481"></a><div class="props_rev_3"><a id="GUID-91E62DE9-0C50-484C-9A63-61CA7E14E587" name="GUID-91E62DE9-0C50-484C-9A63-61CA7E14E587"></a><h3 id="STREP-GUID-91E62DE9-0C50-484C-9A63-61CA7E14E587" class="sect3"><span class="enumeration_section">13.11 </span>Dropping a Comparison
               </h3>
               <div>
                  <div class="section">
                     <p>To drop a comparison and all of its comparison results, use the <code class="codeph">DROP_COMPARISON</code> procedure in the <code class="codeph">DBMS_COMPARISON</code> package. For example, to drop a comparison named <code class="codeph">compare_subset_columns</code>, log in to SQL*Plus as the owner of the comparison, and run the following procedure:
                     </p><pre class="oac_no_warn" dir="ltr">exec DBMS_COMPARISON.DROP_COMPARISON('compare_subset_columns');
</pre></div>
                  <!-- class="section" -->
               </div>
            </div><a id="STREP148"></a><div class="props_rev_3"><a id="GUID-7E23979E-221F-4B4D-A505-B7ADF2E76810" name="GUID-7E23979E-221F-4B4D-A505-B7ADF2E76810"></a><h3 id="STREP-GUID-7E23979E-221F-4B4D-A505-B7ADF2E76810" class="sect3"><span class="enumeration_section">13.12 </span>Using DBMS_COMPARISON in an Oracle Streams Replication Environment
               </h3>
               <div>
                  <p>This section describes the typical uses for the <code class="codeph">DBMS_COMPARISON</code> package in an Oracle Streams replication environment. These uses are:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-BE4621F5-4EEC-491C-9141-ABDCCA282D9E">Checking for Consistency After Instantiation</a></p>
                     </li>
                     <li>
                        <p><a href="comparing-and-converging-data.html#GUID-8C7E1099-E3C3-432D-9AF2-DDD3ED24AC50">Checking for Consistency in a Running Oracle Streams Replication Environment</a></p>
                     </li>
                  </ul>
               </div><a id="STREP482"></a><div class="props_rev_3"><a id="GUID-BE4621F5-4EEC-491C-9141-ABDCCA282D9E" name="GUID-BE4621F5-4EEC-491C-9141-ABDCCA282D9E"></a><h4 id="STREP-GUID-BE4621F5-4EEC-491C-9141-ABDCCA282D9E" class="sect4"><span class="enumeration_section">13.12.1 </span>Checking for Consistency After Instantiation
                  </h4>
                  <div>
                     <div class="section">
                        <p>After an instantiation, you can use the <code class="codeph">DBMS_COMPARISON</code> package to verify the consistency of the database objects that were instantiated. Typically, you should verify consistency before the Oracle Streams replication environment is replicating changes. Ensure that you check for consistency before you allow changes to the source database object and the instantiated database object. Changes to these database objects are identified as differences by the <code class="codeph">DBMS_COMPARISON</code> package.
                        </p>
                        <p>To verify the consistency of instantiated database objects, complete the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a comparison for each database object that was instantiated using the <code class="codeph">CREATE_COMPARISON</code> procedure. Each comparison should specify the database object that was instantiated and its corresponding database object at the source database.</span><div>
                              <p>When you run the <code class="codeph">CREATE_COMPARISON</code> procedure, ensure that the <code class="codeph">comparison_mode</code>, <code class="codeph">scan_mode</code>, and <code class="codeph">scan_percent</code> parameters are set to their default values of <code class="codeph">CMP_COMPARE_MODE_OBJECT</code>, <code class="codeph">CMP_SCAN_MODE_FULL</code>, and <code class="codeph">NULL</code>, respectively.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">COMPARE</code> function to compare each database object that was instantiated. The database objects are consistent if no differences are found.</span><div>
                              <p>When you run the <code class="codeph">COMPARE</code> function, ensure that the <code class="codeph">min_value</code>, <code class="codeph">max_value</code>, and <code class="codeph">perform_row_dif</code> parameters are set to their default values of <code class="codeph">NULL</code>, <code class="codeph">NULL</code>, and <code class="codeph">FALSE</code>, respectively.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If differences are found by the <code class="codeph">COMPARE</code> function, then you can either re-instantiate the database objects or use the <code class="codeph">CONVERGE</code> procedure to converge them. If you use the <code class="codeph">CONVERGE</code> procedure, then typically the source database object should "win" during convergence.</span></li>
                        <li class="stepexpand"><span>When the comparison results show that the database objects are consistent, you can purge the comparison results using the <code class="codeph">PURGE_COMPARISON</code> procedure.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-BE4621F5-4EEC-491C-9141-ABDCCA282D9E__GUID-869DE7FD-1AEA-49B1-A3CF-626753F4FCFF">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39">Comparing a Shared Database Object at Two Databases</a>"</span> for instructions about creating a comparison with the <code class="codeph">CREATE_COMPARISON</code> procedure and comparing database objects with the <code class="codeph">COMPARE</code> function
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-23766756-FA44-47CC-8E55-32EDD5C69965">Purging Comparison Results</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="instantiation-and-oracle-streams-replication.html#GUID-003967CE-08B9-439C-902F-45E7B7C37371"> Instantiation and Oracle Streams Replication</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP483"></a><div class="props_rev_3"><a id="GUID-8C7E1099-E3C3-432D-9AF2-DDD3ED24AC50" name="GUID-8C7E1099-E3C3-432D-9AF2-DDD3ED24AC50"></a><h4 id="STREP-GUID-8C7E1099-E3C3-432D-9AF2-DDD3ED24AC50" class="sect4"><span class="enumeration_section">13.12.2 </span>Checking for Consistency in a Running Oracle Streams Replication Environment
                  </h4>
                  <div>
                     <div class="section">
                        <p>Oracle Streams replication environments continually replicate changes to database objects. Therefore, the following applies to the replicated database objects:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Replicated database objects should be nearly synchronized most of the time because Oracle Streams components replicate and apply changes to keep them synchronized.</p>
                           </li>
                           <li>
                              <p>If there are differences in replicated database objects, then Oracle Streams components will typically send and apply changes to synchronize the database objects in the near future. That is, a <code class="codeph">COMPARE</code> function might show differences that are in the process of being replicated.
                              </p>
                           </li>
                        </ul>
                        <p>Because differences are expected in database objects while changes are being replicated, using the <code class="codeph">DBMS_COMPARISON</code> package to compare replicated database objects can be challenging. For example, assume that there is an existing comparison that compares an entire table at two databases, and consider the following scenario:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li id="GUID-8C7E1099-E3C3-432D-9AF2-DDD3ED24AC50__BABDDHAJ"><span>A change is made to a row in the table at one of the databases.</span></li>
                        <li><span>The change is captured by an Oracle Streams capture process, but it has not yet been propagated to the other database.</span></li>
                        <li><span>The <code class="codeph">COMPARE</code> function is run to compare the table tables at the two databases.</span></li>
                        <li id="GUID-8C7E1099-E3C3-432D-9AF2-DDD3ED24AC50__BABBBAJE"><span>The <code class="codeph">COMPARE</code> function identifies a difference in the row that was changed in Step&nbsp;<a href="comparing-and-converging-data.html#GUID-8C7E1099-E3C3-432D-9AF2-DDD3ED24AC50__BABDDHAJ">1</a>.</span></li>
                        <li><span>The change is propagated and applied at the destination database. Therefore, the difference identified in Step <a href="comparing-and-converging-data.html#GUID-8C7E1099-E3C3-432D-9AF2-DDD3ED24AC50__BABBBAJE">4</a> no longer exists.</span></li>
                     </ol>
                     <div class="section">
                        <p>When differences are found, and you suspect that the differences are transient, you can run the <code class="codeph">RECHECK</code> function after some time has passed. If Oracle Streams has synchronized the database objects, then the differences will disappear.
                        </p>
                        <p>If some rows in a replicated database object are constantly updated, then these rows might always show differences in comparison results. In this case, as you monitor the environment, ensure the following: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>No apply errors are accumulating at the destination database for these rows.</p>
                           </li>
                           <li>
                              <p>The rows are being updated correctly by the Oracle Streams apply process at the destination database. You can query the table that contains the rows at the destination database to ensure that the replicated changes are being applied.</p>
                           </li>
                        </ul>
                        <p>When both of these statements are true for the rows, then you can ignore differences in the comparison results for them.</p>
                        <p>Because the <code class="codeph">COMPARE</code> function might show differences that are in the process of being replicated, it is best to run this function during times when there is the least amount of replication activity in your environment. During times of relatively little replication activity, comparison results show the following types of differences in an Oracle Streams replication environment:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Differences resulting when rows are manually manipulated at only one database by an administrator or procedure. For example, an administrator or procedure might set a session tag before making changes, and the session tag might prevent a capture process from capturing the changes.</p>
                           </li>
                           <li>
                              <p>Differences resulting from recovery situations in which data is lost at one database and must be identified and recovered from another database.</p>
                           </li>
                           <li>
                              <p>Differences resulting from apply errors. In this case, the error transactions are not applied at one database because of apply errors.</p>
                           </li>
                        </ul>
                        <p>In any of these situations, you can run the <code class="codeph">CONVERGE</code> procedure to synchronize the database objects if it is appropriate. For example, if there are apply errors, and it is not easy to reexecute the error transactions, then you can use the <code class="codeph">CONVERGE</code> procedure to synchronize the database objects.
                        </p>
                        <div class="infoboxnotealso" id="GUID-8C7E1099-E3C3-432D-9AF2-DDD3ED24AC50__GUID-D8D40EA4-0C24-424D-8E4F-F89867AAA8B6">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-14E2C4EC-8540-4DA0-977D-3235F40D6B39">Comparing a Shared Database Object at Two Databases</a>"</span> for instructions on creating a comparison with the <code class="codeph">CREATE_COMPARISON</code> procedure and comparing database objects with the <code class="codeph">COMPARE</code> function
                                 </p>
                              </li>
                              <li>
                                 <p><a href="comparing-and-converging-data.html#GUID-904E8F04-2DE4-4A44-9C5B-58B50949E945">Rechecking the Comparison Results for a Comparison</a> for information about the <code class="codeph">RECHECK</code> function
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="comparing-and-converging-data.html#GUID-8A407854-CB8B-4337-8D8F-8174667CA3F2">Converging a Shared Database Object</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="oracle-streams-tags.html#GUID-9339D29B-65F3-450B-B3CD-A7B4ADCA4AAF"> Oracle Streams Tags</a></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=STRMS112"><span class="italic">Oracle Streams Concepts and Administration</span></a> for information about apply errors
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>