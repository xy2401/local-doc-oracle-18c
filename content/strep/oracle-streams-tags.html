<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Oracle Streams Tags</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Replication Administrator’s Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Replication Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="streams-replication-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-01-24T23:25:23-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83780-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="oracle-streams-conflict-resolution.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-streams-heterogeneous-information-sharing.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Streams Replication Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="STREP">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-streams-conflict-resolution.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-streams-heterogeneous-information-sharing.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Replication Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-oracle-streams-replication.html" property="item" typeof="WebPage"><span property="name">    Configuring Oracle Streams Replication </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Oracle Streams Tags</li>
            </ol>
            <a id="GUID-9339D29B-65F3-450B-B3CD-A7B4ADCA4AAF" name="GUID-9339D29B-65F3-450B-B3CD-A7B4ADCA4AAF"></a><a id="STREP008"></a>
            
            <h2 id="STREP-GUID-9339D29B-65F3-450B-B3CD-A7B4ADCA4AAF" class="sect2"><span class="enumeration_chapter">10 </span> Oracle Streams Tags
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d47858e100" class="indexterm-anchor"></a><a id="d47858e102" class="indexterm-anchor"></a>This chapter explains the concepts related to Oracle Streams tags.
               </p>
               <p>This chapter contains these topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="oracle-streams-tags.html#GUID-B32114FB-2828-455F-93D1-9E9123D77E80">Introduction to Tags</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-streams-tags.html#GUID-1EB3D6C4-0F12-4AE8-B444-998CC2460677">Tags and Rules Created by the DBMS_STREAMS_ADM Package</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-streams-tags.html#GUID-42343FB9-7AD1-4A18-84AA-B96908611951">Tags and Online Backup Statements</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-streams-tags.html#GUID-5FD605D0-ADD5-4E22-B976-6CEB0F816900">Tags and an Apply Process</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-streams-tags.html#GUID-DEA16475-320C-4256-A4E0-C341712AF7F7">Oracle Streams Tags in a Replication Environment</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-streams-tags.html#GUID-03BE0EFB-93E3-4CDE-8CE9-080915B44541">Managing Oracle Streams Tags</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-streams-tags.html#GUID-278F0DD2-2E16-4049-8506-E23D263ABDBD">Monitoring Oracle Streams Tags</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-9339D29B-65F3-450B-B3CD-A7B4ADCA4AAF__GUID-26A7C6E3-4D17-45F1-B084-1E812DE1FB2C">
                  <p class="notep1">See Also:</p>
                  <p><span class="q">"<a href="oracle-streams-tags.html#GUID-03BE0EFB-93E3-4CDE-8CE9-080915B44541">Managing Oracle Streams Tags</a>"</span></p>
               </div>
            </div><a id="STREP390"></a><div class="props_rev_3"><a id="GUID-B32114FB-2828-455F-93D1-9E9123D77E80" name="GUID-B32114FB-2828-455F-93D1-9E9123D77E80"></a><h3 id="STREP-GUID-B32114FB-2828-455F-93D1-9E9123D77E80" class="sect3"><span class="enumeration_section">10.1 </span>Introduction to Tags
               </h3>
               <div>
                  <p>Every redo entry in the redo log has a <span class="bold">tag</span> associated with it. The data type of the tag is <code class="codeph">RAW</code>. By default, when a user or application generates redo entries, the value of the tag is <code class="codeph">NULL</code> for each redo entry, and a <code class="codeph">NULL</code> tag consumes no space. The size limit for a tag value is 2000 bytes.
                  </p>
                  <p>You can configure how tag values are interpreted. For example, you can use a tag to determine whether an LCR contains a change that originated in the local database or at a different database, so that you can avoid change cycling (sending an LCR back to the database where it originated). Tags can be used for other LCR tracking purposes as well. You can also use tags to specify the set of destination databases for each LCR.</p>
                  <p>You can control the value of the tags generated in the redo log in the following ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Use the <code class="codeph">DBMS_STREAMS.SET_TAG</code> procedure to specify the value of the redo tags generated in the current session. When a database change is made in the session, the tag becomes part of the redo entry that records the change. Different sessions can have the same tag setting or different tag settings.
                        </p>
                     </li>
                     <li>
                        <p>Use the <code class="codeph">CREATE_APPLY</code> or <code class="codeph">ALTER_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to control the value of the redo tags generated when an apply process runs. All sessions coordinated by the apply process coordinator use this tag setting. By default, redo entries generated by an apply process have a tag value that is the hexadecimal equivalent of <code class="codeph">'00'</code> (double zero).
                        </p>
                     </li>
                  </ul>
                  <p>Based on the rules in the rule sets for a capture process, the tag value in the redo entry for a change can determine whether the change is captured. Based on the rules in the rule sets for a synchronous capture, the session tag value for a change can determine whether the change is captured. The tags become part of the LCRs captured by a capture process or synchronous capture.</p>
                  <p>Similarly, once a tag is part of an LCR, the value of the tag can determine whether a propagation propagates the LCR and whether an apply process applies the LCR. The behavior of a custom rule-based transformation or apply handler can also depend on the value of the tag. In addition, you can set the tag value for an existing LCR using the <code class="codeph">SET_TAG</code> member procedure for the LCR in a custom rule-based transformation or an apply handler that uses a PL/SQL procedure. You cannot set a tag value for an existing LCR in a statement DML handler or change handler.
                  </p>
                  <div class="infoboxnotealso" id="GUID-B32114FB-2828-455F-93D1-9E9123D77E80__GUID-2D1D2D1B-0D4B-48D2-B529-AF06705DED10">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS307"><span class="italic">Oracle Database PL/SQL Packages and Types Reference </span></a>for more information about the <code class="codeph">SET_TAG</code> member procedure for LCRs
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=STRMS006"><span class="italic">Oracle Streams Concepts and Administration </span></a>for more information about how rules are used in Oracle Streams
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="STREP391"></a><div class="props_rev_3"><a id="GUID-1EB3D6C4-0F12-4AE8-B444-998CC2460677" name="GUID-1EB3D6C4-0F12-4AE8-B444-998CC2460677"></a><h3 id="STREP-GUID-1EB3D6C4-0F12-4AE8-B444-998CC2460677" class="sect3"><span class="enumeration_section">10.2 </span>Tags and Rules Created by the DBMS_STREAMS_ADM Package
               </h3>
               <div>
                  <p>When you use a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to create rules and set the <code class="codeph">include_tagged_lcr</code> parameter to <code class="codeph">FALSE</code>, each rule contains a condition that evaluates to <code class="codeph">TRUE</code> only if the tag is <code class="codeph">NULL</code>. In DML rules, the condition is the following:
                  </p><pre class="oac_no_warn" dir="ltr">:dml.is_null_tag()='Y'
</pre><p>In DDL rules, the condition is the following:</p><pre class="oac_no_warn" dir="ltr">:ddl.is_null_tag()='Y'
</pre><p>Consider a positive rule set with a single rule and assume the rule contains such a condition. In this case, Oracle Streams capture processes, synchronous captures, propagations, and apply processes behave in the following way:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A capture process captures a change only if the tag in the redo log entry for the change is <code class="codeph">NULL</code> and the rest of the rule conditions evaluate to <code class="codeph">TRUE</code> for the change.
                        </p>
                     </li>
                     <li>
                        <p>A synchronous capture captures a change only if the tag for the session that makes the change is <code class="codeph">NULL</code> and the rest of the rule conditions evaluate to <code class="codeph">TRUE</code> for the change.
                        </p>
                     </li>
                     <li>
                        <p>A propagation propagates an LCR only if the tag in the LCR is <code class="codeph">NULL</code> and the rest of the rule conditions evaluate to <code class="codeph">TRUE</code> for the LCR.
                        </p>
                     </li>
                     <li>
                        <p>An apply process applies an LCR only if the tag in the LCR is <code class="codeph">NULL</code> and the rest of the rule conditions evaluate to <code class="codeph">TRUE</code> for the LCR.
                        </p>
                     </li>
                  </ul>
                  <p>Alternatively, consider a negative rule set with a single rule and assume the rule contains such a condition. In this case, Oracle Streams capture processes, propagations, and apply processes behave in the following way:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A capture process discards a change only if the tag in the redo log entry for the change is <code class="codeph">NULL</code> and the rest of the rule conditions evaluate to <code class="codeph">TRUE</code> for the change.
                        </p>
                     </li>
                     <li>
                        <p>A propagation or apply process discards LCR only if the tag in the LCR is <code class="codeph">NULL</code> and the rest of the rule conditions evaluate to <code class="codeph">TRUE</code> for the LCR.
                        </p>
                     </li>
                  </ul>
                  <p>In most cases, specify <code class="codeph">TRUE</code> for the <code class="codeph">include_tagged_lcr</code> parameter if rules are being added to a negative rule set so that changes are discarded regardless of their tag values.
                  </p>
                  <p>The following procedures in the <code class="codeph">DBMS_STREAMS_ADM</code> package create rules that contain one of these conditions by default:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">ADD_GLOBAL_PROPAGATION_RULES</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ADD_GLOBAL_RULES</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ADD_SCHEMA_PROPAGATION_RULES</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ADD_SCHEMA_RULES</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ADD_SUBSET_PROPAGATION_RULES</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ADD_SUBSET_RULES</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ADD_TABLE_PROPAGATION_RULES</code></p>
                     </li>
                     <li>
                        <p><code class="codeph">ADD_TABLE_RULES</code></p>
                     </li>
                  </ul>
                  <p><a id="d47858e591" class="indexterm-anchor"></a>If you do not want the rules to contain such a condition, then set the <code class="codeph">include_tagged_lcr</code> parameter to <code class="codeph">TRUE</code> when you run these procedures. This setting results in no conditions relating to tags in the rules. Therefore, rule evaluation of the database change does not depend on the value of the tag.
                  </p>
                  <p>For example, consider a table rule that evaluates to <code class="codeph">TRUE</code> for all DML changes to the <code class="codeph">hr.locations</code> table that originated at the <code class="codeph">dbs1.example.com</code> source database. 
                  </p>
                  <p>Assume the <code class="codeph">ADD_TABLE_RULES</code> procedure is run to generate this rule:
                  </p><pre class="oac_no_warn" dir="ltr">BEGIN 
  DBMS_STREAMS_ADM.ADD_TABLE_RULES(
&nbsp;&nbsp; &nbsp;table_name               =&gt;  'hr.locations',
&nbsp;&nbsp; &nbsp;streams_type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt;  'capture',
&nbsp;&nbsp; &nbsp;streams_name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;=&gt;  'capture',
&nbsp;&nbsp; &nbsp;queue_name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt;  'streams_queue',
    include_tagged_lcr       =&gt;  FALSE,  <span class="bold">-- Note parameter setting</span>
    source_database          =&gt;  'dbs1.example.com',
&nbsp;&nbsp; &nbsp;include_dml &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt;  TRUE,
&nbsp;&nbsp; &nbsp;include_ddl &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt;  FALSE);
END;
/
</pre><p>Notice that the <code class="codeph">include_tagged_lcr</code> parameter is set to <code class="codeph">FALSE</code>, which is the default. The <code class="codeph">ADD_TABLE_RULES</code> procedure generates a rule with a rule condition similar to the following: 
                  </p><pre class="oac_no_warn" dir="ltr">(((:dml.get_object_owner() = 'HR' and :dml.get_object_name() = 'LOCATIONS')) 
and :dml.is_null_tag() = 'Y' and :dml.get_source_database_name() = 
'DBS1.EXAMPLE.COM' )
</pre><p>If a capture process uses a positive rule set that contains this rule, then the rule evaluates to <code class="codeph">FALSE</code> if the tag for a change in a redo entry is a non-<code class="codeph">NULL</code> value, such as <code class="codeph">'0'</code>&nbsp;or&nbsp;<code class="codeph">'1'</code>. So, if a redo entry contains a row change to the <code class="codeph">hr.locations</code> table, then the change is captured only if the tag for the redo entry is <code class="codeph">NULL</code>.
                  </p>
                  <p>However, suppose the <code class="codeph">include_tagged_lcr</code> parameter is set to <code class="codeph">TRUE</code> when <code class="codeph">ADD_TABLE_RULES</code> is run:
                  </p><pre class="oac_no_warn" dir="ltr">BEGIN 
  DBMS_STREAMS_ADM.ADD_TABLE_RULES(
&nbsp; &nbsp;&nbsp;table_name               =&gt;  'hr.locations',
&nbsp; &nbsp;&nbsp;streams_type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt;  'capture',
&nbsp; &nbsp;&nbsp;streams_name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;=&gt;  'capture',
&nbsp; &nbsp;&nbsp;queue_name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt;  'streams_queue',
    include_tagged_lcr       =&gt;  TRUE,   <span class="bold">-- Note parameter setting</span>
    source_database          =&gt;  'dbs1.example.com',
&nbsp; &nbsp;&nbsp;include_dml &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt;  TRUE,
&nbsp; &nbsp;&nbsp;include_ddl &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =&gt;  FALSE);
END;
/
</pre><p>In this case, the <code class="codeph">ADD_TABLE_RULES</code> procedure generates a rule with a rule condition similar to the following: 
                  </p><pre class="oac_no_warn" dir="ltr">(((:dml.get_object_owner() = 'HR' and :dml.get_object_name() = 'LOCATIONS')) 
and :dml.get_source_database_name() = 'DBS1.EXAMPLE.COM' )
</pre><p>Notice that there is no condition relating to the tag. If a capture process uses a positive rule set that contains this rule, then the rule evaluates to <code class="codeph">TRUE</code> if the tag in a redo entry for a DML change to the <code class="codeph">hr.locations</code> table is a non-<code class="codeph">NULL</code> value, such as <code class="codeph">'0'</code>&nbsp;or&nbsp;<code class="codeph">'1'</code>. The rule also evaluates to <code class="codeph">TRUE</code> if the tag is <code class="codeph">NULL</code>. So, if a redo entry contains a DML change to the <code class="codeph">hr.locations</code> table, then the change is captured regardless of the value for the tag.
                  </p>
                  <p>To modify the <code class="codeph">is_null_tag</code> condition in an existing system-created rule, use an appropriate procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to create a rule that is the same as the rule you want to modify, except for the <code class="codeph">is_null_tag</code> condition. Next, use the <code class="codeph">REMOVE_RULE</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to remove the old rule from the appropriate rule set. In addition, you can use the <code class="codeph">and_condition</code> parameter for the procedures that create rules in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add conditions relating to tags to system-created rules.
                  </p>
                  <p>If you created a rule with the <code class="codeph">DBMS_RULE_ADM</code> package, then you can add, remove, or modify the <code class="codeph">is_null_tag</code> condition in the rule by using the <code class="codeph">ALTER_RULE</code> procedure in this package.
                  </p>
                  <div class="infoboxnotealso" id="GUID-1EB3D6C4-0F12-4AE8-B444-998CC2460677__GUID-9049D9B9-EF51-47CF-A44D-29745FDE2D43">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=STRMS006"><span class="italic">Oracle Streams Concepts and Administration </span></a>for examples of rules generated by the procedures in the <code class="codeph">DBMS_STREAMS_ADM</code> package
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS"><span class="italic">Oracle Database PL/SQL Packages and Types Reference </span></a>for more information about the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS305"><code class="codeph">DBMS_STREAMS_ADM</code></a> package and the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS328"><code class="codeph">DBMS_RULE_ADM.ALTER_RULE</code></a> procedure
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="oracle-streams-tags.html#GUID-3A09D27C-2AA9-4FC5-AFB7-9112AB9CCB1F">Setting the Tag Values Generated by an Apply Process</a>"</span> for more information about the <code class="codeph">SET_TAG</code> procedure
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="STREP392"></a><div class="props_rev_3"><a id="GUID-42343FB9-7AD1-4A18-84AA-B96908611951" name="GUID-42343FB9-7AD1-4A18-84AA-B96908611951"></a><h3 id="STREP-GUID-42343FB9-7AD1-4A18-84AA-B96908611951" class="sect3"><span class="enumeration_section">10.3 </span>Tags and Online Backup Statements
               </h3>
               <div>
                  <p>If you are using global rules to capture and apply DDL changes for an entire database, then online backup statements will be captured, propagated, and applied by default. Typically, database administrators do not want to replicate online backup statements. Instead, they only want them to run at the database where they are executed originally. An online backup statement uses the <code class="codeph">BEGIN</code> <code class="codeph">BACKUP</code> and <code class="codeph">END</code> <code class="codeph">BACKUP</code> clauses in an <code class="codeph">ALTER</code> <code class="codeph">TABLESPACE</code> or <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> statement.
                  </p>
                  <p>To avoid replicating online backup statements, you can use one of the following strategies:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Include one or more calls to the <code class="codeph">DBMS_STREAMS.SET_TAG</code> procedure in your online backup procedures, and set the session tag to a value that will cause the online backup statements to be ignored by a capture process.
                        </p>
                     </li>
                     <li>
                        <p>Use a DDL handler for an apply process to avoid applying the online backup statements.</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-42343FB9-7AD1-4A18-84AA-B96908611951__GUID-89156A94-ABE1-4B0C-B31D-7BBF5FA39A3F">
                     <p class="notep1">Note:</p>
                     <p>If you use Recovery Manager (RMAN) to perform an online backup, then the online backup statements are not used, and there is no need to set Oracle Streams tags for backups.</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-42343FB9-7AD1-4A18-84AA-B96908611951__GUID-3948D180-559F-4D6E-8AE0-DA62C1C9F704">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=BRADV016"><span class="italic">Oracle Database Backup and Recovery User's Guide </span></a>for information about making backups
                     </p>
                  </div>
               </div>
            </div><a id="STREP393"></a><div class="props_rev_3"><a id="GUID-5FD605D0-ADD5-4E22-B976-6CEB0F816900" name="GUID-5FD605D0-ADD5-4E22-B976-6CEB0F816900"></a><h3 id="STREP-GUID-5FD605D0-ADD5-4E22-B976-6CEB0F816900" class="sect3"><span class="enumeration_section">10.4 </span>Tags and an Apply Process
               </h3>
               <div>
                  <p>An apply process generates entries in the redo log of a destination database when it applies DML or DDL changes. For example, if the apply process applies a change that updates a row in a table, then that change is recorded in the redo log at the destination database. You can control the tags in these redo entries by setting the <code class="codeph">apply_tag</code> parameter in the <code class="codeph">CREATE_APPLY</code> or <code class="codeph">ALTER_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package. For example, an apply process can generate redo tags that are equivalent to the hexadecimal value of <code class="codeph">'0'</code> (zero) or <code class="codeph">'1'</code>.
                  </p>
                  <p>The default tag value generated in the redo log by an apply process is <code class="codeph">'00'</code> (double zero). This value is the default tag value for an apply process if you use a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package or the <code class="codeph">CREATE_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to create the apply process. There is nothing special about this value beyond the fact that it is a non-<code class="codeph">NULL</code> value. The fact that it is a non-<code class="codeph">NULL</code> value is important because rules created by the <code class="codeph">DBMS_STREAMS_ADM</code> package by default contain a condition that evaluates to <code class="codeph">TRUE</code> only if the tag is <code class="codeph">NULL</code> in a redo entry or an LCR. You can alter the tag value for an existing apply process using the <code class="codeph">ALTER_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                  </p>
                  <p>Redo entries generated by an apply handler for an apply process have the tag value of the apply process, unless the handler sets the tag to a different value using the <code class="codeph">SET_TAG</code> procedure. If a procedure DML handler, DDL handler, or message handler calls the <code class="codeph">SET_TAG</code> procedure in the <code class="codeph">DBMS_STREAMS</code> package, then any subsequent redo entries generated by the handler will include the tag specified in the <code class="codeph">SET_TAG</code> call, even if the tag for the apply process is different. When the handler exits, any subsequent redo entries generated by the apply process have the tag specified for the apply process.
                  </p>
                  <div class="infoboxnotealso" id="GUID-5FD605D0-ADD5-4E22-B976-6CEB0F816900__GUID-B69487E0-94CF-44FA-B087-5C9F19EABB27">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../strms/oracle-streams-information-consumption.html#STRMS004"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about the apply process
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="oracle-streams-tags.html#GUID-1EB3D6C4-0F12-4AE8-B444-998CC2460677">Tags and Rules Created by the DBMS_STREAMS_ADM Package</a>"</span> for more information about the default tag condition in Oracle Streams rules
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="oracle-streams-tags.html#GUID-03BE0EFB-93E3-4CDE-8CE9-080915B44541">Managing Oracle Streams Tags</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS"><span class="italic">Oracle Database PL/SQL Packages and Types Reference </span></a>for more information about the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS305"><code class="codeph">DBMS_STREAMS_ADM</code></a> package and the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS300"><code class="codeph">DBMS_APPLY_ADM</code></a> package
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="STREP394"></a><div class="props_rev_3"><a id="GUID-DEA16475-320C-4256-A4E0-C341712AF7F7" name="GUID-DEA16475-320C-4256-A4E0-C341712AF7F7"></a><h3 id="STREP-GUID-DEA16475-320C-4256-A4E0-C341712AF7F7" class="sect3"><span class="enumeration_section">10.5 </span>Oracle Streams Tags in a Replication Environment
               </h3>
               <div>
                  <p>In an Oracle Streams environment that includes multiple databases sharing data bidirectionally, you can use tags to avoid <span class="bold">change cycling</span>. Change cycling means sending a change back to the database where it originated. Typically, change cycling should be avoided because it can result in each change going through endless loops back to the database where it originated. Such loops can result in unintended data in the database and tax the networking and computer resources of an environment. By default, Oracle Streams is designed to avoid change cycling.
                  </p>
                  <p>Using tags and appropriate rules for Oracle Streams capture processes, synchronous captures, propagations, and apply processes, you can avoid such change cycles. This section describes common Oracle Streams environments and how you can use tags and rules to avoid change cycling in these environments.</p>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-streams-tags.html#GUID-C5550D57-5B0B-457C-BB4D-F48D36704890">N-Way Replication Environments</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-streams-tags.html#GUID-E5616956-80BD-4C1E-8E94-58C981A524B8">Hub-and-Spoke Replication Environments</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-streams-tags.html#GUID-66059A2F-F9EC-4EE7-97E0-15DEB7A1BDBC">Hub-and-Spoke Replication Environment with Several Extended Secondary Databases</a></p>
                     </li>
                  </ul>
               </div><a id="STREP395"></a><a id="STREP396"></a><a id="STREP131"></a><div class="props_rev_3"><a id="GUID-C5550D57-5B0B-457C-BB4D-F48D36704890" name="GUID-C5550D57-5B0B-457C-BB4D-F48D36704890"></a><h4 id="STREP-GUID-C5550D57-5B0B-457C-BB4D-F48D36704890" class="sect4"><span class="enumeration_section">10.5.1 </span>N-Way Replication Environments
                  </h4>
                  <div>
                     <p>An <span class="bold">n-way replication</span> environment is one in which each database is a source database for every other database, and each database is a destination database of every other database. Each database communicates directly with every other database. 
                     </p>
                     <p>For example, consider an environment that replicates the database objects and data in the <code class="codeph">hrmult</code> schema between three Oracle databases: <code class="codeph">mult1.example.com</code>, <code class="codeph">mult2.example.com</code>, and <code class="codeph">mult3.example.com</code>. DML and DDL changes made to tables in the <code class="codeph">hrmult</code> schema are captured at all three databases in the environment and propagated to each of the other databases in the environment, where changes are applied. <a href="oracle-streams-tags.html#GUID-C5550D57-5B0B-457C-BB4D-F48D36704890__i1007094">Figure 10-1</a> illustrates a sample n-way replication environment.
                     </p>
                     <div class="figure" id="GUID-C5550D57-5B0B-457C-BB4D-F48D36704890__i1007094">
                        <p class="titleinfigure">Figure 10-1 Each Database Is a Source and Destination Database</p><img width="594" src="img/strep066.gif" alt="Description of Figure 10-1 follows" title="Description of Figure 10-1 follows" longdesc="img_text/strep066.html"><br><a href="img_text/strep066.html">Description of "Figure 10-1 Each Database Is a Source and Destination Database"</a></div>
                     <!-- class="figure" -->
                     <p>You can avoid change cycles by configuring such an environment in the following way:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Configure one apply process at each database to generate non-<code class="codeph">NULL</code> redo tags for changes from each source database. If you use a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to create an apply process, then the apply process generates non-<code class="codeph">NULL</code> tags with a value of <code class="codeph">'00'</code> in the redo log by default. In this case, no further action is required for the apply process to generate non-<code class="codeph">NULL</code> tags. 
                           </p>
                           <p>If you use the <code class="codeph">CREATE_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to create an apply process, then do not set the <code class="codeph">apply_tag</code> parameter. Again, the apply process generates non-<code class="codeph">NULL</code> tags with a value of <code class="codeph">'00'</code> in the redo log by default, and no further action is required.
                           </p>
                        </li>
                        <li>
                           <p>Configure the capture process at each database to capture changes only if the tag in the redo entry for the change is <code class="codeph">NULL</code>. You do this by ensuring that each DML rule in the positive rule set used by the capture process has the following condition:
                           </p><pre class="oac_no_warn" dir="ltr">:dml.is_null_tag()='Y'
</pre><p>Each DDL rule should have the following condition:</p><pre class="oac_no_warn" dir="ltr">:ddl.is_null_tag()='Y'
</pre><p>These rule conditions indicate that the capture process captures a change only if the tag for the change is <code class="codeph">NULL</code>. If you use the <code class="codeph">DBMS_STREAMS_ADM</code> package to generate rules, then each rule has such a condition by default.
                           </p>
                        </li>
                     </ul>
                     <p>This configuration prevents change cycling because all of the changes applied by the apply processes are never recaptured (they were captured originally at the source databases). Each database sends all of its changes to the <code class="codeph">hrmult</code> schema to every other database. So, in this environment, no changes are lost, and all databases are synchronized. <a href="oracle-streams-tags.html#GUID-C5550D57-5B0B-457C-BB4D-F48D36704890__i1007114">Figure 10-2</a> illustrates how tags can be used in a database in an n-way replication environment.
                     </p>
                     <div class="figure" id="GUID-C5550D57-5B0B-457C-BB4D-F48D36704890__i1007114">
                        <p class="titleinfigure">Figure 10-2 Tag Use When Each Database Is a Source and Destination Database</p><img width="590" src="img/strep067.gif" alt="Description of Figure 10-2 follows" title="Description of Figure 10-2 follows" longdesc="img_text/strep067.html"><br><a href="img_text/strep067.html">Description of "Figure 10-2 Tag Use When Each Database Is a Source and Destination Database"</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-C5550D57-5B0B-457C-BB4D-F48D36704890__GUID-CDAA1309-3A05-421D-8063-621BDEB24E67">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=STREX004"><span class="italic">Oracle Streams Extended Examples</span></a> for a detailed illustration of this example
                        </p>
                     </div>
                  </div>
               </div><a id="STREP397"></a><a id="STREP398"></a><a id="STREP399"></a><a id="STREP111"></a><div class="props_rev_3"><a id="GUID-E5616956-80BD-4C1E-8E94-58C981A524B8" name="GUID-E5616956-80BD-4C1E-8E94-58C981A524B8"></a><h4 id="STREP-GUID-E5616956-80BD-4C1E-8E94-58C981A524B8" class="sect4"><span class="enumeration_section">10.5.2 </span>Hub-and-Spoke Replication Environments
                  </h4>
                  <div>
                     <p>A <span class="bold">hub-and-spoke replication</span> environment is one in which a primary database, or hub, communicates with secondary databases, or spokes. The spokes do not communicate directly with each other. In a hub-and-spoke replication environment, the spokes might or might not allow changes to the replicated database objects.
                     </p>
                     <p>If the spokes do not allow changes to the replicated database objects, then the primary database captures local changes to the shared data and propagates these changes to all secondary databases, where these changes are applied at each secondary database locally. Change cycling is not possible when none of the secondary databases allow changes to the replicated database objects because changes to the replicated database objects are captured in only one location.</p>
                     <p>If the spokes allow changes to the replicated database objects, then changes are captured, propagated, and applied in the following way:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The primary database captures local changes to the shared data and propagates these changes to all secondary databases, where these changes are applied at each secondary database locally.</p>
                        </li>
                        <li>
                           <p>Each secondary database captures local changes to the shared data and propagates these changes to the primary database only, where these changes are applied at the primary database locally.</p>
                        </li>
                        <li>
                           <p>The primary database applies changes from each secondary database locally. Next, these changes are captured at the primary database and propagated to all secondary databases, except for the one at which the change originated. Each secondary database applies the changes from the other secondary databases locally, after they have gone through the primary database. This configuration is an example of apply forwarding.</p>
                           <p>An alternate scenario might use queue forwarding. If this environment used queue forwarding, then changes from secondary databases that are applied at the primary database are not captured at the primary database. Instead, these changes are forwarded from the queue at the primary database to all secondary databases, except for the one at which the change originated.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-E5616956-80BD-4C1E-8E94-58C981A524B8__GUID-8032F7E6-A0FC-4A87-93BB-5A442C41FBE3">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=STRMS105"><span class="italic">Oracle Streams Concepts and Administration </span></a>for more information about apply forwarding and queue forwarding
                        </p>
                     </div>
                     <p>For example, consider an environment that replicates the database objects and data in the <code class="codeph">hr</code> schema between one primary database named <code class="codeph">ps1.example.com</code> and three secondary databases named <code class="codeph">ps2.example.com</code>, <code class="codeph">ps3.example.com</code>, and <code class="codeph">ps4.example.com</code>. DML and DDL changes made to tables in the <code class="codeph">hr</code> schema are captured at the primary database and at the three secondary databases in the environment. Next, these changes are propagated and applied as described previously. The environment uses apply forwarding, not queue forwarding, to share data between the secondary databases through the primary database. <a href="oracle-streams-tags.html#GUID-E5616956-80BD-4C1E-8E94-58C981A524B8__I1007156">Figure 10-3</a> illustrates a sample environment which has one primary database and multiple secondary databases.
                     </p>
                     <div class="figure" id="GUID-E5616956-80BD-4C1E-8E94-58C981A524B8__I1007156">
                        <p class="titleinfigure">Figure 10-3 Primary Database Sharing Data with Several Secondary Databases</p><img src="img/strep030.gif" alt="Description of Figure 10-3 follows" title="Description of Figure 10-3 follows" longdesc="img_text/strep030.html"><br><a href="img_text/strep030.html">Description of "Figure 10-3 Primary Database Sharing Data with Several Secondary Databases"</a></div>
                     <!-- class="figure" -->
                     <p>You can avoid change cycles by configuring the environment in the following way:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Configure each apply process at the primary database <code class="codeph">ps1.example.com</code> to generate non-<code class="codeph">NULL</code> redo tags that indicate the site from which it is receiving changes. In this environment, the primary database has at least one apply process for each secondary database from which it receives changes. For example, if an apply process at the primary database receives changes from the <code class="codeph">ps2.example.com</code> secondary database, then this apply process can generate a raw value that is equivalent to the hexadecimal value <code class="codeph">'2'</code> for all changes it applies. You do this by setting the <code class="codeph">apply_tag</code> parameter in the <code class="codeph">CREATE_APPLY</code> or <code class="codeph">ALTER_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to the non-<code class="codeph">NULL</code> value.
                           </p>
                           <p>For example, run the following procedure to create an apply process that generates redo entries with tags that are equivalent to the hexadecimal value&nbsp;<code class="codeph">'2'</code>:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_APPLY_ADM.CREATE_APPLY(
    queue_name      =&gt; 'strmadmin.streams_queue',
    apply_name      =&gt; 'apply_ps2',
    rule_set_name   =&gt; 'strmadmin.apply_rules_ps2',
    apply_tag       =&gt; HEXTORAW('2'),
    apply_captured  =&gt; TRUE);
END;
/
</pre></li>
                        <li>
                           <p>Configure the apply process at each secondary database to generate non-<code class="codeph">NULL</code> redo tags. The exact value of the tags is irrelevant if it is non-<code class="codeph">NULL</code>. In this environment, each secondary database has one apply process that applies changes from the primary database.
                           </p>
                           <p>If you use a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to create an apply process, then the apply process generates non-<code class="codeph">NULL</code> tags with a value of <code class="codeph">'00'</code> in the redo log by default. In this case, no further action is required for the apply process to generate non-<code class="codeph">NULL</code> tags. 
                           </p>
                           <p>For example, assuming no apply processes exist at the secondary databases, run the <code class="codeph">ADD_SCHEMA_RULES</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package at each secondary database to create an apply process that generates non-<code class="codeph">NULL</code> redo entries with tags that are equivalent to the hexadecimal value <code class="codeph">'00'</code>:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.ADD_SCHEMA_RULES(
    schema_name     =&gt; 'hr',   
    streams_type    =&gt; 'apply',
    streams_name    =&gt; 'apply',
    queue_name      =&gt; 'strmadmin.streams_queue',
&nbsp;&nbsp;&nbsp; include_dml &nbsp;&nbsp;&nbsp;&nbsp;=&gt; TRUE,
&nbsp;&nbsp;  include_ddl &nbsp;&nbsp;&nbsp; =&gt; TRUE,
    source_database =&gt; 'ps1.example.com',
    inclusion_rule  =&gt; TRUE);
END;
/
</pre></li>
                        <li>
                           <p>Configure the capture process at the primary database to capture changes to the shared data regardless of the tags. You do this by setting the <code class="codeph">include_tagged_lcr</code> parameter to <code class="codeph">TRUE</code> when you run one of the procedures that generate capture process rules in the <code class="codeph">DBMS_STREAMS_ADM</code> package. If you use the <code class="codeph">DBMS_RULE_ADM</code> package to create rules for the capture process at the primary database, then ensure that the rules do not contain <code class="codeph">is_null_tag</code> conditions, because these conditions involve tags in the redo&nbsp;log.
                           </p>
                           <p>For example, run the following procedure at the primary database to produce one DML capture process rule and one DDL capture process rule that each have a condition that evaluates to <code class="codeph">TRUE</code> for changes in the <code class="codeph">hr</code> schema, regardless of the tag for the change:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.ADD_SCHEMA_RULES(
    schema_name         =&gt; 'hr',   
    streams_type        =&gt; 'capture',
    streams_name        =&gt; 'capture',
    queue_name          =&gt; 'strmadmin.streams_queue',
    include_tagged_lcr  =&gt; TRUE, <span class="bold">-- Note parameter setting</span>
    include_dml         =&gt; TRUE,
    include_ddl         =&gt; TRUE,
    inclusion_rule      =&gt; TRUE);
END;
/
</pre></li>
                        <li>
                           <p>Configure the capture process at each secondary database to capture changes only if the tag in the redo entry for the change is <code class="codeph">NULL</code>. You do this by ensuring that each DML rule in the positive rule set used by the capture process at the secondary database has the following condition:
                           </p><pre class="oac_no_warn" dir="ltr">:dml.is_null_tag()='Y'
</pre><p>DDL rules should have the following condition:</p><pre class="oac_no_warn" dir="ltr">:ddl.is_null_tag()='Y'
</pre><p>These rules indicate that the capture process captures a change only if the tag for the change is <code class="codeph">NULL</code>. If you use the <code class="codeph">DBMS_STREAMS_ADM</code> package to generate rules, then each rule has one of these conditions by default. If you use the <code class="codeph">DBMS_RULE_ADM</code> package to create rules for the capture process at a secondary database, then ensure that each rule contains one of these conditions.
                           </p>
                        </li>
                        <li>
                           <p>Configure one propagation from the queue at the primary database to the queue at each secondary database. Each propagation should use a positive rule set with rules that instruct the propagation to propagate all LCRs in the queue at the primary database to the queue at the secondary database, except for changes that originated at the secondary database.</p>
                           <p>For example, if a propagation propagates changes to the secondary database <code class="codeph">ps2.example.com</code>, whose tags are equivalent to the hexadecimal value&nbsp;<code class="codeph">'2'</code>, then the rules for the propagation should propagate all LCRs relating to the <code class="codeph">hr</code> schema to the secondary database, except for LCRs with a tag of <code class="codeph">'2'</code>. For row LCRs, such rules should include the following condition:
                           </p><pre class="oac_no_warn" dir="ltr">:dml.get_tag() IS NULL OR :dml.get_tag()!=HEXTORAW('2')
</pre><p>For DDL LCRs, such rules should include the following condition:</p><pre class="oac_no_warn" dir="ltr">:ddl.get_tag() IS NULL OR :ddl.get_tag()!=HEXTORAW('2')
</pre><p>Alternatively, you can add rules to the negative rule set for the propagation so that the propagation discards LCRs with the tag value. For row LCRs, such rules should include the following condition:</p><pre class="oac_no_warn" dir="ltr">:dml.get_tag()=HEXTORAW('2')
</pre><p>For DDL LCRs, such rules should include the following condition:</p><pre class="oac_no_warn" dir="ltr">:ddl.get_tag()=HEXTORAW('2')
</pre><p>You can use the <code class="codeph">and_condition</code> parameter in a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add these conditions to system-created rules, or you can use the <code class="codeph">CREATE_RULE</code> procedure in the <code class="codeph">DBMS_RULE_ADM</code> package to create rules with these conditions. When you specify the condition in the <code class="codeph">and_condition</code> parameter, specify <code class="codeph">:lcr</code> instead of <code class="codeph">:dml</code> or <code class="codeph">:ddl</code>. See<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=STRMS139"><span class="italic"> Oracle Streams Concepts and Administration </span></a>for more information about the <code class="codeph">and_condition</code> parameter.
                           </p>
                        </li>
                        <li>
                           <p>Configure one propagation from the queue at each secondary database to the queue at the primary database. A queue at one of the secondary databases contains only local changes made by user sessions and applications at the secondary database, not changes made by an apply process. Therefore, no further configuration is necessary for these propagations.</p>
                        </li>
                     </ul>
                     <p>This configuration prevents change cycling in the following way:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Changes that originated at a secondary database are never propagated back to that secondary database.</p>
                        </li>
                        <li>
                           <p>Changes that originated at the primary database are never propagated back to the primary database. </p>
                        </li>
                        <li>
                           <p>All changes made to the shared data at any database in the environment are propagated to every other database in the environment. </p>
                        </li>
                     </ul>
                     <p>So, in this environment, no changes are lost, and all databases are synchronized.</p>
                     <p><a href="oracle-streams-tags.html#GUID-E5616956-80BD-4C1E-8E94-58C981A524B8__I1007229">Figure 10-4</a> illustrates how tags are used at the primary database <code class="codeph">ps1.example.com</code>. 
                     </p>
                     <div class="figure" id="GUID-E5616956-80BD-4C1E-8E94-58C981A524B8__I1007229">
                        <p class="titleinfigure">Figure 10-4 Tags Used at the Primary Database</p><img src="img/strep065.gif" width="550" alt="Description of Figure 10-4 follows" title="Description of Figure 10-4 follows" longdesc="img_text/strep065.html"><br><a href="img_text/strep065.html">Description of "Figure 10-4 Tags Used at the Primary Database"</a></div>
                     <!-- class="figure" -->
                     <p><a href="oracle-streams-tags.html#GUID-E5616956-80BD-4C1E-8E94-58C981A524B8__I1007239">Figure 10-5</a> illustrates how tags are used at one of the secondary databases (<code class="codeph">ps2.example.com</code>).
                     </p>
                     <div class="figure" id="GUID-E5616956-80BD-4C1E-8E94-58C981A524B8__I1007239">
                        <p class="titleinfigure">Figure 10-5 Tags Used at a Secondary Database</p><img src="img/strep028.gif" width="528" alt="Description of Figure 10-5 follows" title="Description of Figure 10-5 follows" longdesc="img_text/strep028.html"><br><a href="img_text/strep028.html">Description of "Figure 10-5 Tags Used at a Secondary Database"</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-E5616956-80BD-4C1E-8E94-58C981A524B8__GUID-17D0F8F5-B47C-4EBA-A589-5D356AAB3D1B">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-73C17827-8380-4F88-9FA4-F0CBE866D519">About Hub-And-Spoke Replication Environments</a>"</span></p>
                     </div>
                  </div>
               </div><a id="STREP401"></a><a id="STREP400"></a><div class="props_rev_3"><a id="GUID-66059A2F-F9EC-4EE7-97E0-15DEB7A1BDBC" name="GUID-66059A2F-F9EC-4EE7-97E0-15DEB7A1BDBC"></a><h4 id="STREP-GUID-66059A2F-F9EC-4EE7-97E0-15DEB7A1BDBC" class="sect4"><span class="enumeration_section">10.5.3 </span>Hub-and-Spoke Replication Environment with Several Extended Secondary Databases
                  </h4>
                  <div>
                     <p>In this environment, one primary database shares data with several secondary databases, but the secondary databases have other secondary databases connected to them, which will be called <span class="italic">remote secondary</span> databases. This environment is an extension of the environment described in <span class="q">"<a href="oracle-streams-tags.html#GUID-E5616956-80BD-4C1E-8E94-58C981A524B8">Hub-and-Spoke Replication Environments</a>"</span>.
                     </p>
                     <p>If a remote secondary database allows changes to the replicated database objects, then the remote secondary database does not share data directly with the primary database. Instead, it shares data indirectly with the primary database through a secondary database. So, the shared data exists at the primary database, at each secondary database, and at each remote secondary database. Changes made at any of these databases can be captured and propagated to all of the other databases. <a href="oracle-streams-tags.html#GUID-66059A2F-F9EC-4EE7-97E0-15DEB7A1BDBC__i1007258">Figure 10-6</a> illustrates an environment with one primary database and multiple extended secondary databases.
                     </p>
                     <div class="figure" id="GUID-66059A2F-F9EC-4EE7-97E0-15DEB7A1BDBC__i1007258">
                        <p class="titleinfigure">Figure 10-6 Primary Database and Several Extended Secondary Databases</p><img width="477" src="img/strep024.gif" alt="Description of Figure 10-6 follows" title="Description of Figure 10-6 follows" longdesc="img_text/strep024.html"><br><a href="img_text/strep024.html">Description of "Figure 10-6 Primary Database and Several Extended Secondary Databases"</a></div>
                     <!-- class="figure" -->
                     <p>In such an environment, you can avoid change cycling in the following way:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Configure the primary database in the same way that it is configured in the example described in <span class="q">"<a href="oracle-streams-tags.html#GUID-E5616956-80BD-4C1E-8E94-58C981A524B8">Hub-and-Spoke Replication Environments</a>"</span>.
                           </p>
                        </li>
                        <li>
                           <p>Configure each remote secondary database similar to the way that each secondary database is configured in the example described in <span class="q">"<a href="oracle-streams-tags.html#GUID-E5616956-80BD-4C1E-8E94-58C981A524B8">Hub-and-Spoke Replication Environments</a>"</span>. The only difference is that the remote secondary databases share data directly with secondary databases, not the primary database.
                           </p>
                        </li>
                        <li>
                           <p>At each secondary database, configure one apply process to apply changes from the primary database with a redo tag value that is equivalent to the hexadecimal value <code class="codeph">'00'</code>. This value is the default tag value for an apply process.
                           </p>
                        </li>
                        <li>
                           <p>At each secondary database, configure one apply process to apply changes from each of its remote secondary databases with a redo tag value that is unique for the remote secondary database.</p>
                        </li>
                        <li>
                           <p>Configure the capture process at each secondary database to capture all changes to the shared data in the redo log, regardless of the tag value for the changes.</p>
                        </li>
                        <li>
                           <p>Configure one propagation from the queue at each secondary database to the queue at the primary database. The propagation should use a positive rule set with rules that instruct the propagation to propagate all LCRs in the queue at the secondary database to the queue at the primary database, except for changes that originated at the primary database. You do this by adding a condition to the rules that evaluates to <code class="codeph">TRUE</code> only if the tag in the LCR does not equal <code class="codeph">'00'</code>. For example, enter a condition similar to the following for row&nbsp;LCRs:
                           </p><pre class="oac_no_warn" dir="ltr">:dml.get_tag() IS NULL OR :dml.get_tag()!=HEXTORAW('00')
</pre><p>You can use the <code class="codeph">and_condition</code> parameter in a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add this condition to system-created rules, or you can use the <code class="codeph">CREATE_RULE</code> procedure in the <code class="codeph">DBMS_RULE_ADM</code> package to create rules with this condition. When you specify the condition in the <code class="codeph">and_condition</code> parameter, specify <code class="codeph">:lcr</code> instead of <code class="codeph">:dml</code> or <code class="codeph">:ddl</code>. See<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=STRMS139"><span class="italic"> Oracle Streams Concepts and Administration </span></a>for more information about the <code class="codeph">and_condition</code> parameter.
                           </p>
                        </li>
                        <li>
                           <p>Configure one propagation from the queue at each secondary database to the queue at each remote secondary database. Each propagation should use a positive rule set with rules that instruct the propagation to propagate all LCRs in the queue at the secondary database to the queue at the remote secondary database, except for changes that originated at the remote secondary database. You do this by adding a condition to the rules that evaluates to <code class="codeph">TRUE</code> only if the tag in the LCR does not equal the tag value for the remote secondary database. 
                           </p>
                           <p>For example, if the tag value of a remote secondary database is equivalent to the hexadecimal value <code class="codeph">'19'</code>, then enter a condition similar to the following for row LCRs:
                           </p><pre class="oac_no_warn" dir="ltr">:dml.get_tag() IS NULL OR :dml.get_tag()!=HEXTORAW('19')
</pre><p>You can use the <code class="codeph">and_condition</code> parameter in a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add this condition to system-created rules, or you can use the <code class="codeph">CREATE_RULE</code> procedure in the <code class="codeph">DBMS_RULE_ADM</code> package to create rules with this condition. When you specify the condition in the <code class="codeph">and_condition</code> parameter, specify <code class="codeph">:lcr</code> instead of <code class="codeph">:dml</code> or <code class="codeph">:ddl</code>. See<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=STRMS139"><span class="italic"> Oracle Streams Concepts and Administration </span></a>for more information about the <code class="codeph">and_condition</code> parameter.
                           </p>
                        </li>
                     </ul>
                     <p>By configuring the environment in this way, you prevent change cycling, and no changes originating at any database are lost.</p>
                     <div class="infoboxnotealso" id="GUID-66059A2F-F9EC-4EE7-97E0-15DEB7A1BDBC__GUID-D7F8633E-B1E0-48B0-B0F0-A66BC2B4F98A">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-73C17827-8380-4F88-9FA4-F0CBE866D519">About Hub-And-Spoke Replication Environments</a>"</span></p>
                     </div>
                  </div>
               </div>
            </div><a id="STREP127"></a><div class="props_rev_3"><a id="GUID-03BE0EFB-93E3-4CDE-8CE9-080915B44541" name="GUID-03BE0EFB-93E3-4CDE-8CE9-080915B44541"></a><h3 id="STREP-GUID-03BE0EFB-93E3-4CDE-8CE9-080915B44541" class="sect3"><span class="enumeration_section">10.6 </span>Managing Oracle Streams Tags
               </h3>
               <div>
                  <p>You can set or get the value of the tags generated by the current session or by an apply process. The following sections describe how to set and get tag values.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-streams-tags.html#GUID-CAC7C09B-FE65-4274-8BC1-E3692F1995DD">Managing Oracle Streams Tags for the Current Session</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-streams-tags.html#GUID-AE339D0B-8095-4A19-9E4D-C28285E638AD">Managing Oracle Streams Tags for an Apply Process</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-03BE0EFB-93E3-4CDE-8CE9-080915B44541__GUID-4F178B4D-1EE2-443A-9ED9-C91B5D78FF4B">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="oracle-streams-tags.html#GUID-278F0DD2-2E16-4049-8506-E23D263ABDBD">Monitoring Oracle Streams Tags</a>"</span></p>
                  </div>
               </div><a id="STREP402"></a><div class="props_rev_3"><a id="GUID-CAC7C09B-FE65-4274-8BC1-E3692F1995DD" name="GUID-CAC7C09B-FE65-4274-8BC1-E3692F1995DD"></a><h4 id="STREP-GUID-CAC7C09B-FE65-4274-8BC1-E3692F1995DD" class="sect4"><span class="enumeration_section">10.6.1 </span>Managing Oracle Streams Tags for the Current Session
                  </h4>
                  <div>
                     <p>The following topics contain instructions for setting and getting the tag for the current session:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-streams-tags.html#GUID-648CAF13-AD3E-46E0-9F1A-C47ACDDDEA0E">Setting the Tag Values Generated by the Current Session</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-streams-tags.html#GUID-4B5245A6-9E33-42D4-B68A-E6548FBF74DA">Getting the Tag Value for the Current Session</a></p>
                        </li>
                     </ul>
                  </div><a id="STREP120"></a><div class="props_rev_3"><a id="GUID-648CAF13-AD3E-46E0-9F1A-C47ACDDDEA0E" name="GUID-648CAF13-AD3E-46E0-9F1A-C47ACDDDEA0E"></a><h5 id="STREP-GUID-648CAF13-AD3E-46E0-9F1A-C47ACDDDEA0E" class="sect5"><span class="enumeration_section">10.6.1.1 </span>Setting the Tag Values Generated by the Current Session
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can set the tag for all redo entries generated by the current session using the <code class="codeph">SET_TAG</code> procedure in the <code class="codeph">DBMS_STREAMS</code> package. For example, to set the tag to the hexadecimal value of <code class="codeph">'1D'</code> in the current session, run the following procedure:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
   DBMS_STREAMS.SET_TAG(
      tag  =&gt;  HEXTORAW('1D'));
END;
/
</pre><p>After running this procedure, each redo entry generated by DML or DDL statements in the current session will have a tag value of <code class="codeph">1D</code>. Running this procedure affects only the current session.
                           </p>
                           <p>The following are considerations for the <code class="codeph">SET_TAG</code> procedure:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>This procedure is not transactional. That is, the effects of <code class="codeph">SET_TAG</code> cannot be rolled back.
                                 </p>
                              </li>
                              <li>
                                 <p>If the <code class="codeph">SET_TAG</code> procedure is run to set a non-<code class="codeph">NULL</code> session tag before a data dictionary build has been performed on the database, then the redo entries for a transaction that started before the dictionary build might not include the specified tag value for the session. Therefore, perform a data dictionary build before using the <code class="codeph">SET_TAG</code> procedure in a session. A data dictionary build happens when the <code class="codeph">DBMS_CAPTURE_ADM.BUILD</code> procedure is run. The <code class="codeph">BUILD</code> procedure can be run automatically when a capture process is created.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="STREP403"></a><div class="props_rev_3"><a id="GUID-4B5245A6-9E33-42D4-B68A-E6548FBF74DA" name="GUID-4B5245A6-9E33-42D4-B68A-E6548FBF74DA"></a><h5 id="STREP-GUID-4B5245A6-9E33-42D4-B68A-E6548FBF74DA" class="sect5"><span class="enumeration_section">10.6.1.2 </span>Getting the Tag Value for the Current Session
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can get the tag for all redo entries generated by the current session using the <code class="codeph">GET_TAG</code> procedure in the <code class="codeph">DBMS_STREAMS</code> package. For example, to get the hexadecimal value of the tags generated in the redo entries for the current session, run the following procedure:
                           </p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON
DECLARE
   raw_tag RAW(2048);
BEGIN
   raw_tag := DBMS_STREAMS.GET_TAG();
   DBMS_OUTPUT.PUT_LINE('Tag Value = ' || RAWTOHEX(raw_tag));
END;
/
</pre><p>You can also display the tag value for the current session by querying the <code class="codeph">DUAL</code> view:
                           </p><pre class="oac_no_warn" dir="ltr">SELECT DBMS_STREAMS.GET_TAG FROM DUAL;</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="STREP119"></a><div class="props_rev_3"><a id="GUID-AE339D0B-8095-4A19-9E4D-C28285E638AD" name="GUID-AE339D0B-8095-4A19-9E4D-C28285E638AD"></a><h4 id="STREP-GUID-AE339D0B-8095-4A19-9E4D-C28285E638AD" class="sect4"><span class="enumeration_section">10.6.2 </span>Managing Oracle Streams Tags for an Apply Process
                  </h4>
                  <div>
                     <p>The following topics contain instructions for setting and removing the tag for an apply process:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-streams-tags.html#GUID-3A09D27C-2AA9-4FC5-AFB7-9112AB9CCB1F">Setting the Tag Values Generated by an Apply Process</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-streams-tags.html#GUID-5AF40531-B488-423C-9071-22018D960B04">Removing the Apply Tag for an Apply Process</a></p>
                        </li>
                     </ul>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-AE339D0B-8095-4A19-9E4D-C28285E638AD__GUID-85A10EF0-8343-4879-9391-ACF86784D4A0">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="oracle-streams-tags.html#GUID-5FD605D0-ADD5-4E22-B976-6CEB0F816900">Tags and an Apply Process</a>"</span> for conceptual information about how tags are used by an apply process and apply handlers
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=STRMS004"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="STREP404"></a><div class="props_rev_3"><a id="GUID-3A09D27C-2AA9-4FC5-AFB7-9112AB9CCB1F" name="GUID-3A09D27C-2AA9-4FC5-AFB7-9112AB9CCB1F"></a><h5 id="STREP-GUID-3A09D27C-2AA9-4FC5-AFB7-9112AB9CCB1F" class="sect5"><span class="enumeration_section">10.6.2.1 </span>Setting the Tag Values Generated by an Apply Process
                     </h5>
                     <div>
                        <div class="section">
                           <p>An apply process generates redo entries when it applies changes to a database or invokes handlers. You can set the default tag for all redo entries generated by an apply process when you create the apply process using the <code class="codeph">CREATE_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package, or when you alter an existing apply process using the <code class="codeph">ALTER_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package. In both of these procedures, set the <code class="codeph">apply_tag</code> parameter to the value you want to specify for the tags generated by the apply process.
                           </p>
                           <p>For example, to set the value of the tags generated in the redo log by an existing apply process named <code class="codeph">strep01_apply</code> to the hexadecimal value of <code class="codeph">'7'</code>, run the following procedure:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_APPLY_ADM.ALTER_APPLY(
     apply_name  =&gt;  'strep01_apply',
     apply_tag   =&gt;  HEXTORAW('7'));
END;
/
</pre><p>After running this procedure, each redo entry generated by the apply process will have a tag value of <code class="codeph">7</code>.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="STREP405"></a><div class="props_rev_3"><a id="GUID-5AF40531-B488-423C-9071-22018D960B04" name="GUID-5AF40531-B488-423C-9071-22018D960B04"></a><h5 id="STREP-GUID-5AF40531-B488-423C-9071-22018D960B04" class="sect5"><span class="enumeration_section">10.6.2.2 </span>Removing the Apply Tag for an Apply Process
                     </h5>
                     <div>
                        <div class="section">
                           <p>You remove the apply tag for an apply process by setting the <code class="codeph">remove_apply_tag</code> parameter to <code class="codeph">TRUE</code> in the <code class="codeph">ALTER_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package. Removing the apply tag means that each redo entry generated by the apply process has a <code class="codeph">NULL</code> tag. For example, the following procedure removes the apply tag from an apply process named <code class="codeph">strep01_apply</code>.
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_APPLY_ADM.ALTER_APPLY(
    apply_name       =&gt; 'strep01_apply',
    remove_apply_tag =&gt; TRUE);
END;
/</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="STREP159"></a><div class="props_rev_3"><a id="GUID-278F0DD2-2E16-4049-8506-E23D263ABDBD" name="GUID-278F0DD2-2E16-4049-8506-E23D263ABDBD"></a><h3 id="STREP-GUID-278F0DD2-2E16-4049-8506-E23D263ABDBD" class="sect3"><span class="enumeration_section">10.7 </span>Monitoring Oracle Streams Tags
               </h3>
               <div>
                  <p>The following sections contain queries that you can run to display the Oracle Streams tag for the current session and the default tag for each apply process:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-streams-tags.html#GUID-F6B83A19-CA88-4722-B1E8-7758CCF3D48D">Displaying the Tag Value for the Current Session</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-streams-tags.html#GUID-EEE0C964-0223-4F7D-9EA9-30D9A9FAB29B">Displaying the Default Tag Value for Each Apply Process</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-278F0DD2-2E16-4049-8506-E23D263ABDBD__GUID-F9B522D8-456A-4E03-B0A2-FF2BB4DC9066">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="oracle-streams-tags.html#GUID-03BE0EFB-93E3-4CDE-8CE9-080915B44541">Managing Oracle Streams Tags</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS"><span class="italic">Oracle Database PL/SQL Packages and Types Reference </span></a>for more information about the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS332"><code class="codeph">DBMS_STREAMS</code></a> package
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="STREP406"></a><div class="props_rev_3"><a id="GUID-F6B83A19-CA88-4722-B1E8-7758CCF3D48D" name="GUID-F6B83A19-CA88-4722-B1E8-7758CCF3D48D"></a><h4 id="STREP-GUID-F6B83A19-CA88-4722-B1E8-7758CCF3D48D" class="sect4"><span class="enumeration_section">10.7.1 </span>Displaying the Tag Value for the Current Session
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can display the tag value generated in all redo entries for the current session by querying the <code class="codeph">DUAL</code> view:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT DBMS_STREAMS.GET_TAG FROM DUAL;
</pre><p>Your output looks similar to the following: </p><pre class="oac_no_warn" dir="ltr">GET_TAG
--------------------------------------------------------------------------------
1D
</pre><p>You can also determine the tag for a session by calling the <code class="codeph">DBMS_STREAMS.GET_TAG</code> function.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP407"></a><div class="props_rev_3"><a id="GUID-EEE0C964-0223-4F7D-9EA9-30D9A9FAB29B" name="GUID-EEE0C964-0223-4F7D-9EA9-30D9A9FAB29B"></a><h4 id="STREP-GUID-EEE0C964-0223-4F7D-9EA9-30D9A9FAB29B" class="sect4"><span class="enumeration_section">10.7.2 </span>Displaying the Default Tag Value for Each Apply Process
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can get the default tag for all redo entries generated by each apply process by querying for the <code class="codeph">APPLY_TAG</code> value in the <code class="codeph">DBA_APPLY</code> data dictionary view. For example, to get the hexadecimal value of the default tag generated in the redo entries by each apply process, run the following query:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN APPLY_NAME HEADING 'Apply Process Name' FORMAT A30
COLUMN APPLY_TAG HEADING 'Tag Value' FORMAT A30

SELECT APPLY_NAME, APPLY_TAG FROM DBA_APPLY;
</pre><p>Your output looks similar to the following: </p><pre class="oac_no_warn" dir="ltr">Apply Process Name             Tag Value
------------------------------ ------------------------------
APPLY_FROM_MULT2               00
APPLY_FROM_MULT3               00
</pre><p>A handler or custom rule-based transformation function associated with an apply process can get the tag by calling the <code class="codeph">DBMS_STREAMS.GET_TAG</code> function.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>