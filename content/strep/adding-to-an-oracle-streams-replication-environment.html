<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Adding to an Oracle Streams Replication Environment</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Replication Administrator’s Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Replication Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="streams-replication-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-01-24T23:25:23-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83780-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="flexible-oracle-streams-replication-configuration.html" title="Previous" type="text/html">
      <link rel="next" href="configuring-implicit-capture.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Streams Replication Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="STREP">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="flexible-oracle-streams-replication-configuration.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="configuring-implicit-capture.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Replication Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-oracle-streams-replication.html" property="item" typeof="WebPage"><span property="name">    Configuring Oracle Streams Replication </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Adding to an Oracle Streams Replication Environment</li>
            </ol>
            <a id="GUID-2A81F5DD-EAF9-4670-BD1F-C4D3C555C344" name="GUID-2A81F5DD-EAF9-4670-BD1F-C4D3C555C344"></a><a id="STREP058"></a>
            
            <h2 id="STREP-GUID-2A81F5DD-EAF9-4670-BD1F-C4D3C555C344" class="sect2"><span class="enumeration_chapter">4 </span> Adding to an Oracle Streams Replication Environment
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d25932e100" class="indexterm-anchor"></a><a id="d25932e104" class="indexterm-anchor"></a>This chapter contains instructions for adding database objects and databases to an existing Oracle Streams replication environment.
               </p>
               <p>This chapter contains these topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-D483292F-A3E1-44BA-A49C-6D1027019D87">About Adding to an Oracle Streams Replication Environment</a></p>
                  </li>
                  <li>
                     <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-739C6E78-65A2-45DE-A564-3C65E2F36D3A">Adding Multiple Components Using a Single Procedure</a></p>
                  </li>
                  <li>
                     <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-C3B523BC-8E8B-4319-A29A-4DBA385C6457">Adding Components Individually in Multiple Steps</a></p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-2A81F5DD-EAF9-4670-BD1F-C4D3C555C344__GUID-12B58AE7-DCF7-4F25-B788-2FFE1A59D6DD">
                  <p class="notep1">Note:</p>
                  <p>Certain types of database objects are not supported by Oracle Streams. When you extend an Oracle Streams environment, ensure that no capture process attempts to capture changes to an unsupported database object. Also, ensure that no synchronous capture or apply process attempts to process changes to unsupported columns. To list unsupported database objects and unsupported columns, query the <code class="codeph">DBA_STREAMS_UNSUPPORTED</code> and <code class="codeph">DBA_STREAMS_COLUMNS</code> data dictionary views.
                  </p>
               </div>
               <div class="infoboxnotealso" id="GUID-2A81F5DD-EAF9-4670-BD1F-C4D3C555C344__GUID-014EBBF5-9397-47C6-941C-88CC186B72CE">
                  <p class="notep1">See Also:</p>
                  <p></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="simple-oracle-streams-replication-configuration.html#GUID-19643DBA-4776-4A74-BC66-1979E6903E0A"> Simple Oracle Streams Replication Configuration</a></p>
                     </li>
                     <li>
                        <p><a href="flexible-oracle-streams-replication-configuration.html#GUID-3945B3B9-4EC3-47A0-A095-FB1F80CE5683"> Flexible Oracle Streams Replication Configuration</a></p>
                     </li>
                     <li>
                        <p><a href="../strms/monitoring-other-oracle-streams-components.html#STRMS172"><span class="italic">Oracle Streams Concepts and Administration</span></a> for instructions on determining which database objects are not supported by Oracle Streams
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="STREP610"></a><div class="props_rev_3"><a id="GUID-D483292F-A3E1-44BA-A49C-6D1027019D87" name="GUID-D483292F-A3E1-44BA-A49C-6D1027019D87"></a><h3 id="STREP-GUID-D483292F-A3E1-44BA-A49C-6D1027019D87" class="sect3"><span class="enumeration_section">4.1 </span>About Adding to an Oracle Streams Replication Environment
               </h3>
               <div>
                  <p>Sometimes it is necessary to extend an Oracle Streams replication environment when the needs of your organization change. You can extend an Oracle Streams replication environment by adding database objects or databases.</p>
                  <p>There are three ways to extend an Oracle Streams replication environment:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-822A7BD7-0DEF-4674-9968-7C8E6D035E63">About Using the Setup Streams Replication Wizard or a Single Configuration Procedure</a></p>
                     </li>
                     <li>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-7442BD31-E20C-4816-A28E-81D212238BCB">About Adding the Oracle Streams Components Individually in Multiple Steps</a></p>
                     </li>
                  </ul>
               </div><a id="STREP611"></a><div class="props_rev_3"><a id="GUID-822A7BD7-0DEF-4674-9968-7C8E6D035E63" name="GUID-822A7BD7-0DEF-4674-9968-7C8E6D035E63"></a><h4 id="STREP-GUID-822A7BD7-0DEF-4674-9968-7C8E6D035E63" class="sect4"><span class="enumeration_section">4.1.1 </span>About Using the Setup Streams Replication Wizard or a Single Configuration Procedure
                  </h4>
                  <div>
                     <p>There are two easy ways to extend an Oracle Streams replication environment:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Run the Setup Streams Replication Wizard in Oracle Enterprise Manager Cloud Control</p>
                        </li>
                        <li>
                           <p>Run one of the following procedures in the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS305"><code class="codeph">DBMS_STREAMS_ADM</code></a> package:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The <a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS825"><code class="codeph">MAINTAIN_GLOBAL</code> procedure</a> can add a new database to an environment that replicates changes to all of the database objects in the databases.
                                 </p>
                              </li>
                              <li>
                                 <p>The <a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS826"><code class="codeph">MAINTAIN_SCHEMAS</code> procedure</a> can add one or more new schemas to the existing databases in the replication environment, or it can add a new database that replicates schemas that are currently being replicated.
                                 </p>
                              </li>
                              <li>
                                 <p>The <a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS863"><code class="codeph">MAINTAIN_SIMPLE_TTS</code> procedure</a> can add a new simple tablespace to an existing replication environment, or it can add a new database that replicates a simple tablespace that is currently being replicated.
                                 </p>
                              </li>
                              <li>
                                 <p>The <a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS827"><code class="codeph">MAINTAIN_TABLES</code> procedure</a> can add one or more new tables to the existing databases in the replication environment, or it can add a new database that replicates tables that are currently being replicated.
                                 </p>
                              </li>
                              <li>
                                 <p>The <a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS864"><code class="codeph">MAINTAIN_TTS</code> procedure</a> can add a new set of tablespaces to an existing replication environment, or it can add a new database that replicates a set of tablespaces that are currently being replicated.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>To use either of these methods to extend an Oracle Streams replication environment, the environment must meet the following conditions:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>It must be a two-database or hub-and-spoke replication environment that was configured by the Setup Streams Replication Wizard or by one of the configuration procedures in the <code class="codeph">DBMS_STREAMS_ADM</code> package. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-9EBD9C47-B328-4740-B1CA-3066B5A9EFD6">Decide Which Type of Replication Environment to Configure</a>"</span> for information about these types of replication environments.
                           </p>
                        </li>
                        <li>
                           <p>It cannot use a synchronous capture at any database in the Oracle Streams replication environment. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=STRMS168"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about synchronous capture.
                           </p>
                        </li>
                        <li>
                           <p>If you are adding a database to the environment, then each database that captures changes must use a local capture process. No database can use a downstream capture process. If you are adding one or more database objects to the environment, then the databases can use either local or downstream capture processes. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-413B5DE9-FB2A-48BE-B5A0-815DE614E502">Decide Whether to Configure Local or Downstream Capture for the Source Database</a>"</span> for more information about downstream capture.
                           </p>
                        </li>
                        <li>
                           <p>If you are adding database objects to the replication environment, then the database objects must exist at the database specified in the <code class="codeph">source_database</code> parameter of the configuration procedure.
                           </p>
                        </li>
                     </ul>
                     <p>If your environment meets these conditions, then you can use the Setup Streams Replication Wizard or a single procedure to extend the environment.</p>
                     <p>The following are additional requirements for cases in which the replicated database objects already exist at an intended destination database before you run the wizard or procedure:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If you are adding database objects to the replication environment, and one or more of these database objects exist at a database other than the source database, then meet the following requirements:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Before running the wizard or procedure, ensure that the replicated database objects at each destination database are consistent with replicated database objects at the source database.</p>
                              </li>
                              <li>
                                 <p>After running the wizard or procedure, ensure that the instantiation SCN is set for each replicated database object at each destination database. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-35E458F3-6293-47A8-AB12-FA7720E99AC0">Setting Instantiation SCNs at a Destination Database</a>"</span> and <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-D03E9B4C-F2CD-4C20-B0A4-19ED3CA5AA61">Monitoring Instantiation</a>"</span><span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-D03E9B4C-F2CD-4C20-B0A4-19ED3CA5AA61">Monitoring Instantiation</a>"</span>.
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>If you are adding a database to the replication environment, then any of the database objects that are replicated in the current environment exist at the added database, then meet the following requirements:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Before running the wizard or procedure, ensure that the replicated database objects at each database being added are consistent with replicated database objects at the source database.</p>
                              </li>
                              <li>
                                 <p>After running the wizard or procedure, ensure that the instantiation SCN is set for each replicated database object at the added database. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-35E458F3-6293-47A8-AB12-FA7720E99AC0">Setting Instantiation SCNs at a Destination Database</a>"</span> and <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-D03E9B4C-F2CD-4C20-B0A4-19ED3CA5AA61">Monitoring Instantiation</a>"</span><span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-D03E9B4C-F2CD-4C20-B0A4-19ED3CA5AA61">Monitoring Instantiation</a>"</span>.
                                 </p>
                              </li>
                           </ul>
                        </li>
                     </ul>
                     <p>For instructions about adding to a replication environment using the wizard or a single procedure, see the following documentation:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The Oracle Enterprise Manager Cloud Control online help for instructions about using the Setup Streams Replication Wizard</p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-739C6E78-65A2-45DE-A564-3C65E2F36D3A">Adding Multiple Components Using a Single Procedure</a>"</span> for instructions about using a single procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-822A7BD7-0DEF-4674-9968-7C8E6D035E63__GUID-5D06C2FA-4C1A-41EC-A3AF-68DE37FD949D">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS878"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the procedures in the <code class="codeph">DBMS_STREAMS_ADM</code> chapter
                        </p>
                     </div>
                  </div>
               </div><a id="STREP612"></a><div class="props_rev_3"><a id="GUID-7442BD31-E20C-4816-A28E-81D212238BCB" name="GUID-7442BD31-E20C-4816-A28E-81D212238BCB"></a><h4 id="STREP-GUID-7442BD31-E20C-4816-A28E-81D212238BCB" class="sect4"><span class="enumeration_section">4.1.2 </span>About Adding the Oracle Streams Components Individually in Multiple Steps
                  </h4>
                  <div>
                     <p>If you cannot extend the Oracle Streams replication environment by using the Setup Streams Replication Wizard or a configuration procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package, then you must complete the configuration steps manually. These steps include adding the necessary rules and Oracle Streams components to the environment, and other configuration steps.
                     </p>
                     <p>If you must extend the Oracle Streams replication environment manually, then see the instructions in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-C3B523BC-8E8B-4319-A29A-4DBA385C6457">Adding Components Individually in Multiple Steps</a>"</span>.
                     </p>
                  </div>
               </div>
            </div><a id="STREP613"></a><div class="props_rev_3"><a id="GUID-739C6E78-65A2-45DE-A564-3C65E2F36D3A" name="GUID-739C6E78-65A2-45DE-A564-3C65E2F36D3A"></a><h3 id="STREP-GUID-739C6E78-65A2-45DE-A564-3C65E2F36D3A" class="sect3"><span class="enumeration_section">4.2 </span>Adding Multiple Components Using a Single Procedure
               </h3>
               <div>
                  <p>This section describes adding Oracle Streams components a single PL/SQL procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package. Oracle Streams components include queues, rules, rule sets, capture processes, synchronous captures, propagations, and apply processes.
                  </p>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-CCDEB975-C546-45D1-B243-61AF8FF7C761">Adding Database Objects to a Replication Environment Using a Single Procedure</a></p>
                     </li>
                     <li>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-0EB93CD5-A75B-4B6D-80F5-C9E314AAD161">Adding a Database to a Replication Environment Using a Single Procedure</a></p>
                     </li>
                  </ul>
               </div><a id="STREP614"></a><div class="props_rev_3"><a id="GUID-CCDEB975-C546-45D1-B243-61AF8FF7C761" name="GUID-CCDEB975-C546-45D1-B243-61AF8FF7C761"></a><h4 id="STREP-GUID-CCDEB975-C546-45D1-B243-61AF8FF7C761" class="sect4"><span class="enumeration_section">4.2.1 </span>Adding Database Objects to a Replication Environment Using a Single Procedure
                  </h4>
                  <div>
                     <div class="section">
                        <p>This topic includes an example that uses the <code class="codeph">MAINTAIN_TABLES</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add tables to an existing hub-and-spoke replication environment. When the example is complete, the Oracle Streams replication environment replicates the changes made to the added tables at the databases in the environment.
                        </p>
                        <p>Specifically, the example in this topic extends the replication environment configured in <span class="q">"<a href="simple-oracle-streams-replication-configuration.html#GUID-91D2F532-471A-493D-83F5-D2B0F1C34848">Example That Configures Hub-and-Spoke Replication</a>"</span>. That configuration has the following characteristics:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">hr</code> schema is replicated at the <code class="codeph">hub.example.com</code>, <code class="codeph">spoke1.example.com</code>, and <code class="codeph">spoke2.example.com</code> databases.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">hub.example.com</code> database is the hub database in the hub-and-spoke environment, while the other databases are the spoke databases.
                              </p>
                           </li>
                           <li>
                              <p>The spoke databases allow changes to the replicated schema, and each database has a local capture process to capture these changes.</p>
                           </li>
                           <li>
                              <p>Update conflict handlers are configured for each replicated table at each database to resolve conflicts</p>
                           </li>
                        </ul>
                        <p>This example adds the following tables to the environment:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">oe.orders</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">oe.order_items</code></p>
                           </li>
                        </ul>
                        <p>This example uses the tables in the <code class="codeph">oe</code> sample schema.
                        </p>
                        <div class="infoboxnote" id="GUID-CCDEB975-C546-45D1-B243-61AF8FF7C761__GUID-DC97DFF1-B979-457F-993C-9E52BA33058B">
                           <p class="notep1">Note:</p>
                           <p>Before you use a configuration procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to extend an Oracle Streams replication environment, ensure that the environment meets the conditions described in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-822A7BD7-0DEF-4674-9968-7C8E6D035E63">About Using the Setup Streams Replication Wizard or a Single Configuration Procedure</a>"</span>.
                           </p>
                        </div>
                        <p>Complete the following steps:</p>
                        <ol>
                           <li>
                              <p>Ensure that the following directory objects exist, and remove any files related to the previous configuration from them, including Data Pump export dump files and export log files:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>The <code class="codeph">hub_dir</code> directory object at the <code class="codeph">hub.example.com</code> database.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">spoke1_dir</code> directory object at the <code class="codeph">spoke1.example.com</code> database.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The <code class="codeph">spoke2_dir</code> directory object at the <code class="codeph">spoke2.example.com</code> database.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li id="GUID-CCDEB975-C546-45D1-B243-61AF8FF7C761__BABJGCAJ">
                              <p>Stop the capture process at the hub database in the hub-and-spoke environment.</p>
                              <p>Use the <code class="codeph">STOP_CAPTURE</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package to stop a capture process.
                              </p>
                              <p>In this example, stop the capture process at the <code class="codeph">hub.example.com</code> database. The replicated database objects can remain open to changes while the capture process is stopped. These changes will be captured when the capture process is restarted.
                              </p>
                           </li>
                           <li>
                              <p>In SQL*Plus, run the appropriate configuration procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package at the hub database to add each new database object for each spoke database.
                              </p>
                              <p>You might need to run the procedure several times if the environment has multiple spoke databases. In this example, complete the following steps:</p>
                              <ol type="a">
                                 <li>
                                    <p>Open SQL*Plus and connect to the <code class="codeph">hub.example.com</code> database as the Oracle Streams administrator.
                                    </p>
                                    <p>See <a href="../admqs/getting-started-with-database-administration.html#ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about starting SQL*Plus.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Run the <code class="codeph">MAINTAIN_TABLES</code> procedure to add the <code class="codeph">oe.orders</code> and <code class="codeph">oe.order_items</code> tables for replication between <code class="codeph">hub.example.com</code> and <code class="codeph">spoke1.example.com</code>:
                                    </p><pre class="oac_no_warn" dir="ltr">DECLARE
  tables DBMS_UTILITY.UNCL_ARRAY;
  BEGIN
    tables(1) := 'oe.orders';
    tables(2) := 'oe.order_items';
    DBMS_STREAMS_ADM.MAINTAIN_TABLES(
      table_names                  =&gt; tables,
      source_directory_object      =&gt; 'hub_dir',
      destination_directory_object =&gt; 'spoke1_dir',
      source_database              =&gt; 'hub.example.com',
      destination_database         =&gt; 'spoke1.example.com',
      capture_name                 =&gt; 'capture_hns',
      capture_queue_table          =&gt; 'source_hns_qt',
      capture_queue_name           =&gt; 'source_hns',
      propagation_name             =&gt; 'propagation_spoke1',
      apply_name                   =&gt; 'apply_spoke1',
      apply_queue_table            =&gt; 'destination_spoke1_qt',
      apply_queue_name             =&gt; 'destination_spoke1',
      bi_directional               =&gt; TRUE);
END;
/
</pre><p>The <code class="codeph">MAINTAIN_TABLES</code> procedure can take some time to run because it is performing many configuration tasks. Do not allow data manipulation language (DML) or data definition language (DDL) changes to the specified tables at the destination database while the procedure is running. When the procedure completes, the new database objects are added to the environment, and the capture process that was stopped in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-CCDEB975-C546-45D1-B243-61AF8FF7C761__BABJGCAJ">2</a> is restarted.
                                    </p>
                                    <p>When a configuration procedure is run, information about its progress is recorded in the following data dictionary views: <code class="codeph">DBA_RECOVERABLE_SCRIPT</code>, <code class="codeph">DBA_RECOVERABLE_SCRIPT_PARAMS</code>, <code class="codeph">DBA_RECOVERABLE_SCRIPT_BLOCKS</code>, and <code class="codeph">DBA_RECOVERABLE_SCRIPT_ERRORS</code>. If the procedure stops because it encounters an error, then see <a href="managing-oracle-streams-replication.html#STREP149"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for instructions about using the <code class="codeph">RECOVER_OPERATION</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to recover from these errors.
                                    </p>
                                    <p>The parameter values that specify Oracle Streams component names must be the same as the values specified in the configuration procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package that configured the replication environment. The Oracle Streams component names specified include the capture process name, queue names, queue table names, the propagation name, and the apply process name. In this example, the Oracle Streams component names match the ones specified in <span class="q">"<a href="simple-oracle-streams-replication-configuration.html#GUID-91D2F532-471A-493D-83F5-D2B0F1C34848">Example That Configures Hub-and-Spoke Replication</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Run the <code class="codeph">MAINTAIN_TABLES</code> procedure to add the <code class="codeph">oe.orders</code> and <code class="codeph">oe.order_items</code> tables for replication between <code class="codeph">hub.example.com</code> and <code class="codeph">spoke2.example.com</code>:
                                    </p><pre class="oac_no_warn" dir="ltr">DECLARE
  tables DBMS_UTILITY.UNCL_ARRAY;
  BEGIN
    tables(1) := 'oe.orders';
    tables(2) := 'oe.order_items';
    DBMS_STREAMS_ADM.MAINTAIN_TABLES(
      table_names                  =&gt; tables,
      source_directory_object      =&gt; 'hub_dir',
      destination_directory_object =&gt; 'spoke2_dir',
      source_database              =&gt; 'hub.example.com',
      destination_database         =&gt; 'spoke2.example.com',
      capture_name                 =&gt; 'capture_hns',
      capture_queue_table          =&gt; 'source_hns_qt',
      capture_queue_name           =&gt; 'source_hns',
      propagation_name             =&gt; 'propagation_spoke2',
      apply_name                   =&gt; 'apply_spoke2',
      apply_queue_table            =&gt; 'destination_spoke2_qt',
      apply_queue_name             =&gt; 'destination_spoke2',
      bi_directional               =&gt; TRUE);
END;
/
</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>Set the instantiation SCN for the replicated tables at the spoke databases:</p>
                              <div class="infoboxnote" id="GUID-CCDEB975-C546-45D1-B243-61AF8FF7C761__GUID-90EEA720-1AA4-44FA-9837-1B6EBA9BD831">
                                 <p class="notep1">Note:</p>
                                 <p>This step is required in this example because the replicated tables existed at the spoke databases before the <code class="codeph">MAINTAIN_TABLES</code> procedure was run. If the replicated tables did not exist at the spoke databases before the <code class="codeph">MAINTAIN_TABLES</code> procedure was run, then the procedure sets the instantiation SCN for the replicated tables and this step is not required. Ensure that the data in the shared table is consistent at the source and destination databases when the instantiation SCN is set and that no changes are made to the table at the source database until after the SCN that is used for the instantiation SCN.
                                 </p>
                              </div>
                              <ol type="a">
                                 <li>
                                    <p>In SQL*Plus, connect to the <code class="codeph">hub.example.com</code> database as the Oracle Streams administrator.
                                    </p>
                                    <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Set the instantiation SCN for the <code class="codeph">oe.orders</code> table at the <code class="codeph">spoke1.example.com</code> database:
                                    </p><pre class="oac_no_warn" dir="ltr">DECLARE
  iscn  NUMBER;    -- Variable to hold instantiation SCN value
BEGIN
  iscn := DBMS_FLASHBACK.GET_SYSTEM_CHANGE_NUMBER();
  DBMS_APPLY_ADM.SET_TABLE_INSTANTIATION_SCN@spoke1.example.com(
    source_object_name    =&gt; 'oe.orders',
    source_database_name  =&gt; 'hub.example.com',
    instantiation_scn     =&gt; iscn);
END;
/
</pre></li>
                                 <li>
                                    <p>Set the instantiation SCN for the <code class="codeph">oe.order_items</code> table at the <code class="codeph">spoke1.example.com</code> database:
                                    </p><pre class="oac_no_warn" dir="ltr">DECLARE
  iscn  NUMBER;    -- Variable to hold instantiation SCN value
BEGIN
  iscn := DBMS_FLASHBACK.GET_SYSTEM_CHANGE_NUMBER();
  DBMS_APPLY_ADM.SET_TABLE_INSTANTIATION_SCN@spoke1.example.com(
    source_object_name    =&gt; 'oe.order_items',
    source_database_name  =&gt; 'hub.example.com',
    instantiation_scn     =&gt; iscn);
END;
/
</pre></li>
                                 <li>
                                    <p>Set the instantiation SCN for the <code class="codeph">oe.orders</code> table at the <code class="codeph">spoke2.example.com</code> database:
                                    </p><pre class="oac_no_warn" dir="ltr">DECLARE
  iscn  NUMBER;    -- Variable to hold instantiation SCN value
BEGIN
  iscn := DBMS_FLASHBACK.GET_SYSTEM_CHANGE_NUMBER();
  DBMS_APPLY_ADM.SET_TABLE_INSTANTIATION_SCN@spoke2.example.com(
    source_object_name    =&gt; 'oe.orders',
    source_database_name  =&gt; 'hub.example.com',
    instantiation_scn     =&gt; iscn);
END;
/
</pre></li>
                                 <li>
                                    <p>Set the instantiation SCN for the <code class="codeph">oe.order_items</code> table at the <code class="codeph">spoke2.example.com</code> database:
                                    </p><pre class="oac_no_warn" dir="ltr">DECLARE
  iscn  NUMBER;    -- Variable to hold instantiation SCN value
BEGIN
  iscn := DBMS_FLASHBACK.GET_SYSTEM_CHANGE_NUMBER();
  DBMS_APPLY_ADM.SET_TABLE_INSTANTIATION_SCN@spoke2.example.com(
    source_object_name    =&gt; 'oe.order_items',
    source_database_name  =&gt; 'hub.example.com',
    instantiation_scn     =&gt; iscn);
END;
/
</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>Configure latest time conflict resolution for the <code class="codeph">orders</code> and <code class="codeph">order_items</code> tables in the <code class="codeph">oe</code> schema at the <code class="codeph">hub.example.com</code>, <code class="codeph">spoke1.example.com</code>, and <code class="codeph">spoke2.example.com</code> databases. See <span class="q">"<a href="oracle-streams-conflict-resolution.html#GUID-3D424F00-2100-41F1-B7A0-61273CD464C9">Prebuilt Update Conflict Handlers</a>"</span> for instructions.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP615"></a><div class="props_rev_3"><a id="GUID-0EB93CD5-A75B-4B6D-80F5-C9E314AAD161" name="GUID-0EB93CD5-A75B-4B6D-80F5-C9E314AAD161"></a><h4 id="STREP-GUID-0EB93CD5-A75B-4B6D-80F5-C9E314AAD161" class="sect4"><span class="enumeration_section">4.2.2 </span>Adding a Database to a Replication Environment Using a Single Procedure
                  </h4>
                  <div>
                     <div class="section">
                        <p>This topic includes an example that uses the <code class="codeph">MAINTAIN_SCHEMAS</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add a new spoke database to an existing hub-and-spoke replication environment. When the example is complete, the Oracle Streams replication environment replicates the changes made to the schema with the new database.
                        </p>
                        <p>Specifically, the example in this topic extends the replication environment configured in <span class="q">"<a href="simple-oracle-streams-replication-configuration.html#GUID-91D2F532-471A-493D-83F5-D2B0F1C34848">Example That Configures Hub-and-Spoke Replication</a>"</span>. That configuration has the following characteristics:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">hr</code> schema is replicated at the <code class="codeph">hub.example.com</code>, <code class="codeph">spoke1.example.com</code>, and <code class="codeph">spoke2.example.com</code> databases.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">hub.example.com</code> database is the hub database in the hub-and-spoke environment, while the other databases are the spoke databases.
                              </p>
                           </li>
                           <li>
                              <p>The spoke databases allow changes to the replicated schema, and each database has a local capture process to capture these changes.</p>
                           </li>
                        </ul>
                        <p>This example adds the <code class="codeph">spoke3.example.com</code> database to the environment.
                        </p>
                        <div class="infoboxnote" id="GUID-0EB93CD5-A75B-4B6D-80F5-C9E314AAD161__GUID-837B4B30-EADF-467D-992F-2913512CC273">
                           <p class="notep1">Note:</p>
                           <p>Before you use a configuration procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to extend an Oracle Streams replication environment, ensure that the environment meets the conditions described in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-822A7BD7-0DEF-4674-9968-7C8E6D035E63">About Using the Setup Streams Replication Wizard or a Single Configuration Procedure</a>"</span>.
                           </p>
                        </div>
                        <p>Complete the following steps:</p>
                        <ol>
                           <li>
                              <p>Complete the following tasks to prepare the environment for the new database:</p>
                              <ol type="a">
                                 <li>
                                    <p>Configure network connectivity so that the hub database can communicate with the new spoke database. In this example, configure network connectivity so that the <code class="codeph">hub.example.com</code> database and the <code class="codeph">spoke3.example.com</code> databases can communicate with each other.
                                    </p>
                                    <p>See <a href="../admqs/configuring-the-network-environment.html#ADMQS004"><span class="italic">Oracle Database 2 Day DBA</span></a> for information about configuring network connectivity between databases.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure an Oracle Streams administrator at the new spoke database. In this example, configure an Oracle Streams administrator at the <code class="codeph">spoke3.example.com</code> database. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-EF5A403D-42E5-426D-B654-456E634F53B0">Configuring an Oracle Streams Administrator on All Databases</a>"</span> for instructions. This example assumes that the Oracle Streams administrator is <code class="codeph">strmadmin</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Create a database link from the hub database to new spoke database and from new spoke database to the hub database. In this example, create the following database links:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>From the <code class="codeph">hub.example.com</code> database to the <code class="codeph">spoke3.example.com</code> database. Both the name and the service name of the database link must be <code class="codeph">spoke3.example.com</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>From the <code class="codeph">spoke3.example.com</code> database to the <code class="codeph">hub.example.com</code> database. Both the name and the service name of the database link must be <code class="codeph">hub.example.com</code>.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>Each database link should be created in the Oracle Streams administrator's schema. Also, each database link should connect to the Oracle Streams administrator at the destination database. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-7867112D-DAC3-4693-811E-B1B1052C7847">Configuring Network Connectivity and Database Links</a>"</span> for instructions.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Set initialization parameters properly at the new spoke database. In this example, set initialization parameters properly at the <code class="codeph">spoke3.example.com</code> database. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-F16B954D-35E0-422C-A89F-D3E170BD4505">Setting Initialization Parameters Relevant to Oracle Streams</a>"</span> for instructions.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure the new spoke database to run in <code class="codeph">ARCHIVELOG</code> mode. For a capture process to capture changes generated at a source database, the source database must be running in <code class="codeph">ARCHIVELOG</code> mode. In this example, configure the <code class="codeph">spoke3.example.com</code> database to run in <code class="codeph">ARCHIVELOG</code> mode. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ADMIN008"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about configuring a database to run in <code class="codeph">ARCHIVELOG</code> mode.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the <code class="codeph">hub_dir</code> directory objects exist at the <code class="codeph">hub.example.com</code> database, and remove any files related to the previous configuration from it, including Data Pump export dump files and export log files.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Open SQL*Plus and connect to the <code class="codeph">spoke3.example.com</code> database as the Oracle Streams administrator.
                              </p>
                              <p>See <a href="../admqs/getting-started-with-database-administration.html#ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about starting SQL*Plus.
                              </p>
                           </li>
                           <li>
                              <p><a id="d25932e1530" class="indexterm-anchor"></a>Create a directory object to hold files that will be generated by the <code class="codeph">MAINTAIN_SCHEMAS</code> procedure, including the Data Pump export dump file used for instantiation. The directory object can point to any accessible directory on the computer system. For example, the following statement creates a directory object named <code class="codeph">spoke3_dir</code> that points to the /usr/spoke3_log_files directory:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE DIRECTORY spoke3_dir AS '/usr/spoke3_log_files';
</pre></li>
                           <li id="GUID-0EB93CD5-A75B-4B6D-80F5-C9E314AAD161__BABJAHBD">
                              <p>Stop the capture process at the hub database in the hub-and-spoke environment.</p>
                              <p>Use the <code class="codeph">STOP_CAPTURE</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package to stop a capture process.
                              </p>
                              <p>In this example, stop the capture process at the <code class="codeph">hub.example.com</code> database. The replicated database objects can remain open to changes while the capture process is stopped. These changes will be captured when the capture process is restarted.
                              </p>
                           </li>
                           <li>
                              <p>In SQL*Plus, run the appropriate configuration procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package at the hub database to add the new spoke database.
                              </p>
                              <p>In this example, complete the following steps:</p>
                              <ol type="a">
                                 <li>
                                    <p>Open SQL*Plus and connect to the <code class="codeph">hub.example.com</code> database as the Oracle Streams administrator.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Run the <code class="codeph">MAINTAIN_SCHEMAS</code> procedure to add the <code class="codeph">spoke3.example.com</code> database to the Oracle Streams replication environment:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.MAINTAIN_SCHEMAS(
    schema_names                 =&gt; 'hr',
    source_directory_object      =&gt; 'hub_dir',
    destination_directory_object =&gt; 'spoke3_dir',
    source_database              =&gt; 'hub.example.com',
    destination_database         =&gt; 'spoke3.example.com',
    capture_name                 =&gt; 'capture_hns',
    capture_queue_table          =&gt; 'source_hns_qt',
    capture_queue_name           =&gt; 'source_hns',
    propagation_name             =&gt; 'propagation_spoke3',
    apply_name                   =&gt; 'apply_spoke3',
    apply_queue_table            =&gt; 'destination_spoke3_qt',
    apply_queue_name             =&gt; 'destination_spoke3',
    bi_directional               =&gt; TRUE);
END;
/
</pre><p>The <code class="codeph">MAINTAIN_SCHEMAS</code> procedure can take some time to run because it is performing many configuration tasks. Do not allow data manipulation language (DML) or data definition language (DDL) changes to the database objects in the specified schema at the destination database while the procedure is running. When the procedure completes, the new database objects are added to the environment, and the capture process that was stopped in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-0EB93CD5-A75B-4B6D-80F5-C9E314AAD161__BABJAHBD">4</a> is restarted.
                                    </p>
                                    <p>The parameter values specified in <code class="codeph">capture_name</code>, <code class="codeph">capture_queue_table</code>, and <code class="codeph">capture_queue_name</code> must be the same as the values specified in the configuration procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package that configured the replication environment. In this example, these parameter values match the ones specified in <span class="q">"<a href="simple-oracle-streams-replication-configuration.html#GUID-91D2F532-471A-493D-83F5-D2B0F1C34848">Example That Configures Hub-and-Spoke Replication</a>"</span>.
                                    </p>
                                    <p>When a configuration procedure is run, information about its progress is recorded in the following data dictionary views: <code class="codeph">DBA_RECOVERABLE_SCRIPT</code>, <code class="codeph">DBA_RECOVERABLE_SCRIPT_PARAMS</code>, <code class="codeph">DBA_RECOVERABLE_SCRIPT_BLOCKS</code>, and <code class="codeph">DBA_RECOVERABLE_SCRIPT_ERRORS</code>. If the procedure stops because it encounters an error, then see <a href="managing-oracle-streams-replication.html#STREP149"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for instructions about using the <code class="codeph">RECOVER_OPERATION</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to recover from these errors.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Configure latest time conflict resolution for all of the tables in the <code class="codeph">hr</code> schema at the <code class="codeph">spoke3.example.com</code> database. This schema includes the <code class="codeph">countries</code>, <code class="codeph">departments</code>, <code class="codeph">employees</code>, <code class="codeph">jobs</code>, <code class="codeph">job_history</code>, <code class="codeph">locations</code>, and <code class="codeph">regions</code> tables. See <span class="q">"<a href="oracle-streams-conflict-resolution.html#GUID-3D424F00-2100-41F1-B7A0-61273CD464C9">Prebuilt Update Conflict Handlers</a>"</span> for instructions.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="STREP616"></a><div class="props_rev_3"><a id="GUID-C3B523BC-8E8B-4319-A29A-4DBA385C6457" name="GUID-C3B523BC-8E8B-4319-A29A-4DBA385C6457"></a><h3 id="STREP-GUID-C3B523BC-8E8B-4319-A29A-4DBA385C6457" class="sect3"><span class="enumeration_section">4.3 </span>Adding Components Individually in Multiple Steps
               </h3>
               <div>
                  <p>This section describes adding Oracle Streams components separately to extend a replication environment. Oracle Streams components include queues, rules, rule sets, capture processes, synchronous captures, propagations, and apply processes.</p>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-5D507278-DDF4-4011-B188-52ED40B7E245">Adding Replicated Objects to an Existing Single-Source Environment</a></p>
                     </li>
                     <li>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-E14B5D73-857A-42BC-B0C2-4DFBCAF7D65E">Adding a New Destination Database to a Single-Source Environment</a></p>
                     </li>
                     <li>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266">Adding Replicated Objects to an Existing Multiple-Source Environment</a></p>
                     </li>
                     <li>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7">Adding a New Database to an Existing Multiple-Source Environment</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-C3B523BC-8E8B-4319-A29A-4DBA385C6457__GUID-A7A86D3C-6201-4F4A-B39D-D36B3CFE3895">
                     <p class="notep1">Note:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>When possible, it is usually easier to extend an Oracle Streams replication environment using either a single procedure or the Setup Streams Replication Wizard in Oracle Enterprise Manager Cloud Control. See <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-739C6E78-65A2-45DE-A564-3C65E2F36D3A">Adding Multiple Components Using a Single Procedure</a>"</span> for instructions about using a single procedure and the Oracle Enterprise Manager Cloud Control online help for instructions about using the wizard.
                           </p>
                        </li>
                        <li>
                           <p>The instructions in the following sections assume you will use the <code class="codeph">DBMS_STREAMS_ADM</code> package to configure your Oracle Streams environment. If you use other packages, then extra steps might be necessary for each task.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="STREP282"></a><a id="STREP281"></a><div class="props_rev_3"><a id="GUID-5D507278-DDF4-4011-B188-52ED40B7E245" name="GUID-5D507278-DDF4-4011-B188-52ED40B7E245"></a><h4 id="STREP-GUID-5D507278-DDF4-4011-B188-52ED40B7E245" class="sect4"><span class="enumeration_section">4.3.1 </span>Adding Replicated Objects to an Existing Single-Source Environment
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can add existing database objects to an existing single-source environment by adding the necessary rules to the appropriate capture processes, synchronous captures, propagations, and apply processes. Before creating or altering capture or propagation rules in a running Oracle Streams environment, ensure that any propagations or apply processes that will receive logical change records (LCRs) because of the new or altered rules are configured to handle these LCRs. That is, the propagations or apply processes should exist, and each one should be associated with rule sets that handle the LCRs appropriately. If these propagations and apply processes are not configured properly to handle these LCRs, then LCRs might be lost.</p>
                        <p>For example, suppose you want to add a table to an Oracle Streams replication environment that already captures, propagates, and applies changes to other tables. Assume that only one capture process or synchronous captures will capture changes to this table, and only one apply process will apply changes to this table. In this case, you must add one or more table rules to the following rule sets: </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The positive rule set for the apply process that will apply changes to the table</p>
                           </li>
                           <li>
                              <p>The positive rule set for each propagation that will propagate changes to the table</p>
                           </li>
                           <li>
                              <p>The positive rule set for the capture process or synchronous capture that will capture changes to the table</p>
                           </li>
                        </ul>
                        <p>If you perform administrative steps in the wrong order, you can lose LCRs. For example, if you add the rule to a capture process rule set first, without stopping the capture process, then the propagation will not propagate the changes if it does not have a rule that instructs it to do so, and the changes can be lost.</p>
                        <p>This example assumes that the replicated database objects are read-only at the destination databases. If the replicated database objects are read/write at the destination databases, then the replication environment will not stay synchronized because Oracle Streams is not configured to replicate the changes made to the replicated database objects at the destination databases.</p>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-5D507278-DDF4-4011-B188-52ED40B7E245__i1013540">Figure 4-1</a> shows the additional configuration steps that must be completed to add replicated database objects to a single-source Oracle Streams environment.
                        </p>
                        <div class="figure" id="GUID-5D507278-DDF4-4011-B188-52ED40B7E245__i1013540">
                           <p class="titleinfigure">Figure 4-1 Example of Adding Replicated Objects to a Single-Source Environment</p><img width="376" src="img/strep041.gif" alt="Description of Figure 4-1 follows" title="Description of Figure 4-1 follows" longdesc="img_text/strep041.html"><br><a href="img_text/strep041.html">Description of "Figure 4-1 Example of Adding Replicated Objects to a Single-Source Environment"</a></div>
                        <!-- class="figure" -->
                        <p>To avoid losing LCRs, complete the configuration in the following order:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>At each source database where replicated database objects are being added, specify supplemental logging for the added replicated database objects. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-12A4DC82-EEC7-4ACC-BF8F-8D82AA1D19DE">Specifying Supplemental Logging</a>"</span> for instructions.</span></li>
                        <li class="stepexpand" id="GUID-5D507278-DDF4-4011-B188-52ED40B7E245__i1010179"><span>Either stop the capture process, one of the propagations, or the apply processes:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use the <code class="codeph">STOP_CAPTURE</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package to stop a capture process.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use the <code class="codeph">STOP_PROPAGATION</code> procedure in the <code class="codeph">DBMS_PROPAGATION_ADM</code> package to stop a propagation.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use the <code class="codeph">STOP_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to stop an apply process.
                                    </p>
                                 </li>
                              </ul>
                              <p>In general, it is best to stop the capture process so that messages do not accumulate in queues during the operation.</p>
                              <div class="infoboxnote" id="GUID-5D507278-DDF4-4011-B188-52ED40B7E245__GUID-27BF954E-2E3B-430C-92A2-9792F7537B3C">
                                 <p class="notep1">Note:</p>
                                 <p>Synchronous captures cannot be stopped.</p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-5D507278-DDF4-4011-B188-52ED40B7E245__GUID-4FFBD927-9C7D-45FE-B6E2-D300C5DE8A12">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../strms/toc.htm"><span class="italic">Oracle Streams Concepts and Administration </span></a>for more information about completing these tasks with PL/SQL procedures
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Add the relevant rules to the rule sets for the apply processes. To add rules to the rule set for an apply process, you can run one of the following procedures:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS308"><code class="codeph">DBMS_STREAMS_ADM.ADD_TABLE_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS329"><code class="codeph">DBMS_STREAMS_ADM.ADD_SUBSET_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS309"><code class="codeph">DBMS_STREAMS_ADM.ADD_SCHEMA_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS310"><code class="codeph">DBMS_STREAMS_ADM.ADD_GLOBAL_RULES</code></a></p>
                                 </li>
                              </ul>
                              <p>Excluding the <code class="codeph">ADD_SUBSET_RULES</code> procedure, these procedures can add rules to the positive or negative rule set for an apply process. The <code class="codeph">ADD_SUBSET_RULES</code> procedure can add rules only to the positive rule set for an apply process.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Add the relevant rules to the rule sets for the propagations. To add rules to the rule set for a propagation, you can run one of the following procedures:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS316"><code class="codeph">DBMS_STREAMS_ADM.ADD_TABLE_PROPAGATION_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS394"><code class="codeph">DBMS_STREAMS_ADM.ADD_SUBSET_PROPAGATION_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS317"><code class="codeph">DBMS_STREAMS_ADM.ADD_SCHEMA_PROPAGATION_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS318"><code class="codeph">DBMS_STREAMS_ADM.ADD_GLOBAL_PROPAGATION_RULES</code></a></p>
                                 </li>
                              </ul>
                              <p>Excluding the <code class="codeph">ADD_SUBSET_PROPAGATION_RULES</code> procedure, these procedures can add rules to the positive or negative rule set for a propagation. The <code class="codeph">ADD_SUBSET_PROPAGATION_RULES</code> procedure can add rules only to the positive rule set for a propagation.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Add the relevant rules to the rule sets used by the capture process or synchronous capture. To add rules to a rule set for an existing capture process, you can run one of the following procedures and specify the existing capture process:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS308"><code class="codeph">DBMS_STREAMS_ADM.ADD_TABLE_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS329"><code class="codeph">DBMS_STREAMS_ADM.ADD_SUBSET_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS309"><code class="codeph">DBMS_STREAMS_ADM.ADD_SCHEMA_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS310"><code class="codeph">DBMS_STREAMS_ADM.ADD_GLOBAL_RULES</code></a></p>
                                 </li>
                              </ul>
                              <p>Excluding the <code class="codeph">ADD_SUBSET_RULES</code> procedure, these procedures can add rules to the positive or negative rule set for a capture process. The <code class="codeph">ADD_SUBSET_RULES</code> procedure can add rules only to the positive rule set for a capture process.
                              </p>
                              <p>To add rules to a rule set for an existing synchronous capture, you can run one of the following procedures and specify the existing synchronous capture:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS308"><code class="codeph">DBMS_STREAMS_ADM.ADD_TABLE_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS329"><code class="codeph">DBMS_STREAMS_ADM.ADD_SUBSET_RULES</code></a></p>
                                 </li>
                              </ul>
                              <p>When you use a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add the capture process rules, it automatically runs the <code class="codeph">PREPARE_TABLE_INSTANTIATION</code>, <code class="codeph">PREPARE_SCHEMA_INSTANTIATION</code>, or <code class="codeph">PREPARE_GLOBAL_INSTANTIATION</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package for the specified table, specified schema, or entire database, respectively, if the capture process is a local capture process or a downstream capture process with a database link to the source database. 
                              </p>
                              <p>You must run the appropriate procedure to prepare for instantiation manually if any of the following conditions is true:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>You use <code class="codeph">DBMS_RULE_ADM</code> to create or modify rules in a capture process rule set.
                                    </p>
                                 </li>
                                 <li>
                                    <p>You do not add rules for the added objects to a capture process rule set, because the capture process already captures changes to these objects. In this case, rules for the objects can be added to propagations and apply processes in the environment, but not to the capture process.</p>
                                 </li>
                                 <li>
                                    <p>You use a downstream capture process with no database link to the source database.</p>
                                 </li>
                              </ul>
                              <p>If you must prepare for instantiation manually, then see <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-CBDA09E8-D2E0-4E56-B7A7-E87BDC26FC5A">Preparing Database Objects for Instantiation at a Source Database</a>"</span> for instructions.
                              </p>
                              <p>When you use a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add the synchronous capture rules, it automatically runs the <code class="codeph">PREPARE_SYNC_INSTANTIATION</code> function in the <code class="codeph">DBMS_CAPTURE_ADM</code> package for the specified table.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-5D507278-DDF4-4011-B188-52ED40B7E245__i1010237"><span>At each destination database, either instantiate, or set the instantiation SCN for, each database object you are adding to the Oracle Streams environment. If the database objects do not exist at a destination database, then instantiate them using export/import, transportable tablespaces, or RMAN. If the database objects already exist at a destination database, then set the instantiation SCNs for them manually.</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>To instantiate database objects using export/import, first export them at the source database. Next, import them at the destination database. See <a href="instantiation-and-oracle-streams-replication.html#GUID-003967CE-08B9-439C-902F-45E7B7C37371"> Instantiation and Oracle Streams Replication</a>.
                                    </p>
                                    <p>Do not allow any changes to the database objects being exported while exporting these database objects at the source database. Do not allow changes to the database objects being imported while importing these database objects at the destination database.</p>
                                    <p>You can specify a more stringent degree of consistency by using an export parameter such as <code class="codeph">FLASHBACK_SCN</code> or <code class="codeph">FLASHBACK_TIME</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>To set the instantiation SCN for a table, schema, or database manually, run the appropriate procedure or procedures in the <code class="codeph">DBMS_APPLY_ADM</code> package at a destination database: 
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">SET_TABLE_INSTANTIATION_SCN</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">SET_SCHEMA_INSTANTIATION_SCN</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">SET_GLOBAL_INSTANTIATION_SCN</code></p>
                                       </li>
                                    </ul>
                                    <p>When you run one of these procedures at a destination database, you must ensure that every added object at the destination database is consistent with the source database as of the instantiation SCN.</p>
                                    <p>If you run <code class="codeph">SET_GLOBAL_INSTANTIATION_SCN</code> at a destination database, then set the <code class="codeph">recursive</code> parameter for this procedure to <code class="codeph">TRUE</code> so that the instantiation SCN also is set for each schema at the destination database and for the tables owned by these schemas.
                                    </p>
                                    <p>If you run <code class="codeph">SET_SCHEMA_INSTANTIATION_SCN</code> at a destination database, then set the <code class="codeph">recursive</code> parameter for this procedure to <code class="codeph">TRUE</code> so that the instantiation SCN also is set for each table in the schema.
                                    </p>
                                    <p>If you set the <code class="codeph">recursive</code> parameter to <code class="codeph">TRUE</code> in the <code class="codeph">SET_GLOBAL_INSTANTIATION_SCN</code> procedure or the <code class="codeph">SET_SCHEMA_INSTANTIATION_SCN</code> procedure, then a database link from the destination database to the source database is required. This database link must have the same name as the global name of the source database and must be accessible to the user who executes the procedure. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-F612AD02-15B7-4392-815E-1EB05A493633">Setting Instantiation SCNs Using the DBMS_APPLY_ADM Package</a>"</span> for instructions.
                                    </p>
                                    <p>Alternatively, you can perform a metadata export/import to set the instantiation SCNs for existing database objects. If you choose this option, then ensure that no rows are imported. Also, ensure that every added object at the importing destination database is consistent with the source database that performed the export at the time of the export. If you are sharing DML changes only, then table level export/import is sufficient. If you are sharing DDL changes also, then additional considerations apply. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-478D3B54-1CFC-43DC-8741-6C7F7DF8A68D">Setting Instantiation SCNs Using Export/Import</a>"</span> for more information about performing a metadata export/import.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-5D507278-DDF4-4011-B188-52ED40B7E245__i1010271"><span>Start any Oracle Streams client you stopped in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-5D507278-DDF4-4011-B188-52ED40B7E245__i1010179">2</a>:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use the <code class="codeph">START_CAPTURE</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package to start a capture process.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use the <code class="codeph">START_PROPAGATION</code> procedure in the <code class="codeph">DBMS_PROPAGATION_ADM</code> package start a propagation.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to start an apply process.
                                    </p>
                                 </li>
                              </ul>
                              <div class="infoboxnotealso" id="GUID-5D507278-DDF4-4011-B188-52ED40B7E245__GUID-E305A6CA-8D9E-4B97-A376-9085AA5C5A22">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../strms/toc.htm"><span class="italic">Oracle Streams Concepts and Administration </span></a>for more information about completing these tasks using PL/SQL procedures
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>You must stop the capture process, disable one of the propagation jobs, or stop the apply process in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-5D507278-DDF4-4011-B188-52ED40B7E245__i1010179">2</a> to ensure that the table or schema is instantiated before the first LCR resulting from the added rule(s) reaches the apply process. Otherwise, LCRs could be lost or could result in apply errors, depending on whether the apply process rule(s) have been added.
                        </p>
                        <p>If you are certain that the added table is not being modified at the source database during this procedure, and that there are no LCRs for the table already in the stream or waiting to be captured, then you can perform Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-5D507278-DDF4-4011-B188-52ED40B7E245__i1010271">7</a> before Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-5D507278-DDF4-4011-B188-52ED40B7E245__i1010237">6</a> to reduce the amount of time that an Oracle Streams process or propagation job is stopped.
                        </p>
                        <div class="infoboxnotealso" id="GUID-5D507278-DDF4-4011-B188-52ED40B7E245__GUID-BC65C225-4711-48EE-93F7-80A26C2653EA">
                           <p class="notep1">See Also:</p>
                           <p><a href="../strex/single-source-heterogeneous-replication-example.html#STREX103"><span class="italic">Oracle Streams Extended Examples</span></a> for a detailed example that adds objects to an existing single-source environment
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP284"></a><a id="STREP283"></a><div class="props_rev_3"><a id="GUID-E14B5D73-857A-42BC-B0C2-4DFBCAF7D65E" name="GUID-E14B5D73-857A-42BC-B0C2-4DFBCAF7D65E"></a><h4 id="STREP-GUID-E14B5D73-857A-42BC-B0C2-4DFBCAF7D65E" class="sect4"><span class="enumeration_section">4.3.2 </span>Adding a New Destination Database to a Single-Source Environment
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can add a destination database to an existing single-source environment by creating one or more new apply processes at the new destination database and, if necessary, configuring one or more propagations to send changes to the new destination database. You might also need to add rules to existing propagations in the stream that send changes to the new destination database.</p>
                        <p>As in the example that describes <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-5D507278-DDF4-4011-B188-52ED40B7E245">Adding Replicated Objects to an Existing Single-Source Environment</a>"</span>, before creating or altering propagation rules in a running Oracle Streams replication environment, ensure that any propagations or apply processes that will receive logical change records (LCRs) because of the new or altered rules are configured to handle these LCRs. Otherwise, LCRs might be lost.
                        </p>
                        <p>This example assumes that the replicated database objects are read-only at the destination databases. If the replicated database objects are read/write at the destination databases, then the replication environment will not stay synchronized because Oracle Streams is not configured to replicate the changes made to the replicated database objects at the destination databases.</p>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-E14B5D73-857A-42BC-B0C2-4DFBCAF7D65E__i1013566">Figure 4-2</a> shows the additional configuration steps that must be completed to add a destination database to a single-source Oracle Streams environment.
                        </p>
                        <div class="figure" id="GUID-E14B5D73-857A-42BC-B0C2-4DFBCAF7D65E__i1013566">
                           <p class="titleinfigure">Figure 4-2 Example of Adding a Destination to a Single-Source Environment</p><img width="580" src="img/strep040.gif" alt="Description of Figure 4-2 follows" title="Description of Figure 4-2 follows" longdesc="img_text/strep040.html"><br><a href="img_text/strep040.html">Description of "Figure 4-2 Example of Adding a Destination to a Single-Source Environment"</a></div>
                        <!-- class="figure" -->
                        <p>To avoid losing LCRs, you should complete the configuration in the following order:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Complete the necessary tasks to prepare each database in your environment for Oracle Streams. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-BB2E76CA-3645-4469-8750-4B276B8A955B">Tasks to Complete Before Configuring Oracle Streams Replication</a>"</span>.</span><div>
                              <p>Some of these tasks might not be required at certain databases.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create any necessary <code class="codeph">ANYDATA</code> queues that do not already exist at the destination database. When you create an apply process, you associate the apply process with a specific <code class="codeph">ANYDATA</code> queue. See <span class="q">"<a href="configuring-queues-and-propagations.html#GUID-ACF52296-CE1F-40E1-B63E-5A6EB6A284A1">Creating an ANYDATA Queue</a>"</span> for instructions.</span></li>
                        <li class="stepexpand" id="GUID-E14B5D73-857A-42BC-B0C2-4DFBCAF7D65E__i1010369"><span>Create one or more apply processes at the new destination database to apply the changes from its source database. Ensure that each apply process uses rule sets that are appropriate for applying changes. Do not start any of the apply processes at the new database. See <a href="configuring-implicit-apply.html#GUID-7D393976-B22F-4CF1-901E-62451DEB64DB"> Configuring Implicit Apply</a> for instructions.</span><div>
                              <p>Keeping the apply processes stopped prevents changes made at the source databases from being applied before the instantiation of the new database is completed. Starting the apply processes might lead to incorrect data and errors.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Configure any necessary propagations to send changes from the source databases to the new destination database. Ensure that each propagation uses rule sets that are appropriate for propagating changes. See <span class="q">"<a href="configuring-queues-and-propagations.html#GUID-15AAD2ED-F1AD-465D-A8B4-897F73EE45C9">Creating Oracle Streams Propagations Between ANYDATA Queues</a>"</span>.</span></li>
                        <li class="stepexpand"><span>At the source database, prepare for instantiation each database object for which changes will be applied by an apply process at the new destination database.</span><div>
                              <p>If you are using one or more capture processes, then run either the <code class="codeph">PREPARE_TABLE_INSTANTIATION</code>, <code class="codeph">PREPARE_SCHEMA_INSTANTIATION</code>, or <code class="codeph">PREPARE_GLOBAL_INSTANTIATION</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package for the specified table, specified schema, or entire database, respectively.
                              </p>
                              <p>If you are using one or more synchronous captures, then run the <code class="codeph">PREPARE_SYNC_INSTANTIATION</code> function in the <code class="codeph">DBMS_CAPTURE_ADM</code> package for the specified table.
                              </p>
                              <p> See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-CBDA09E8-D2E0-4E56-B7A7-E87BDC26FC5A">Preparing Database Objects for Instantiation at a Source Database</a>"</span>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>At the new destination database, either instantiate, or set the instantiation SCNs for, each database object for which changes will be applied by an apply process. If the database objects do not already exist at the new destination database, then instantiate them using export/import, transportable tablespaces, or RMAN. If the database objects exist at the new destination database, then set the instantiation SCNs for them.</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>To instantiate database objects using export/import, first export them at the source database. Next, import them at the destination database. See <a href="instantiation-and-oracle-streams-replication.html#GUID-003967CE-08B9-439C-902F-45E7B7C37371"> Instantiation and Oracle Streams Replication</a>.
                                    </p>
                                    <p>Do not allow any changes to the database objects being exported while exporting these database objects at the source database. Do not allow changes to the database objects being imported while importing these database objects at the destination database.</p>
                                    <p>You can specify a more stringent degree of consistency by using an export parameter such as <code class="codeph">FLASHBACK_SCN</code> or <code class="codeph">FLASHBACK_TIME</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>To set the instantiation SCN for a table, schema, or database manually, run the appropriate procedure or procedures in the <code class="codeph">DBMS_APPLY_ADM</code> package at the new destination database: 
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">SET_TABLE_INSTANTIATION_SCN</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">SET_SCHEMA_INSTANTIATION_SCN</code></p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">SET_GLOBAL_INSTANTIATION_SCN</code></p>
                                       </li>
                                    </ul>
                                    <p>When you run one of these procedures, you must ensure that the replicated database objects at the new destination database are consistent with the source database as of the instantiation SCN.</p>
                                    <p>If you run <code class="codeph">SET_GLOBAL_INSTANTIATION_SCN</code> at a destination database, then set the <code class="codeph">recursive</code> parameter for this procedure to <code class="codeph">TRUE</code> so that the instantiation SCN also is set for each schema at the destination database and for the tables owned by these schemas.
                                    </p>
                                    <p>If you run <code class="codeph">SET_SCHEMA_INSTANTIATION_SCN</code> at a destination database, then set the <code class="codeph">recursive</code> parameter for this procedure to <code class="codeph">TRUE</code> so that the instantiation SCN also is set for each table in the schema.
                                    </p>
                                    <p>If you set the <code class="codeph">recursive</code> parameter to <code class="codeph">TRUE</code> in the <code class="codeph">SET_GLOBAL_INSTANTIATION_SCN</code> procedure or the <code class="codeph">SET_SCHEMA_INSTANTIATION_SCN</code> procedure, then a database link from the destination database to the source database is required. This database link must have the same name as the global name of the source database and must be accessible to the user who executes the procedure. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-F612AD02-15B7-4392-815E-1EB05A493633">Setting Instantiation SCNs Using the DBMS_APPLY_ADM Package</a>"</span> for instructions.
                                    </p>
                                    <p>Alternatively, you can perform a metadata export/import to set the instantiation SCNs for existing database objects. If you choose this option, then ensure that no rows are imported. Also, ensure that the replicated database objects at the importing destination database are consistent with the source database that performed the export at the time of the export. If you are sharing DML changes only, then table level export/import is sufficient. If you are sharing DDL changes also, then additional considerations apply. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-478D3B54-1CFC-43DC-8741-6C7F7DF8A68D">Setting Instantiation SCNs Using Export/Import</a>"</span> for more information about performing a metadata export/import.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start the apply processes you created in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-E14B5D73-857A-42BC-B0C2-4DFBCAF7D65E__i1010369">3</a> using the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-E14B5D73-857A-42BC-B0C2-4DFBCAF7D65E__GUID-56C8817D-2CA2-4659-9A73-946B9E80755A">
                           <p class="notep1">See Also:</p>
                           <p><a href="../strex/single-source-heterogeneous-replication-example.html#STREX104"><span class="italic">Oracle Streams Extended Examples</span></a> for detailed example that adds a database to an existing single-source environment
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP286"></a><a id="STREP285"></a><div class="props_rev_3"><a id="GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266" name="GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266"></a><h4 id="STREP-GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266" class="sect4"><span class="enumeration_section">4.3.3 </span>Adding Replicated Objects to an Existing Multiple-Source Environment
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can add existing database objects to an existing multiple-source environment by adding the necessary rules to the appropriate capture processes, synchronous captures, propagations, and apply processes.</p>
                        <p>This example uses the following terms:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Populated database:</span> A database that already contains the replicated database objects being added to the multiple-source environment. You must have at least one populated database to add the objects to the environment.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Export database:</span> A populated database on which you perform an export of the database objects you are adding to the environment. This export is used to instantiate the added database objects at the import databases. You might not have an export database if all of the databases in the environment are populated databases.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Import database: </span>A database that does not contain the replicated database objects before they are added to the multiple-source environment. You instantiate the replicated database objects at an import database by performing an import of these database objects. You might not have any import databases if all of the databases in the environment are populated databases.
                              </p>
                           </li>
                        </ul>
                        <p>Before creating or altering capture or propagation rules in a running Oracle Streams replication environment, ensure that any propagations or apply processes that will receive logical change records (LCRs) because of the new or altered rules are configured to handle these LCRs. That is, the propagations or apply processes should exist, and each one should be associated with rule sets that handle the LCRs appropriately. If these propagations and apply processes are not configured properly to handle these LCRs, then LCRs can be lost.</p>
                        <p>For example, suppose you want to add a new table to an Oracle Streams replication environment that already captures, propagates, and applies changes to other tables. Assume multiple capture processes or synchronous captures in the environment will capture changes to this table, and multiple apply processes will apply changes to this table. In this case, you must add one or more table rules to the following rule sets:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The positive rule set for each apply process that will apply changes to the table</p>
                           </li>
                           <li>
                              <p>The positive rule set for each propagation that will propagate changes to the table</p>
                           </li>
                           <li>
                              <p>The positive rule set for each capture process or synchronous capture that will capture changes to the table</p>
                           </li>
                        </ul>
                        <p>If you perform administrative steps in the wrong order, then you can lose LCRs. For example, if you add the rule to a capture process rule set first, without stopping the capture process, then the propagation will not propagate the changes if it does not have a rule that instructs it to do so, and the changes can be lost.</p>
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266__i1013618">Figure 4-3</a> shows the additional configuration steps that must be completed to add replicated database objects to a multiple-source Oracle Streams environment.
                        </p>
                        <div class="figure" id="GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266__i1013618">
                           <p class="titleinfigure">Figure 4-3 Example of Adding Replicated Objects to a Multiple-Source Environment</p><img width="368" src="img/strep042.gif" alt="Description of Figure 4-3 follows" title="Description of Figure 4-3 follows" longdesc="img_text/strep042.html"><br><a href="img_text/strep042.html">Description of "Figure 4-3 Example of Adding Replicated Objects to a Multiple-Source Environment"</a></div>
                        <!-- class="figure" -->
                        <p>When there are multiple source databases in an Oracle Streams replication environment, change cycling is possible. Change cycling happens when a change is sent back to the database where it originated. Typically, you should avoid change cycling. Before you configure your replication environment, see <a href="oracle-streams-tags.html#GUID-9339D29B-65F3-450B-B3CD-A7B4ADCA4AAF"> Oracle Streams Tags</a>, and ensure that you configure the replication environment to avoid change cycling.
                        </p>
                        <p>To avoid losing LCRs, complete the configuration in the following order:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>At each populated database, specify any necessary supplemental logging for the objects being added to the environment. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-12A4DC82-EEC7-4ACC-BF8F-8D82AA1D19DE">Specifying Supplemental Logging</a>"</span> for instructions.</span></li>
                        <li class="stepexpand" id="GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266__i1010718"><span>Either stop all of the capture processes that will capture changes to the added objects, stop all of the propagations that will propagate changes to the added objects, or stop all of the apply process that will apply changes to the added objects:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use the <code class="codeph">STOP_CAPTURE</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package to stop a capture process.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use the <code class="codeph">STOP_PROPAGATION</code> procedure in the <code class="codeph">DBMS_PROPAGATION_ADM</code> package to stop a propagation.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Use the <code class="codeph">STOP_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to stop an apply process.
                                    </p>
                                 </li>
                              </ul>
                              <p>In general, it is best to stop the capture process so that messages do not accumulate in queues during the operation.</p>
                              <div class="infoboxnote" id="GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266__GUID-9DD97A2E-81DC-4703-BC24-CFBC51CDD251">
                                 <p class="notep1">Note:</p>
                                 <p>Synchronous captures cannot be stopped.</p>
                              </div>
                              <div class="infoboxnotealso" id="GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266__GUID-AEE3FA13-F73E-4D20-80E7-AB4FF73ED52C">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="../strms/toc.htm"><span class="italic">Oracle Streams Concepts and Administration </span></a>for more information about completing these tasks using PL/SQL procedures
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Add the relevant rules to the rule sets for the apply processes that will apply changes to the added objects. To add rules to the rule set for an apply process, you can run one of the following procedures:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS308"><code class="codeph">DBMS_STREAMS_ADM.ADD_TABLE_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS329"><code class="codeph">DBMS_STREAMS_ADM.ADD_SUBSET_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS309"><code class="codeph">DBMS_STREAMS_ADM.ADD_SCHEMA_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS310"><code class="codeph">DBMS_STREAMS_ADM.ADD_GLOBAL_RULES</code></a></p>
                                 </li>
                              </ul>
                              <p>Excluding the <code class="codeph">ADD_SUBSET_RULES</code> procedure, these procedures can add rules to the positive or negative rule set for an apply process. The <code class="codeph">ADD_SUBSET_RULES</code> procedure can add rules only to the positive rule set for an apply process.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Add the relevant rules to the rule sets for the propagations that will propagate changes to the added objects. To add rules to the rule set for a propagation, you can run one of the following procedures:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS316"><code class="codeph">DBMS_STREAMS_ADM.ADD_TABLE_PROPAGATION_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS394"><code class="codeph">DBMS_STREAMS_ADM.ADD_SUBSET_PROPAGATION_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS317"><code class="codeph">DBMS_STREAMS_ADM.ADD_SCHEMA_PROPAGATION_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS318"><code class="codeph">DBMS_STREAMS_ADM.ADD_GLOBAL_PROPAGATION_RULES</code></a></p>
                                 </li>
                              </ul>
                              <p>Excluding the <code class="codeph">ADD_SUBSET_PROPAGATION_RULES</code> procedure, these procedures can add rules to the positive or negative rule set for a propagation. The <code class="codeph">ADD_SUBSET_PROPAGATION_RULES</code> procedure can add rules only to the positive rule set for a propagation.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Add the relevant rules to the rule sets used by each capture process or synchronous capture that will capture changes to the added objects. To add rules to a rule set for an existing capture process, you can run one of the following procedures and specify the existing capture process:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS308"><code class="codeph">DBMS_STREAMS_ADM.ADD_TABLE_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS329"><code class="codeph">DBMS_STREAMS_ADM.ADD_SUBSET_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS309"><code class="codeph">DBMS_STREAMS_ADM.ADD_SCHEMA_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strep&amp;id=ARPLS310"><code class="codeph">DBMS_STREAMS_ADM.ADD_GLOBAL_RULES</code></a></p>
                                 </li>
                              </ul>
                              <p>Excluding the <code class="codeph">ADD_SUBSET_RULES</code> procedure, these procedures can add rules to the positive or negative rule set for a capture process. The <code class="codeph">ADD_SUBSET_RULES</code> procedure can add rules only to the positive rule set for a capture process.
                              </p>
                              <p>To add rules to a rule set for an existing synchronous capture, you can run one of the following procedures and specify the existing synchronous capture:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS308"><code class="codeph">DBMS_STREAMS_ADM.ADD_TABLE_RULES</code></a></p>
                                 </li>
                                 <li>
                                    <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS329"><code class="codeph">DBMS_STREAMS_ADM.ADD_SUBSET_RULES</code></a></p>
                                 </li>
                              </ul>
                              <p>When you use a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add the capture process rules, it automatically runs the <code class="codeph">PREPARE_TABLE_INSTANTIATION</code>, <code class="codeph">PREPARE_SCHEMA_INSTANTIATION</code>, or <code class="codeph">PREPARE_GLOBAL_INSTANTIATION</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package for the specified table, specified schema, or entire database, respectively, if the capture process is a local capture process or a downstream capture process with a database link to the source database. 
                              </p>
                              <p>You must run the appropriate procedure to prepare for instantiation manually if any of the following conditions is true:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>You use <code class="codeph">DBMS_RULE_ADM</code> to create or modify rules in a capture process rule set.
                                    </p>
                                 </li>
                                 <li>
                                    <p>You do not add rules for the added objects to a capture process rule set, because the capture process already captures changes to these objects. In this case, rules for the objects can be added to propagations and apply processes in the environment, but not to the capture process.</p>
                                 </li>
                                 <li>
                                    <p>You use a downstream capture process with no database link to the source database.</p>
                                 </li>
                              </ul>
                              <p>If you must prepare for instantiation manually, then see <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-CBDA09E8-D2E0-4E56-B7A7-E87BDC26FC5A">Preparing Database Objects for Instantiation at a Source Database</a>"</span> for instructions.
                              </p>
                              <p>When you use a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add the synchronous capture rules, it automatically runs the <code class="codeph">PREPARE_SYNC_INSTANTIATION</code> function in the <code class="codeph">DBMS_CAPTURE_ADM</code> package for the specified table.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>After completing these steps, complete the steps in each of the following sections that apply to your environment. You might need to complete the steps in only one of these sections or in both of these sections:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For each populated database, complete the steps in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-62BBF518-3183-4CDF-B018-8CE4E920537E">Configuring Populated Databases When Adding Replicated Objects</a>"</span>. These steps are required only if your environment has multiple populated databases.
                              </p>
                           </li>
                           <li>
                              <p>For each import database, complete the steps in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-AEA628AD-4C17-41D4-98EA-2F165C2B1D3B">Adding Replicated Objects to Import Databases in an Existing Environment</a>"</span>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="STREP287"></a><div class="props_rev_3"><a id="GUID-62BBF518-3183-4CDF-B018-8CE4E920537E" name="GUID-62BBF518-3183-4CDF-B018-8CE4E920537E"></a><h5 id="STREP-GUID-62BBF518-3183-4CDF-B018-8CE4E920537E" class="sect5"><span class="enumeration_section">4.3.3.1 </span>Configuring Populated Databases When Adding Replicated Objects
                     </h5>
                     <div>
                        <div class="section">
                           <p>After completing the steps in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266">Adding Replicated Objects to an Existing Multiple-Source Environment</a>"</span>, complete the following steps for each populated database if your environment has multiple populated databases:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>For each populated database, set the instantiation SCN for each added object at the other populated databases in the environment. These instantiation SCNs must be set, and only the changes made at a particular populated database that are committed after the corresponding SCN for that database will be applied at another populated database.</span><div>
                                 <p>For each populated database, you can set these instantiation SCNs for each added database object in one of the following ways:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Perform a metadata only export of the added database objects at the populated database and import the metadata at each of the other populated databases. Such an import sets the required instantiation SCNs for the database at the other databases. Ensure that no rows are imported. Also, ensure that the replicated database objects at each of the other populated databases are consistent with the populated database that performed the export at the time of the export.</p>
                                       <p>If you are replicating DML changes only, then table level export/import is sufficient. If you are replicating DDL changes also, then additional considerations apply. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-478D3B54-1CFC-43DC-8741-6C7F7DF8A68D">Setting Instantiation SCNs Using Export/Import</a>"</span> for more information about performing a metadata export/import.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Set the instantiation SCNs manually for the added objects at each of the other populated databases. Ensure that every added database object at each populated database is consistent with the instantiation SCNs you set at that database. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-F612AD02-15B7-4392-815E-1EB05A493633">Setting Instantiation SCNs Using the DBMS_APPLY_ADM Package</a>"</span> for instructions.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div><a id="STREP288"></a><div class="props_rev_3"><a id="GUID-AEA628AD-4C17-41D4-98EA-2F165C2B1D3B" name="GUID-AEA628AD-4C17-41D4-98EA-2F165C2B1D3B"></a><h5 id="STREP-GUID-AEA628AD-4C17-41D4-98EA-2F165C2B1D3B" class="sect5"><span class="enumeration_section">4.3.3.2 </span>Adding Replicated Objects to Import Databases in an Existing Environment
                     </h5>
                     <div>
                        <div class="section">
                           <p>After completing the steps in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266">Adding Replicated Objects to an Existing Multiple-Source Environment</a>"</span>, complete the following steps for the import databases:
                           </p>
                           <ol>
                              <li id="GUID-AEA628AD-4C17-41D4-98EA-2F165C2B1D3B__BABDGIJI">
                                 <p>Pick the populated database that you will use as the export database. Do not perform the instantiations yet.</p>
                              </li>
                              <li>
                                 <p>For each import database, set the instantiation SCNs for the added database objects at all of the other databases in the environment that will be a destination database of the import database. In this case, the import database will be the source database for these destination databases. The databases where you set the instantiation SCNs might be populated databases and other import databases.</p>
                                 <ol type="a">
                                    <li>
                                       <p>If one or more schemas will be created at an import database during instantiation or by a subsequent replicated DDL change, then run the <code class="codeph">SET_GLOBAL_INSTANTIATION_SCN</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package for this import database at all of the other databases in the environment.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If a schema exists at an import database, and one or more tables will be created in the schema during instantiation or by a subsequent replicated DDL change, then run the <code class="codeph">SET_SCHEMA_INSTANTIATION_SCN</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package for the schema for this import database at each of the other databases in the environment. Do this for each such schema.
                                       </p>
                                    </li>
                                 </ol>
                                 <p>See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-F612AD02-15B7-4392-815E-1EB05A493633">Setting Instantiation SCNs Using the DBMS_APPLY_ADM Package</a>"</span> for instructions.
                                 </p>
                                 <p>Because you run these procedures before any tables are instantiated at the import databases, and because the local capture processes or synchronous captures are configured already for these import databases, you will not need to run the <code class="codeph">SET_TABLE_INSTANTIATION_SCN</code> procedure for each table created during instantiation. Instantiation SCNs will be set automatically for these tables at all of the other databases in the environment that will be destination databases of the import database.
                                 </p>
                              </li>
                              <li>
                                 <p>At the export database you chose in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-AEA628AD-4C17-41D4-98EA-2F165C2B1D3B__BABDGIJI">1</a>, perform an export of the replicated database objects. Next, perform an import of the replicated database objects at each import database. See <a href="instantiation-and-oracle-streams-replication.html#GUID-003967CE-08B9-439C-902F-45E7B7C37371"> Instantiation and Oracle Streams Replication</a> and<a href="../sutil/index.html"><span class="italic"> Oracle Database Utilities </span></a>for information about using export/import.
                                 </p>
                                 <p>Do not allow any changes to the database objects being exported while exporting these database objects at the source database. Do not allow changes to the database objects being imported while importing these database objects at the destination database.</p>
                                 <p>You can specify a more stringent degree of consistency by using an export parameter such as <code class="codeph">FLASHBACK_SCN</code> or <code class="codeph">FLASHBACK_TIME</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>For each populated database, except for the export database, set the instantiation SCNs for the added database objects at each import database that will be a destination database of the populated source database. These instantiation SCNs must be set, and only the changes made at a populated database that are committed after the corresponding SCN for that database will be applied at an import database.</p>
                                 <p>For each populated database, you can set these instantiation SCNs for the added objects in one of the following ways:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Perform a metadata only export of the added database objects at the populated database and import the metadata at each import database. Each import sets the required instantiation SCNs for the populated database at the import database. In this case, ensure that every added database object at the import database is consistent with the populated database at the time of the export.</p>
                                       <p>If you are replicating DML changes only, then table level export/import is sufficient. If you are replicating DDL changes also, then additional considerations apply. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-478D3B54-1CFC-43DC-8741-6C7F7DF8A68D">Setting Instantiation SCNs Using Export/Import</a>"</span> for more information about performing a metadata export/import.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Set the instantiation SCNs manually for the added objects at each import database. Ensure that every added object at each import database is consistent with the populated database as of the corresponding instantiation SCN. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-F612AD02-15B7-4392-815E-1EB05A493633">Setting Instantiation SCNs Using the DBMS_APPLY_ADM Package</a>"</span> for instructions.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="STREP289"></a><div class="props_rev_3"><a id="GUID-2DB10CD6-103A-42A8-82AB-4A64DA529358" name="GUID-2DB10CD6-103A-42A8-82AB-4A64DA529358"></a><h5 id="STREP-GUID-2DB10CD6-103A-42A8-82AB-4A64DA529358" class="sect5"><span class="enumeration_section">4.3.3.3 </span>Finish Adding Objects to a Multiple-Source Environment Configuration
                     </h5>
                     <div>
                        <div class="section">
                           <p>Before completing the configuration, you should have completed the following tasks:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266">Adding Replicated Objects to an Existing Multiple-Source Environment</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-62BBF518-3183-4CDF-B018-8CE4E920537E">Configuring Populated Databases When Adding Replicated Objects</a>"</span>, if your environment has multiple populated databases
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-AEA628AD-4C17-41D4-98EA-2F165C2B1D3B">Adding Replicated Objects to Import Databases in an Existing Environment</a>"</span>, if your environment had import databases
                                 </p>
                              </li>
                           </ul>
                           <p>When all of the previous configuration steps are finished, complete the following steps:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>At each database, configure conflict resolution for the added database objects if conflicts are possible. See <a href="oracle-streams-conflict-resolution.html#GUID-5D79AA72-A682-4623-8A0B-4CF84D1FFC86"> Oracle Streams Conflict Resolution</a> for instructions.</span></li>
                           <li class="stepexpand"><span>Start each Oracle Streams client you stopped in Step&nbsp;<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266__i1010718">2</a> in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-C90A7979-FCAE-4D63-BF18-2F7C2EEF7266">Adding Replicated Objects to an Existing Multiple-Source Environment</a>"</span>:</span><div>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Use the <code class="codeph">START_CAPTURE</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package to start a capture process.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Use the <code class="codeph">START_PROPAGATION</code> procedure in the <code class="codeph">DBMS_PROPAGATION_ADM</code> package start a propagation.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Use the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package to start an apply process.
                                       </p>
                                    </li>
                                 </ul>
                                 <div class="infoboxnotealso" id="GUID-2DB10CD6-103A-42A8-82AB-4A64DA529358__GUID-3541ADB0-3413-475B-A351-1DB71555CBA1">
                                    <p class="notep1">See Also:</p>
                                    <p><a href="../strms/toc.htm"><span class="italic">Oracle Streams Concepts and Administration </span></a>for more information about completing these tasks using the PL/SQL procedures
                                    </p>
                                 </div>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div><a id="STREP291"></a><a id="STREP290"></a><div class="props_rev_3"><a id="GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7" name="GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7"></a><h4 id="STREP-GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7" class="sect4"><span class="enumeration_section">4.3.4 </span>Adding a New Database to an Existing Multiple-Source Environment
                  </h4>
                  <div>
                     <div class="section">
                        <p><a href="adding-to-an-oracle-streams-replication-environment.html#GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__i1013628">Figure 4-4</a> shows the additional configuration steps that must be completed to add a source/destination database to a multiple-source Oracle Streams environment.
                        </p>
                        <div class="figure" id="GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__i1013628">
                           <p class="titleinfigure">Figure 4-4 Example of Adding a Database to a Multiple-Source Environment</p><img width="366" src="img/strep043.gif" alt="Description of Figure 4-4 follows" title="Description of Figure 4-4 follows" longdesc="img_text/strep043.html"><br><a href="img_text/strep043.html">Description of "Figure 4-4 Example of Adding a Database to a Multiple-Source Environment"</a></div>
                        <!-- class="figure" -->
                        <p>When there are multiple source databases in an Oracle Streams replication environment, change cycling is possible. Change cycling happens when a change is sent back to the database where it originated. Typically, you should avoid change cycling. Before you configure your replication environment, see <a href="oracle-streams-tags.html#GUID-9339D29B-65F3-450B-B3CD-A7B4ADCA4AAF"> Oracle Streams Tags</a>, and ensure that you configure the replication environment to avoid change cycling.
                        </p>
                        <p>Complete the following steps to add a new source/destination database to an existing multiple-source Oracle Streams replication environment:</p>
                        <div class="infoboxnote" id="GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__GUID-9B503DE0-6FA5-4E14-9264-D59B9D7D7439">
                           <p class="notep1">Note:</p>
                           <p>Ensure that no changes are made to the database objects being replicated at the database you are adding to the Oracle Streams replication environment until the instantiation at the database is complete.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Complete the necessary tasks to prepare each database in your environment for Oracle Streams. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-BB2E76CA-3645-4469-8750-4B276B8A955B">Tasks to Complete Before Configuring Oracle Streams Replication</a>"</span>.</span><div>
                              <p>Some of these tasks might not be required at certain databases.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create any necessary <code class="codeph">ANYDATA</code> queues that do not already exist. When you create a capture process, synchronous capture, or apply process, you associate the process with a specific <code class="codeph">ANYDATA</code> queue. When you create a propagation, you associate it with a specific source queue and destination queue. See <span class="q">"<a href="configuring-queues-and-propagations.html#GUID-ACF52296-CE1F-40E1-B63E-5A6EB6A284A1">Creating an ANYDATA Queue</a>"</span> for instructions.</span></li>
                        <li class="stepexpand" id="GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__i1010980"><span>Create one or more apply processes at the new database to apply the changes from its source databases. Ensure that each apply process uses rule sets that are appropriate for applying changes. Do not start any apply process at the new database. See <a href="configuring-implicit-apply.html#GUID-7D393976-B22F-4CF1-901E-62451DEB64DB"> Configuring Implicit Apply</a> for instructions.</span><div>
                              <p>Keeping the apply processes stopped prevents changes made at the source databases from being applied before the instantiation of the new database is completed. Starting the apply processes might lead to incorrect data and errors.</p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__i1010989"><span>If the new database will be a source database, then, at all databases that will be destination databases for the changes made at the new database, create one or more apply processes to apply changes from the new database. Ensure that each apply process uses rule sets that are appropriate for applying changes. Do not start any of these new apply processes. See <a href="configuring-implicit-apply.html#GUID-7D393976-B22F-4CF1-901E-62451DEB64DB"> Configuring Implicit Apply</a> for instructions.</span></li>
                        <li class="stepexpand"><span>Configure propagations at the databases that will be source databases of the new database to send changes to the new database. Ensure that each propagation uses rule sets that are appropriate for propagating changes. See <span class="q">"<a href="configuring-queues-and-propagations.html#GUID-15AAD2ED-F1AD-465D-A8B4-897F73EE45C9">Creating Oracle Streams Propagations Between ANYDATA Queues</a>"</span>.</span></li>
                        <li class="stepexpand"><span>If the new database will be a source database, then configure propagations at the new database to send changes from the new database to each of its destination databases. Ensure that each propagation uses rule sets that are appropriate for propagating changes. See <span class="q">"<a href="configuring-queues-and-propagations.html#GUID-15AAD2ED-F1AD-465D-A8B4-897F73EE45C9">Creating Oracle Streams Propagations Between ANYDATA Queues</a>"</span>.</span></li>
                        <li class="stepexpand"><span>If the new database will be a source database, and the replicated database objects already exist at the new database, then specify any necessary supplemental logging for the replicated database objects at the new database. See <span class="q">"<a href="preparing-for-oracle-streams-replication.html#GUID-12A4DC82-EEC7-4ACC-BF8F-8D82AA1D19DE">Specifying Supplemental Logging</a>"</span> for instructions.</span></li>
                        <li class="stepexpand"><span>At each source database for the new database, prepare for instantiation each database object for which changes will be applied by an apply process at the new database.</span><div>
                              <p>If you are using one or more capture processes, then run either the <code class="codeph">PREPARE_TABLE_INSTANTIATION</code>, <code class="codeph">PREPARE_SCHEMA_INSTANTIATION</code>, or <code class="codeph">PREPARE_GLOBAL_INSTANTIATION</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package for the specified table, specified schema, or entire database, respectively.
                              </p>
                              <p>If you are using one or more synchronous captures, then run the <code class="codeph">PREPARE_TABLE_INSTANTIATION</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package for the specified table.
                              </p>
                              <p>See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-CBDA09E8-D2E0-4E56-B7A7-E87BDC26FC5A">Preparing Database Objects for Instantiation at a Source Database</a>"</span> for instructions.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__i1011025"><span>If the new database will be a source database, then create one or more capture processes or synchronous captures to capture the relevant changes. See <a href="configuring-implicit-capture.html#GUID-7EFBBD88-3B31-4F13-B62D-6F9761336C22"> Configuring Implicit Capture</a> for instructions. If you plan to use capture processes, then Oracle recommends that you use only one capture process for each source database.</span><div>
                              <p>When you use a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add the capture process rules, it automatically runs the <code class="codeph">PREPARE_TABLE_INSTANTIATION</code>, <code class="codeph">PREPARE_SCHEMA_INSTANTIATION</code>, or <code class="codeph">PREPARE_GLOBAL_INSTANTIATION</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package for the specified table, specified schema, or entire database, respectively, if the capture process is a local capture process or a downstream capture process with a database link to the source database. 
                              </p>
                              <p>You must run the appropriate procedure to prepare for instantiation manually if any of the following conditions is true:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>You use the <code class="codeph">DBMS_RULE_ADM</code> package to add or modify rules.
                                    </p>
                                 </li>
                                 <li>
                                    <p>You use an existing capture process and do not add capture process rules for any replicated database object.</p>
                                 </li>
                                 <li>
                                    <p>You use a downstream capture process with no database link to the source database.</p>
                                 </li>
                              </ul>
                              <p>If you must prepare for instantiation manually, then see <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-CBDA09E8-D2E0-4E56-B7A7-E87BDC26FC5A">Preparing Database Objects for Instantiation at a Source Database</a>"</span> for instructions.
                              </p>
                              <p>When you use a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to add the synchronous capture rules, it automatically runs the <code class="codeph">PREPARE_SYNC_INSTANTIATION</code> function in the <code class="codeph">DBMS_CAPTURE_ADM</code> package for the specified table.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If the new database will be a source database, then start any capture process you created in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__i1011025">9</a> using the <code class="codeph">START_CAPTURE</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package.</span></li>
                     </ol>
                     <div class="section">
                        <p>After completing these steps, complete the steps in the appropriate section:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If the objects that are to be replicated with the new database already exist at the new database, then complete the steps in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-0276A1B4-0912-478D-986B-B076FD69BC08">Configuring Databases If the Replicated Objects Already Exist at the New Database</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>If the objects that are to be replicated with the new database do not already exist at the new database, complete the steps in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-D1026AD9-2EA7-4912-9D60-E9AB00EC64ED">Adding Replicated Objects to a New Database</a>"</span>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div><a id="STREP292"></a><div class="props_rev_3"><a id="GUID-0276A1B4-0912-478D-986B-B076FD69BC08" name="GUID-0276A1B4-0912-478D-986B-B076FD69BC08"></a><h5 id="STREP-GUID-0276A1B4-0912-478D-986B-B076FD69BC08" class="sect5"><span class="enumeration_section">4.3.4.1 </span>Configuring Databases If the Replicated Objects Already Exist at the New Database
                     </h5>
                     <div>
                        <div class="section">
                           <p>After completing the steps in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7">Adding a New Database to an Existing Multiple-Source Environment</a>"</span>, complete the following steps if the objects that are to be replicated with the new database already exist at the new database:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>For each source database of the new database, set the instantiation SCNs at the new database. These instantiation SCNs must be set, and only the changes made at a source database that are committed after the corresponding SCN for that database will be applied at the new database.</span><div>
                                 <p>For each source database of the new database, you can set these instantiation SCNs in one of the following ways:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Perform a metadata only export of the replicated database objects at the source database, and import the metadata at the new database. The import sets the required instantiation SCNs for the source database at the new database. Ensure that no rows are imported. In this case, ensure that the replicated database objects at the new database are consistent with the source database at the time of the export.</p>
                                       <p>If you are replicating DML changes only, then table level export/import is sufficient. If you are replicating DDL changes also, then additional considerations apply. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-478D3B54-1CFC-43DC-8741-6C7F7DF8A68D">Setting Instantiation SCNs Using Export/Import</a>"</span> for more information about performing a metadata export/import.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Set the instantiation SCNs manually at the new database for the replicated database objects. Ensure that the replicated database objects at the new database are consistent with the source database as of the corresponding instantiation SCN. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-F612AD02-15B7-4392-815E-1EB05A493633">Setting Instantiation SCNs Using the DBMS_APPLY_ADM Package</a>"</span> for instructions.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>For the new database, set the instantiation SCNs at each destination database of the new database. These instantiation SCNs must be set, and only the changes made at the new source database that are committed after the corresponding SCN will be applied at a destination database. If the new database is not a source database, then do not complete this step.</span><div>
                                 <p>You can set these instantiation SCNs for the new database in one of the following ways:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Perform a metadata only export at the new database and import the metadata at each destination database. Ensure that no rows are imported. The import sets the required instantiation SCNs for the new database at each destination database. In this case, ensure that the replicated database objects at each destination database are consistent with the new database at the time of the export.</p>
                                       <p>If you are replicating DML changes only, then table level export/import is sufficient. If you are replicating DDL changes also, then additional considerations apply. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-478D3B54-1CFC-43DC-8741-6C7F7DF8A68D">Setting Instantiation SCNs Using Export/Import</a>"</span> for more information about performing a metadata export/import.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Set the instantiation SCNs manually at each destination database for the replicated database objects. Ensure that the replicated database objects at each destination database are consistent with the new database as of the corresponding instantiation SCN. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-F612AD02-15B7-4392-815E-1EB05A493633">Setting Instantiation SCNs Using the DBMS_APPLY_ADM Package</a>"</span> for instructions.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li class="stepexpand"><span>At the new database, configure conflict resolution if conflicts are possible. See <a href="oracle-streams-conflict-resolution.html#GUID-5D79AA72-A682-4623-8A0B-4CF84D1FFC86"> Oracle Streams Conflict Resolution</a> for instructions.</span></li>
                           <li class="stepexpand"><span>Start the apply processes that you created at the new database in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__i1010980">3</a> using the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.</span></li>
                           <li class="stepexpand"><span>Start the apply processes that you created at each of the other destination databases in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__i1010989">4</a>. If the new database is not a source database, then do not complete this step.</span></li>
                        </ol>
                     </div>
                  </div><a id="STREP293"></a><div class="props_rev_3"><a id="GUID-D1026AD9-2EA7-4912-9D60-E9AB00EC64ED" name="GUID-D1026AD9-2EA7-4912-9D60-E9AB00EC64ED"></a><h5 id="STREP-GUID-D1026AD9-2EA7-4912-9D60-E9AB00EC64ED" class="sect5"><span class="enumeration_section">4.3.4.2 </span>Adding Replicated Objects to a New Database
                     </h5>
                     <div>
                        <div class="section">
                           <p>After completing the steps in <span class="q">"<a href="adding-to-an-oracle-streams-replication-environment.html#GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7">Adding a New Database to an Existing Multiple-Source Environment</a>"</span>, complete the following steps if the database objects that are to be shared with the new database do not already exist at the new database:
                           </p>
                           <ol>
                              <li>
                                 <p>If the new database is a source database for other databases, then, at each destination database of the new source database, set the instantiation SCNs for the new database.</p>
                                 <ol type="a">
                                    <li>
                                       <p>If one or more schemas will be created at the new database during instantiation or by a subsequent replicated DDL change, then run the <code class="codeph">SET_GLOBAL_INSTANTIATION_SCN</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package for the new database at each destination database of the new database.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If a schema exists at the new database, and one or more tables will be created in the schema during instantiation or by a subsequent replicated DDL change, then run the <code class="codeph">SET_SCHEMA_INSTANTIATION_SCN</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package for the schema at each destination database of the new database. Do this for each such schema.
                                       </p>
                                    </li>
                                 </ol>
                                 <p>See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-F612AD02-15B7-4392-815E-1EB05A493633">Setting Instantiation SCNs Using the DBMS_APPLY_ADM Package</a>"</span> for instructions.
                                 </p>
                                 <p>Because you run these procedures before any tables are instantiated at the new database, and because the local capture process or synchronous capture is configured already at the new database, you will not need to run the <code class="codeph">SET_TABLE_INSTANTIATION_SCN</code> procedure for each table created during instantiation. Instantiation SCNs will be set automatically for these tables at all of the other databases in the environment that will be destination databases of the new database.
                                 </p>
                                 <p>If the new database will not be a source database, then do not complete this step, and continue with the next step.</p>
                              </li>
                              <li id="GUID-D1026AD9-2EA7-4912-9D60-E9AB00EC64ED__i1011162">
                                 <p>Pick one source database from which to instantiate the replicated database objects at the new database using export/import. First, perform an export of the replicated database objects. Next, perform an import of the replicated database objects at the new database. See <a href="instantiation-and-oracle-streams-replication.html#GUID-003967CE-08B9-439C-902F-45E7B7C37371"> Instantiation and Oracle Streams Replication</a> and<a href="../sutil/index.html"><span class="italic"> Oracle Database Utilities </span></a>for information about using export/import.
                                 </p>
                                 <p>Do not allow any changes to the database objects being exported while exporting these database objects at the source database. Do not allow changes to the database objects being imported while importing these database objects at the destination database.</p>
                                 <p>You can specify a more stringent degree of consistency by using an export parameter such as <code class="codeph">FLASHBACK_SCN</code> or <code class="codeph">FLASHBACK_TIME</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>For each source database of the new database, except for the source database that performed the export for instantiation in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-D1026AD9-2EA7-4912-9D60-E9AB00EC64ED__i1011162">2</a>, set the instantiation SCNs at the new database. These instantiation SCNs must be set, and only the changes made at a source database that are committed after the corresponding SCN for that database will be applied at the new database.
                                 </p>
                                 <p>For each source database, you can set these instantiation SCNs in one of the following ways:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Perform a metadata only export at the source database and import the metadata at the new database. The import sets the required instantiation SCNs for the source database at the new database. In this case, ensure that the replicated database objects at the new database are consistent with the source database at the time of the export.</p>
                                       <p>If you are replicating DML changes only, then table level export/import is sufficient. If you are replicating DDL changes also, then additional considerations apply. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-478D3B54-1CFC-43DC-8741-6C7F7DF8A68D">Setting Instantiation SCNs Using Export/Import</a>"</span> for more information about performing a metadata export/import.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Set the instantiation SCNs manually at the new database for the replicated database objects. Ensure that the replicated database objects at the new database are consistent with the source database as of the corresponding instantiation SCN. See <span class="q">"<a href="instantiation-and-oracle-streams-replication.html#GUID-F612AD02-15B7-4392-815E-1EB05A493633">Setting Instantiation SCNs Using the DBMS_APPLY_ADM Package</a>"</span> for instructions.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>At the new database, configure conflict resolution if conflicts are possible. See <a href="oracle-streams-conflict-resolution.html#GUID-5D79AA72-A682-4623-8A0B-4CF84D1FFC86"> Oracle Streams Conflict Resolution</a> for instructions.
                                 </p>
                              </li>
                              <li>
                                 <p>Start the apply processes that you created in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__i1010980">3</a> at the new database using the <code class="codeph">START_APPLY</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package.
                                 </p>
                              </li>
                              <li>
                                 <p>Start the apply processes that you created in Step <a href="adding-to-an-oracle-streams-replication-environment.html#GUID-1F59FF2A-F015-4A9F-B006-C812ADE140B7__i1010989">4</a> at each of the other destination databases. If the new database is not a source database, then do not complete this step.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>