<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Best Practices for Propagation</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Replication Administrator’s Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Replication Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="streams-replication-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-01-24T23:25:23-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2003, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83780-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="best-practices-for-capture.html" title="Previous" type="text/html">
      <link rel="next" href="best-practices-for-apply.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Streams Replication Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="STREP">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="best-practices-for-capture.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="best-practices-for-apply.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Replication Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-streams-replication-best-practices.html" property="item" typeof="WebPage"><span property="name"> Oracle Streams Replication Best Practices </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Best Practices for Propagation</li>
            </ol>
            <a id="GUID-60DFF412-B6E3-4FD6-91F0-0ECC31EE7108" name="GUID-60DFF412-B6E3-4FD6-91F0-0ECC31EE7108"></a><a id="STREP152"></a>
            
            <h2 id="STREP-GUID-60DFF412-B6E3-4FD6-91F0-0ECC31EE7108" class="sect2"><span class="enumeration_chapter">17 </span> Best Practices for Propagation
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d73024e100" class="indexterm-anchor"></a><a id="d73024e106" class="indexterm-anchor"></a>This chapter describes the best practices for propagating messages in an Oracle Streams replication environment. This chapter includes these topics:
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="best-practices-for-propagation.html#GUID-BACEA4BE-674D-4058-B3FD-C220C71D0C0C">Best Practices for Propagation Configuration</a></p>
                  </li>
                  <li>
                     <p><a href="best-practices-for-propagation.html#GUID-F419B7E0-A336-4148-B16C-1F286FF928CF">Best Practices for Propagation Operation</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-60DFF412-B6E3-4FD6-91F0-0ECC31EE7108__GUID-1AC36EF0-A66B-4550-9046-90E72B87128B">
                  <p class="notep1">See Also:</p>
                  <p><span class="q">"<a href="best-practices-for-oracle-streams-replication-databases.html#GUID-9E3CABFC-BE9C-49ED-BD21-0A1858868AAB">Best Practices for Oracle Real Application Clusters and Oracle Streams</a>"</span></p>
               </div>
            </div><a id="STREP528"></a><div class="props_rev_3"><a id="GUID-BACEA4BE-674D-4058-B3FD-C220C71D0C0C" name="GUID-BACEA4BE-674D-4058-B3FD-C220C71D0C0C"></a><h3 id="STREP-GUID-BACEA4BE-674D-4058-B3FD-C220C71D0C0C" class="sect3"><span class="enumeration_section">17.1 </span>Best Practices for Propagation Configuration
               </h3>
               <div>
                  <p>This following sections describe best practices for configuring propagations:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="best-practices-for-propagation.html#GUID-D100FFC6-39C5-40CD-8E73-1B3C89430E5B">Use Queue-to-Queue Propagations</a></p>
                     </li>
                     <li>
                        <p><a href="best-practices-for-propagation.html#GUID-3A3FDAA1-6BFA-425F-9985-E2501CF4D950">Set the Propagation Latency for Each Propagation</a></p>
                     </li>
                     <li>
                        <p><a href="best-practices-for-propagation.html#GUID-8B8199EB-360D-4A31-ACDF-629FC2820971">Increase the SDU in a Wide Area Network for Better Network Performance</a></p>
                     </li>
                  </ul>
               </div><a id="STREP529"></a><div class="props_rev_3"><a id="GUID-D100FFC6-39C5-40CD-8E73-1B3C89430E5B" name="GUID-D100FFC6-39C5-40CD-8E73-1B3C89430E5B"></a><h4 id="STREP-GUID-D100FFC6-39C5-40CD-8E73-1B3C89430E5B" class="sect4"><span class="enumeration_section">17.1.1 </span>Use Queue-to-Queue Propagations
                  </h4>
                  <div>
                     <div class="section">
                        <p>A propagation can be queue-to-queue or queue-to-database link (queue-to-dblink). Use queue-to-queue propagations whenever possible. A queue-to-queue propagation always has its own exclusive propagation job to propagate messages from the source queue to the destination queue. Because each propagation job has its own propagation schedule, the propagation schedule of each queue-to-queue propagation can be managed separately. Even when multiple queue-to-queue propagations use the same database link, you can enable, disable, or set the propagation schedule for each queue-to-queue propagation separately.</p>
                        <p>Propagations configured before Oracle Database 10<span class="italic">g</span> Release 2 are queue-to-dblink propagations. Also, any propagation that includes a queue in a database before Oracle Database 10<span class="italic">g</span> Release 2 must be a queue-to-dblink propagation. When queue-to-dblink propagations are used, propagation will not succeed if the database link no longer connects to the owning instance of the destination queue.
                        </p>
                        <p>If you have queue-to-dblink propagations created in a prior release of Oracle Database, you can re-create these propagation during a maintenance window to use queue-to-queue propagation. To re-create a propagation, complete the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Stop the propagation.</span></li>
                        <li><span>Ensure that the source queue is empty.</span></li>
                        <li><span>Ensure that the destination queue is empty and has no unapplied, spilled messages before you drop the propagation.</span></li>
                        <li><span>Re-create the propagation with the <code class="codeph">queue_to_queue</code> parameter set to <code class="codeph">TRUE</code> in the creation procedure.</span></li>
                     </ol>
                     <div class="section">
                        <p>If you automate the configuration, as described in <span class="q">"<a href="best-practices-for-oracle-streams-replication-databases.html#GUID-730B5286-F0EA-4E67-BE0F-700610E16AD8">Automate the Oracle Streams Replication Configuration</a>"</span>, then each propagation uses queue-to-queue propagation automatically.
                        </p>
                        <div class="infoboxnotealso" id="GUID-D100FFC6-39C5-40CD-8E73-1B3C89430E5B__GUID-D42A3DA8-5F60-44E1-AAFA-B11FCE37F6C4">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="best-practices-for-oracle-streams-replication-databases.html#GUID-E88C3128-1177-44DC-9887-2CB22CD54809">Follow the Best Practices for Configuring and Managing Propagations</a>"</span> for information about propagations in an Oracle Real Application Clusters (Oracle RAC) environment
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="configuring-queues-and-propagations.html#GUID-15AAD2ED-F1AD-465D-A8B4-897F73EE45C9">Creating Oracle Streams Propagations Between ANYDATA Queues</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP530"></a><div class="props_rev_3"><a id="GUID-3A3FDAA1-6BFA-425F-9985-E2501CF4D950" name="GUID-3A3FDAA1-6BFA-425F-9985-E2501CF4D950"></a><h4 id="STREP-GUID-3A3FDAA1-6BFA-425F-9985-E2501CF4D950" class="sect4"><span class="enumeration_section">17.1.2 </span>Set the Propagation Latency for Each Propagation
                  </h4>
                  <div>
                     <div class="section">
                        <p>Propagation latency is the maximum wait, in seconds, in the propagation window for a message to be propagated after it is enqueued. Set the propagation latency to an appropriate value for each propagation in your Oracle Streams replication environment. The default propagation latency value is 60.</p>
                        <p>The following scenarios describe how a propagation will behave given different propagation latency values:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If latency is set to 60, and there are no messages enqueued during the propagation window, then the queue will not be checked for 60 seconds for messages to be propagated to the specified destination. That is, messages enqueued into the queue for the propagation destination will not be propagated for at least 60 more seconds.</p>
                           </li>
                           <li>
                              <p>If the latency is set to 600, and there are no messages enqueued during the propagation window, then the queue will not be checked for 10 minutes for messages to be propagated to the specified destination. That is, messages enqueued into the queue for the propagation destination will not be propagated for at least 10 more minutes.</p>
                           </li>
                           <li>
                              <p>If the latency is set to 0, then a job slave will be waiting for messages to be enqueued for the destination and, as soon as a message is enqueued, it will be propagated. Setting latency to 0 is not recommended because it might affect the ability of the database to shut down in <code class="codeph">NORMAL</code> mode.
                              </p>
                           </li>
                        </ul>
                        <p>You can set propagation parameters using the <code class="codeph">ALTER_PROPAGATION_SCHEDULE</code> procedure from the <code class="codeph">DBMS_AQADM</code> package. For example, to set the latency of a propagation from the <code class="codeph">q1</code> source queue owned by <code class="codeph">strmadmin</code> to the destination queue <code class="codeph">q2</code> at the database with a global name of <code class="codeph">dbs2.example.com</code>, log in as the Oracle Streams administrator, and run the following procedure:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_AQADM.ALTER_PROPAGATION_SCHEDULE(
   queue_name        =&gt; 'strmadmin.q1',
   destination       =&gt; 'dbs2.example.com',
   latency           =&gt; 5,
   destination_queue =&gt; 'strmadmin.q2'); 
END;
/
</pre><div class="infoboxnote" id="GUID-3A3FDAA1-6BFA-425F-9985-E2501CF4D950__GUID-103C339B-3A34-4AFE-910E-8A8A52216195">
                           <p class="notep1">Note:</p>
                           <p>If the <code class="codeph">latency</code> parameter is not specified, then propagation latency is set to the default value of 60. 
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-3A3FDAA1-6BFA-425F-9985-E2501CF4D950__GUID-B9BE2F58-F131-4F35-83B7-B9C0DB047E90">
                           <p class="notep1">See Also:</p>
                           <p><a href="../strms/oracle-streams-staging-and-propagation.html#STRMS003"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STREP531"></a><div class="props_rev_3"><a id="GUID-8B8199EB-360D-4A31-ACDF-629FC2820971" name="GUID-8B8199EB-360D-4A31-ACDF-629FC2820971"></a><h4 id="STREP-GUID-8B8199EB-360D-4A31-ACDF-629FC2820971" class="sect4"><span class="enumeration_section">17.1.3 </span>Increase the SDU in a Wide Area Network for Better Network Performance
                  </h4>
                  <div>
                     <p>When using Oracle Streams propagation in a Wide Area Network (WAN), increase the session data unit (SDU) to improve the propagation performance. The maximum value for SDU is 32K (32767). The SDU value for network transmission is negotiated between the sender and receiver sides of the connection, and the minimum SDU value of the two endpoints is used for any individual connection. To take advantage of an increased SDU for Oracle Streams propagation, the receiving side <code class="codeph">sqlnet.ora</code> file must include the <code class="codeph">DEFAULT_SDU_SIZE</code> parameter. The receiving side <code class="codeph">listener.ora</code> file must indicate the SDU change for the system identifier (SID). The sending side <code class="codeph">tnsnames.ora</code> file connect string must also include the SDU modification for the particular service.
                     </p>
                     <p>In addition, the <code class="codeph">SEND_BUF_SIZE</code> and <code class="codeph">RECV_BUF_SIZE</code> parameters in the <code class="codeph">listener.ora</code> and <code class="codeph">tnsnames.ora</code> files increase the performance of propagation on your system. These parameters increase the size of the buffer used to send or receive the propagated messages. These parameters should only be increased after careful analysis of their overall impact on system performance.
                     </p>
                     <div class="infoboxnotealso" id="GUID-8B8199EB-360D-4A31-ACDF-629FC2820971__GUID-D9ED2AD9-F247-436F-886E-4406172BB784">
                        <p class="notep1">See Also:</p>
                        <p><a href="../netag/optimizing-performance.html#NETAG0141"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a></p>
                     </div>
                  </div>
               </div>
            </div><a id="STREP532"></a><div class="props_rev_3"><a id="GUID-F419B7E0-A336-4148-B16C-1F286FF928CF" name="GUID-F419B7E0-A336-4148-B16C-1F286FF928CF"></a><h3 id="STREP-GUID-F419B7E0-A336-4148-B16C-1F286FF928CF" class="sect3"><span class="enumeration_section">17.2 </span>Best Practices for Propagation Operation
               </h3>
               <div>
                  <p>The following section describes best practices for operating existing propagations.</p>
               </div><a id="STREP533"></a><div class="props_rev_3"><a id="GUID-B35F79D2-496C-42BC-8583-E69E31F5B67B" name="GUID-B35F79D2-496C-42BC-8583-E69E31F5B67B"></a><h4 id="STREP-GUID-B35F79D2-496C-42BC-8583-E69E31F5B67B" class="sect4"><span class="enumeration_section">17.2.1 </span>Restart Broken Propagations
                  </h4>
                  <div>
                     <div class="section">
                        <p>Sometimes, the propagation job for a propagation might become "broken" or fail to start after it encounters an error or after a database restart. Typically, stopping and restarting the propagation solves the problem. For example, to stop and restart a propagation named <code class="codeph">prop1</code>, run the following procedures:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_PROPAGATION_ADM.STOP_PROPAGATION(
    propagation_name =&gt; 'prop1');
END;
/

BEGIN
  DBMS_PROPAGATION_ADM.START_PROPAGATION(
    propagation_name =&gt; 'prop1');
END;
/
</pre><p>If running these procedures does not correct the problem, then run the <code class="codeph">STOP_PROPAGATION</code> procedure with the <code class="codeph">force</code> parameter set to <code class="codeph">TRUE</code>, and restart propagation. For example:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_PROPAGATION_ADM.STOP_PROPAGATION(
    propagation_name =&gt; 'prop1',
    force            =&gt; TRUE);
END;
/

BEGIN
  DBMS_PROPAGATION_ADM.START_PROPAGATION(
    propagation_name =&gt; 'prop1');
END;
/
</pre><p>When you stop a propagation with the <code class="codeph">force</code> parameter set to <code class="codeph">TRUE</code>, the statistics for the propagation are cleared.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>