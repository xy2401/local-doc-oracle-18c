<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Using Information Provisioning</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="streams-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-01-25T21:40:57-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83781-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="information-provisioning-concepts.html" title="Previous" type="text/html">
      <link rel="next" href="monitoring-file-group-and-tablespace-repositories.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Streams Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="STRMS">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="information-provisioning-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="monitoring-file-group-and-tablespace-repositories.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-streams-information-provisioning.html" property="item" typeof="WebPage"><span property="name">    Oracle Streams Information Provisioning </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">     Using Information Provisioning</li>
            </ol>
            <a id="GUID-672D3744-E09A-4FE3-9708-9AB0EA3AE9D7" name="GUID-672D3744-E09A-4FE3-9708-9AB0EA3AE9D7"></a><a id="STRMS018"></a>
            
            <h2 id="STRMS-GUID-672D3744-E09A-4FE3-9708-9AB0EA3AE9D7" class="sect2"><span class="enumeration_chapter">36 </span>     Using Information Provisioning
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d140965e125" class="indexterm-anchor"></a>This chapter describes how to use information provisioning. This chapter includes an example that creates a <a href="strms_glossary.html#GUID-EE42AF07-7149-471E-A2D7-47AE2CCD7155"><span class="xrefglossterm">tablespace repository</span></a>, examples that transfer tablespaces between databases, and an example that uses a <a href="strms_glossary.html#GUID-F76D0C68-7DC4-44A6-9648-6D80E19C6C46"><span class="xrefglossterm">file group repository</span></a> to store different versions of files.
               </p>
               <p>The following topics describe using information provisioning:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="using-information-provisioning.html#GUID-8CCF73CD-A1A2-4C2D-B8B8-6425FB287AA0">Using a Tablespace Repository</a></p>
                  </li>
                  <li>
                     <p><a href="using-information-provisioning.html#GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299">Using a File Group Repository</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-672D3744-E09A-4FE3-9708-9AB0EA3AE9D7__GUID-48FCE226-AA6A-4022-99CB-7908AF731D7D">
                  <p class="notep1">See Also:</p>
                  <p><a href="information-provisioning-concepts.html#GUID-61AE59ED-B087-49E4-BD9F-7602935285F9"> Information Provisioning Concepts</a></p>
               </div>
            </div><a id="STRMS161"></a><div class="props_rev_3"><a id="GUID-8CCF73CD-A1A2-4C2D-B8B8-6425FB287AA0" name="GUID-8CCF73CD-A1A2-4C2D-B8B8-6425FB287AA0"></a><h3 id="STRMS-GUID-8CCF73CD-A1A2-4C2D-B8B8-6425FB287AA0" class="sect3"><span class="enumeration_section">36.1 </span>Using a Tablespace Repository
               </h3>
               <div>
                  <p>The following procedures in the <code class="codeph">DBMS_STREAMS_TABLESPACE_ADM</code> package can create a <a href="strms_glossary.html#GUID-EE42AF07-7149-471E-A2D7-47AE2CCD7155"><span class="xrefglossterm">tablespace repository</span></a>, add versioned tablespace sets to a tablespace repository, and copy versioned tablespace sets from a tablespace repository:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">ATTACH_TABLESPACES</code>: This procedure copies a <a href="strms_glossary.html#GUID-6D149D24-FA88-45A4-AE92-BAE212116D38"><span class="xrefglossterm">version</span></a> of a tablespace set from a tablespace repository and attaches the tablespaces to a database.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">CLONE_TABLESPACES</code>: This procedure adds a new version of a tablespace set to a tablespace repository by copying the tablespace set from a database. The tablespaces in the tablespace set remain part of the database from which they were copied.
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">DETACH_TABLESPACES</code>: This procedure adds a new version of a tablespace set to a tablespace repository by moving the tablespace set from a database to the repository. The tablespaces in the tablespace set are dropped from the database from which they were copied.
                        </p>
                     </li>
                  </ul>
                  <p>This section illustrates how to use a tablespace repository with an example scenario. In the scenario, the goal is to run quarterly reports on the sales tablespaces (<code class="codeph">sales_tbs1</code> and <code class="codeph">sales_tbs2</code>). Sales are recorded in these tablespaces in the <code class="codeph">inst1.example.com</code> database. The example clones the tablespaces quarterly and stores a new version of the tablespaces in the tablespace repository. The tablespace repository also resides in the <code class="codeph">inst1.example.com</code> database. When a specific version of the tablespace set is required to run reports at a reporting database, it is copied from the tablespace repository and attached to the reporting database.
                  </p>
                  <p>In this example scenario, the following databases are the reporting databases:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The reporting database <code class="codeph">inst2.example.com</code> shares a file system with the <code class="codeph">inst1.example.com</code> database. Also, the reports that are run on <code class="codeph">inst2.example.com</code> might make changes to the tablespace. Therefore, the tablespaces are made read/write at <code class="codeph">inst2.example.com</code>, and, when the reports are complete, a new version of the tablespace files is stored in a separate directory from the original version of the tablespace files.
                        </p>
                     </li>
                     <li>
                        <p>The reporting system <code class="codeph">inst3.example.com</code> does not share a file system with the <code class="codeph">inst1.example.com</code> database. The reports that are run on <code class="codeph">inst3.example.com</code> do not make any changes to the tablespace. Therefore, the tablespaces remain read-only at <code class="codeph">inst3.example.com</code>, and, when the reports are complete, the original version of the tablespace files remains in a single directory.
                        </p>
                     </li>
                  </ul>
                  <p>The following sections describe how to create and populate the tablespace repository and how to use the tablespace repository to run reports at the other databases:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="using-information-provisioning.html#GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB">Creating and Populating a Tablespace Repository</a></p>
                     </li>
                     <li>
                        <p><a href="using-information-provisioning.html#GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E">Using a Tablespace Repository for Remote Reporting with a Shared File System</a></p>
                     </li>
                     <li>
                        <p><a href="using-information-provisioning.html#GUID-FB9CDC62-3B4D-4957-B736-799897060CA6">Using a Tablespace Repository for Remote Reporting without a Shared File System</a></p>
                     </li>
                  </ul>
                  <p>These examples must be run by an administrative user with the necessary privileges to run the procedures listed previously.</p>
                  <div class="infoboxnotealso" id="GUID-8CCF73CD-A1A2-4C2D-B8B8-6425FB287AA0__GUID-559A4E73-58B2-47E6-B597-47A3D548CF9E">
                     <p class="notep1">See Also:</p>
                     <p><a href="../arpls/DBMS_STREAMS_TABLESPACE_ADM.html#ARPLS551"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about these procedures and the privileges required to run them
                     </p>
                  </div>
               </div><a id="STRMS1133"></a><a id="STRMS1132"></a><div class="props_rev_3"><a id="GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB" name="GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB"></a><h4 id="STRMS-GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB" class="sect4"><span class="enumeration_section">36.1.1 </span>Creating and Populating a Tablespace Repository
                  </h4>
                  <div>
                     <div class="section">
                        <p>This example creates a tablespaces repository and adds a new <a href="strms_glossary.html#GUID-6D149D24-FA88-45A4-AE92-BAE212116D38"><span class="xrefglossterm">version</span></a> of a tablespace set to the repository after each quarter. The tablespace set consists of the sales tablespaces for a business: <code class="codeph">sales_tbs1</code> and <code class="codeph">sales_tbs2</code>.
                        </p>
                        <p><a href="using-information-provisioning.html#GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB__CHDBEDFG">Figure 36-1</a> provides an overview of the <a href="strms_glossary.html#GUID-EE42AF07-7149-471E-A2D7-47AE2CCD7155"><span class="xrefglossterm">tablespace repository</span></a> created in this example:
                        </p>
                        <div class="figure" id="GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB__CHDBEDFG">
                           <p class="titleinfigure">Figure 36-1 Example Tablespace Repository</p><img width="338" src="img/strms053.gif" alt="Description of Figure 36-1 follows" title="Description of Figure 36-1 follows" longdesc="img_text/strms053.html"><br><a href="img_text/strms053.html">Description of "Figure 36-1 Example Tablespace Repository"</a></div>
                        <!-- class="figure" -->
                        <p>The following table shows the tablespace set versions created in this example, their directory objects, and the corresponding file system directory for each directory object.</p>
                        <div class="tblformalwide" id="GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB__GUID-E2C554A0-29DD-4640-9660-7A05F6BB5976">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This table lists each version in the tablespace repository and shows the directory object and corresponding file system directory for each version." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d140965e570">Version</th>
                                    <th align="left" valign="bottom" width="23%" id="d140965e573">Directory Object</th>
                                    <th align="left" valign="bottom" width="53%" id="d140965e576">Corresponding File System Directory</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d140965e581" headers="d140965e570 ">
                                       <p><code class="codeph">v_q1fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d140965e581 d140965e573 ">
                                       <p><code class="codeph">q1fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d140965e581 d140965e576 ">
                                       <p><code class="codeph">/home/sales/q1fy2005</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d140965e594" headers="d140965e570 ">
                                       <p><code class="codeph">v_q2fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d140965e594 d140965e573 ">
                                       <p><code class="codeph">q2fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="53%" headers="d140965e594 d140965e576 ">
                                       <p><code class="codeph">/home/sales/q2fy2005</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>This example makes the following assumptions:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">inst1.example.com</code> database exists.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">sales_tbs1</code> and <code class="codeph">sales_tbs2</code> tablespaces exist in the <code class="codeph">inst1.example.com</code> database.
                              </p>
                           </li>
                        </ul>
                        <p>The following steps create and populate a tablespace repository:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect as an administrative user to the database where the sales tablespaces are modified with new sales data. In this example, connect to the <code class="codeph">inst1.example.com</code> database.</span><div>
                              <p>The administrative user must have the necessary privileges to run the procedures in the <code class="codeph">DBMS_STREAMS_TABLESPACE_ADM</code> package and must have the necessary privileges to create directory objects.
                              </p>
                              <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a directory object for the first quarter in fiscal year 2005 on <code class="codeph">inst1.example.com</code>:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY q1fy2005 AS '/home/sales/q1fy2005';
</pre><p>The specified file system directory must exist when you create the directory object.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a directory object that corresponds to the directory that contains the data files for the tablespaces in the <code class="codeph">inst1.example.com</code> database. For example, if the data files for the tablespaces are in the <code class="codeph">/orc/inst1/dbs</code> directory, then create a directory object that corresponds to this directory:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY dbfiles_inst1 AS '/orc/inst1/dbs';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Clone the tablespace set and add the first version of the tablespace set to the tablespace repository:</span><div><pre class="oac_no_warn" dir="ltr">DECLARE
  tbs_set DBMS_STREAMS_TABLESPACE_ADM.TABLESPACE_SET;
BEGIN
  tbs_set(1) := 'sales_tbs1';
  tbs_set(2) := 'sales_tbs2';
  DBMS_STREAMS_TABLESPACE_ADM.CLONE_TABLESPACES(
    tablespace_names            =&gt; tbs_set,
    tablespace_directory_object =&gt; 'q1fy2005',
    file_group_name             =&gt; 'strmadmin.sales',
    version_name                =&gt; 'v_q1fy2005');
END;
/
</pre><p>The <code class="codeph">sales</code> <a href="strms_glossary.html#GUID-19D9EE8E-5E3A-4BDA-B526-4832FDE42F1B"><span class="xrefglossterm">file group</span></a> is created automatically if it does not exist.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB__CHDEIBEC"><span>When the second quarter in fiscal year 2005 is complete, create a directory object for the second quarter in fiscal year 2005:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY q2fy2005 AS '/home/sales/q2fy2005';
</pre><p>The specified file system directory must exist when you create the directory object.</p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB__CHDECEBF"><span>Clone the tablespace set and add the next version of the tablespace set to the tablespace repository at the <code class="codeph">inst1.example.com</code> database:</span><div><pre class="oac_no_warn" dir="ltr">DECLARE
  tbs_set DBMS_STREAMS_TABLESPACE_ADM.TABLESPACE_SET;
BEGIN
  tbs_set(1) := 'sales_tbs1';
  tbs_set(2) := 'sales_tbs2';
  DBMS_STREAMS_TABLESPACE_ADM.CLONE_TABLESPACES(
    tablespace_names            =&gt; tbs_set,
    tablespace_directory_object =&gt; 'q2fy2005',
    file_group_name             =&gt; 'strmadmin.sales',
    version_name                =&gt; 'v_q2fy2005');
END;
/
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Steps <a href="using-information-provisioning.html#GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB__CHDEIBEC">5</a> and <a href="using-information-provisioning.html#GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB__CHDECEBF">6</a> can be repeated whenever a quarter ends to store a version of the tablespace set for each quarter. Each time, create a directory object to store the tablespace files for the quarter, and specify a unique version name for the quarter.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STRMS1135"></a><a id="STRMS1136"></a><a id="STRMS1134"></a><div class="props_rev_3"><a id="GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E" name="GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E"></a><h4 id="STRMS-GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E" class="sect4"><span class="enumeration_section">36.1.2 </span>Using a Tablespace Repository for Remote Reporting with a Shared File System
                  </h4>
                  <div>
                     <div class="section">
                        <p>This example runs reports at <code class="codeph">inst2.example.com</code> on specific versions of the sales tablespaces stored in a <a href="strms_glossary.html#GUID-EE42AF07-7149-471E-A2D7-47AE2CCD7155"><span class="xrefglossterm">tablespace repository</span></a> at <code class="codeph">inst1.example.com</code>. These two databases share a file system, and the reports that are run on <code class="codeph">inst2.example.com</code> might make changes to the tablespace. Therefore, the tablespaces are made read/write at <code class="codeph">inst2.example.com</code>. When the reports are complete, a new <a href="strms_glossary.html#GUID-6D149D24-FA88-45A4-AE92-BAE212116D38"><span class="xrefglossterm">version</span></a> of the tablespace files is stored in a separate directory from the original version of the tablespace files.
                        </p>
                        <p><a href="using-information-provisioning.html#GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E__CHDEJJIH">Figure 36-2</a> provides an overview of how tablespaces in a tablespace repository are attached to a different database in this example:
                        </p>
                        <div class="figure" id="GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E__CHDEJJIH">
                           <p class="titleinfigure">Figure 36-2 Attaching Tablespaces with a Shared File System</p><img width="393" src="img/strms054.gif" alt="Description of Figure 36-2 follows" title="Description of Figure 36-2 follows" longdesc="img_text/strms054.html"><br><a href="img_text/strms054.html">Description of "Figure 36-2 Attaching Tablespaces with a Shared File System"</a></div>
                        <!-- class="figure" -->
                        <p><a href="using-information-provisioning.html#GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E__CHDBGGIA">Figure 36-3</a> provides an overview of how tablespaces are detached and placed in a tablespace repository in this example:
                        </p>
                        <div class="figure" id="GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E__CHDBGGIA">
                           <p class="titleinfigure">Figure 36-3 Detaching Tablespaces with a Shared File System</p><img width="339" src="img/strms055.gif" alt="Description of Figure 36-3 follows" title="Description of Figure 36-3 follows" longdesc="img_text/strms055.html"><br><a href="img_text/strms055.html">Description of "Figure 36-3 Detaching Tablespaces with a Shared File System"</a></div>
                        <!-- class="figure" -->
                        <p>The following table shows the tablespace set versions in the tablespace repository when this example is complete. It shows the directory object for each version and the corresponding file system directory for each directory object. The versions that are new are created in this example. The versions that existed before this example were created in <span class="q">"<a href="using-information-provisioning.html#GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB">Creating and Populating a Tablespace Repository</a>"</span>.
                        </p>
                        <div class="tblformalwide" id="GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E__GUID-1389A5A4-3D14-42EA-84AF-D3FD36A8E5A3">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This table lists each version in the tablespace repository and shows the directory object and corresponding file system directory for each version." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="23%" id="d140965e908">Version</th>
                                    <th align="left" valign="bottom" width="23%" id="d140965e911">Directory Object</th>
                                    <th align="left" valign="bottom" width="40%" id="d140965e914">Corresponding File System Directory</th>
                                    <th align="left" valign="bottom" width="13%" id="d140965e917">New?</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d140965e922" headers="d140965e908 ">
                                       <p><code class="codeph">v_q1fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d140965e922 d140965e911 ">
                                       <p><code class="codeph">q1fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d140965e922 d140965e914 ">
                                       <p><code class="codeph">/home/sales/q1fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d140965e922 d140965e917 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d140965e938" headers="d140965e908 ">
                                       <p><code class="codeph">v_q1fy2005_r</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d140965e938 d140965e911 ">
                                       <p><code class="codeph">q1fy2005_r</code></p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d140965e938 d140965e914 ">
                                       <p><code class="codeph">/home/sales/q1fy2005_r</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d140965e938 d140965e917 ">
                                       <p>Yes</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d140965e954" headers="d140965e908 ">
                                       <p><code class="codeph">v_q2fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d140965e954 d140965e911 ">
                                       <p><code class="codeph">q2fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d140965e954 d140965e914 ">
                                       <p><code class="codeph">/home/sales/q2fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d140965e954 d140965e917 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="23%" id="d140965e970" headers="d140965e908 ">
                                       <p><code class="codeph">v_q2fy2005_r</code></p>
                                    </td>
                                    <td align="left" valign="top" width="23%" headers="d140965e970 d140965e911 ">
                                       <p><code class="codeph">q2fy2005_r</code></p>
                                    </td>
                                    <td align="left" valign="top" width="40%" headers="d140965e970 d140965e914 ">
                                       <p><code class="codeph">/home/sales/q2fy2005_r</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d140965e970 d140965e917 ">
                                       <p>Yes</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>This example makes the following assumptions:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">inst1.example.com</code> and <code class="codeph">inst2.example.com</code> databases exist.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">inst1.example.com</code> and <code class="codeph">inst2.example.com</code> databases can access a shared file system.
                              </p>
                           </li>
                           <li>
                              <p>Networking is configured between the databases so that these databases can communicate with each other.</p>
                           </li>
                           <li>
                              <p>A tablespace repository that contains a version of the sales tablespaces (<code class="codeph">sales_tbs1</code> and <code class="codeph">sales_tbs2</code>) for various quarters exists in the <code class="codeph">inst1.example.com</code> database. This tablespace repository was created and populated in the example <span class="q">"<a href="using-information-provisioning.html#GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB">Creating and Populating a Tablespace Repository</a>"</span>.
                              </p>
                           </li>
                        </ul>
                        <p>Complete the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In SQL*Plus, connect to <code class="codeph">inst1.example.com</code> as an administrative user.</span><div>
                              <p>The administrative user must have the necessary privileges to create directory objects.</p>
                              <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a directory object that will store the tablespace files for the first quarter in fiscal year 2005 on <code class="codeph">inst1.example.com</code> after the <code class="codeph">inst2.example.com</code> database has completed reporting on this quarter:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY q1fy2005_r AS '/home/sales/q1fy2005_r';
</pre><p>The specified file system directory must exist when you create the directory objects.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the <code class="codeph">inst2.example.com</code> database as an administrative user.</span><div>
                              <p>The administrative user must have the necessary privileges to run the procedures in the <code class="codeph">DBMS_STREAMS_TABLESPACE_ADM</code> package, create directory objects, and create database links.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create two directory objects for the first quarter in fiscal year 2005 on <code class="codeph">inst2.example.com</code>. These directory objects must have the same names and correspond to the same directories on the shared file system as the directory objects used by the tablespace repository in the <code class="codeph">inst1.example.com</code> database for the first quarter:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY q1fy2005 AS '/home/sales/q1fy2005';

CREATE OR REPLACE DIRECTORY q1fy2005_r AS '/home/sales/q1fy2005_r';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create a database link from <code class="codeph">inst2.example.com</code> to the <code class="codeph">inst1.example.com</code> database. For example:</span><div><pre class="oac_no_warn" dir="ltr">CREATE DATABASE LINK inst1.example.com CONNECT TO strmadmin 
   IDENTIFIED BY <span class="italic">password</span> 
   USING 'inst1.example.com';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Attach the tablespace set to the <code class="codeph">inst2.example.com</code> database from the <code class="codeph">strmadmin.sales</code> <a href="strms_glossary.html#GUID-19D9EE8E-5E3A-4BDA-B526-4832FDE42F1B"><span class="xrefglossterm">file group</span></a> in the <code class="codeph">inst1.example.com</code> database:</span><div><pre class="oac_no_warn" dir="ltr">DECLARE
  tbs_set DBMS_STREAMS_TABLESPACE_ADM.TABLESPACE_SET;
BEGIN
  DBMS_STREAMS_TABLESPACE_ADM.ATTACH_TABLESPACES(
    file_group_name            =&gt; 'strmadmin.sales',
    version_name               =&gt; 'v_q1fy2005',
    datafiles_directory_object =&gt; 'q1fy2005_r',
    repository_db_link         =&gt; 'inst1.example.com',
    tablespace_names           =&gt; tbs_set);
END;
/
</pre><p>Notice that <code class="codeph">q1fy2005_r</code> is specified for the <code class="codeph">datafiles_directory_object</code> parameter. Therefore, the data files for the tablespaces and the export dump file are copied from the <code class="codeph">/home/sales/q1fy2005</code> location to the <code class="codeph">/home/sales/q1fy2005_r</code> location by the procedure. The attached tablespaces in the <code class="codeph">inst2.example.com</code> database use the data files in the <code class="codeph">/home/sales/q1fy2005_r</code> location. The Data Pump import log file also is placed in this directory.
                              </p>
                              <p>The attached tablespaces use the data files in the <code class="codeph">/home/sales/q1fy2005_r</code> location. However, the <code class="codeph">v_q1fy2005</code> version of the tablespaces in the tablespace repository consists of the files in the original <code class="codeph">/home/sales/q1fy2005</code> location.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Make the tablespaces read/write at <code class="codeph">inst2.example.com</code>:</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE sales_tbs1 READ WRITE;

ALTER TABLESPACE sales_tbs2 READ WRITE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the reports on the data in the sales tablespaces at the <code class="codeph">inst2.example.com</code> database. The reports make changes to the tablespaces.</span></li>
                        <li class="stepexpand"><span>Detach the version of the tablespace set for the first quarter of 2005 from the <code class="codeph">inst2.example.com</code> database:</span><div><pre class="oac_no_warn" dir="ltr">DECLARE
  tbs_set  DBMS_STREAMS_TABLESPACE_ADM.TABLESPACE_SET;
BEGIN
  tbs_set(1) := 'sales_tbs1';
  tbs_set(2) := 'sales_tbs2';
  DBMS_STREAMS_TABLESPACE_ADM.DETACH_TABLESPACES(
    tablespace_names        =&gt; tbs_set,
    export_directory_object =&gt; 'q1fy2005_r',
    file_group_name         =&gt; 'strmadmin.sales',
    version_name            =&gt; 'v_q1fy2005_r',
    repository_db_link      =&gt; 'inst1.example.com');
END;
/
</pre><p>Only one version of a tablespace set can be attached to a database at a time. Therefore, the version of the sales tablespaces for the first quarter of 2005 must be detached from <code class="codeph">inst2.example.com</code> before the version of this tablespace set for the second quarter of 2005 can be attached.
                              </p>
                              <p>Also, notice that the specified <code class="codeph">export_directory_object</code> is <code class="codeph">q1fy2005_r</code>, and that the <code class="codeph">version_name</code> is <code class="codeph">v_q1fy2005_r</code>. After the detach operation, there are two versions of the tablespace files for the first quarter of 2005 stored in the tablespace repository on <code class="codeph">inst1.example.com</code>: one version of the tablespace before reporting and one version after reporting. These two versions have different version names and are stored in different directory objects.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the <code class="codeph">inst1.example.com</code> database as an administrative user.</span></li>
                        <li class="stepexpand" id="GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E__CHDHDCAI"><span>Create a directory object that will store the tablespace files for the second quarter in fiscal year 2005 on <code class="codeph">inst1.example.com</code> after the <code class="codeph">inst2.example.com</code> database has completed reporting on this quarter:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY q2fy2005_r AS '/home/sales/q2fy2005_r';
</pre><p>The specified file system directory must exist when you create the directory object.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the <code class="codeph">inst2.example.com</code> database as an administrative user.</span></li>
                        <li class="stepexpand"><span>Create two directory objects for the second quarter in fiscal year 2005 at <code class="codeph">inst2.example.com</code>. These directory objects must have the same names and correspond to the same directories on the shared file system as the directory objects used by the tablespace repository in the <code class="codeph">inst1.example.com</code> database for the second quarter:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY q2fy2005 AS '/home/sales/q2fy2005';

CREATE OR REPLACE DIRECTORY q2fy2005_r AS '/home/sales/q2fy2005_r';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Attach the tablespace set for the second quarter of 2005 to the <code class="codeph">inst2.example.com</code> database from the <code class="codeph">sales</code> file group in the <code class="codeph">inst1.example.com</code> database:</span><div><pre class="oac_no_warn" dir="ltr">DECLARE
  tbs_set DBMS_STREAMS_TABLESPACE_ADM.TABLESPACE_SET;
BEGIN
  DBMS_STREAMS_TABLESPACE_ADM.ATTACH_TABLESPACES(
    file_group_name            =&gt; 'strmadmin.sales',
    version_name               =&gt; 'v_q2fy2005',
    datafiles_directory_object =&gt; 'q2fy2005_r',
    repository_db_link         =&gt; 'inst1.example.com',
    tablespace_names           =&gt; tbs_set);
END;
/
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Make the tablespaces read/write at <code class="codeph">inst2.example.com</code>:</span><div><pre class="oac_no_warn" dir="ltr">ALTER TABLESPACE sales_tbs1 READ WRITE;

ALTER TABLESPACE sales_tbs2 READ WRITE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the reports on the data in the sales tablespaces at the <code class="codeph">inst2.example.com</code> database. The reports make changes to the tablespace.</span></li>
                        <li class="stepexpand" id="GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E__CHDFHCAB"><span>Detach the version of the tablespace set for the second quarter of 2005 from <code class="codeph">inst2.example.com</code>:</span><div><pre class="oac_no_warn" dir="ltr">DECLARE
  tbs_set  DBMS_STREAMS_TABLESPACE_ADM.TABLESPACE_SET;
BEGIN
  tbs_set(1) := 'sales_tbs1';
  tbs_set(2) := 'sales_tbs2';
  DBMS_STREAMS_TABLESPACE_ADM.DETACH_TABLESPACES(
    tablespace_names        =&gt; tbs_set,
    export_directory_object =&gt; 'q2fy2005_r',
    file_group_name         =&gt; 'strmadmin.sales',
    version_name            =&gt; 'v_q2fy2005_r',
    repository_db_link      =&gt; 'inst1.example.com');
END;
/
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Steps <a href="using-information-provisioning.html#GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E__CHDHDCAI">11</a>-<a href="using-information-provisioning.html#GUID-251034D2-31ED-46DF-932A-C1FAE1EC324E__CHDFHCAB">17</a> can be repeated whenever a quarter ends to run reports on each quarter.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STRMS1138"></a><a id="STRMS1137"></a><div class="props_rev_3"><a id="GUID-FB9CDC62-3B4D-4957-B736-799897060CA6" name="GUID-FB9CDC62-3B4D-4957-B736-799897060CA6"></a><h4 id="STRMS-GUID-FB9CDC62-3B4D-4957-B736-799897060CA6" class="sect4"><span class="enumeration_section">36.1.3 </span>Using a Tablespace Repository for Remote Reporting without a Shared File System
                  </h4>
                  <div>
                     <div class="section">
                        <p>This example runs reports at <code class="codeph">inst3.example.com</code> on specific versions of the sales tablespaces stored in a <a href="strms_glossary.html#GUID-EE42AF07-7149-471E-A2D7-47AE2CCD7155"><span class="xrefglossterm">tablespace repository</span></a> at <code class="codeph">inst1.example.com</code>. These two databases do not share a file system, and the reports that are run on <code class="codeph">inst3.example.com</code> do not make any changes to the tablespace. Therefore, the tablespaces remain read-only at <code class="codeph">inst3.example.com</code>, and, when the reports are complete, there is no need for a new <a href="strms_glossary.html#GUID-6D149D24-FA88-45A4-AE92-BAE212116D38"><span class="xrefglossterm">version</span></a> of the tablespace files in the tablespace repository on <code class="codeph">inst1.example.com</code>.
                        </p>
                        <p><a href="using-information-provisioning.html#GUID-FB9CDC62-3B4D-4957-B736-799897060CA6__CHDJEJDJ">Figure 36-4</a> provides an overview of how tablespaces in a tablespace repository are attached to a different database in this example:
                        </p>
                        <div class="figure" id="GUID-FB9CDC62-3B4D-4957-B736-799897060CA6__CHDJEJDJ">
                           <p class="titleinfigure">Figure 36-4 Attaching Tablespaces without a Shared File System</p><img width="467" src="img/strms056.gif" alt="Description of Figure 36-4 follows" title="Description of Figure 36-4 follows" longdesc="img_text/strms056.html"><br><a href="img_text/strms056.html">Description of "Figure 36-4 Attaching Tablespaces without a Shared File System"</a></div>
                        <!-- class="figure" -->
                        <p>The following table shows the directory objects used in this example. It shows the existing directory objects that are associated with tablespace repository versions on the <code class="codeph">inst1.example.com</code> database, and it shows the new directory objects created on the <code class="codeph">inst3.example.com</code> database in this example. The directory objects that existed before this example were created in <span class="q">"<a href="using-information-provisioning.html#GUID-1C13434F-1C57-4FEF-88A7-DBFBF1449ABB">Creating and Populating a Tablespace Repository</a>"</span>.
                        </p>
                        <div class="tblformalwide" id="GUID-FB9CDC62-3B4D-4957-B736-799897060CA6__GUID-5181A123-C027-4326-BC54-5C76C5B7C579">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This table lists each directory object used in this example. The table shows which directory objects are associated with a tablespace repository version and corresponding file system directory for each directory object. It also shows whether the directory object is created in the example (new) or existing." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="18%" id="d140965e1479">Directory Object</th>
                                    <th align="left" valign="bottom" width="13%" id="d140965e1482">Database</th>
                                    <th align="left" valign="bottom" width="26%" id="d140965e1485">Version</th>
                                    <th align="left" valign="bottom" width="36%" id="d140965e1488">Corresponding File System Directory</th>
                                    <th align="left" valign="bottom" width="6%" id="d140965e1491">New?</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d140965e1496" headers="d140965e1479 ">
                                       <p><code class="codeph">q1fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d140965e1496 d140965e1482 ">
                                       <p><code class="codeph">inst1.example.com</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d140965e1496 d140965e1485 ">
                                       <p><code class="codeph">v_q1fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d140965e1496 d140965e1488 ">
                                       <p><code class="codeph">/home/sales/q1fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="6%" headers="d140965e1496 d140965e1491 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d140965e1516" headers="d140965e1479 ">
                                       <p><code class="codeph">q2fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d140965e1516 d140965e1482 ">
                                       <p><code class="codeph">inst1.example.com</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d140965e1516 d140965e1485 ">
                                       <p><code class="codeph">v_q2fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d140965e1516 d140965e1488 ">
                                       <p><code class="codeph">/home/sales/q2fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="6%" headers="d140965e1516 d140965e1491 ">
                                       <p>No</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d140965e1536" headers="d140965e1479 ">
                                       <p><code class="codeph">q1fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d140965e1536 d140965e1482 ">
                                       <p><code class="codeph">inst3.example.com</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d140965e1536 d140965e1485 ">
                                       <p>Not associated with a tablespace repository version</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d140965e1536 d140965e1488 ">
                                       <p><code class="codeph">/usr/sales_data/fy2005q1</code></p>
                                    </td>
                                    <td align="left" valign="top" width="6%" headers="d140965e1536 d140965e1491 ">
                                       <p>Yes</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="18%" id="d140965e1555" headers="d140965e1479 ">
                                       <p><code class="codeph">q2fy2005</code></p>
                                    </td>
                                    <td align="left" valign="top" width="13%" headers="d140965e1555 d140965e1482 ">
                                       <p><code class="codeph">inst3.example.com</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d140965e1555 d140965e1485 ">
                                       <p>Not associated with a tablespace repository version</p>
                                    </td>
                                    <td align="left" valign="top" width="36%" headers="d140965e1555 d140965e1488 ">
                                       <p><code class="codeph">/usr/sales_data/fy2005q2</code></p>
                                    </td>
                                    <td align="left" valign="top" width="6%" headers="d140965e1555 d140965e1491 ">
                                       <p>Yes</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>This example makes the following assumptions:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">inst1.example.com</code> and <code class="codeph">inst3.example.com</code> databases exist.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">inst1.example.com</code> and <code class="codeph">inst3.example.com</code> databases do not share a file system.
                              </p>
                           </li>
                           <li>
                              <p>Networking is configured between the databases so that they can communicate with each other.</p>
                           </li>
                           <li>
                              <p>The sales tablespaces (<code class="codeph">sales_tbs1</code> and <code class="codeph">sales_tbs2</code>) exist in the <code class="codeph">inst1.example.com</code> database.
                              </p>
                           </li>
                        </ul>
                        <p>Complete the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">inst3.example.com</code> database as an administrative user.</span><div>
                              <p>The administrative user must have the necessary privileges to run the procedures in the <code class="codeph">DBMS_STREAMS_TABLESPACE_ADM</code> package, create directory objects, and create database links.
                              </p>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a database link from <code class="codeph">inst3.example.com</code> to the <code class="codeph">inst1.example.com</code> database. For example:</span><div><pre class="oac_no_warn" dir="ltr">CREATE DATABASE LINK inst1.example.com CONNECT TO strmadmin 
   IDENTIFIED BY <span class="italic">password</span> 
   USING 'inst1.example.com';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create a directory object for the first quarter in fiscal year 2005 on <code class="codeph">inst3.example.com</code>. Although <code class="codeph">inst3.example.com</code> is a remote database that does not share a file system with <code class="codeph">inst1.example.com</code>, the directory object must have the same name as the directory object used by the tablespace repository in the <code class="codeph">inst1.example.com</code> database for the first quarter. However, the directory paths of the directory objects on <code class="codeph">inst1.example.com</code> and <code class="codeph">inst3.example.com</code> do not need to match.</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY q1fy2005 AS '/usr/sales_data/fy2005q1';
</pre><p>The specified file system directory must exist when you create the directory object.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the <code class="codeph">inst1.example.com</code> database as an administrative user.</span><div>
                              <p>The administrative user must have the necessary privileges to run the procedures in the <code class="codeph">DBMS_FILE_TRANSFER</code> package and create database links. This example uses the <code class="codeph">DBMS_FILE_TRANSFER</code> package to copy the tablespace files from <code class="codeph">inst1.example.com</code> to <code class="codeph">inst3.example.com</code>. If some other method is used to transfer the files, then the privileges to run the procedures in the <code class="codeph">DBMS_FILE_TRANSFER</code> package are not required.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a database link from <code class="codeph">inst1.example.com</code> to the <code class="codeph">inst3.example.com</code> database. For example:</span><div><pre class="oac_no_warn" dir="ltr">CREATE DATABASE LINK inst3.example.com CONNECT TO strmadmin 
   IDENTIFIED BY <span class="italic">password</span> 
   USING 'inst3.example.com';
</pre><p>This database link will be used to transfer files to the <code class="codeph">inst3.example.com</code> database in Step&nbsp;<a href="using-information-provisioning.html#GUID-FB9CDC62-3B4D-4957-B736-799897060CA6__CHDIHBEB">6</a>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-FB9CDC62-3B4D-4957-B736-799897060CA6__CHDIHBEB"><span>Copy the data file for each tablespace and the export dump file for the first quarter to the <code class="codeph">inst3.example.com</code> database:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_FILE_TRANSFER.PUT_FILE(
    source_directory_object      =&gt; 'q1fy2005',
    source_file_name             =&gt; 'sales_tbs1.dbf',
    destination_directory_object =&gt; 'q1fy2005',
    destination_file_name        =&gt; 'sales_tbs1.dbf',
    destination_database         =&gt; 'inst3.example.com');
  DBMS_FILE_TRANSFER.PUT_FILE(
    source_directory_object      =&gt; 'q1fy2005',
    source_file_name             =&gt; 'sales_tbs2.dbf',
    destination_directory_object =&gt; 'q1fy2005',
    destination_file_name        =&gt; 'sales_tbs2.dbf',
    destination_database         =&gt; 'inst3.example.com');
  DBMS_FILE_TRANSFER.PUT_FILE(
    source_directory_object      =&gt; 'q1fy2005',
    source_file_name             =&gt; 'expdat16.dmp',
    destination_directory_object =&gt; 'q1fy2005',
    destination_file_name        =&gt; 'expdat16.dmp',
    destination_database         =&gt; 'inst3.example.com');
END;
/
</pre><p>Before you run the <code class="codeph">PUT_FILE</code> procedure for the export dump file, you can query the <code class="codeph">DBA_FILE_GROUP_FILES</code> data dictionary view to determine the name and directory object of the export dump file. For example, run the following query to list this information for the export dump file in the <code class="codeph">v_q1fy2005</code> version:
                              </p><pre class="oac_no_warn" dir="ltr">COLUMN FILE_NAME HEADING 'Export Dump|File Name' FORMAT A35
COLUMN FILE_DIRECTORY HEADING 'Directory Object' FORMAT A35

SELECT FILE_NAME, FILE_DIRECTORY FROM DBA_FILE_GROUP_FILES
  where FILE_GROUP_NAME = 'SALES' AND
        VERSION_NAME    = 'V_Q1FY2005';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect to the <code class="codeph">inst3.example.com</code> database as an administrative user.</span></li>
                        <li class="stepexpand"><span>Attach the tablespace set for the first quarter of 2005 to the <code class="codeph">inst3.example.com</code> database from the <code class="codeph">sales</code> file group in the <code class="codeph">inst1.example.com</code> database:</span><div><pre class="oac_no_warn" dir="ltr">DECLARE
  tbs_set DBMS_STREAMS_TABLESPACE_ADM.TABLESPACE_SET;
BEGIN
  DBMS_STREAMS_TABLESPACE_ADM.ATTACH_TABLESPACES(
    file_group_name            =&gt; 'strmadmin.sales',
    version_name               =&gt; 'v_q1fy2005',
    datafiles_directory_object =&gt; 'q1fy2005',
    repository_db_link         =&gt; 'inst1.example.com',
    tablespace_names           =&gt; tbs_set);
END;
/
</pre><p>The tablespaces are read-only when they are attached. Because the reports on <code class="codeph">inst3.example.com</code> do not change the tablespaces, the tablespaces can remain read-only.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the reports on the data in the sales tablespaces at the <code class="codeph">inst3.example.com</code> database.</span></li>
                        <li class="stepexpand"><span>Drop the tablespaces and their contents at <code class="codeph">inst3.example.com</code>:</span><div><pre class="oac_no_warn" dir="ltr">DROP TABLESPACE sales_tbs1 INCLUDING CONTENTS;

DROP TABLESPACE sales_tbs2 INCLUDING CONTENTS;
</pre><p>The tablespaces are dropped from the <code class="codeph">inst3.example.com</code> database, but the tablespace files remain in the directory object.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-FB9CDC62-3B4D-4957-B736-799897060CA6__CHDDAIBF"><span>Create a directory object for the second quarter in fiscal year 2005 on <code class="codeph">inst3.example.com</code>. The directory object must have the same name as the directory object used by the tablespace repository in the <code class="codeph">inst1.example.com</code> database for the second quarter. However, the directory paths of the directory objects on <code class="codeph">inst1.example.com</code> and <code class="codeph">inst3.example.com</code> do not need to match.</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY q2fy2005 AS '/usr/sales_data/fy2005q2';
</pre><p>The specified file system directory must exist when you create the directory object.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the <code class="codeph">inst1.example.com</code> database as an administrative user.</span></li>
                        <li class="stepexpand"><span>Copy the data file and the export dump file for the second quarter to the <code class="codeph">inst3.example.com</code> database:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_FILE_TRANSFER.PUT_FILE(
    source_directory_object      =&gt; 'q2fy2005',
    source_file_name             =&gt; 'sales_tbs1.dbf',
    destination_directory_object =&gt; 'q2fy2005',
    destination_file_name        =&gt; 'sales_tbs1.dbf',
    destination_database         =&gt; 'inst3.example.com');
  DBMS_FILE_TRANSFER.PUT_FILE(
    source_directory_object      =&gt; 'q2fy2005',
    source_file_name             =&gt; 'sales_tbs2.dbf',
    destination_directory_object =&gt; 'q2fy2005',
    destination_file_name        =&gt; 'sales_tbs2.dbf',
    destination_database         =&gt; 'inst3.example.com');
  DBMS_FILE_TRANSFER.PUT_FILE(
    source_directory_object      =&gt; 'q2fy2005',
    source_file_name             =&gt; 'expdat18.dmp',
    destination_directory_object =&gt; 'q2fy2005',
    destination_file_name        =&gt; 'expdat18.dmp',
    destination_database         =&gt; 'inst3.example.com');
END;
/
</pre><p>Before you run the <code class="codeph">PUT_FILE</code> procedure for the export dump file, you can query the <code class="codeph">DBA_FILE_GROUP_FILES</code> data dictionary view to determine the name and directory object of the export dump file. For example, run the following query to list this information for the export dump file in the <code class="codeph">v_q2fy2005</code> version:
                              </p><pre class="oac_no_warn" dir="ltr">COLUMN FILE_NAME HEADING 'Export Dump|File Name' FORMAT A35
COLUMN FILE_DIRECTORY HEADING 'Directory Object' FORMAT A35

SELECT FILE_NAME, FILE_DIRECTORY FROM DBA_FILE_GROUP_FILES
  where FILE_GROUP_NAME = 'SALES' AND
        VERSION_NAME    = 'V_Q2FY2005';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Connect to the <code class="codeph">inst3.example.com</code> database as an administrative user.</span></li>
                        <li class="stepexpand"><span>Attach the tablespace set for the second quarter of 2005 to the <code class="codeph">inst3.example.com</code> database from the <code class="codeph">sales</code> <a href="strms_glossary.html#GUID-19D9EE8E-5E3A-4BDA-B526-4832FDE42F1B"><span class="xrefglossterm">file group</span></a> in the <code class="codeph">inst1.example.com</code> database:</span><div><pre class="oac_no_warn" dir="ltr">DECLARE
  tbs_set DBMS_STREAMS_TABLESPACE_ADM.TABLESPACE_SET;
BEGIN
  DBMS_STREAMS_TABLESPACE_ADM.ATTACH_TABLESPACES(
    file_group_name            =&gt; 'strmadmin.sales',
    version_name               =&gt; 'v_q2fy2005',
    datafiles_directory_object =&gt; 'q2fy2005',
    repository_db_link         =&gt; 'inst1.example.com',
    tablespace_names           =&gt; tbs_set);
END;
/
</pre><p>The tablespaces are read-only when they are attached. Because the reports on <code class="codeph">inst3.example.com</code> do not change the tablespace, the tablespaces can remain read-only.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the reports on the data in the sales tablespaces at the <code class="codeph">inst3.example.com</code> database.</span></li>
                        <li class="stepexpand" id="GUID-FB9CDC62-3B4D-4957-B736-799897060CA6__CHDBDDJB"><span>Drop the tablespaces and their contents:</span><div><pre class="oac_no_warn" dir="ltr">DROP TABLESPACE sales_tbs1 INCLUDING CONTENTS;

DROP TABLESPACE sales_tbs2 INCLUDING CONTENTS;
</pre><p>The tablespaces are dropped from the <code class="codeph">inst3.example.com</code> database, but the tablespace files remain in the directory object.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Steps <a href="using-information-provisioning.html#GUID-FB9CDC62-3B4D-4957-B736-799897060CA6__CHDDAIBF">11</a>-<a href="using-information-provisioning.html#GUID-FB9CDC62-3B4D-4957-B736-799897060CA6__CHDBDDJB">17</a> can be repeated whenever a quarter ends to run reports on each quarter.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="STRMS1139"></a><a id="STRMS162"></a><div class="props_rev_3"><a id="GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299" name="GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299"></a><h3 id="STRMS-GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299" class="sect3"><span class="enumeration_section">36.2 </span>Using a File Group Repository
               </h3>
               <div>
                  <div class="section">
                     <p>The <code class="codeph">DBMS_FILE_GROUP</code> package can create a <a href="strms_glossary.html#GUID-F76D0C68-7DC4-44A6-9648-6D80E19C6C46"><span class="xrefglossterm">file group repository</span></a>, add versioned <a href="strms_glossary.html#GUID-19D9EE8E-5E3A-4BDA-B526-4832FDE42F1B"><span class="xrefglossterm">file group</span></a>s to the repository, and copy versioned file groups from the repository. This section illustrates how to use a file group repository with a scenario that stores reports in the repository.
                     </p>
                     <p>In this scenario, a business sells books and music over the internet. The business runs weekly reports on the sales data in the <code class="codeph">inst1.example.com</code> database and stores these reports in two HTML files on a computer file system. The <code class="codeph">book_sales.htm</code> file contains the report for book sales, and the <code class="codeph">music_sales.htm</code> file contains the report for music sales. The business wants to store these weekly reports in a file group repository at the <code class="codeph">inst2.example.com</code> remote database. Every week, the two reports are generated on the <code class="codeph">inst1.example.com</code> database, transferred to the computer system running the <code class="codeph">inst2.example.com</code> database, and added to the repository as a file group <a href="strms_glossary.html#GUID-6D149D24-FA88-45A4-AE92-BAE212116D38"><span class="xrefglossterm">version</span></a>. The file group repository stores all of the file group versions that contain the reports for each week.
                     </p>
                     <p><a href="using-information-provisioning.html#GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDBIHFG">Figure 36-5</a> provides an overview of the file group repository created in this example:
                     </p>
                     <div class="figure" id="GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDBIHFG">
                        <p class="titleinfigure">Figure 36-5 Example File Group Repository</p><img width="339" src="img/strms057.gif" alt="Description of Figure 36-5 follows" title="Description of Figure 36-5 follows" longdesc="img_text/strms057.html"><br><a href="img_text/strms057.html">Description of "Figure 36-5 Example File Group Repository"</a></div>
                     <!-- class="figure" -->
                     <p>The benefits of the file group repository are that it stores metadata about each file group version in the data dictionary and provides a standard interface for managing the file group versions. For example, when the business must view a specific sales report, it can query the data dictionary in the <code class="codeph">inst2.example.com</code> database to determine the location of the report on the computer file system.
                     </p>
                     <p>The following table shows the directory objects created in this example. It shows the directory object created on the <code class="codeph">inst1.example.com</code> database to store new reports, and it shows the directory objects that are associated with file group repository versions on the <code class="codeph">inst2.example.com</code> database. 
                     </p>
                     <div class="tblformalwide" id="GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__GUID-9C168E29-415B-493D-87C2-EC66826C09FA">
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This table lists each directory object created in this example. The table shows which directory objects are associated with a file group repository version and corresponding file system directory for each directory object." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="21%" id="d140965e2098">Directory Object</th>
                                 <th align="left" valign="bottom" width="16%" id="d140965e2101">Database</th>
                                 <th align="left" valign="bottom" width="27%" id="d140965e2104">Version</th>
                                 <th align="left" valign="bottom" width="36%" id="d140965e2107">Corresponding File System Directory</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d140965e2112" headers="d140965e2098 ">
                                    <p><code class="codeph">sales_reports</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d140965e2112 d140965e2101 ">
                                    <p><code class="codeph">inst1.example.com</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d140965e2112 d140965e2104 ">
                                    <p>Not associated with a file group repository version</p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d140965e2112 d140965e2107 ">
                                    <p><code class="codeph">/home/sales_reports</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d140965e2128" headers="d140965e2098 ">
                                    <p><code class="codeph">sales_reports1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d140965e2128 d140965e2101 ">
                                    <p><code class="codeph">inst2.example.com</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d140965e2128 d140965e2104 ">
                                    <p><code class="codeph">sales_reports_v1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d140965e2128 d140965e2107 ">
                                    <p><code class="codeph">/home/sales_reports/fg1</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="21%" id="d140965e2145" headers="d140965e2098 ">
                                    <p><code class="codeph">sales_reports2</code></p>
                                 </td>
                                 <td align="left" valign="top" width="16%" headers="d140965e2145 d140965e2101 ">
                                    <p><code class="codeph">inst2.example.com</code></p>
                                 </td>
                                 <td align="left" valign="top" width="27%" headers="d140965e2145 d140965e2104 ">
                                    <p><code class="codeph">sales_reports_v1</code></p>
                                 </td>
                                 <td align="left" valign="top" width="36%" headers="d140965e2145 d140965e2107 ">
                                    <p><code class="codeph">/home/sales_reports/fg2</code></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>This example makes the following assumptions:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">inst1.example.com</code> and <code class="codeph">inst2.example.com</code> databases exist.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">inst1.example.com</code> and <code class="codeph">inst2.example.com</code> databases do not share a file system.
                           </p>
                        </li>
                        <li>
                           <p>Networking is configured between the databases so that they can communicate with each other.</p>
                        </li>
                        <li>
                           <p>The <code class="codeph">inst1.example.com</code> database runs reports on the books and music sales data in the database and stores the reports as HTML files on the computer file system.
                           </p>
                        </li>
                     </ul>
                     <p>The following steps configure and populate a file group repository at a remote database:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Connect as an administrative user to the remote database that will contain the file group repository. In this example, connect to the <code class="codeph">inst2.example.com</code> database.</span><div>
                           <p>The administrative user must have the necessary privileges to create directory objects and run the procedures in the <code class="codeph">DBMS_FILE_GROUP</code> package.
                           </p>
                           <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand" id="GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDDFEEH"><span>Create a directory object to hold the first version of the file group:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY sales_reports1 AS '/home/sales_reports/fg1';
</pre><p>The specified file system directory must exist when you create the directory object.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Connect as an administrative user to the database that runs the reports. In this example, connect to the <code class="codeph">inst1.example.com</code> database.</span><div>
                           <p>The administrative user must have the necessary privileges to create directory objects.</p>
                        </div>
                     </li>
                     <li class="stepexpand" id="GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDIFDDF"><span>Create a directory object to hold the latest reports:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY sales_reports AS '/home/sales_reports';
</pre><p>The specified file system directory must exist when you create the directory object.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create a database link to the <code class="codeph">inst2.example.com</code> database:</span><div><pre class="oac_no_warn" dir="ltr">CREATE DATABASE LINK inst2.example.com CONNECT TO strmadmin 
   IDENTIFIED BY <span class="italic">password</span> 
   USING 'inst2.example.com';
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Run the reports on the <code class="codeph">inst1.example.com</code> database. Running the reports should place the <code class="codeph">book_sales.htm</code> and <code class="codeph">music_sales.htm</code> files in the directory specified in Step&nbsp;<a href="using-information-provisioning.html#GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDIFDDF">4</a>.</span></li>
                     <li class="stepexpand"><span>Transfer the report files from the computer system running the <code class="codeph">inst1.example.com</code> database to the computer system running the <code class="codeph">inst2.example.com</code> database using file transfer protocol (FTP) or some other method. Ensure that the files are copied to the directory that corresponds to the directory object created in Step <a href="using-information-provisioning.html#GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDDFEEH">2</a>.</span></li>
                     <li class="stepexpand"><span>Connect as an administrative user to the remote database that will contain the file group repository. In this example, connect to the <code class="codeph">inst2.example.com</code> database.</span></li>
                     <li class="stepexpand"><span>Create the file group repository that will contain the reports:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_FILE_GROUP.CREATE_FILE_GROUP(
    file_group_name =&gt; 'strmadmin.reports');
END;
/
</pre><p>The <code class="codeph">reports</code> file group repository is created with the following default properties:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The minimum number of versions in the repository is 2. When the file group is purged, the number of versions cannot drop below 2.</p>
                              </li>
                              <li>
                                 <p>The maximum number of versions is infinite. A file group version is not purged because of the number of versions in the file group in the repository.</p>
                              </li>
                              <li>
                                 <p>The retention days is infinite. A file group version is not purged because of the amount of time it has been in the repository.</p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Create the first version of the file group:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_FILE_GROUP.CREATE_VERSION(
    file_group_name =&gt; 'strmadmin.reports',
    version_name    =&gt; 'sales_reports_v1',
    comments        =&gt; 'Sales reports for week of 06-FEB-2005');
END;
/
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Add the report files to the file group version:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
 DBMS_FILE_GROUP.ADD_FILE(
    file_group_name  =&gt; 'strmadmin.reports',
    file_name        =&gt; 'book_sales.htm',
    file_type        =&gt; 'HTML',
    file_directory   =&gt; 'sales_reports1',
    version_name     =&gt; 'sales_reports_v1');
 DBMS_FILE_GROUP.ADD_FILE(
    file_group_name  =&gt; 'strmadmin.reports',
    file_name        =&gt; 'music_sales.htm',
    file_type        =&gt; 'HTML',
    file_directory   =&gt; 'sales_reports1',
    version_name     =&gt; 'sales_reports_v1');
END;
/
</pre></div>
                     </li>
                     <li class="stepexpand" id="GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDGGIGF"><span>Create a directory object on <code class="codeph">inst2.example.com</code> to hold the next version of the file group:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE DIRECTORY sales_reports2 AS '/home/sales_reports/fg2';
</pre><p>The specified file system directory must exist when you create the directory object.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>At the end of the next week, run the reports on the <code class="codeph">inst1.example.com</code> database. Running the reports should place new <code class="codeph">book_sales.htm</code> and <code class="codeph">music_sales.htm</code> files in the directory specified in Step <a href="using-information-provisioning.html#GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDIFDDF">4</a>. If necessary, remove the old files from this directory before running the reports.</span></li>
                     <li class="stepexpand"><span>Transfer the report files from the computer system running the <code class="codeph">inst1.example.com</code> database to the computer system running the <code class="codeph">inst2.example.com</code> database using file transfer protocol (FTP) or some other method. Ensure that the files are copied to the directory that corresponds to the directory object created in Step <a href="using-information-provisioning.html#GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDGGIGF">12</a>.</span></li>
                     <li class="stepexpand"><span>In SQL*Plus, connect to the <code class="codeph">inst2.example.com</code> database as an administrative user.</span></li>
                     <li class="stepexpand"><span>Create the next version of the file group:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_FILE_GROUP.CREATE_VERSION(
    file_group_name =&gt; 'strmadmin.reports',
    version_name    =&gt; 'sales_reports_v2',
    comments        =&gt; 'Sales reports for week of 13-FEB-2005');
END;
/
</pre></div>
                     </li>
                     <li class="stepexpand" id="GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDBECFE"><span>Add the report files to the file group version:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
 DBMS_FILE_GROUP.ADD_FILE(
    file_group_name  =&gt; 'strmadmin.reports',
    file_name        =&gt; 'book_sales.htm',
    file_type        =&gt; 'HTML',
    file_directory   =&gt; 'sales_reports2',
    version_name     =&gt; 'sales_reports_v2');
 DBMS_FILE_GROUP.ADD_FILE(
    file_group_name  =&gt; 'strmadmin.reports',
    file_name        =&gt; 'music_sales.htm',
    file_type        =&gt; 'HTML',
    file_directory   =&gt; 'sales_reports2',
    version_name     =&gt; 'sales_reports_v2');
END;
/
</pre></div>
                     </li>
                  </ol>
                  <div class="section">
                     <p>The file group repository now contains two versions of the file group that contains the sales report files. Repeat steps <a href="using-information-provisioning.html#GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDGGIGF">12</a>-<a href="using-information-provisioning.html#GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__CHDBECFE">17</a> to add new versions of the file group to the repository.
                     </p>
                     <div class="infoboxnotealso" id="GUID-F4634DA4-A4BB-4C53-B9D6-0E747D38C299__GUID-13639C34-E7D6-46C7-8A97-9EAF7792BE19">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="information-provisioning-concepts.html#GUID-4C8EBE9E-8EBD-49CD-9397-3A27C6B4C633">File Group Repository</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_FILE_GROUP.html#ARPLS828"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code class="codeph">DBMS_FILE_GROUP</code> package
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>