<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>How Rules Are Used in Oracle Streams</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="streams-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-01-25T21:40:57-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83781-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="oracle-streams-information-consumption.html" title="Previous" type="text/html">
      <link rel="next" href="rule-based-transformations.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Streams Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="STRMS">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-streams-information-consumption.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="rule-based-transformations.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="essential-oracle-streams-concepts.html" property="item" typeof="WebPage"><span property="name">      Essential Oracle Streams Concepts </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> How Rules Are Used in Oracle Streams</li>
            </ol>
            <a id="GUID-FBC295B1-E3CD-428C-A3BF-69F74214DA14" name="GUID-FBC295B1-E3CD-428C-A3BF-69F74214DA14"></a><a id="STRMS006"></a><a id="STRMS_HOW_RULES_ARE_USED_IN_STREAMS"></a>
            
            <h2 id="STRMS-GUID-FBC295B1-E3CD-428C-A3BF-69F74214DA14" class="sect2"><span class="enumeration_chapter">5 </span> How Rules Are Used in Oracle Streams
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d37810e127" class="indexterm-anchor"></a><a id="d37810e131" class="indexterm-anchor"></a>The following topics contain information about how <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a>s are used in Oracle Streams:
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-31EBA2D4-74E6-43A1-95FD-D275FB0B3820">Overview of How Rules Are Used in Oracle Streams</a></p>
                  </li>
                  <li>
                     <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-40D0F31E-06AD-400D-BCDB-5FD3A8222B13">Rule Sets and Rule Evaluation of Messages</a></p>
                  </li>
                  <li>
                     <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89">System-Created Rules</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-FBC295B1-E3CD-428C-A3BF-69F74214DA14__GUID-F481AE48-6C56-47F6-8CC8-942FD5F8D576">
                  <p class="notep1">See Also:</p>
                  <p></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="advanced-rule-concepts.html#GUID-5E6F0B16-C959-46EC-984E-1B5FC642A16D"> Advanced Rule Concepts</a></p>
                     </li>
                     <li>
                        <p><a href="managing-rules.html#GUID-AB9D9589-CD21-4EED-959B-72CA569334F3"> Managing Rules</a></p>
                     </li>
                     <li>
                        <p><a href="monitoring-rules.html#GUID-8D031A97-43B4-4575-9931-FF4491058194"> Monitoring Rules</a></p>
                     </li>
                     <li>
                        <p><a href="troubleshooting-rules-and-rule-based-transformations.html#GUID-AEF9C9AE-9735-4688-925B-5C967BAC783F"> Troubleshooting Rules and Rule-Based Transformations</a></p>
                     </li>
                  </ul>
               </div>
            </div><a id="STRMS400"></a><a id="STRMS399"></a><div class="props_rev_3"><a id="GUID-31EBA2D4-74E6-43A1-95FD-D275FB0B3820" name="GUID-31EBA2D4-74E6-43A1-95FD-D275FB0B3820"></a><h3 id="STRMS-GUID-31EBA2D4-74E6-43A1-95FD-D275FB0B3820" class="sect3"><span class="enumeration_section">5.1 </span>Overview of How Rules Are Used in Oracle Streams
               </h3>
               <div>
                  <p>In Oracle Streams, each of the following mechanisms is called an <span class="bold">Oracle Streams client</span> because each one is a client of a <a href="strms_glossary.html#GUID-EF705142-9260-491F-92B2-553E88D604BD"><span class="xrefglossterm">rules engine</span></a> (when the mechanism is associated with one or more <a href="strms_glossary.html#GUID-36BC41F8-E073-4AFE-ADF1-5036DD323379"><span class="xrefglossterm">rule set</span></a>s):
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Capture process</p>
                     </li>
                     <li>
                        <p>Synchronous capture</p>
                     </li>
                     <li>
                        <p>Propagation</p>
                     </li>
                     <li>
                        <p>Apply process </p>
                     </li>
                     <li>
                        <p>Messaging client</p>
                     </li>
                  </ul>
                  <p>Except for <a href="strms_glossary.html#GUID-5CA58899-A02D-422A-AE15-E8FCD004EB17"><span class="xrefglossterm">synchronous capture</span></a>, each of these clients can be associated with at most two rule sets: a <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a> and a <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a>. A synchronous capture can be associated with at most one positive rule set. A synchronous capture cannot be associated with a negative rule set.
                  </p>
                  <p>A single rule set can be used by multiple <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a>es, synchronous captures, <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a>s, <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a>es, and <a href="strms_glossary.html#GUID-9EAF35D2-24C0-4E0B-ACC4-9EDC22A169C1"><span class="xrefglossterm">messaging client</span></a>s within the same database. Also, a single rule set can be a positive rule set for one Oracle Streams client and a negative rule set for another Oracle Streams client.
                  </p>
                  <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-31EBA2D4-74E6-43A1-95FD-D275FB0B3820__i1006154">Figure 5-1</a> illustrates how multiple clients of a rules engine can use one rule set.
                  </p>
                  <div class="figure" id="GUID-31EBA2D4-74E6-43A1-95FD-D275FB0B3820__i1006154">
                     <p class="titleinfigure">Figure 5-1 One Rule Set Can Be Used by Multiple Clients of a Rules Engine</p><img width="435" src="img/strms016.gif" alt="Description of Figure 5-1 follows" title="Description of Figure 5-1 follows" longdesc="img_text/strms016.html"><br><a href="img_text/strms016.html">Description of "Figure 5-1 One Rule Set Can Be Used by Multiple Clients of a Rules Engine"</a></div>
                  <!-- class="figure" -->
                  <p>An Oracle Streams client performs a task if a <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a> satisfies its rule sets. In general, a message satisfies the rule sets for an Oracle Streams client if <span class="italic">no rules</span> in the negative rule set evaluate to <code class="codeph">TRUE</code> for the message, and <span class="italic">at least one rule</span> in the positive rule set evaluates to <code class="codeph">TRUE</code> for the message.
                  </p>
                  <p><span class="q">"<a href="how-rules-are-used-in-oracle-streams.html#GUID-40D0F31E-06AD-400D-BCDB-5FD3A8222B13">Rule Sets and Rule Evaluation of Messages</a>"</span> contains more detailed information about how a message satisfies the rule sets for an Oracle Streams client, including information about Oracle Streams client behavior when one or more rule sets are not specified.
                  </p>
                  <p>You use rule sets in Oracle Streams in the following ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Specify the changes that a capture process captures from the redo log or discards. That is, if a change found in the redo log satisfies the rule sets for a capture process, then the capture process captures the change. If a change found in the redo log causes does not satisfy the rule sets for a capture process, then the capture process discards the change.</p>
                     </li>
                     <li>
                        <p>Specify the changes that a synchronous capture captures. That is, if DML change satisfies the rule set for a synchronous capture, then the synchronous capture captures the change immediately after the change is committed. If a DML change made to a table does not satisfy the rule set for a synchronous capture, then the synchronous capture does not capture the change.</p>
                     </li>
                     <li>
                        <p>Specify the messages that a propagation propagates from one <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a> to another or discards. That is, if a message in a queue satisfies the rule sets for a propagation, then the propagation propagates the message. If a message in a queue does not satisfy the rule sets for a propagation, then the propagation discards the message.
                        </p>
                     </li>
                     <li>
                        <p>Specify the messages that an apply process dequeues or discards. That is, if a message in a queue satisfies the rule sets for an apply process, then the message is dequeued and processed by the apply process. If a message in a queue does not satisfy the rule sets for an apply process, then the apply process discards the message.</p>
                     </li>
                     <li>
                        <p>Specify the <a href="strms_glossary.html#GUID-32700BD5-7584-46D3-8224-B534FAC20DD7"><span class="xrefglossterm">persistent LCR</span></a>s or <a href="strms_glossary.html#GUID-8F1FA1C4-ADB5-4A4D-9374-B50AADB53066"><span class="xrefglossterm">persistent user message</span></a>s that a <a href="strms_glossary.html#GUID-9EAF35D2-24C0-4E0B-ACC4-9EDC22A169C1"><span class="xrefglossterm">messaging client</span></a> dequeues or discards. That is, if a message in a <a href="strms_glossary.html#GUID-8D447372-AA6C-4326-8A8F-2E13F9350AF1"><span class="xrefglossterm">persistent queue</span></a> satisfies the rule sets for a messaging client, then the user or application that is using the messaging client dequeues the message. If a message in a persistent queue does not satisfy the rule sets for a messaging client, then the user or application that is using the messaging client discards the message.
                        </p>
                     </li>
                  </ul>
                  <p>For a propagation, the messages evaluated against the rule sets can be any type of message, including <a href="strms_glossary.html#GUID-0D2E5DAF-804E-4089-9E0E-987C96F59706"><span class="xrefglossterm">captured LCR</span></a>s, <a href="strms_glossary.html#GUID-32700BD5-7584-46D3-8224-B534FAC20DD7"><span class="xrefglossterm">persistent LCR</span></a>s, <a href="strms_glossary.html#GUID-95FF7ACD-11FF-4ACF-8E06-60033BEC621B"><span class="xrefglossterm">buffered LCR</span></a>s, <a href="strms_glossary.html#GUID-8F1FA1C4-ADB5-4A4D-9374-B50AADB53066"><span class="xrefglossterm">persistent user message</span></a>s or <a href="strms_glossary.html#GUID-2587F4F8-8B48-40F7-8541-D039E22291C3"><span class="xrefglossterm">buffered user message</span></a>s.
                  </p>
                  <p>For an apply process, the messages evaluated against the rule sets can be <a href="strms_glossary.html#GUID-0D2E5DAF-804E-4089-9E0E-987C96F59706"><span class="xrefglossterm">captured LCR</span></a>s, <a href="strms_glossary.html#GUID-32700BD5-7584-46D3-8224-B534FAC20DD7"><span class="xrefglossterm">persistent LCR</span></a>s, or <a href="strms_glossary.html#GUID-8F1FA1C4-ADB5-4A4D-9374-B50AADB53066"><span class="xrefglossterm">persistent user message</span></a>s.
                  </p>
                  <p>If there are conflicting <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a>s in the positive rule set associated with a client, then the client performs the task if either rule evaluates to <code class="codeph">TRUE</code>. For example, if a rule in the positive rule set for a capture process contains one rule that instructs the capture process to capture the results of data manipulation language (DML) changes to the <code class="codeph">hr.employees</code> table, but another rule in the rule set instructs the capture process not to capture the results of DML changes to the <code class="codeph">hr.employees</code> table, then the capture process captures these changes.
                  </p>
                  <p>Similarly, if there are conflicting rules in the negative rule set associated with a client, then the client discards a message if either rule evaluates to <code class="codeph">TRUE</code> for the message. For example, if a rule in the negative rule set for a capture process contains one rule that instructs the capture process to discard the results of DML changes to the <code class="codeph">hr.departments</code> table, but another rule in the rule set instructs the capture process not to discard the results of DML changes to the <code class="codeph">hr.departments</code> table, then the capture process discards these changes.
                  </p>
                  <div class="infoboxnotealso" id="GUID-31EBA2D4-74E6-43A1-95FD-D275FB0B3820__GUID-00A09AD2-0771-4E94-A46C-3185BA590BA6">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-streams-information-capture.html#GUID-DADEDB32-7F0F-40F2-A5A5-81327102B00B"> Oracle Streams Information Capture</a></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="oracle-streams-staging-and-propagation.html#GUID-8B86A9B3-04B8-4CBF-BF61-587881F45E7F">Message Propagation Between Queues</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="oracle-streams-information-consumption.html#GUID-2AB34D95-F1F8-400B-881E-7D2E9B7768B0"> Oracle Streams Information Consumption</a></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="oracle-streams-information-consumption.html#GUID-3794AB4D-3041-4A59-B3E5-8EF80B40E5B9">Explicit Consumption with a Messaging Client</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="STRMS401"></a><div class="props_rev_3"><a id="GUID-40D0F31E-06AD-400D-BCDB-5FD3A8222B13" name="GUID-40D0F31E-06AD-400D-BCDB-5FD3A8222B13"></a><h3 id="STRMS-GUID-40D0F31E-06AD-400D-BCDB-5FD3A8222B13" class="sect3"><span class="enumeration_section">5.2 </span>Rule Sets and Rule Evaluation of Messages
               </h3>
               <div>
                  <p><a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a>s perform the following tasks based on <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a>s:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a> captures changes in the redo log, converts the changes into logical change records (LCRs), and enqueues <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>s containing these LCRs into the capture process <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>A <a href="strms_glossary.html#GUID-5CA58899-A02D-422A-AE15-E8FCD004EB17"><span class="xrefglossterm">synchronous capture</span></a> captures the results of DML changes made to tables, converts the changes into row logical change records (row LCRs), and enqueues <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>s containing these row LCRs into the synchronous capture <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>A <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a> propagates any type of message from a <a href="strms_glossary.html#GUID-FF907FD2-BD9E-4622-A33C-A6D400ED2CAF"><span class="xrefglossterm">source queue</span></a> to a <a href="strms_glossary.html#GUID-584772DA-C868-4F6B-9B7F-9E665F2D6F85"><span class="xrefglossterm">destination queue</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>An <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a> dequeues either <a href="strms_glossary.html#GUID-0D2E5DAF-804E-4089-9E0E-987C96F59706"><span class="xrefglossterm">captured LCR</span></a>s, <a href="strms_glossary.html#GUID-32700BD5-7584-46D3-8224-B534FAC20DD7"><span class="xrefglossterm">persistent LCR</span></a>s, or <a href="strms_glossary.html#GUID-8F1FA1C4-ADB5-4A4D-9374-B50AADB53066"><span class="xrefglossterm">persistent user message</span></a>s from its queue and applies these messages directly or sends the messages to an <a href="strms_glossary.html#GUID-4CEA651A-4197-4731-93D4-315BCB5CBE70"><span class="xrefglossterm">apply handler</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>A <a href="strms_glossary.html#GUID-9EAF35D2-24C0-4E0B-ACC4-9EDC22A169C1"><span class="xrefglossterm">messaging client</span></a> dequeues <a href="strms_glossary.html#GUID-32700BD5-7584-46D3-8224-B534FAC20DD7"><span class="xrefglossterm">persistent LCR</span></a>s or <a href="strms_glossary.html#GUID-8F1FA1C4-ADB5-4A4D-9374-B50AADB53066"><span class="xrefglossterm">persistent user message</span></a>s from its queue.
                        </p>
                     </li>
                  </ul>
                  <p>These Oracle Streams clients are all clients of the <a href="strms_glossary.html#GUID-EF705142-9260-491F-92B2-553E88D604BD"><span class="xrefglossterm">rules engine</span></a>. An Oracle Streams client performs its task for a message when the message satisfies the <a href="strms_glossary.html#GUID-36BC41F8-E073-4AFE-ADF1-5036DD323379"><span class="xrefglossterm">rule set</span></a>s used by the Oracle Streams client. An Oracle Streams client can have no rule set, only a <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a>, only a <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a>, or both a positive and a negative rule set.
                  </p>
                  <p>The following sections explain how rule evaluation works in each of these cases:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-39572431-CD3F-4D89-805A-43F81DC1051D">Oracle Streams Client with No Rule Set</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-54D79007-D521-4309-AA1C-623571FCD45E">Oracle Streams Client with a Positive Rule Set Only</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-E5FE8F5C-AE5B-4690-B9E7-50F02CA24188">Oracle Streams Client with a Negative Rule Set Only</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-75EB87C9-E900-44D8-A487-139387A6A0DC">Oracle Streams Client with Both a Positive and a Negative Rule Set</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-594815E2-3F64-4BC2-92D1-EE7A7C4CA88E">Oracle Streams Client with One or More Empty Rule Sets</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-CFE364F7-AE12-4ADC-8908-6A2265BC6DD8">Summary of Rule Sets and Oracle Streams Client Behavior</a></p>
                     </li>
                  </ul>
               </div><a id="STRMS402"></a><div class="props_rev_3"><a id="GUID-39572431-CD3F-4D89-805A-43F81DC1051D" name="GUID-39572431-CD3F-4D89-805A-43F81DC1051D"></a><h4 id="STRMS-GUID-39572431-CD3F-4D89-805A-43F81DC1051D" class="sect4"><span class="enumeration_section">5.2.1 </span>Oracle Streams Client with No Rule Set
                  </h4>
                  <div>
                     <p>An <a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a> with no <a href="strms_glossary.html#GUID-36BC41F8-E073-4AFE-ADF1-5036DD323379"><span class="xrefglossterm">rule set</span></a> performs its task for all of the <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>s it encounters. An empty rule set is not the same as no rule set at all.
                     </p>
                     <p>A capture process should always have at least one rule set because it must not try to capture changes to unsupported database objects. If a propagation should always propagate all messages in its source queue, or if an apply process should always dequeue all messages in its queue, then removing all rule sets from the propagation or apply process might improve performance. A synchronous capture must have a positive rule set. A synchronous capture cannot be configured without a rule set.</p>
                  </div>
               </div><a id="STRMS403"></a><div class="props_rev_3"><a id="GUID-54D79007-D521-4309-AA1C-623571FCD45E" name="GUID-54D79007-D521-4309-AA1C-623571FCD45E"></a><h4 id="STRMS-GUID-54D79007-D521-4309-AA1C-623571FCD45E" class="sect4"><span class="enumeration_section">5.2.2 </span>Oracle Streams Client with a Positive Rule Set Only
                  </h4>
                  <div>
                     <p>An <a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a> with a <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a>, but no <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a>, performs its task for a <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a> if any <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a> in the positive rule set evaluates to <code class="codeph">TRUE</code> for the message. However, if all of the rules in a positive rule set evaluate to <code class="codeph">FALSE</code> for the message, then the Oracle Streams client discards the message.
                     </p>
                  </div>
               </div><a id="STRMS404"></a><div class="props_rev_3"><a id="GUID-E5FE8F5C-AE5B-4690-B9E7-50F02CA24188" name="GUID-E5FE8F5C-AE5B-4690-B9E7-50F02CA24188"></a><h4 id="STRMS-GUID-E5FE8F5C-AE5B-4690-B9E7-50F02CA24188" class="sect4"><span class="enumeration_section">5.2.3 </span>Oracle Streams Client with a Negative Rule Set Only
                  </h4>
                  <div>
                     <p>An <a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a> with a <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a>, but no <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a>, discards a <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a> if any <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a> in the negative rule set evaluates to <code class="codeph">TRUE</code> for the message. However, if all of the rules in a negative rule set evaluate to <code class="codeph">FALSE</code> for the message, then the Oracle Streams client performs its task for the message. A synchronous capture cannot have a negative rule set.
                     </p>
                  </div>
               </div><a id="STRMS405"></a><div class="sect3"><a id="GUID-75EB87C9-E900-44D8-A487-139387A6A0DC" name="GUID-75EB87C9-E900-44D8-A487-139387A6A0DC"></a><h4 id="STRMS-GUID-75EB87C9-E900-44D8-A487-139387A6A0DC" class="sect4"><span class="enumeration_section">5.2.4 </span>Oracle Streams Client with Both a Positive and a Negative Rule Set
                  </h4>
                  <div>
                     <p>If an <a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a> has both a positive and a <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a>, then the negative rule set is evaluated first for a <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>. If any <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a> in the negative rule set evaluates to <code class="codeph">TRUE</code> for the message, then the message is discarded, and the message is never evaluated against the <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a>. 
                     </p>
                     <p>However, if all of the rules in the negative rule set evaluate to <code class="codeph">FALSE</code> for the message, then the message is evaluated against the positive rule set. At this point, the behavior is the same as when the Oracle Streams client only has a positive rule set. That is, the Oracle Streams client performs its task for a message if any rule in the positive rule set evaluates to <code class="codeph">TRUE</code> for the message. If all of the rules in a positive rule set evaluate to <code class="codeph">FALSE</code> for the message, then the Oracle Streams client discards the message.
                     </p>
                     <p>A synchronous capture cannot have a negative rule set.</p>
                  </div>
               </div><a id="STRMS406"></a><div class="props_rev_3"><a id="GUID-594815E2-3F64-4BC2-92D1-EE7A7C4CA88E" name="GUID-594815E2-3F64-4BC2-92D1-EE7A7C4CA88E"></a><h4 id="STRMS-GUID-594815E2-3F64-4BC2-92D1-EE7A7C4CA88E" class="sect4"><span class="enumeration_section">5.2.5 </span>Oracle Streams Client with One or More Empty Rule Sets
                  </h4>
                  <div>
                     <p>An <a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a> can have one or more empty <a href="strms_glossary.html#GUID-36BC41F8-E073-4AFE-ADF1-5036DD323379"><span class="xrefglossterm">rule set</span></a>s. An Oracle Streams client behaves in the following ways if it has one or more empty rule sets:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>If an Oracle Streams client has no <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a>, and its <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a> is empty, then the Oracle Streams client performs its task for all <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>s.
                           </p>
                        </li>
                        <li>
                           <p>If an Oracle Streams client has both a positive and a negative rule set, and the negative rule set is empty but its positive rule set contains <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a>s, then the Oracle Streams client performs its task based on the rules in the positive rule set.
                           </p>
                        </li>
                        <li>
                           <p>If an Oracle Streams client has a positive rule set that is empty, then the Oracle Streams client discards all messages, regardless of the state of its negative rule set.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="STRMS408"></a><a id="STRMS407"></a><div class="props_rev_3"><a id="GUID-CFE364F7-AE12-4ADC-8908-6A2265BC6DD8" name="GUID-CFE364F7-AE12-4ADC-8908-6A2265BC6DD8"></a><h4 id="STRMS-GUID-CFE364F7-AE12-4ADC-8908-6A2265BC6DD8" class="sect4"><span class="enumeration_section">5.2.6 </span>Summary of Rule Sets and Oracle Streams Client Behavior
                  </h4>
                  <div>
                     <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-CFE364F7-AE12-4ADC-8908-6A2265BC6DD8__g1031156" title="This table lists Streams client behavior for different combinations of negative and positive rule sets.">Table 5-1</a> summarizes the <a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a> behavior described in the previous sections.
                     </p>
                     <div class="tblformal" id="GUID-CFE364F7-AE12-4ADC-8908-6A2265BC6DD8__g1031156">
                        <p class="titleintable">Table 5-1 Rule Sets and Oracle Streams Client Behavior</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Rule Sets and Oracle Streams Client Behavior" summary="This table lists Streams client behavior for different combinations of negative and positive rule sets." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="24%" id="d37810e1763">Negative Rule Set</th>
                                 <th align="left" valign="bottom" width="24%" id="d37810e1766">Positive Rule Set</th>
                                 <th align="left" valign="bottom" width="52%" id="d37810e1769">Oracle Streams Client Behavior</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d37810e1774" headers="d37810e1763 ">
                                    <p>None</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d37810e1774 d37810e1766 ">
                                    <p>None</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d37810e1774 d37810e1769 ">
                                    <p>Performs its task for all <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>s
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d37810e1788" headers="d37810e1763 ">
                                    <p>None</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d37810e1788 d37810e1766 ">
                                    <p>Exists with rules</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d37810e1788 d37810e1769 ">
                                    <p>Performs its task for messages that evaluate to <code class="codeph">TRUE</code> against the <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d37810e1804" headers="d37810e1763 ">
                                    <p>Exists with rules</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d37810e1804 d37810e1766 ">
                                    <p>None</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d37810e1804 d37810e1769 ">
                                    <p>Discards messages that evaluate to <code class="codeph">TRUE</code> against the <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a>, and performs its task for all other messages
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d37810e1821" headers="d37810e1763 ">
                                    <p>Exists with rules</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d37810e1821 d37810e1766 ">
                                    <p>Exists with rules</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d37810e1821 d37810e1769 ">
                                    <p>Discards messages that evaluate to <code class="codeph">TRUE</code> against the negative rule set, and performs its task for remaining messages that evaluate to <code class="codeph">TRUE</code> against the positive rule set. The negative rule set is evaluated first.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d37810e1837" headers="d37810e1763 ">
                                    <p>Exists but is empty</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d37810e1837 d37810e1766 ">
                                    <p>None</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d37810e1837 d37810e1769 ">
                                    <p>Performs its task for all messages</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d37810e1847" headers="d37810e1763 ">
                                    <p>Exists but is empty</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d37810e1847 d37810e1766 ">
                                    <p>Exists with rules</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d37810e1847 d37810e1769 ">
                                    <p>Performs its task for messages that evaluate to <code class="codeph">TRUE</code> against the positive rule set
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d37810e1860" headers="d37810e1763 ">
                                    <p>None</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d37810e1860 d37810e1766 ">
                                    <p>Exists but is empty</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d37810e1860 d37810e1769 ">
                                    <p>Discards all messages</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d37810e1870" headers="d37810e1763 ">
                                    <p>Exists but is empty</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d37810e1870 d37810e1766 ">
                                    <p>Exists but is empty</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d37810e1870 d37810e1769 ">
                                    <p>Discards all messages</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="24%" id="d37810e1880" headers="d37810e1763 ">
                                    <p>Exists with rules</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d37810e1880 d37810e1766 ">
                                    <p>Exists but is empty</p>
                                 </td>
                                 <td align="left" valign="top" width="52%" headers="d37810e1880 d37810e1769 ">
                                    <p>Discards all messages</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div><a id="STRMS410"></a><a id="STRMS411"></a><a id="STRMS409"></a><div class="props_rev_3"><a id="GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89" name="GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89"></a><h3 id="STRMS-GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89" class="sect3"><span class="enumeration_section">5.3 </span>System-Created Rules
               </h3>
               <div>
                  <p>An <a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a> performs its task for a <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a> if the message satisfies its <a href="strms_glossary.html#GUID-36BC41F8-E073-4AFE-ADF1-5036DD323379"><span class="xrefglossterm">rule set</span></a>s. A <span class="bold">system-created rule</span> is created by the <code class="codeph">DBMS_STREAMS_ADM</code> package and can specify one of the following levels of granularity: table, schema, or global. This section describes each of these levels. You can specify more than one level for a particular task. For example, you can instruct a single <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a> to perform table-level apply for specific tables in the <code class="codeph">oe</code> schema and schema-level apply for the entire <code class="codeph">hr</code> schema. In addition, a single <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a> pertains to either the results of data manipulation language (DML) changes or data definition language (DDL) changes. So, for example, you must use at least two system-created rules to include all of the changes to a particular table: one rule for the results of DML changes and another rule for DDL changes. The results of a DML change are the row changes that result from the DML change, or the row <a href="strms_glossary.html#GUID-43A45807-D91D-43A2-89C8-8DEBCEF70770"><span class="xrefglossterm">LCR</span></a>s in a <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a> that encapsulate each row change.
                  </p>
                  <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89__g1030907" title="This table describes each rule level (table, schema, and global) for different types of Streams tasks.">Table 5-2</a> shows what each level of rule means for each Oracle Streams task. Remember that a <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a> is evaluated before a <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a>.
                  </p>
                  <div class="tblformalwide" id="GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89__g1030907">
                     <p class="titleintable">Table 5-2 Types of Tasks and Rule Levels </p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Types of Tasks and Rule Levels " summary="This table describes each rule level (table, schema, and global) for different types of Streams tasks." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="17%" id="d37810e2102">Task</th>
                              <th align="left" valign="bottom" width="26%" id="d37810e2105">Table Rule</th>
                              <th align="left" valign="bottom" width="31%" id="d37810e2108">Schema Rule</th>
                              <th align="left" valign="bottom" width="26%" id="d37810e2111">Global Rule</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d37810e2116" headers="d37810e2102 ">
                                 <p>Capture with a <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a></p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d37810e2116 d37810e2105 ">
                                 <p>If the <a href="strms_glossary.html#GUID-4A72ABEB-7CC1-4A46-A4B9-41F722D872A4"><span class="xrefglossterm">table rule</span></a> is in a negative rule set, then discard the changes in the redo log for the specified table.
                                 </p>
                                 <p>If the table rule is in a positive rule set, then capture all or a subset of the changes in the redo log for the specified table, convert them into logical change records (LCRs), and enqueue them.</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d37810e2116 d37810e2108 ">
                                 <p>If the <a href="strms_glossary.html#GUID-59A77572-3B32-483A-A816-5938ACA78220"><span class="xrefglossterm">schema rule</span></a> is in a negative rule set, then discard the changes in the redo log for the schema itself and for the database objects in the specified schema.
                                 </p>
                                 <p>If the schema rule is in a positive rule set, then capture the changes in the redo log for the schema itself and for the database objects in the specified schema, convert them into LCRs, and enqueue them.</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d37810e2116 d37810e2111 ">
                                 <p>If the <a href="strms_glossary.html#GUID-37142187-2A5B-48E7-A1CE-A07D60C60460"><span class="xrefglossterm">global rule</span></a> is in a negative rule set, then discard the changes to all of the database objects in the database.
                                 </p>
                                 <p>If the global rule is in a positive rule set, then capture the changes to all of the database objects in the database, convert them into LCRs, and enqueue them.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d37810e2150" headers="d37810e2102 ">
                                 <p>Capture with a <a href="strms_glossary.html#GUID-5CA58899-A02D-422A-AE15-E8FCD004EB17"><span class="xrefglossterm">synchronous capture</span></a></p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d37810e2150 d37810e2105 ">
                                 <p>If the table rule is in a positive rule set, then capture all or a subset of the changes made to the specified table, convert them into logical change records (LCRs), and enqueue them.</p>
                                 <p>A synchronous capture cannot have a negative rule set.</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d37810e2150 d37810e2108 ">
                                 <p>A synchronous capture cannot use schema rules.</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d37810e2150 d37810e2111 ">
                                 <p>A synchronous capture cannot use global rules.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d37810e2168" headers="d37810e2102 ">
                                 <p>Propagate with a <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a></p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d37810e2168 d37810e2105 ">
                                 <p>If the table rule is in a negative rule set, then discard the LCRs relating to the specified table in the <a href="strms_glossary.html#GUID-FF907FD2-BD9E-4622-A33C-A6D400ED2CAF"><span class="xrefglossterm">source queue</span></a>.
                                 </p>
                                 <p>If the table rule is in a positive rule set, then propagate all or a subset of the LCRs relating to the specified table in the source queue to the <a href="strms_glossary.html#GUID-584772DA-C868-4F6B-9B7F-9E665F2D6F85"><span class="xrefglossterm">destination queue</span></a>.
                                 </p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d37810e2168 d37810e2108 ">
                                 <p>If the schema rule is in a negative rule set, then discard the LCRs related to the specified schema itself and the LCRs related to database objects in the schema in the source queue.</p>
                                 <p>If the schema rule is in a positive rule set, then propagate the LCRs related to the specified schema itself and the LCRs related to database objects in the schema in the source queue to the destination queue.</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d37810e2168 d37810e2111 ">
                                 <p>If the global rule is in a negative rule set, then discard all of the LCRs in the source queue.</p>
                                 <p>If the global rule is in a positive rule set, then propagate all of the LCRs in the source queue to the destination queue.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d37810e2198" headers="d37810e2102 ">
                                 <p>Apply with an <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a></p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d37810e2198 d37810e2105 ">
                                 <p>If the table rule is in a negative rule set, then discard the LCRs in the queue relating to the specified table.</p>
                                 <p>If the table rule is in a positive rule set, then apply all or a subset of the LCRs in the queue relating to the specified table.</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d37810e2198 d37810e2108 ">
                                 <p>If the schema rule is in a negative rule set, then discard the LCRs in the queue relating to the specified schema itself and the database objects in the schema.</p>
                                 <p>If the schema rule is in a positive rule set, then apply the LCRs in the queue relating to the specified schema itself and the database objects in the schema.</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d37810e2198 d37810e2111 ">
                                 <p>If the global rule is in a negative rule set, then discard all of the LCRs in the queue.</p>
                                 <p>If the global rule is in a positive rule set, then apply all of the LCRs in the queue.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="17%" id="d37810e2220" headers="d37810e2102 ">
                                 <p>Dequeue with a <a href="strms_glossary.html#GUID-9EAF35D2-24C0-4E0B-ACC4-9EDC22A169C1"><span class="xrefglossterm">messaging client</span></a></p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d37810e2220 d37810e2105 ">
                                 <p>If the table rule is in a negative rule set, then, when the messaging client is invoked, discard the persistent LCRs relating to the specified table in the queue.</p>
                                 <p>If the table rule is in a positive rule set, then, when the messaging client is invoked, dequeue all or a subset of the persistent LCRs relating to the specified table in the queue.</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d37810e2220 d37810e2108 ">
                                 <p>If the schema rule is in a negative rule set, then, when the messaging client is invoked, discard the persistent LCRs relating to the specified schema itself and the database objects in the schema in the queue.</p>
                                 <p>If the schema rule is in a positive rule set, then, when the messaging client is invoked, dequeue the persistent LCRs relating to the specified schema itself and the database objects in the schema in the queue.</p>
                              </td>
                              <td align="left" valign="top" width="26%" headers="d37810e2220 d37810e2111 ">
                                 <p>If the global rule is in a negative rule set, then, when the messaging client is invoked, discard all of the persistent LCRs in the queue.</p>
                                 <p>If the global rule is in a positive rule set, then, when the messaging client is invoked, dequeue all of the persistent LCRs in the queue.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>You can use procedures in the <code class="codeph">DBMS_STREAMS_ADM</code> package to create rules at each of these levels. A system-created rule can include conditions that modify the Oracle Streams client behavior beyond the descriptions in <a href="how-rules-are-used-in-oracle-streams.html#GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89__g1030907" title="This table describes each rule level (table, schema, and global) for different types of Streams tasks.">Table 5-2</a>. For example, some rules can specify a particular <a href="strms_glossary.html#GUID-B5BB35D0-9179-4301-BA50-5B9CE22E362D"><span class="xrefglossterm">source database</span></a> for LCRs, and, in this case, the rule evaluates to <code class="codeph">TRUE</code> only if an LCR originated at the specified source database. <a href="how-rules-are-used-in-oracle-streams.html#GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89__g1030936" title="This table lists the types of changes that evaluate to true for different types of rule conditions. For each type of rule condition, the table lists the Streams client and the procedure used to create the rule condition.">Table 5-3</a> lists the types of system-created <a href="strms_glossary.html#GUID-103148AB-F5B0-47DC-B803-90919571C800"><span class="xrefglossterm">rule condition</span></a>s that can be specified in the rules created by the <code class="codeph">DBMS_STREAMS_ADM</code> package.
                  </p>
                  <div class="tblformalwide" id="GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89__g1030936">
                     <p class="titleintable">Table 5-3 System-Created Rule Conditions Generated by DBMS_STREAMS_ADM Package </p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="System-Created Rule Conditions Generated by DBMS_STREAMS_ADM Package " summary="This table lists the types of changes that evaluate to true for different types of rule conditions. For each type of rule  condition, the table lists the Streams client and the procedure used to create the rule condition." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="41%" id="d37810e2282">Rule Condition Evaluates to TRUE for</th>
                              <th align="left" valign="bottom" width="21%" id="d37810e2285">Oracle Streams Client</th>
                              <th align="left" valign="bottom" width="37%" id="d37810e2288">Create Using Procedure</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2293" headers="d37810e2282 ">
                                 <p>All row changes recorded in the redo log because of DML changes to any of the tables in a particular database</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2293 d37810e2285 ">
                                 <p>Capture Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2293 d37810e2288 ">
                                 <p><code class="codeph">ADD_GLOBAL_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2304" headers="d37810e2282 ">
                                 <p>All DDL changes recorded in the redo log to any of the database objects in a particular database</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2304 d37810e2285 ">
                                 <p>Capture Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2304 d37810e2288 ">
                                 <p><code class="codeph">ADD_GLOBAL_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2315" headers="d37810e2282 ">
                                 <p>All row changes recorded in the redo log because of DML changes to any of the tables in a particular schema</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2315 d37810e2285 ">
                                 <p>Capture Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2315 d37810e2288 ">
                                 <p><code class="codeph">ADD_SCHEMA_RULES</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2327" headers="d37810e2282 ">
                                 <p>All DDL changes recorded in the redo log to a particular schema and any of the database objects in the schema</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2327 d37810e2285 ">
                                 <p>Capture Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2327 d37810e2288 ">
                                 <p><code class="codeph">ADD_SCHEMA_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2338" headers="d37810e2282 ">
                                 <p>All row changes recorded in the redo log because of DML changes to a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2338 d37810e2285 ">
                                 <p>Capture Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2338 d37810e2288 ">
                                 <p><code class="codeph">ADD_TABLE_RULES</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2350" headers="d37810e2282 ">
                                 <p>All DDL changes recorded in the redo log to a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2350 d37810e2285 ">
                                 <p>Capture Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2350 d37810e2288 ">
                                 <p><code class="codeph">ADD_TABLE_RULES</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2362" headers="d37810e2282 ">
                                 <p>All row changes recorded in the redo log because of DML changes to a subset of rows in a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2362 d37810e2285 ">
                                 <p>Capture Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2362 d37810e2288 ">
                                 <p><code class="codeph">ADD_SUBSET_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2373" headers="d37810e2282 ">
                                 <p>All row changes made to a particular table resulting from DML statements</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2373 d37810e2285 ">
                                 <p>Synchronous Capture</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2373 d37810e2288 ">
                                 <p><code class="codeph">ADD_TABLE_RULES</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2385" headers="d37810e2282 ">
                                 <p>All row changes made to a subset of rows in a particular table resulting from DML statements</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2385 d37810e2285 ">
                                 <p>Synchronous Capture</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2385 d37810e2288 ">
                                 <p><code class="codeph">ADD_SUBSET_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2396" headers="d37810e2282 ">
                                 <p>All row LCRs in the source queue</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2396 d37810e2285 ">
                                 <p>Propagation</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2396 d37810e2288 ">
                                 <p><code class="codeph">ADD_GLOBAL_PROPAGATION_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2407" headers="d37810e2282 ">
                                 <p>All DDL LCRs in the source queue</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2407 d37810e2285 ">
                                 <p>Propagation</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2407 d37810e2288 ">
                                 <p><code class="codeph">ADD_GLOBAL_PROPAGATION_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2419" headers="d37810e2282 ">
                                 <p>All row LCRs in the source queue relating to the tables in a particular schema</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2419 d37810e2285 ">
                                 <p>Propagation</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2419 d37810e2288 ">
                                 <p><code class="codeph">ADD_SCHEMA_PROPAGATION_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2430" headers="d37810e2282 ">
                                 <p>All DDL LCRs in the source queue relating to a particular schema and any of the database objects in the schema</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2430 d37810e2285 ">
                                 <p>Propagation</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2430 d37810e2288 ">
                                 <p><code class="codeph">ADD_SCHEMA_PROPAGATION_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2441" headers="d37810e2282 ">
                                 <p>All row LCRs in the source queue relating to a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2441 d37810e2285 ">
                                 <p>Propagation</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2441 d37810e2288 ">
                                 <p><code class="codeph">ADD_TABLE_PROPAGATION_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2452" headers="d37810e2282 ">
                                 <p>All DDL LCRs in the source queue relating to a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2452 d37810e2285 ">
                                 <p>Propagation</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2452 d37810e2288 ">
                                 <p><code class="codeph">ADD_TABLE_PROPAGATION_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2463" headers="d37810e2282 ">
                                 <p>All row LCRs in the source queue relating to a subset of rows in a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2463 d37810e2285 ">
                                 <p>Propagation</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2463 d37810e2288 ">
                                 <p><code class="codeph">ADD_SUBSET_PROPAGATION_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2474" headers="d37810e2282 ">
                                 <p>All user messages in the source queue of the specified type that satisfy the user-specified rule condition</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2474 d37810e2285 ">
                                 <p>Propagation</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2474 d37810e2288 ">
                                 <p><code class="codeph">ADD_MESSAGE_PROPAGATION_RULE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2485" headers="d37810e2282 ">
                                 <p>All row LCRs in the queue used by the apply process</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2485 d37810e2285 ">
                                 <p>Apply Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2485 d37810e2288 ">
                                 <p><code class="codeph">ADD_GLOBAL_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2496" headers="d37810e2282 ">
                                 <p>All DDL LCRs in the queue used by the apply process</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2496 d37810e2285 ">
                                 <p>Apply Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2496 d37810e2288 ">
                                 <p><code class="codeph">ADD_GLOBAL_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2507" headers="d37810e2282 ">
                                 <p>All row LCRs in the queue used by the apply process relating to the tables in a particular schema</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2507 d37810e2285 ">
                                 <p>Apply Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2507 d37810e2288 ">
                                 <p><code class="codeph">ADD_SCHEMA_RULES</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2519" headers="d37810e2282 ">
                                 <p>All DDL LCRs in the queue used by the apply process relating to a particular schema and any of the database objects in the schema</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2519 d37810e2285 ">
                                 <p>Apply Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2519 d37810e2288 ">
                                 <p><code class="codeph">ADD_SCHEMA_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2530" headers="d37810e2282 ">
                                 <p>All row LCRs in the queue used by the apply process relating to a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2530 d37810e2285 ">
                                 <p>Apply Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2530 d37810e2288 ">
                                 <p><code class="codeph">ADD_TABLE_RULES</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2543" headers="d37810e2282 ">
                                 <p>All DDL LCRs in the queue used by the apply process relating to a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2543 d37810e2285 ">
                                 <p>Apply Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2543 d37810e2288 ">
                                 <p><code class="codeph">ADD_TABLE_RULES</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2555" headers="d37810e2282 ">
                                 <p>All row LCRs in the queue used by the apply process relating to a subset of rows in a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2555 d37810e2285 ">
                                 <p>Apply Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2555 d37810e2288 ">
                                 <p><code class="codeph">ADD_SUBSET_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2566" headers="d37810e2282 ">
                                 <p>All persistent user messages in the queue used by the apply process of the specified type that satisfy the user-specified rule condition</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2566 d37810e2285 ">
                                 <p>Apply Process</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2566 d37810e2288 ">
                                 <p><code class="codeph">ADD_MESSAGE_RULE</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2577" headers="d37810e2282 ">
                                 <p>All persistent row LCRs in the queue used by the messaging client</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2577 d37810e2285 ">
                                 <p>Messaging Client</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2577 d37810e2288 ">
                                 <p><code class="codeph">ADD_GLOBAL_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2588" headers="d37810e2282 ">
                                 <p>All persistent DDL LCRs in the queue used by the messaging client</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2588 d37810e2285 ">
                                 <p>Messaging Client</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2588 d37810e2288 ">
                                 <p><code class="codeph">ADD_GLOBAL_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2599" headers="d37810e2282 ">
                                 <p>All persistent row LCRs in the queue used by the messaging client relating to the tables in a particular schema</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2599 d37810e2285 ">
                                 <p>Messaging Client</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2599 d37810e2288 ">
                                 <p><code class="codeph">ADD_SCHEMA_RULES</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2611" headers="d37810e2282 ">
                                 <p>All persistent DDL LCRs in the queue used by the messaging client relating to a particular schema and any of the database objects in the schema</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2611 d37810e2285 ">
                                 <p>Messaging Client</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2611 d37810e2288 ">
                                 <p><code class="codeph">ADD_SCHEMA_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2622" headers="d37810e2282 ">
                                 <p>All persistent row LCRs in the queue for the messaging client relating to a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2622 d37810e2285 ">
                                 <p>Messaging Client</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2622 d37810e2288 ">
                                 <p><code class="codeph">ADD_TABLE_RULES</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2634" headers="d37810e2282 ">
                                 <p>All persistent DDL LCRs in the queue used by the messaging client relating to a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2634 d37810e2285 ">
                                 <p>Messaging Client</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2634 d37810e2288 ">
                                 <p><code class="codeph">ADD_TABLE_RULES</code> 
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2646" headers="d37810e2282 ">
                                 <p>All persistent row LCRs in the queue used by the messaging client relating to a subset of rows in a particular table</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2646 d37810e2285 ">
                                 <p>Messaging Client</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2646 d37810e2288 ">
                                 <p><code class="codeph">ADD_SUBSET_RULES</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="41%" id="d37810e2657" headers="d37810e2282 ">
                                 <p>All persistent messages in the queue used by the messaging client of the specified type that satisfy the user-specified rule condition</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d37810e2657 d37810e2285 ">
                                 <p>Messaging Client</p>
                              </td>
                              <td align="left" valign="top" width="37%" headers="d37810e2657 d37810e2288 ">
                                 <p><code class="codeph">ADD_MESSAGE_RULE</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p><a id="d37810e2668" class="indexterm-anchor"></a><a id="d37810e2674" class="indexterm-anchor"></a><a id="d37810e2680" class="indexterm-anchor"></a><a id="d37810e2682" class="indexterm-anchor"></a>Each procedure listed in <a href="how-rules-are-used-in-oracle-streams.html#GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89__g1030936" title="This table lists the types of changes that evaluate to true for different types of rule conditions. For each type of rule condition, the table lists the Streams client and the procedure used to create the rule condition.">Table 5-3</a> does the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Creates a <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a>, <a href="strms_glossary.html#GUID-5CA58899-A02D-422A-AE15-E8FCD004EB17"><span class="xrefglossterm">synchronous capture</span></a>, <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a>, <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a>, or <a href="strms_glossary.html#GUID-9EAF35D2-24C0-4E0B-ACC4-9EDC22A169C1"><span class="xrefglossterm">messaging client</span></a> if it does not already exist.
                        </p>
                     </li>
                     <li>
                        <p>Creates a rule set for the specified capture process, synchronous capture, propagation, apply process, or messaging client if a rule set does not already exist for it. For a capture process, propagation, apply process, or messaging client, the rule set can be a positive rule set or a negative rule set. You can create each type of rule set by running the procedure at least twice. For a synchronous capture, the rule set must be a positive rule set.</p>
                     </li>
                     <li>
                        <p>Creates zero or more rules and adds the rules to the rule set for the specified capture process, synchronous capture, propagation, apply process, or messaging client. Based on your specifications when you run one of these procedures, the procedure adds the rules either to the positive rule set or to the negative rule set.</p>
                     </li>
                  </ul>
                  <p>Except for the <code class="codeph">ADD_MESSAGE_RULE</code> and <code class="codeph">ADD_MESSAGE_PROPAGATION_RULE</code> procedures, these procedures create rule sets that use the <code class="codeph">SYS.STREAMS$_EVALUATION_CONTEXT</code> <a href="strms_glossary.html#GUID-F9C11C62-21FB-44BC-B128-3AE8BAD093EE"><span class="xrefglossterm">evaluation context</span></a>, which is an Oracle-supplied evaluation context for Oracle Streams environments.
                  </p>
                  <p>Global, schema, table, and subset rules use the <code class="codeph">SYS.STREAMS$_EVALUATION_CONTEXT</code> evaluation context. However, when you create a rule using either the <code class="codeph">ADD_MESSAGE_RULE</code> or the <code class="codeph">ADD_MESSAGE_PROPAGATION_RULE</code> procedure, the rule uses a system-generated evaluation context that is customized specifically for each message type. Rule sets created by the <code class="codeph">ADD_MESSAGE_RULE</code> or the <code class="codeph">ADD_MESSAGE_PROPAGATION_RULE</code> procedure do not have an evaluation context.
                  </p>
                  <p><a id="d37810e2757" class="indexterm-anchor"></a><a id="d37810e2763" class="indexterm-anchor"></a><a id="d37810e2769" class="indexterm-anchor"></a><a id="d37810e2771" class="indexterm-anchor"></a>Except for <code class="codeph">ADD_SUBSET_RULES</code>, <code class="codeph">ADD_SUBSET_PROPAGATION_RULES</code>, <code class="codeph">ADD_MESSAGE_RULE</code>, and <code class="codeph">ADD_MESSAGE_PROPAGATION_RULE</code>, these procedures create either zero, one, or two rules. If you want to perform the Oracle Streams task for only the row changes resulting from DML changes or only for only DDL changes, then only one rule is created. If, however, you want to perform the Oracle Streams task for both the results of DML changes and DDL changes, then a rule is created for each. If you create a DML rule for a table now, then you can create a DDL rule for the same table in the future without modifying the DML rule created earlier. The same applies if you create a DDL rule for a table first and a DML rule for the same table in the future.
                  </p>
                  <p>The <code class="codeph">ADD_SUBSET_RULES</code> and <code class="codeph">ADD_SUBSET_PROPAGATION_RULES</code> procedures always create three rules for three different types of DML operations on a table: <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, and <code class="codeph">DELETE</code>. These procedures do not create rules for DDL changes to a table. You can use the <code class="codeph">ADD_TABLE_RULES</code> or <code class="codeph">ADD_TABLE_PROPAGATION_RULES</code> procedure to create a DDL rule for a table. In addition, you can add subset rules to positive rule sets only, not to negative rule sets.
                  </p>
                  <p>The <code class="codeph">ADD_MESSAGE_RULE</code> and <code class="codeph">ADD_MESSAGE_PROPAGATION_RULE</code> procedures always create one rule with a user-specified rule condition. These procedures create rules for user messages. They do not create rules for the results of DML changes or DDL changes to a table. 
                  </p>
                  <p>When you create propagation rules for <a href="strms_glossary.html#GUID-0D2E5DAF-804E-4089-9E0E-987C96F59706"><span class="xrefglossterm">captured LCR</span></a>s, Oracle recommends that you specify a source database for the changes. An apply process uses transaction control messages to assemble captured LCRs into committed transactions. These transaction control messages, such as <code class="codeph">COMMIT</code> and <code class="codeph">ROLLBACK</code>, contain the name of the source database where the message occurred. To avoid unintended cycling of these messages, propagation rules should contain a condition specifying the source database, and you accomplish this by specifying the source database when you create the propagation rules.
                  </p>
                  <p>The following sections describe system-created rules in more detail:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-8FF86BC2-D19C-4545-9BB1-F879595EE092">Global Rules</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-EFFE7633-E86D-45D6-982D-13D17FD61E0C">Schema Rules</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-113DAE2C-D588-409E-AF0F-A5B6C61160DB">Table Rules</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-F68588B3-4297-43E5-BDCE-89A8740E23A0">Subset Rules</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-33E363CC-C872-4B3E-9E14-B5674B132C60">Message Rules</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-5B69AA8F-73B4-46C4-836F-54D2CE9A8251">System-Created Rules and Negative Rule Sets</a></p>
                     </li>
                     <li>
                        <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-1DCEB0D2-DADE-4B37-9EC2-59FA09DA24A4">System-Created Rules with Added User-Defined Conditions</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89__GUID-C33741B9-12E0-4F50-AC13-1A9BA87DE7C9">
                     <p class="notep1">Note:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>To create rules with more complex rule conditions, such as rules that use the <code class="codeph">NOT</code> or <code class="codeph">OR</code> logical conditions, either use the <code class="codeph">and_condition</code> parameter, which is available with some of the procedures in the <code class="codeph">DBMS_STREAMS_ADM</code> package, or use the <code class="codeph">DBMS_RULE_ADM</code> package.
                           </p>
                        </li>
                        <li>
                           <p>Each example in the sections that follow should be completed by an Oracle Streams administrator that has been granted the appropriate privileges, unless specified otherwise.</p>
                        </li>
                        <li>
                           <p>Some of the examples in this section have additional prerequisites. For example, a queue specified by a procedure parameter must exist.</p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-979FB5C9-7EE7-4E0B-9D28-15696A78DC89__GUID-422802F9-4B7A-4E24-B873-37E4710970D4">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="managing-rules.html#GUID-53F23A67-A3A6-46FE-9C5B-4041B25A52F7">Managing Rules</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="how-rules-are-used-in-oracle-streams.html#GUID-40D0F31E-06AD-400D-BCDB-5FD3A8222B13">Rule Sets and Rule Evaluation of Messages</a>"</span> for information about how messages satisfy the rule sets for an Oracle Streams client
                           </p>
                        </li>
                        <li>
                           <p><a href="../arpls/index.html"><span class="italic">Oracle Database PL/SQL Packages and Types Reference </span></a>for more information about the <code class="codeph">DBMS_STREAMS_ADM</code> package and the <code class="codeph">DBMS_RULE_ADM</code> package
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="advanced-rule-concepts.html#GUID-6BEFE444-DC00-4B40-A280-40F1D4E3A66E">Evaluation Contexts Used in Oracle Streams</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="oracle-streams-information-capture.html#GUID-8103F390-CBED-42B2-A9FA-7986B7B04885">Logical Change Records (LCRs)</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="advanced-rule-concepts.html#GUID-E72554A9-54A2-4E4E-BD35-ED8484534E1A">Complex Rule Conditions</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="STRMS412"></a><div class="props_rev_3"><a id="GUID-8FF86BC2-D19C-4545-9BB1-F879595EE092" name="GUID-8FF86BC2-D19C-4545-9BB1-F879595EE092"></a><h4 id="STRMS-GUID-8FF86BC2-D19C-4545-9BB1-F879595EE092" class="sect4"><span class="enumeration_section">5.3.1 </span>Global Rules
                  </h4>
                  <div>
                     <p>When you use a <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a> to specify an Oracle Streams task that is relevant either to an entire database or to an entire <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a>, you are specifying a <span class="bold">global rule</span>. You can specify a global rule for DML changes, a global rule for DDL changes, or a global rule for each type of change (two rules total).
                     </p>
                     <p>A single global rule in the <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a> for a <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a> means that the capture process captures the results of either all DML changes or all DDL changes to the <a href="strms_glossary.html#GUID-B5BB35D0-9179-4301-BA50-5B9CE22E362D"><span class="xrefglossterm">source database</span></a>. A single global rule in the <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a> for a capture process means that the capture process discards the results of either all DML changes or all DDL changes to the source database.
                     </p>
                     <p>A single global rule in the positive rule set for a <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a> means that the propagation propagates either all row LCRs or all DDL LCRs in the <a href="strms_glossary.html#GUID-FF907FD2-BD9E-4622-A33C-A6D400ED2CAF"><span class="xrefglossterm">source queue</span></a> to the <a href="strms_glossary.html#GUID-584772DA-C868-4F6B-9B7F-9E665F2D6F85"><span class="xrefglossterm">destination queue</span></a>. A single global rule in the negative rule set for a propagation means that the propagation discards either all row LCRs or all DDL LCRs in the source queue.
                     </p>
                     <p>A single global rule in the positive rule set for an <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a> means that the apply process applies either all row LCRs or all DDL LCRs in its queue for a specified source database. A single global rule in the negative rule set for an apply process means that the apply process discards either all row LCRs or all DDL LCRs in its queue for a specified source database.
                     </p>
                     <p>If you want to use global rules, but you are concerned about changes to database objects that are not supported by Oracle Streams, then you can create rules using the <code class="codeph">DBMS_RULE_ADM</code> package to discard unsupported changes.
                     </p>
                     <div class="infoboxnotealso" id="GUID-8FF86BC2-D19C-4545-9BB1-F879595EE092__GUID-61207826-48F2-4E0F-865C-FB68AB23582C">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="advanced-rule-concepts.html#GUID-A58CCA07-2550-4CE5-88FC-0486C86B202C">Rule Conditions that Instruct Oracle Streams Clients to Discard Unsupported LCRs</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="STRMS413"></a><div class="props_rev_3"><a id="GUID-878B43DB-FFF7-4529-B527-2738A54B720A" name="GUID-878B43DB-FFF7-4529-B527-2738A54B720A"></a><h5 id="STRMS-GUID-878B43DB-FFF7-4529-B527-2738A54B720A" class="sect5"><span class="enumeration_section">5.3.1.1 </span>Global Rules Example
                     </h5>
                     <div>
                        <p>Suppose you use the <code class="codeph">ADD_GLOBAL_RULES</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to instruct an Oracle Streams capture process to capture all DML changes and DDL changes in a database.
                        </p>
                        <p>Run the <code class="codeph">ADD_GLOBAL_RULES</code> procedure to create the rules:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN 
  DBMS_STREAMS_ADM.ADD_GLOBAL_RULES(
    streams_type        =&gt;  'capture',
    streams_name        =&gt;  'capture',
    queue_name          =&gt;  'streams_queue',
    include_dml         =&gt;  TRUE,
    include_ddl         =&gt;  TRUE,
    include_tagged_lcr  =&gt;  FALSE,
    source_database     =&gt;  NULL,
    inclusion_rule      =&gt;  TRUE);
END;
/
</pre><p>Notice that the <code class="codeph">inclusion_rule</code> parameter is set to <code class="codeph">TRUE</code>. This setting means that the <a href="strms_glossary.html#GUID-53B877C4-24D6-4D27-B80D-C1256A08A87A"><span class="xrefglossterm">system-created rule</span></a>s are added to the positive rule set for the capture process.
                        </p>
                        <p><code class="codeph">NULL</code> can be specified for the <code class="codeph">source_database</code> parameter because rules are being created for a <a href="strms_glossary.html#GUID-B03D3B40-9AE1-4C52-BC23-C8496CB5548F"><span class="xrefglossterm">local capture process</span></a>. You can also specify the global name of the local database. When creating rules for a <a href="strms_glossary.html#GUID-5AC0675A-963F-4A19-A210-24184EE61C7E"><span class="xrefglossterm">downstream capture process</span></a> or apply process using <code class="codeph">ADD_GLOBAL_RULES</code>, specify a source database name.
                        </p>
                        <p>The <code class="codeph">ADD_GLOBAL_RULES</code> procedure creates two rules: one for row LCRs (which contain the results of DML changes) and one for DDL LCRs.
                        </p>
                        <p>Here is the <a href="strms_glossary.html#GUID-103148AB-F5B0-47DC-B803-90919571C800"><span class="xrefglossterm">rule condition</span></a> used by the row LCR rule:
                        </p><pre class="oac_no_warn" dir="ltr">(:dml.is_null_tag() = 'Y' )
</pre><p><a id="d37810e3333" class="indexterm-anchor"></a><a id="d37810e3339" class="indexterm-anchor"></a><a id="d37810e3345" class="indexterm-anchor"></a>Notice that the condition in the DML rule begins with the variable <code class="codeph">:dml</code>. The value is determined by a call to the specified member function for the row LCR being evaluated. So, <code class="codeph">:dml.is_null_tag()</code> is a call to the <code class="codeph">IS_NULL_TAG</code> member function for the row LCR being evaluated.
                        </p>
                        <p>Here is the rule condition used by the DDL LCR rule:</p><pre class="oac_no_warn" dir="ltr">(:ddl.is_null_tag() = 'Y' )
</pre><p>Notice that the condition in the DDL rule begins with the variable <code class="codeph">:ddl</code>. The value is determined by a call to the specified member function for the DDL LCR being evaluated. So, <code class="codeph">:ddl.is_null_tag()</code> is a call to the <code class="codeph">IS_NULL_TAG</code> member function for the DDL LCR being evaluated.
                        </p>
                        <p>For a capture process, these conditions indicate that the <a href="strms_glossary.html#GUID-D667D798-F9C9-437F-92AB-8C04FAD19B64"><span class="xrefglossterm">tag</span></a> must be <code class="codeph">NULL</code> in a redo record for the capture process to capture a change. For a propagation, these conditions indicate that the tag must be <code class="codeph">NULL</code> in an LCR for the propagation to propagate the LCR. For an apply process, these conditions indicate that the tag must be <code class="codeph">NULL</code> in an LCR for the apply process to apply the LCR.
                        </p>
                        <p>Given the rules created by this example in the positive rule set for the capture process, the capture process captures all supported DML and DDL changes made to the database.</p>
                        <div class="infoboxnote" id="GUID-878B43DB-FFF7-4529-B527-2738A54B720A__GUID-E8824A1C-82B4-45A4-8BDD-D2C3B87EDE53">
                           <p class="notep1">Note:</p>
                           <p>If you add global rules to the positive rule set for a capture process, then ensure that you add rules to the negative capture process rule set to exclude database objects that are not support by capture processes. Query the <code class="codeph">DBA_STREAMS_UNSUPPORTED</code> data dictionary view to determine which database objects are not supported by capture processes. If unsupported database objects are not excluded, then capture errors will result.
                           </p>
                           <p>If you add global rules to the positive rule set for an apply process, then ensure that the apply process does not attempt to apply changes to unsupported columns. To do so, you can add rules to the negative apply process rule set to exclude the table that contains the column, or you can exclude the column with a rule-based transformation or DML handler. Query the <code class="codeph">DBA_STREAMS_COLUMNS</code> data dictionary view to determine which columns are not supported by apply processes. If unsupported columns are not excluded, then apply errors will result.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-878B43DB-FFF7-4529-B527-2738A54B720A__GUID-3B4FD1EE-976A-4237-9AC7-D20F32EB0865">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="monitoring-other-oracle-streams-components.html#GUID-04AAFA72-7912-49E1-9FD1-A2F63C2DEEE1">Listing the Database Objects That Are Not Compatible with Capture Processes</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="monitoring-other-oracle-streams-components.html#GUID-CF461633-BF7E-44FE-8EA8-2B5F1C5AD288">Listing Database Objects and Columns Not Compatible with Apply Processes</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="rule-based-transformations.html#GUID-3B2ECFEA-B6EC-4102-B005-6A4182234CC4"> Rule-Based Transformations </a></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-streams-information-consumption.html#GUID-FD7C80F9-A30E-4B76-83F3-2C789E2BAEA7">DML Handlers</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS414"></a><div class="props_rev_3"><a id="GUID-208D5A61-C206-4E1F-91C5-BBE1B7C7A195" name="GUID-208D5A61-C206-4E1F-91C5-BBE1B7C7A195"></a><h5 id="STRMS-GUID-208D5A61-C206-4E1F-91C5-BBE1B7C7A195" class="sect5"><span class="enumeration_section">5.3.1.2 </span>System-Created Global Rules Avoid Empty Rule Conditions Automatically
                     </h5>
                     <div>
                        <p>You can omit the <code class="codeph">is_null_tag</code> condition in system-created rules by specifying <code class="codeph">TRUE</code> for the <code class="codeph">include_tagged_lcr</code> parameter when you run a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package. For example, the following <code class="codeph">ADD_GLOBAL_RULES</code> procedure creates rules without the <code class="codeph">is_null_tag</code> condition:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN DBMS_STREAMS_ADM.ADD_GLOBAL_RULES(
   streams_type        =&gt;  'capture',
   streams_name        =&gt;  'capture_002',
   queue_name          =&gt;  'streams_queue',
   include_dml         =&gt;  TRUE,
   include_ddl         =&gt;  TRUE,
   include_tagged_lcr  =&gt;  TRUE,
   source_database     =&gt;  NULL,
   inclusion_rule      =&gt;  TRUE);
END;
/
</pre><p>When you set the <code class="codeph">include_tagged_lcr</code> parameter to <code class="codeph">TRUE</code> for a global rule, and the <code class="codeph">source_database_name</code> parameter is set to <code class="codeph">NULL</code>, the rule condition used by the row LCR rule is the following:
                        </p><pre class="oac_no_warn" dir="ltr">(( :dml.get_source_database_name()&gt;=' ' OR 
:dml.get_source_database_name()&lt;=' ') )
</pre><p>Here is the rule condition used by the DDL LCR rule:</p><pre class="oac_no_warn" dir="ltr">(( :ddl.get_source_database_name()&gt;=' ' OR 
:ddl.get_source_database_name()&lt;=' ') )
</pre><p>The system-created global rules contain these conditions to enable all row and DDL LCRs to evaluate to <code class="codeph">TRUE</code>. 
                        </p>
                        <p>These rule conditions are specified to avoid <code class="codeph">NULL</code> rule conditions for these rules. <code class="codeph">NULL</code> rule conditions are not supported. In this case, if you want to capture all DML and DDL changes to a database, and you do not want to use any <a href="strms_glossary.html#GUID-18697C88-84CA-4F47-8F47-DD5D37E9543B"><span class="xrefglossterm">rule-based transformation</span></a>s for these changes upon capture, then you can choose to run the capture process without a positive rule set instead of specifying global rules.
                        </p>
                        <div class="infoboxnote" id="GUID-208D5A61-C206-4E1F-91C5-BBE1B7C7A195__GUID-9AFDF4CA-3F76-40AE-BE7E-7A3BF4E53609">
                           <p class="notep1">Note:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>When you create a capture process using a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package and generate one or more rules for the capture process, the objects for which changes are captured are prepared for <a href="strms_glossary.html#GUID-8B2165CC-97F5-415E-8C7B-A356C6D26841"><span class="xrefglossterm">instantiation</span></a> automatically, unless it is a downstream capture process and there is no database link from the <a href="strms_glossary.html#GUID-BEBC1371-719D-4103-877E-E3FB7B1DBA46"><span class="xrefglossterm">downstream database</span></a> to the source database.
                                 </p>
                              </li>
                              <li>
                                 <p>The capture process does not capture some types of DML and DDL changes, and it does not capture changes made in the <code class="codeph">SYS</code>, <code class="codeph">SYSTEM</code>, or <code class="codeph">CTXSYS</code> schemas.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="infoboxnotealso" id="GUID-208D5A61-C206-4E1F-91C5-BBE1B7C7A195__GUID-F006E4BA-B6F5-4D73-A663-C8C7701D7891">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=STREP115"><span class="italic">Oracle Streams Replication Administrator's Guide </span></a>for more information about capture process rules and preparation for instantiation
                                 </p>
                              </li>
                              <li>
                                 <p><a href="oracle-streams-information-capture.html#GUID-DADEDB32-7F0F-40F2-A5A5-81327102B00B"> Oracle Streams Information Capture</a> for more information about the capture process and for detailed information about which DML and DDL statements are captured by a capture process
                                 </p>
                              </li>
                              <li>
                                 <p><a href="advanced-rule-concepts.html#GUID-5E6F0B16-C959-46EC-984E-1B5FC642A16D"> Advanced Rule Concepts</a> for more information about variables in conditions
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=STREP008"><span class="italic">Oracle Streams Replication Administrator's Guide </span></a>for more information about Oracle Streams tags
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="how-rules-are-used-in-oracle-streams.html#GUID-40D0F31E-06AD-400D-BCDB-5FD3A8222B13">Rule Sets and Rule Evaluation of Messages</a>"</span> for more information about running a capture process with no positive rule set
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="STRMS415"></a><div class="props_rev_3"><a id="GUID-EFFE7633-E86D-45D6-982D-13D17FD61E0C" name="GUID-EFFE7633-E86D-45D6-982D-13D17FD61E0C"></a><h4 id="STRMS-GUID-EFFE7633-E86D-45D6-982D-13D17FD61E0C" class="sect4"><span class="enumeration_section">5.3.2 </span>Schema Rules
                  </h4>
                  <div>
                     <p>When you use a <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a> to specify an Oracle Streams task that is relevant to a schema, you are specifying a <span class="bold">schema rule</span>. You can specify a schema rule for DML changes, a schema rule for DDL changes, or a schema rule for each type of change to the schema (two rules total).
                     </p>
                     <p>A single schema rule in the <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a> for a <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a> means that the capture process captures either the DML changes or the DDL changes to the schema. A single schema rule in the <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a> for a capture process means that the capture process discards either the DML changes or the DDL changes to the schema.
                     </p>
                     <p>A single schema rule in the positive rule set for a <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a> means that the propagation propagates either the row LCRs or the DDL LCRs in the <a href="strms_glossary.html#GUID-FF907FD2-BD9E-4622-A33C-A6D400ED2CAF"><span class="xrefglossterm">source queue</span></a> that contain changes to the schema. A single schema rule in the negative rule set for a propagation means that the propagation discards either the row LCRs or the DDL LCRs in the source queue that contain changes to the schema.
                     </p>
                     <p>A single schema rule in the positive rule set for an <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a> means that the apply process applies either the row LCRs or the DDL LCRs in its <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a> that contain changes to the schema. A single schema rule in the negative rule set for an apply process means that the apply process discards either the row LCRs or the DDL LCRs in its queue that contain changes to the schema.
                     </p>
                     <p>If you want to use schema rules, but you are concerned about changes to database objects in a schema that are not supported by Oracle Streams, then you can create rules using the <code class="codeph">DBMS_RULE_ADM</code> package to discard unsupported changes.
                     </p>
                     <div class="infoboxnotealso" id="GUID-EFFE7633-E86D-45D6-982D-13D17FD61E0C__GUID-082A2848-6252-49CB-8A77-23ED6B2AED4E">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="advanced-rule-concepts.html#GUID-A58CCA07-2550-4CE5-88FC-0486C86B202C">Rule Conditions that Instruct Oracle Streams Clients to Discard Unsupported LCRs</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="STRMS416"></a><div class="props_rev_3"><a id="GUID-69E4E26A-0EDD-462B-843A-19876E0347BF" name="GUID-69E4E26A-0EDD-462B-843A-19876E0347BF"></a><h5 id="STRMS-GUID-69E4E26A-0EDD-462B-843A-19876E0347BF" class="sect5"><span class="enumeration_section">5.3.2.1 </span>Schema Rule Example
                     </h5>
                     <div>
                        <p>Suppose you use the <code class="codeph">ADD_SCHEMA_PROPAGATION_RULES</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to instruct an Oracle Streams propagation to propagate row LCRs and DDL LCRs relating to the <code class="codeph">hr</code> schema from a queue at the <code class="codeph">dbs1.example.com</code> database to a queue at the <code class="codeph">dbs2.example.com</code> database.
                        </p>
                        <p>Run the <code class="codeph">ADD_SCHEMA_PROPAGATION_RULES</code> procedure at <code class="codeph">dbs1.example.com</code> to create the rules:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN 
  DBMS_STREAMS_ADM.ADD_SCHEMA_PROPAGATION_RULES(
    schema_name              =&gt;  'hr',
    streams_name             =&gt;  'dbs1_to_dbs2',
    source_queue_name        =&gt;  'streams_queue',
    destination_queue_name   =&gt;  'streams_queue@dbs2.example.com',
    include_dml              =&gt;  TRUE,
    include_ddl              =&gt;  TRUE,
    include_tagged_lcr       =&gt;  FALSE,
    source_database          =&gt;  'dbs1.example.com',
    inclusion_rule           =&gt;  TRUE);
END;
/
</pre><p>Notice that the <code class="codeph">inclusion_rule</code> parameter is set to <code class="codeph">TRUE</code>. This setting means that the <a href="strms_glossary.html#GUID-53B877C4-24D6-4D27-B80D-C1256A08A87A"><span class="xrefglossterm">system-created rule</span></a>s are added to the positive rule set for the propagation.
                        </p>
                        <p>The <code class="codeph">ADD_SCHEMA_PROPAGATION_RULES</code> procedure creates two rules: one for row LCRs (which contain the results of DML changes) and one for DDL LCRs.
                        </p>
                        <p>Here is the <a href="strms_glossary.html#GUID-103148AB-F5B0-47DC-B803-90919571C800"><span class="xrefglossterm">rule condition</span></a> used by the row LCR rule:
                        </p><pre class="oac_no_warn" dir="ltr">((:dml.get_object_owner() = 'HR') and :dml.is_null_tag() = 'Y' 
and :dml.get_source_database_name() = 'DBS1.EXAMPLE.COM' )
</pre><p>Here is the rule condition used by the DDL LCR rule:</p><pre class="oac_no_warn" dir="ltr">((:ddl.get_object_owner() = 'HR' or :ddl.get_base_table_owner() = 'HR') 
and :ddl.is_null_tag() = 'Y' and :ddl.get_source_database_name() = 
'DBS1.EXAMPLE.COM' )
</pre><p>The <code class="codeph">GET_BASE_TABLE_OWNER</code> member function is used in the DDL LCR rule because the <code class="codeph">GET_OBJECT_OWNER</code> function can return <code class="codeph">NULL</code> if a user who does not own an object performs a DDL change on the object.
                        </p>
                        <p>Given these rules in the positive rule set for the propagation, the following list provides examples of changes propagated by the propagation:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A row is inserted into the <code class="codeph">hr.countries</code> table.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">hr.loc_city_ix</code> index is altered.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">hr.employees</code> table is truncated.
                              </p>
                           </li>
                           <li>
                              <p>A column is added to the <code class="codeph">hr.countries</code> table.
                              </p>
                           </li>
                           <li>
                              <p>The <code class="codeph">hr.update_job_history</code> trigger is altered.
                              </p>
                           </li>
                           <li>
                              <p>A new table named <code class="codeph">candidates</code> is created in the <code class="codeph">hr</code> schema.
                              </p>
                           </li>
                           <li>
                              <p>Twenty rows are inserted into the <code class="codeph">hr.candidates</code> table.
                              </p>
                           </li>
                        </ul>
                        <p>The propagation propagates the LCRs that contain all of the changes previously listed from the source queue to the <a href="strms_glossary.html#GUID-584772DA-C868-4F6B-9B7F-9E665F2D6F85"><span class="xrefglossterm">destination queue</span></a>.
                        </p>
                        <p>Now, given the same rules, suppose a row is inserted into the <code class="codeph">oe.inventories</code> table. This change is ignored because the <code class="codeph">oe</code> schema was not specified in a schema rule, and the <code class="codeph">oe.inventories</code> table was not specified in a table rule.
                        </p>
                        <div class="infoboxnote" id="GUID-69E4E26A-0EDD-462B-843A-19876E0347BF__GUID-FF6D7D88-99A8-47A8-A1CD-3033D9A41DAE">
                           <p class="notep1">Note:</p>
                           <p>If you add schema rules to the positive rule set for a capture process, then ensure that you add rules to the negative capture process rule set to exclude database objects in the schema that are not support by capture processes. Query the <code class="codeph">DBA_STREAMS_UNSUPPORTED</code> data dictionary view to determine which database objects are not supported by capture processes. If unsupported database objects are not excluded, then capture errors will result.
                           </p>
                           <p>If you add schema rules to the positive rule set for an apply process, then ensure that the apply process does not attempt to apply changes to unsupported columns. To do so, you can add rules to the negative apply process rule set to exclude the table that contains the column, or you can exclude the column with a rule-based transformation or DML handler. Query the <code class="codeph">DBA_STREAMS_COLUMNS</code> data dictionary view to determine which columns are not supported by apply processes. If unsupported columns are not excluded, then apply errors will result.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-69E4E26A-0EDD-462B-843A-19876E0347BF__GUID-A9A3C7A1-1D4F-4B81-BB05-8C6B7F48022C">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="monitoring-other-oracle-streams-components.html#GUID-04AAFA72-7912-49E1-9FD1-A2F63C2DEEE1">Listing the Database Objects That Are Not Compatible with Capture Processes</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="monitoring-other-oracle-streams-components.html#GUID-CF461633-BF7E-44FE-8EA8-2B5F1C5AD288">Listing Database Objects and Columns Not Compatible with Apply Processes</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="rule-based-transformations.html#GUID-3B2ECFEA-B6EC-4102-B005-6A4182234CC4"> Rule-Based Transformations </a></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-streams-information-consumption.html#GUID-FD7C80F9-A30E-4B76-83F3-2C789E2BAEA7">DML Handlers</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="STRMS108"></a><a id="STRMS_TABLE_RULES"></a><div class="props_rev_3"><a id="GUID-113DAE2C-D588-409E-AF0F-A5B6C61160DB" name="GUID-113DAE2C-D588-409E-AF0F-A5B6C61160DB"></a><h4 id="STRMS-GUID-113DAE2C-D588-409E-AF0F-A5B6C61160DB" class="sect4"><span class="enumeration_section">5.3.3 </span>Table Rules
                  </h4>
                  <div>
                     <p>When you use a <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a> to specify an Oracle Streams task that is relevant only for an individual table, you are specifying a <span class="bold">table rule</span>. You can specify a table rule for DML changes, a table rule for DDL changes, or a table rule for each type of change to a specific table (two rules total).
                     </p>
                     <p>A single table rule in the <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a> for a <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a> means that the capture process captures the results of either the DML changes or the DDL changes to the table. A single table rule in the <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a> for a capture process means that the capture process discards the results of either the DML changes or the DDL changes to the table.
                     </p>
                     <p>A single table rule in the <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a> for a <a href="strms_glossary.html#GUID-5CA58899-A02D-422A-AE15-E8FCD004EB17"><span class="xrefglossterm">synchronous capture</span></a> means that the synchronous capture captures the results of either the DML changes to the table. A synchronous capture cannot have a <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a>.
                     </p>
                     <p>A single table rule in the positive rule set for a <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a> means that the propagation propagates either the row LCRs or the DDL LCRs in the <a href="strms_glossary.html#GUID-FF907FD2-BD9E-4622-A33C-A6D400ED2CAF"><span class="xrefglossterm">source queue</span></a> that contain changes to the table. A single table rule in the negative rule set for a propagation means that the propagation discards either the row LCRs or the DDL LCRs in the source queue that contain changes to the table.
                     </p>
                     <p>A single table rule in the positive rule set for an <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a> means that the apply process applies either the row LCRs or the DDL LCRs in its <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a> that contain changes to the table. A single table rule in the negative rule set for an apply process means that the apply process discards either the row LCRs or the DDL LCRs in its queue that contain changes to the table.
                     </p>
                  </div><a id="STRMS417"></a><div class="props_rev_3"><a id="GUID-C74CAA33-1F17-44B8-9BCC-87DB8A981ECD" name="GUID-C74CAA33-1F17-44B8-9BCC-87DB8A981ECD"></a><h5 id="STRMS-GUID-C74CAA33-1F17-44B8-9BCC-87DB8A981ECD" class="sect5"><span class="enumeration_section">5.3.3.1 </span>Table Rules Example
                     </h5>
                     <div>
                        <p>Suppose you use the <code class="codeph">ADD_TABLE_RULES</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to instruct an Oracle Streams apply process to behave in the following ways:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-3A46481B-9920-499F-A452-9FDC453716CC">Apply All Row LCRs Related to the hr.locations Table</a></p>
                           </li>
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-D2C2998F-C407-4849-B807-9BC103B973C0">Apply All DDL LCRs Related to the hr.countries Table</a></p>
                           </li>
                        </ul>
                     </div><a id="STRMS418"></a><div class="props_rev_3"><a id="GUID-3A46481B-9920-499F-A452-9FDC453716CC" name="GUID-3A46481B-9920-499F-A452-9FDC453716CC"></a><h6 id="STRMS-GUID-3A46481B-9920-499F-A452-9FDC453716CC" class="sect6"><span class="enumeration_section">5.3.3.1.1 </span>Apply All Row LCRs Related to the hr.locations Table
                        </h6>
                        <div>
                           <p>The changes in these row LCRs originated at the <code class="codeph">dbs1.example.com</code> <a href="strms_glossary.html#GUID-B5BB35D0-9179-4301-BA50-5B9CE22E362D"><span class="xrefglossterm">source database</span></a>.
                           </p>
                           <p>Run the <code class="codeph">ADD_TABLE_RULES</code> procedure to create this rule:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN 
  DBMS_STREAMS_ADM.ADD_TABLE_RULES(
    table_name          =&gt;  'hr.locations',
    streams_type        =&gt;  'apply',
    streams_name        =&gt;  'apply',
    queue_name          =&gt;  'streams_queue',
    include_dml         =&gt;  TRUE,
    include_ddl         =&gt;  FALSE,
    include_tagged_lcr  =&gt;  FALSE,
    source_database     =&gt;  'dbs1.example.com',
    inclusion_rule      =&gt;  TRUE);
END;
/
</pre><p>Notice that the <code class="codeph">inclusion_rule</code> parameter is set to <code class="codeph">TRUE</code>. This setting means that the <a href="strms_glossary.html#GUID-53B877C4-24D6-4D27-B80D-C1256A08A87A"><span class="xrefglossterm">system-created rule</span></a> is added to the positive rule set for the apply process.
                           </p>
                           <p>The <code class="codeph">ADD_TABLE_RULES</code> procedure creates a rule with a <a href="strms_glossary.html#GUID-103148AB-F5B0-47DC-B803-90919571C800"><span class="xrefglossterm">rule condition</span></a> similar to the following:
                           </p><pre class="oac_no_warn" dir="ltr">(((:dml.get_object_owner() = 'HR' and :dml.get_object_name() = 'LOCATIONS')) 
and :dml.is_null_tag() = 'Y' and :dml.get_source_database_name() = 
'DBS1.EXAMPLE.COM' )</pre></div>
                     </div><a id="STRMS419"></a><div class="props_rev_3"><a id="GUID-D2C2998F-C407-4849-B807-9BC103B973C0" name="GUID-D2C2998F-C407-4849-B807-9BC103B973C0"></a><h6 id="STRMS-GUID-D2C2998F-C407-4849-B807-9BC103B973C0" class="sect6"><span class="enumeration_section">5.3.3.1.2 </span>Apply All DDL LCRs Related to the hr.countries Table
                        </h6>
                        <div>
                           <p>The changes in these DDL LCRs originated at the <code class="codeph">dbs1.example.com</code> source database. 
                           </p>
                           <p>Run the <code class="codeph">ADD_TABLE_RULES</code> procedure to create this rule:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN 
  DBMS_STREAMS_ADM.ADD_TABLE_RULES(
    table_name          =&gt;  'hr.countries',
    streams_type        =&gt;  'apply',
    streams_name        =&gt;  'apply',
    queue_name          =&gt;  'streams_queue',
    include_dml         =&gt;  FALSE,
    include_ddl         =&gt;  TRUE,
    include_tagged_lcr  =&gt;  FALSE,
    source_database     =&gt;  'dbs1.example.com',
    inclusion_rule      =&gt;  TRUE);
END;
/
</pre><p>Notice that the <code class="codeph">inclusion_rule</code> parameter is set to <code class="codeph">TRUE</code>. This setting means that the system-created rule is added to the positive rule set for the apply process.
                           </p>
                           <p><a id="d37810e4829" class="indexterm-anchor"></a><a id="d37810e4835" class="indexterm-anchor"></a>The <code class="codeph">ADD_TABLE_RULES</code> procedure creates a rule with a rule condition similar to the following:
                           </p><pre class="oac_no_warn" dir="ltr">(((:ddl.get_object_owner() = 'HR' and :ddl.get_object_name() = 'COUNTRIES')
or (:ddl.get_base_table_owner() = 'HR' 
and :ddl.get_base_table_name() = 'COUNTRIES')) and :ddl.is_null_tag() = 'Y' 
and :ddl.get_source_database_name() = 'DBS1.EXAMPLE.COM' )
</pre><p>The <code class="codeph">GET_BASE_TABLE_OWNER</code> and <code class="codeph">GET_BASE_TABLE_NAME</code> member functions are used in the DDL LCR rule because the <code class="codeph">GET_OBJECT_OWNER</code> and <code class="codeph">GET_OBJECT_NAME</code> functions can return <code class="codeph">NULL</code> if a user who does not own an object performs a DDL change on the object.
                           </p>
                           <p>The generated DDL table rule evaluates to <code class="codeph">TRUE</code> for any DDL change that operates on the table or on an object that is part of the table, such as an index or trigger on the table. The rule evaluates to <code class="codeph">FALSE</code> for any DDL change that either does not refer to the table or refers to the table in a subordinate way. For example, the rule evaluates to <code class="codeph">FALSE</code> for changes that create synonyms or views based on the table. The rule also evaluates to <code class="codeph">FALSE</code> for a change to a PL/SQL subprogram that refers to the table.
                           </p>
                        </div>
                     </div><a id="STRMS420"></a><div class="props_rev_3"><a id="GUID-E4053991-3F93-4B71-8108-BA566D29DFAB" name="GUID-E4053991-3F93-4B71-8108-BA566D29DFAB"></a><h6 id="STRMS-GUID-E4053991-3F93-4B71-8108-BA566D29DFAB" class="sect6"><span class="enumeration_section">5.3.3.1.3 </span>Summary of Rules
                        </h6>
                        <div>
                           <p>In this example, the following table rules were defined:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A table rule that evaluates to <code class="codeph">TRUE</code> if a row LCR contains a row change that results from a DML operation on the <code class="codeph">hr.locations</code> table. 
                                 </p>
                              </li>
                              <li>
                                 <p>A table rule that evaluates to <code class="codeph">TRUE</code> if a DDL LCR contains a DDL change performed on the <code class="codeph">hr.countries</code> table. 
                                 </p>
                              </li>
                           </ul>
                           <p>Given these rules, the following list provides examples of changes applied by an apply process:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A row is inserted into the <code class="codeph">hr.locations</code> table.
                                 </p>
                              </li>
                              <li>
                                 <p>Five rows are deleted from the <code class="codeph">hr.locations</code> table.
                                 </p>
                              </li>
                              <li>
                                 <p>A column is added to the <code class="codeph">hr.countries</code> table.
                                 </p>
                              </li>
                           </ul>
                           <p>The apply process dequeues the LCRs containing these changes from its associated queue and applies them to the database objects at the <a href="strms_glossary.html#GUID-C73813B0-D8A7-46D5-85B2-15BAB0A146B5"><span class="xrefglossterm">destination database</span></a>.
                           </p>
                           <p>Given these rules, the following list provides examples of changes that are ignored by the apply process:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A row is inserted into the <code class="codeph">hr.employees</code> table. This change is not applied because a change to the <code class="codeph">hr.employees</code> table does not satisfy any of the rules.
                                 </p>
                              </li>
                              <li>
                                 <p>A row is updated in the <code class="codeph">hr.countries</code> table. This change is a DML change, not a DDL change. This change is not applied because the rule on the <code class="codeph">hr.countries</code> table is for DDL changes only.
                                 </p>
                              </li>
                              <li>
                                 <p>A column is added to the <code class="codeph">hr.locations</code> table. This change is a DDL change, not a DML change. This change is not applied because the rule on the <code class="codeph">hr.locations</code> table is for DML changes only.
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnote" id="GUID-E4053991-3F93-4B71-8108-BA566D29DFAB__GUID-41B2AC44-369F-4D3C-8E22-6FADDED73D21">
                              <p class="notep1">Note:</p>
                              <p>Do not add table rules to the positive rule set of a capture process for tables that are not supported by capture processes. Query the <code class="codeph">DBA_STREAMS_UNSUPPORTED</code> data dictionary view to determine which tables are not supported by capture processes. If unsupported table are not excluded, then capture errors will result.
                              </p>
                              <p>If you add table rules to the positive rule set for a synchronous capture or an apply process, then ensure that these Oracle Streams clients do not attempt to process changes to unsupported columns. If a table includes an unsupported column, then you can exclude the column with a rule-based transformation or, for an apply process, with a DML handler. Query the <code class="codeph">DBA_STREAMS_COLUMNS</code> data dictionary view to determine which columns are not supported by synchronous captures and apply processes. If unsupported columns are not excluded, then errors will result.
                              </p>
                           </div>
                           <div class="infoboxnotealso" id="GUID-E4053991-3F93-4B71-8108-BA566D29DFAB__GUID-BA3E63E5-B500-4151-B031-C52241125DCB">
                              <p class="notep1">See Also:</p>
                              <p></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="monitoring-other-oracle-streams-components.html#GUID-04AAFA72-7912-49E1-9FD1-A2F63C2DEEE1">Listing the Database Objects That Are Not Compatible with Capture Processes</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="monitoring-other-oracle-streams-components.html#GUID-C805B775-B1D1-4308-889F-3FF1E321D449">Listing Database Objects and Columns Not Compatible with Synchronous Captures</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="monitoring-other-oracle-streams-components.html#GUID-CF461633-BF7E-44FE-8EA8-2B5F1C5AD288">Listing Database Objects and Columns Not Compatible with Apply Processes</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="rule-based-transformations.html#GUID-3B2ECFEA-B6EC-4102-B005-6A4182234CC4"> Rule-Based Transformations </a></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="oracle-streams-information-consumption.html#GUID-FD7C80F9-A30E-4B76-83F3-2C789E2BAEA7">DML Handlers</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="STRMS124"></a><a id="STRMS_SUBSET_RULES"></a><div class="props_rev_3"><a id="GUID-F68588B3-4297-43E5-BDCE-89A8740E23A0" name="GUID-F68588B3-4297-43E5-BDCE-89A8740E23A0"></a><h4 id="STRMS-GUID-F68588B3-4297-43E5-BDCE-89A8740E23A0" class="sect4"><span class="enumeration_section">5.3.4 </span>Subset Rules
                  </h4>
                  <div>
                     <p>A <span class="bold">subset rule</span> is a special type of <a href="strms_glossary.html#GUID-4A72ABEB-7CC1-4A46-A4B9-41F722D872A4"><span class="xrefglossterm">table rule</span></a> for DML changes that is relevant only to a subset of the rows in a table. You can create subset rules for <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a>es, <a href="strms_glossary.html#GUID-5CA58899-A02D-422A-AE15-E8FCD004EB17"><span class="xrefglossterm">synchronous capture</span></a>s, <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a>es, and <a href="strms_glossary.html#GUID-9EAF35D2-24C0-4E0B-ACC4-9EDC22A169C1"><span class="xrefglossterm">messaging client</span></a>s using the <code class="codeph">ADD_SUBSET_RULES</code> procedure. You can create subset rules for <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a>s using the <code class="codeph">ADD_SUBSET_PROPAGATION_RULES</code> procedure. These procedures enable you to use a condition similar to a <code class="codeph">WHERE</code> clause in a <code class="codeph">SELECT</code> statement to specify the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>That a capture process only captures a subset of the row changes resulting from DML changes to a particular table</p>
                        </li>
                        <li>
                           <p>That a synchronous capture only captures a subset of the row changes resulting from DML changes to a particular table</p>
                        </li>
                        <li>
                           <p>That a propagation only propagates a subset of the row LCRs relating to a particular table</p>
                        </li>
                        <li>
                           <p>That an apply process only applies a subset of the row LCRs relating to a particular table</p>
                        </li>
                        <li>
                           <p>That a messaging client only dequeues a subset of the row LCRs relating to a particular table</p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">ADD_SUBSET_RULES</code> procedure and the <code class="codeph">ADD_SUBSET_PROPAGATION_RULES</code> procedure can add subset rules to the <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a> only of an <a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a>. You cannot add subset rules to the <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a> for an Oracle Streams client using these procedures.
                     </p>
                     <p>The following sections describe subset rules in more detail:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-F51B570A-5ACD-4AD1-8741-12FC054C5A8F">Subset Rules Example</a></p>
                        </li>
                        <li>
                           <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-35868ADC-C131-4988-9139-FC9B0EEA145D">Row Migration and Subset Rules</a></p>
                        </li>
                        <li>
                           <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-76642C92-FAFC-4E4A-91BC-C6F13843383F">Subset Rules and Supplemental Logging</a></p>
                        </li>
                        <li>
                           <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-F05F08D0-8BC8-4D0E-A3CE-0381C1069043">Guidelines for Using Subset Rules</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-F68588B3-4297-43E5-BDCE-89A8740E23A0__GUID-1ECD5C7A-95D5-4CAC-AE88-062723A6FF3E">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="oracle-streams-restrictions.html#GUID-B9745F2E-DD42-42A9-9A69-5A59A0604BFC">Restrictions for Subset Rules</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="STRMS421"></a><div class="props_rev_3"><a id="GUID-F51B570A-5ACD-4AD1-8741-12FC054C5A8F" name="GUID-F51B570A-5ACD-4AD1-8741-12FC054C5A8F"></a><h5 id="STRMS-GUID-F51B570A-5ACD-4AD1-8741-12FC054C5A8F" class="sect5"><span class="enumeration_section">5.3.4.1 </span>Subset Rules Example
                     </h5>
                     <div>
                        <p>This example instructs an Oracle Streams apply process to apply a subset of row LCRs relating to the <code class="codeph">hr.regions</code> table where the <code class="codeph">region_id</code> is <code class="codeph">2</code>. These changes originated at the <code class="codeph">dbs1.example.com</code> <a href="strms_glossary.html#GUID-B5BB35D0-9179-4301-BA50-5B9CE22E362D"><span class="xrefglossterm">source database</span></a>. 
                        </p>
                        <p>Run the <code class="codeph">ADD_SUBSET_RULES</code> procedure to create three rules:
                        </p><pre class="oac_no_warn" dir="ltr">BEGIN 
  DBMS_STREAMS_ADM.ADD_SUBSET_RULES(
    table_name               =&gt;  'hr.regions',
    dml_condition            =&gt;  'region_id=2',
    streams_type             =&gt;  'apply',
    streams_name             =&gt;  'apply',
    queue_name               =&gt;  'streams_queue',
    include_tagged_lcr       =&gt;  FALSE,
    source_database          =&gt;  'dbs1.example.com');
END;
/
</pre><p>The <code class="codeph">ADD_SUBSET_RULES</code> procedure creates three rules: one for <code class="codeph">INSERT</code> operations, one for <code class="codeph">UPDATE</code> operations, and one for <code class="codeph">DELETE</code> operations.
                        </p>
                        <p>Here is the <a href="strms_glossary.html#GUID-103148AB-F5B0-47DC-B803-90919571C800"><span class="xrefglossterm">rule condition</span></a> used by the insert rule:
                        </p><pre class="oac_no_warn" dir="ltr">:dml.get_object_owner()='HR' AND :dml.get_object_name()='REGIONS' 
AND :dml.is_null_tag()='Y' AND :dml.get_source_database_name()='DBS1.EXAMPLE.COM'
AND :dml.get_command_type() IN ('UPDATE','INSERT') 
AND (:dml.get_value('NEW','"REGION_ID"') IS NOT NULL) 
AND (:dml.get_value('NEW','"REGION_ID"').AccessNumber()=2) 
AND (:dml.get_command_type()='INSERT' 
OR ((:dml.get_value('OLD','"REGION_ID"') IS NOT NULL) 
AND (((:dml.get_value('OLD','"REGION_ID"').AccessNumber() IS NOT NULL) 
AND NOT (:dml.get_value('OLD','"REGION_ID"').AccessNumber()=2)) 
OR ((:dml.get_value('OLD','"REGION_ID"').AccessNumber() IS NULL) 
AND NOT EXISTS (SELECT 1 FROM SYS.DUAL 
WHERE (:dml.get_value('OLD','"REGION_ID"').AccessNumber()=2))))))
</pre><p>Based on this rule condition, row LCRs are evaluated in the following ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For an insert, if the new value in the row LCR for <code class="codeph">region_id</code> is <code class="codeph">2</code>, then the insert is applied.
                              </p>
                           </li>
                           <li>
                              <p>For an insert, if the new value in the row LCR for <code class="codeph">region_id</code> is not <code class="codeph">2</code> or is <code class="codeph">NULL</code>, then the insert is filtered out.
                              </p>
                           </li>
                           <li>
                              <p>For an update, if the old value in the row LCR for <code class="codeph">region_id</code> is not <code class="codeph">2</code> or is <code class="codeph">NULL</code> and the new value in the row LCR for <code class="codeph">region_id</code> is <code class="codeph">2</code>, then the update is converted into an insert and applied. This automatic conversion is called <a href="strms_glossary.html#GUID-DD0C1CF9-3357-4464-A102-F4790BD5BD91"><span class="xrefglossterm">row migration</span></a>. See <span class="q">"<a href="how-rules-are-used-in-oracle-streams.html#GUID-35868ADC-C131-4988-9139-FC9B0EEA145D">Row Migration and Subset Rules</a>"</span> for more information.
                              </p>
                           </li>
                        </ul>
                        <p>Here is the rule condition used by the update rule:</p><pre class="oac_no_warn" dir="ltr">:dml.get_object_owner()='HR' AND :dml.get_object_name()='REGIONS' 
AND :dml.is_null_tag()='Y' AND :dml.get_source_database_name()='DBS1.EXAMPLE.COM'
AND :dml.get_command_type()='UPDATE' 
AND (:dml.get_value('NEW','"REGION_ID"') IS NOT NULL) 
AND (:dml.get_value('OLD','"REGION_ID"') IS NOT NULL) 
AND (:dml.get_value('OLD','"REGION_ID"').AccessNumber()=2) 
AND (:dml.get_value('NEW','"REGION_ID"').AccessNumber()=2)
</pre><p>Based on this rule condition, row LCRs are evaluated in the following ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For an update, if both the old value and the new value in the row LCR for <code class="codeph">region_id</code> are <code class="codeph">2</code>, then the update is applied as an update.
                              </p>
                           </li>
                           <li>
                              <p>For an update, if either the old value or the new value in the row LCR for <code class="codeph">region_id</code> is not&nbsp;<code class="codeph">2</code> or is <code class="codeph">NULL</code>, then the update does not satisfy the update rule. The LCR can satisfy the insert rule, the delete rule, or neither rule.
                              </p>
                           </li>
                        </ul>
                        <p>Here is the rule condition used by the delete rule:</p><pre class="oac_no_warn" dir="ltr">:dml.get_object_owner()='HR' AND :dml.get_object_name()='REGIONS' 
AND :dml.is_null_tag()='Y' AND :dml.get_source_database_name()='DBS1.EXAMPLE.COM'
AND :dml.get_command_type() IN ('UPDATE','DELETE') 
AND (:dml.get_value('OLD','"REGION_ID"') IS NOT NULL) 
AND (:dml.get_value('OLD','"REGION_ID"').AccessNumber()=2) 
AND (:dml.get_command_type()='DELETE' 
OR ((:dml.get_value('NEW','"REGION_ID"') IS NOT NULL) 
AND (((:dml.get_value('NEW','"REGION_ID"').AccessNumber() IS NOT NULL) 
AND NOT (:dml.get_value('NEW','"REGION_ID"').AccessNumber()=2)) 
OR ((:dml.get_value('NEW','"REGION_ID"').AccessNumber() IS NULL) 
AND NOT EXISTS (SELECT 1 FROM SYS.DUAL 
WHERE (:dml.get_value('NEW','"REGION_ID"').AccessNumber()=2))))))
</pre><p>Based on this rule condition, row LCRs are evaluated in the following ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For a delete, if the old value in the row LCR for <code class="codeph">region_id</code> is <code class="codeph">2</code>, then the delete is applied.
                              </p>
                           </li>
                           <li>
                              <p>For a delete, if the old value in the row LCR for <code class="codeph">region_id</code> is not <code class="codeph">2</code> or is <code class="codeph">NULL</code>, then the delete is filtered out.
                              </p>
                           </li>
                           <li>
                              <p>For an update, if the old value in the row LCR for <code class="codeph">region_id</code> is <code class="codeph">2</code> and the new value in the row LCR for <code class="codeph">region_id</code> is not <code class="codeph">2</code> or is <code class="codeph">NULL</code>, then the update is converted into a delete and applied. This automatic conversion is called row migration. See <span class="q">"<a href="how-rules-are-used-in-oracle-streams.html#GUID-35868ADC-C131-4988-9139-FC9B0EEA145D">Row Migration and Subset Rules</a>"</span> for more information.
                              </p>
                           </li>
                        </ul>
                        <p>Given these subset rules, the following list provides examples of changes applied by an apply process:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A row is updated in the <code class="codeph">hr.regions</code> table where the old <code class="codeph">region_id</code> is <code class="codeph">4</code> and the new value of <code class="codeph">region_id</code> is <code class="codeph">2</code>. This update is transformed into an insert.
                              </p>
                           </li>
                           <li>
                              <p>A row is updated in the <code class="codeph">hr.regions</code> table where the old <code class="codeph">region_id</code> is <code class="codeph">2</code> and the new value of <code class="codeph">region_id</code> is <code class="codeph">1</code>. This update is transformed into a delete.
                              </p>
                           </li>
                        </ul>
                        <p>The apply process dequeues row LCRs containing these changes from its associated <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a> and applies them to the <code class="codeph">hr.regions</code> table at the <a href="strms_glossary.html#GUID-C73813B0-D8A7-46D5-85B2-15BAB0A146B5"><span class="xrefglossterm">destination database</span></a>.
                        </p>
                        <p>Given these subset rules, the following list provides examples of changes that are ignored by the apply process:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A row is inserted into the <code class="codeph">hr.employees</code> table. This change is not applied because a change to the <code class="codeph">hr.employees</code> table does not satisfy the subset rules.
                              </p>
                           </li>
                           <li>
                              <p>A row is updated in the <code class="codeph">hr.regions</code> table where the <code class="codeph">region_id</code> was <code class="codeph">1</code> before the update and remains <code class="codeph">1</code> after the update. This change is not applied because the subset rules for the <code class="codeph">hr.regions</code> table evaluate to <code class="codeph">TRUE</code> only when the new or old (or both) values for <code class="codeph">region_id</code> is <code class="codeph">2</code>.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-F51B570A-5ACD-4AD1-8741-12FC054C5A8F__GUID-2E098EFD-8610-4B00-AA44-6986F165A205">
                           <p class="notep1">Note:</p>
                           <p>Do not add subset rules to the positive rule set of a capture process for tables that are not supported by capture processes. Query the <code class="codeph">DBA_STREAMS_UNSUPPORTED</code> data dictionary view to determine which tables are not supported by capture processes. If unsupported table are not excluded, then capture errors will result.
                           </p>
                           <p>If you add subset rules to the positive rule set for a synchronous capture or an apply process, then ensure that these Oracle Streams clients do not attempt to process changes to unsupported columns. If a table includes an unsupported column, then you can exclude the column with a rule-based transformation or, for an apply process, with a DML handler. Query the <code class="codeph">DBA_STREAMS_COLUMNS</code> data dictionary view to determine which columns are not supported by synchronous captures and apply processes. If unsupported columns are not excluded, then errors will result.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-F51B570A-5ACD-4AD1-8741-12FC054C5A8F__GUID-48F7DEB9-A681-4A85-A384-C78C0BE59995">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="monitoring-other-oracle-streams-components.html#GUID-04AAFA72-7912-49E1-9FD1-A2F63C2DEEE1">Listing the Database Objects That Are Not Compatible with Capture Processes</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="monitoring-other-oracle-streams-components.html#GUID-C805B775-B1D1-4308-889F-3FF1E321D449">Listing Database Objects and Columns Not Compatible with Synchronous Captures</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="monitoring-other-oracle-streams-components.html#GUID-CF461633-BF7E-44FE-8EA8-2B5F1C5AD288">Listing Database Objects and Columns Not Compatible with Apply Processes</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS114"></a><div class="props_rev_3"><a id="GUID-35868ADC-C131-4988-9139-FC9B0EEA145D" name="GUID-35868ADC-C131-4988-9139-FC9B0EEA145D"></a><h5 id="STRMS-GUID-35868ADC-C131-4988-9139-FC9B0EEA145D" class="sect5"><span class="enumeration_section">5.3.4.2 </span>Row Migration and Subset Rules
                     </h5>
                     <div>
                        <p>When you use subset rules, an update operation can be converted into an insert or delete operation when it is captured, propagated, applied, or dequeued. This automatic conversion is called <span class="bold">row migration</span> and is performed by an internal transformation specified automatically in the <a href="strms_glossary.html#GUID-1F2E6C1D-EA5A-4E0C-BC0F-E4CAEE6F2E5C"><span class="xrefglossterm">action context</span></a> for a subset rule. The following sections describe row migration during capture, propagation, apply, and dequeue.
                        </p>
                        <p>This section contains these topics:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-83AFABB7-BEAA-49BC-A172-34F711CCCED8">Row Migration During Capture</a></p>
                           </li>
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-30C33024-E91A-48DD-B829-109BFD9557A2">Row Migration During Propagation</a></p>
                           </li>
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-4896C618-02FE-4886-B267-1C1013D2286F">Row Migration During Apply</a></p>
                           </li>
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-45C0EE59-0B63-4FF2-832B-07D49EE5DC0B">Row Migration During Dequeue by a Messaging Client</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-35868ADC-C131-4988-9139-FC9B0EEA145D__GUID-D91D558E-EC42-46FC-879E-755C71CCE0BB">
                           <p class="notep1">Note:</p>
                           <p>Subset rules should reside only in positive rule sets. Do not add subset rules to negative rule sets. Doing so can have unpredictable results, because row migration would not be performed on LCRs that are not discarded by the negative rule set. Also, row migration is not performed on LCRs discarded because they evaluate to <code class="codeph">TRUE</code> against a negative rule set.
                           </p>
                        </div>
                     </div><a id="STRMS423"></a><a id="STRMS422"></a><div class="props_rev_3"><a id="GUID-83AFABB7-BEAA-49BC-A172-34F711CCCED8" name="GUID-83AFABB7-BEAA-49BC-A172-34F711CCCED8"></a><h6 id="STRMS-GUID-83AFABB7-BEAA-49BC-A172-34F711CCCED8" class="sect6"><span class="enumeration_section">5.3.4.2.1 </span>Row Migration During Capture
                        </h6>
                        <div>
                           <p>When a subset rule is in the rule set for a <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a> or <a href="strms_glossary.html#GUID-5CA58899-A02D-422A-AE15-E8FCD004EB17"><span class="xrefglossterm">synchronous capture</span></a>, an update that satisfies the subset rule can be converted into an insert or delete when it is captured.
                           </p>
                           <p>For example, suppose you use a subset rule to specify that a capture process or a synchronous capture captures changes to the <code class="codeph">hr.employees</code> table where the employee's <code class="codeph">department_id</code> is <code class="codeph">50</code> using the following subset condition: <code class="codeph">department_id</code>&nbsp;<code class="codeph">=</code>&nbsp;<code class="codeph">50</code>. Assume that the table at the source database contains records for employees from all departments. If a DML operation changes an employee's <code class="codeph">department_id</code> from <code class="codeph">80</code> to <code class="codeph">50</code>, then the subset rule converts the update operation into an insert operation and captures the change. Therefore, a row LCR that contains an <code class="codeph">INSERT</code> is enqueued into the queue. <a href="how-rules-are-used-in-oracle-streams.html#GUID-83AFABB7-BEAA-49BC-A172-34F711CCCED8__i1010090">Figure 5-2</a> illustrates this example with a subset rule for a capture process.
                           </p>
                           <div class="figure" id="GUID-83AFABB7-BEAA-49BC-A172-34F711CCCED8__i1010090">
                              <p class="titleinfigure">Figure 5-2 Row Migration During Capture by a Capture Process</p><img width="584" src="img/strms041.gif" alt="Description of Figure 5-2 follows" title="Description of Figure 5-2 follows" longdesc="img_text/strms041.html"><br><a href="img_text/strms041.html">Description of "Figure 5-2 Row Migration During Capture by a Capture Process"</a></div>
                           <!-- class="figure" -->
                           <p>Similarly, if a captured update changes an employee's <code class="codeph">department_id</code> from <code class="codeph">50</code> to <code class="codeph">20</code>, then a capture process or synchronous capture with this subset rule converts the update operation into a <code class="codeph">DELETE</code> operation.
                           </p>
                        </div>
                     </div><a id="STRMS425"></a><a id="STRMS424"></a><div class="props_rev_3"><a id="GUID-30C33024-E91A-48DD-B829-109BFD9557A2" name="GUID-30C33024-E91A-48DD-B829-109BFD9557A2"></a><h6 id="STRMS-GUID-30C33024-E91A-48DD-B829-109BFD9557A2" class="sect6"><span class="enumeration_section">5.3.4.2.2 </span>Row Migration During Propagation
                        </h6>
                        <div>
                           <p>When a subset rule is in the rule set for a propagation, an update operation can be converted into an insert or delete operation when a row LCR is propagated.</p>
                           <p>For example, suppose you use a subset rule to specify that a propagation propagates changes to the <code class="codeph">hr.employees</code> table where the employee's <code class="codeph">department_id</code> is <code class="codeph">50</code> using the following subset condition: <code class="codeph">department_id</code>&nbsp;<code class="codeph">=</code>&nbsp;<code class="codeph">50</code>. If the <a href="strms_glossary.html#GUID-FF907FD2-BD9E-4622-A33C-A6D400ED2CAF"><span class="xrefglossterm">source queue</span></a> for the propagation contains a row LCR with an update operation on the <code class="codeph">hr.employees</code> table that changes an employee's <code class="codeph">department_id</code> from <code class="codeph">50</code> to <code class="codeph">80</code>, then the propagation with the subset rule converts the update operation into a delete operation and propagates the row LCR to the <a href="strms_glossary.html#GUID-584772DA-C868-4F6B-9B7F-9E665F2D6F85"><span class="xrefglossterm">destination queue</span></a>. Therefore, a row LCR that contains a <code class="codeph">DELETE</code> is enqueued into the destination queue. <a href="how-rules-are-used-in-oracle-streams.html#GUID-30C33024-E91A-48DD-B829-109BFD9557A2__i1010082">Figure 5-3</a> illustrates this example.
                           </p>
                           <div class="figure" id="GUID-30C33024-E91A-48DD-B829-109BFD9557A2__i1010082">
                              <p class="titleinfigure">Figure 5-3 Row Migration During Propagation</p><img width="585" src="img/strms040.gif" alt="Description of Figure 5-3 follows" title="Description of Figure 5-3 follows" longdesc="img_text/strms040.html"><br><a href="img_text/strms040.html">Description of "Figure 5-3 Row Migration During Propagation"</a></div>
                           <!-- class="figure" -->
                           <p>Similarly, if a captured update changes an employee's <code class="codeph">department_id</code> from <code class="codeph">80</code> to <code class="codeph">50</code>, then a propagation with this subset rule converts the update operation into an <code class="codeph">INSERT</code> operation.
                           </p>
                        </div>
                     </div><a id="STRMS427"></a><a id="STRMS426"></a><div class="props_rev_3"><a id="GUID-4896C618-02FE-4886-B267-1C1013D2286F" name="GUID-4896C618-02FE-4886-B267-1C1013D2286F"></a><h6 id="STRMS-GUID-4896C618-02FE-4886-B267-1C1013D2286F" class="sect6"><span class="enumeration_section">5.3.4.2.3 </span>Row Migration During Apply
                        </h6>
                        <div>
                           <p>When a subset rule is in the rule set for an <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a>, an update operation can be converted into an insert or delete operation when a row LCR is applied. 
                           </p>
                           <p>For example, suppose you use a subset rule to specify that an apply process applies changes to the <code class="codeph">hr.employees</code> table where the employee's <code class="codeph">department_id</code> is <code class="codeph">50</code> using the following subset condition: <code class="codeph">department_id</code> <code class="codeph">=</code> <code class="codeph">50</code>. Assume that the table at the destination database is a subset table that only contains records for employees whose <code class="codeph">department_id</code> is <code class="codeph">50</code>. If a source database captures a change to an employee that changes the employee's <code class="codeph">department_id</code> from <code class="codeph">80</code> to <code class="codeph">50</code>, then the apply process with the subset rule at a destination database applies this change by converting the update operation into an insert operation. This conversion is needed because the employee's row does not exist in the destination table. <a href="how-rules-are-used-in-oracle-streams.html#GUID-4896C618-02FE-4886-B267-1C1013D2286F__i1010067">Figure 5-4</a> illustrates this example.
                           </p>
                           <div class="figure" id="GUID-4896C618-02FE-4886-B267-1C1013D2286F__i1010067">
                              <p class="titleinfigure">Figure 5-4 Row Migration During Apply</p><img width="583" src="img/strms034.gif" alt="Description of Figure 5-4 follows" title="Description of Figure 5-4 follows" longdesc="img_text/strms034.html"><br><a href="img_text/strms034.html">Description of "Figure 5-4 Row Migration During Apply"</a></div>
                           <!-- class="figure" -->
                           <p>Similarly, if a captured update changes an employee's <code class="codeph">department_id</code> from <code class="codeph">50</code> to <code class="codeph">20</code>, then an apply process with this subset rule converts the update operation into a <code class="codeph">DELETE</code> operation.
                           </p>
                        </div>
                     </div><a id="STRMS429"></a><a id="STRMS428"></a><div class="props_rev_3"><a id="GUID-45C0EE59-0B63-4FF2-832B-07D49EE5DC0B" name="GUID-45C0EE59-0B63-4FF2-832B-07D49EE5DC0B"></a><h6 id="STRMS-GUID-45C0EE59-0B63-4FF2-832B-07D49EE5DC0B" class="sect6"><span class="enumeration_section">5.3.4.2.4 </span>Row Migration During Dequeue by a Messaging Client
                        </h6>
                        <div>
                           <p>When a subset rule is in the rule set for a messaging client, an update operation can be converted into an insert or delete operation when a row LCR is dequeued.</p>
                           <p>For example, suppose you use a subset rule to specify that a messaging client dequeues changes to the <code class="codeph">hr.employees</code> table when the employee's <code class="codeph">department_id</code> is <code class="codeph">50</code> using the following subset condition: <code class="codeph">department_id</code>&nbsp;<code class="codeph">=</code>&nbsp;<code class="codeph">50</code>. If the queue for a messaging client contains a persistent row LCR with an update operation on the <code class="codeph">hr.employees</code> table that changes an employee's <code class="codeph">department_id</code> from <code class="codeph">50</code> to <code class="codeph">90</code>, then when a user or application invokes a messaging client with this subset rule, the messaging client converts the update operation into a delete operation and dequeues the row LCR. Therefore, a row LCR that contains a <code class="codeph">DELETE</code> is dequeued. The messaging client can process this row LCR in any customized way. For example, it can send the row LCR to a custom application. <a href="how-rules-are-used-in-oracle-streams.html#GUID-45C0EE59-0B63-4FF2-832B-07D49EE5DC0B__i1018112">Figure 5-5</a> illustrates this example.
                           </p>
                           <div class="figure" id="GUID-45C0EE59-0B63-4FF2-832B-07D49EE5DC0B__i1018112">
                              <p class="titleinfigure">Figure 5-5 Row Migration During Dequeue by a Messaging Client</p><img width="216" src="img/strms046.gif" alt="Description of Figure 5-5 follows" title="Description of Figure 5-5 follows" longdesc="img_text/strms046.html"><br><a href="img_text/strms046.html">Description of "Figure 5-5 Row Migration During Dequeue by a Messaging Client"</a></div>
                           <!-- class="figure" -->
                           <p>Similarly, if a persistent row LCR contains an update that changes an employee's <code class="codeph">department_id</code> from <code class="codeph">90</code> to <code class="codeph">50</code>, then a messaging client with this subset rule converts the <code class="codeph">UPDATE</code> operation into an <code class="codeph">INSERT</code> operation during dequeue.
                           </p>
                        </div>
                     </div>
                  </div><a id="STRMS430"></a><div class="props_rev_3"><a id="GUID-76642C92-FAFC-4E4A-91BC-C6F13843383F" name="GUID-76642C92-FAFC-4E4A-91BC-C6F13843383F"></a><h5 id="STRMS-GUID-76642C92-FAFC-4E4A-91BC-C6F13843383F" class="sect5"><span class="enumeration_section">5.3.4.3 </span>Subset Rules and Supplemental Logging
                     </h5>
                     <div>
                        <p>Supplemental logging is required when you specify the following types of subset rules:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Subset rules for a capture process</p>
                           </li>
                           <li>
                              <p>Subset rules for a propagation that will propagate LCRs captured by a capture process</p>
                           </li>
                           <li>
                              <p>Subset rules for an apply process that will apply LCRs captured by a capture process</p>
                           </li>
                        </ul>
                        <p>In any of these cases, an unconditional <a href="strms_glossary.html#GUID-23D2F665-5088-4E75-BD12-EA9DC0A1FC07"><span class="xrefglossterm">supplemental log group</span></a> must be specified at the <a href="strms_glossary.html#GUID-B5BB35D0-9179-4301-BA50-5B9CE22E362D"><span class="xrefglossterm">source database</span></a> for all the columns in the subset condition and all of the columns in the table(s) at the destination database(s) that will apply these changes. In some cases, when a subset rule is specified, an update can be converted to an insert, and, in these cases, supplemental information might be needed for some or all of the columns.
                        </p>
                        <p>For example, if you specify a subset rule for an apply process that will apply <a href="strms_glossary.html#GUID-0D2E5DAF-804E-4089-9E0E-987C96F59706"><span class="xrefglossterm">captured LCR</span></a>s at database <code class="codeph">dbs2.example.com</code> on the <code class="codeph">postal_code</code> column in the <code class="codeph">hr.locations</code> table, and the source database for changes to this table is <code class="codeph">dbs1.example.com</code>, then specify <a href="strms_glossary.html#GUID-27DA88A1-EDB9-4AC5-ACD0-BD514172385F"><span class="xrefglossterm">supplemental logging</span></a> at <code class="codeph">dbs1.example.com</code> for all of the columns that exist in the <code class="codeph">hr.locations</code> table at <code class="codeph">dbs2.example.com</code>, and for the <code class="codeph">postal_code</code> column, even if this column does not exist in the table at the destination database.
                        </p>
                        <div class="infoboxnote" id="GUID-76642C92-FAFC-4E4A-91BC-C6F13843383F__GUID-B26BD468-2DA6-4958-9D28-AFF18E496A55">
                           <p class="notep1">Note:</p>
                           <p>Supplemental logging is not required when subset rules are used by a synchronous capture. Also, supplemental logging is not required propagations or apply processes process LCRs captured by synchronous capture.</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-76642C92-FAFC-4E4A-91BC-C6F13843383F__GUID-ECC46514-CA64-4891-9405-AB26640F71DE">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=STREP107"><span class="italic">Oracle Streams Replication Administrator's Guide </span></a>for detailed information about supplemental logging
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-streams-information-capture.html#GUID-57570826-D941-4820-977D-D60092EAD599">Supplemental Logging in an Oracle Streams Environment</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS431"></a><div class="props_rev_3"><a id="GUID-F05F08D0-8BC8-4D0E-A3CE-0381C1069043" name="GUID-F05F08D0-8BC8-4D0E-A3CE-0381C1069043"></a><h5 id="STRMS-GUID-F05F08D0-8BC8-4D0E-A3CE-0381C1069043" class="sect5"><span class="enumeration_section">5.3.4.4 </span>Guidelines for Using Subset Rules
                     </h5>
                     <div>
                        <p>The following sections provide guidelines for using subset rules:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-9AE0A663-FB1C-4556-A3FB-E70AD8C83EA3">Use Capture Subset Rules When All Destinations Need Only a Subset of Changes</a></p>
                           </li>
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-F2B2D450-9A5F-4AD2-8376-8CA9B98C8DC2">Use Propagation or Apply Subset Rules When Some Destinations Need Subsets</a></p>
                           </li>
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-9C599780-647F-42EA-A9FE-951CDC022372">Ensure That the Table Where Subset Row LCRs Are Applied Is a Subset Table</a></p>
                           </li>
                        </ul>
                     </div><a id="STRMS432"></a><div class="props_rev_3"><a id="GUID-9AE0A663-FB1C-4556-A3FB-E70AD8C83EA3" name="GUID-9AE0A663-FB1C-4556-A3FB-E70AD8C83EA3"></a><h6 id="STRMS-GUID-9AE0A663-FB1C-4556-A3FB-E70AD8C83EA3" class="sect6"><span class="enumeration_section">5.3.4.4.1 </span>Use Capture Subset Rules When All Destinations Need Only a Subset of Changes
                        </h6>
                        <div>
                           <p>Use subset rules with a capture process or a synchronous capture when all destination databases of the captured changes need only row changes that satisfy the subset condition for the table. In this case, a capture process or a synchronous capture captures a subset of the DML changes to the table, and one or more propagations propagate these changes in the form of row LCRs to one or more destination databases. At each destination database, an apply process applies these row LCRs to a subset table in which all of the rows satisfy the subset condition in the subset rules for the capture process. None of the destination databases need all of the DML changes made to the table. When you use subset rules for a <a href="strms_glossary.html#GUID-B03D3B40-9AE1-4C52-BC23-C8496CB5548F"><span class="xrefglossterm">local capture process</span></a> or a synchronous capture, some additional overhead is incurred to perform row migrations at the site running the source database. 
                           </p>
                        </div>
                     </div><a id="STRMS433"></a><div class="props_rev_3"><a id="GUID-F2B2D450-9A5F-4AD2-8376-8CA9B98C8DC2" name="GUID-F2B2D450-9A5F-4AD2-8376-8CA9B98C8DC2"></a><h6 id="STRMS-GUID-F2B2D450-9A5F-4AD2-8376-8CA9B98C8DC2" class="sect6"><span class="enumeration_section">5.3.4.4.2 </span>Use Propagation or Apply Subset Rules When Some Destinations Need Subsets
                        </h6>
                        <div>
                           <p>Use subset rules with a propagation or an apply process when some destinations in an environment need only a subset of captured DML changes. The following are examples of such an environment:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Most of the destination databases for captured DML changes to a table need a different subset of these changes.</p>
                              </li>
                              <li>
                                 <p>Most of the destination databases need all of the captured DML changes to a table, but some destination databases need only a subset of these changes.</p>
                              </li>
                           </ul>
                           <p>In these types of environments, the capture process or synchronous capture must capture all of the changes to the table, but you can use subset rules with propagations and apply processes to ensure that subset tables at destination databases only apply the correct subset of captured DML changes. </p>
                           <p>Consider these factors when you decide to use subset rules with a propagation in this type of environment:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You can reduce network traffic because fewer row LCRs are propagated over the network.</p>
                              </li>
                              <li>
                                 <p>The site that contains the source queue for the propagation incurs some additional overhead to perform row migrations.</p>
                              </li>
                           </ul>
                           <p>Consider these factors when you decide to use subset rules with an apply process in this type of environment:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The queue used by the apply process can contain all row LCRs for the subset table. In a <a href="strms_glossary.html#GUID-88D760FB-D926-4ED1-83AA-8FAC1C29D421"><span class="xrefglossterm">directed network</span></a>s environment, propagations can propagate any of the row LCRs for the table to destination queues as appropriate, whether the apply process applies these row LCRs.
                                 </p>
                              </li>
                              <li>
                                 <p>The site that is running the apply process incurs some additional overhead to perform row migrations.</p>
                              </li>
                           </ul>
                        </div>
                     </div><a id="STRMS434"></a><div class="props_rev_3"><a id="GUID-9C599780-647F-42EA-A9FE-951CDC022372" name="GUID-9C599780-647F-42EA-A9FE-951CDC022372"></a><h6 id="STRMS-GUID-9C599780-647F-42EA-A9FE-951CDC022372" class="sect6"><span class="enumeration_section">5.3.4.4.3 </span>Ensure That the Table Where Subset Row LCRs Are Applied Is a Subset Table
                        </h6>
                        <div>
                           <p>If an apply process might apply row LCRs that have been transformed by a row migration, then Oracle recommends that the table at the destination database be a subset table where each row matches the condition in the subset rule. If the table is not such a subset table, then apply errors might result. </p>
                           <p>For example, consider a scenario in which a subset rule for a capture process has the condition <code class="codeph">department_id</code> <code class="codeph">=</code> <code class="codeph">50</code> for DML changes to the <code class="codeph">hr.employees</code> table. If the <code class="codeph">hr.employees</code> table at a destination database of this capture process contains rows for employees in all departments, not just in department <code class="codeph">50</code>, then a constraint violation might result during apply:
                           </p>
                           <ol>
                              <li>
                                 <p>At the source database, a DML change updates the <code class="codeph">hr.employees</code> table and changes the <code class="codeph">department_id</code> for the employee with an <code class="codeph">employee_id</code> of <code class="codeph">100</code> from <code class="codeph">90</code> to <code class="codeph">50</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>A capture process using the subset rule captures the change and converts the update into an insert and enqueues the change into the capture process's queue as a row&nbsp;LCR.</p>
                              </li>
                              <li>
                                 <p>A propagation propagates the row LCR to the destination database without modifying it.</p>
                              </li>
                              <li>
                                 <p>An apply process attempts to apply the row LCR as an insert at the destination database, but an employee with an <code class="codeph">employee_id</code> of <code class="codeph">100</code> already exists in the <code class="codeph">hr.employees</code> table, and an apply error results.
                                 </p>
                              </li>
                           </ol>
                           <p>In this case, if the table at the destination database were a subset of the <code class="codeph">hr.employees</code> table and only contained rows of employees whose <code class="codeph">department_id</code> was <code class="codeph">50</code>, then the insert would have been applied successfully.
                           </p>
                           <p>Similarly, if an apply process might apply row LCRs that have been transformed by a row migration to a table, and you allow users or applications to perform DML operations on the table, then Oracle recommends that all DML changes satisfy the subset condition. If you allow local changes to the table, then the apply process cannot ensure that all rows in the table meet the subset condition. For example, suppose the condition is <code class="codeph">department_id</code> <code class="codeph">=</code> <code class="codeph">50</code> for the <code class="codeph">hr.employees</code> table. If a user or an application inserts a row for an employee whose <code class="codeph">department_id</code> is <code class="codeph">30</code>, then this row remains in the table and is not removed by the apply process. Similarly, if a user or an application updates a row locally and changes the <code class="codeph">department_id</code> to <code class="codeph">30</code>, then this row also remains in the table.
                           </p>
                        </div>
                     </div>
                  </div>
               </div><a id="STRMS218"></a><a id="STRMS_MESSAGE_RULES"></a><div class="props_rev_3"><a id="GUID-33E363CC-C872-4B3E-9E14-B5674B132C60" name="GUID-33E363CC-C872-4B3E-9E14-B5674B132C60"></a><h4 id="STRMS-GUID-33E363CC-C872-4B3E-9E14-B5674B132C60" class="sect4"><span class="enumeration_section">5.3.5 </span>Message Rules
                  </h4>
                  <div>
                     <p>When you use a <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a> to specify an Oracle Streams task that is relevant only for a <a href="strms_glossary.html#GUID-7613B49E-9B03-4C9E-9A00-C92C6B2CEC9A"><span class="xrefglossterm">user message</span></a> of a specific, non-LCR <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a> type, you are specifying a <span class="bold">message rule</span>. You can specify message rules for <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a>s, <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a>es, and <a href="strms_glossary.html#GUID-9EAF35D2-24C0-4E0B-ACC4-9EDC22A169C1"><span class="xrefglossterm">messaging client</span></a>s. 
                     </p>
                     <p>A single message rule in the <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a> for a propagation means that the propagation propagates the user messages of the message type in the <a href="strms_glossary.html#GUID-FF907FD2-BD9E-4622-A33C-A6D400ED2CAF"><span class="xrefglossterm">source queue</span></a> that satisfy the <a href="strms_glossary.html#GUID-103148AB-F5B0-47DC-B803-90919571C800"><span class="xrefglossterm">rule condition</span></a>. A single message rule in the <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a> for a propagation means that the propagation discards the user messages of the message type in the source queue that satisfy the rule condition.
                     </p>
                     <p>A single message rule in the positive rule set for an apply process means that the apply process dequeues user messages of the message type that satisfy the rule condition. The apply process then sends these user messages to its <a href="strms_glossary.html#GUID-28E08694-4A8E-4D30-A805-876E82C4906A"><span class="xrefglossterm">message handler</span></a>. A single message rule in the negative rule set for an apply process means that the apply process discards user messages of the message type in its <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a> that satisfy the rule condition.
                     </p>
                     <p>A single message rule in the positive rule set for a messaging client means that a user or an application can use the messaging client to dequeue user messages of the message type that satisfy the rule condition. A single message rule in the negative rule set for a messaging client means that the messaging client discards user messages of the message type in its queue that satisfy the rule condition. Unlike propagations and apply processes, which propagate or apply messages automatically when they are running, a messaging client does not automatically dequeue or discard messages. Instead, a messaging client must be invoked by a user or application to dequeue or discard messages.</p>
                  </div><a id="STRMS435"></a><div class="props_rev_3"><a id="GUID-E77928CD-E5C7-4BA3-A8D5-B91FE92D664F" name="GUID-E77928CD-E5C7-4BA3-A8D5-B91FE92D664F"></a><h5 id="STRMS-GUID-E77928CD-E5C7-4BA3-A8D5-B91FE92D664F" class="sect5"><span class="enumeration_section">5.3.5.1 </span>Message Rule Example
                     </h5>
                     <div>
                        <p>Suppose you use the <code class="codeph">ADD_MESSAGE_RULE</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to instruct an <a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a> to behave in the following ways:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-121A4EBF-AFD7-48FB-8119-4DDD555A4446">Dequeue User Messages If region Is EUROPE and priority Is 1</a></p>
                           </li>
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-27A514E1-B100-4875-AD76-EB60A81F025B">Send User Messages to a Message Handler If region Is AMERICAS and priority Is 2</a></p>
                           </li>
                        </ul>
                        <p>The first instruction in the previous list pertains to a messaging client, while the second instruction pertains to an apply process.</p>
                        <p>The rules created in these examples are for messages of the following type:</p><pre class="oac_no_warn" dir="ltr">CREATE TYPE strmadmin.region_pri_msg AS OBJECT(
  region         VARCHAR2(100),
  priority       NUMBER,
  message        VARCHAR2(3000))
/</pre></div><a id="STRMS436"></a><div class="props_rev_3"><a id="GUID-121A4EBF-AFD7-48FB-8119-4DDD555A4446" name="GUID-121A4EBF-AFD7-48FB-8119-4DDD555A4446"></a><h6 id="STRMS-GUID-121A4EBF-AFD7-48FB-8119-4DDD555A4446" class="sect6"><span class="enumeration_section">5.3.5.1.1 </span>Dequeue User Messages If region Is EUROPE and priority Is 1
                        </h6>
                        <div>
                           <p>Run the <code class="codeph">ADD_MESSAGE_RULE</code> procedure to create a rule for messages of <code class="codeph">region_pri_msg</code> type:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.ADD_MESSAGE_RULE (
    message_type    =&gt;  'strmadmin.region_pri_msg',
    rule_condition  =&gt;  ':msg.region = ''EUROPE'' AND  ' ||
                        ':msg.priority = ''1'' ',
    streams_type    =&gt;  'dequeue',
    streams_name    =&gt;  'msg_client',
    queue_name      =&gt;  'streams_queue',
    inclusion_rule  =&gt;  TRUE);
END;
/
</pre><p>Notice that <code class="codeph">dequeue</code> is specified for the <code class="codeph">streams_type</code> parameter. Therefore, this procedure creates a messaging client named <code class="codeph">msg_client</code> if it does not already exist. If this messaging client already exists, then this procedure adds the message rule to its rule set. Also, notice that the <code class="codeph">inclusion_rule</code> parameter is set to <code class="codeph">TRUE</code>. This setting means that the <a href="strms_glossary.html#GUID-53B877C4-24D6-4D27-B80D-C1256A08A87A"><span class="xrefglossterm">system-created rule</span></a> is added to the positive rule set for the messaging client. The user who runs this procedure is granted the privileges to dequeue from the queue using the messaging client. 
                           </p>
                           <p>The <code class="codeph">ADD_MESSAGE_RULE</code> procedure creates a rule with a rule condition similar to the following:
                           </p><pre class="oac_no_warn" dir="ltr">:"VAR$_52".region = 'EUROPE' AND  :"VAR$_52".priority = '1'
</pre><p>The variables in the rule condition that begin with <code class="codeph">VAR$</code> are variables that are specified in the system-generated <a href="strms_glossary.html#GUID-F9C11C62-21FB-44BC-B128-3AE8BAD093EE"><span class="xrefglossterm">evaluation context</span></a> for the rule.
                           </p>
                           <div class="infoboxnotealso" id="GUID-121A4EBF-AFD7-48FB-8119-4DDD555A4446__GUID-1FF74929-C5B1-4A34-A955-791B31E438A3">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="advanced-rule-concepts.html#GUID-6BEFE444-DC00-4B40-A280-40F1D4E3A66E">Evaluation Contexts Used in Oracle Streams</a>"</span></p>
                           </div>
                        </div>
                     </div><a id="STRMS437"></a><div class="props_rev_3"><a id="GUID-27A514E1-B100-4875-AD76-EB60A81F025B" name="GUID-27A514E1-B100-4875-AD76-EB60A81F025B"></a><h6 id="STRMS-GUID-27A514E1-B100-4875-AD76-EB60A81F025B" class="sect6"><span class="enumeration_section">5.3.5.1.2 </span>Send User Messages to a Message Handler If region Is AMERICAS and priority Is 2
                        </h6>
                        <div>
                           <p>Run the <code class="codeph">ADD_MESSAGE_RULE</code> procedure to create a rule for messages of <code class="codeph">region_pri_msg</code> type:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.ADD_MESSAGE_RULE (
    message_type    =&gt;  'strmadmin.region_pri_msg',
    rule_condition  =&gt;  ':msg.region = ''AMERICAS'' AND  ' ||
                        ':msg.priority = ''2'' ',
    streams_type    =&gt;  'apply',
    streams_name    =&gt;  'apply_msg',
    queue_name      =&gt;  'streams_queue',
    inclusion_rule  =&gt;  TRUE);
END;
/
</pre><p>Notice that <code class="codeph">apply</code> is specified for the <code class="codeph">streams_type</code> parameter. Therefore, this procedure creates an apply process named <code class="codeph">apply_msg</code> if it does not already exist. If this apply process already exists, then this procedure adds the message rule to its rule set. Also, notice that the <code class="codeph">inclusion_rule</code> parameter is set to <code class="codeph">TRUE</code>. This setting means that the system-created rule is added to the positive rule set for the messaging client.
                           </p>
                           <p>The <code class="codeph">ADD_MESSAGE_RULE</code> procedure creates a rule with a rule condition similar to the following:
                           </p><pre class="oac_no_warn" dir="ltr">:"VAR$_56".region = 'AMERICAS' AND  :"VAR$_56".priority = '2'
</pre><p>The variables in the rule condition that begin with <code class="codeph">VAR$</code> are variables that are specified in the system-generated evaluation context for the rule.
                           </p>
                           <div class="infoboxnotealso" id="GUID-27A514E1-B100-4875-AD76-EB60A81F025B__GUID-CEFBAA46-1543-4A83-AA43-858D3F8CD890">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="advanced-rule-concepts.html#GUID-6BEFE444-DC00-4B40-A280-40F1D4E3A66E">Evaluation Contexts Used in Oracle Streams</a>"</span></p>
                           </div>
                        </div>
                     </div><a id="STRMS438"></a><div class="props_rev_3"><a id="GUID-B7E5596E-05BE-48BB-BD66-90F007E4DF87" name="GUID-B7E5596E-05BE-48BB-BD66-90F007E4DF87"></a><h6 id="STRMS-GUID-B7E5596E-05BE-48BB-BD66-90F007E4DF87" class="sect6"><span class="enumeration_section">5.3.5.1.3 </span>Summary of Rules
                        </h6>
                        <div>
                           <p>In this example, the following message rules were defined:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A message rule for a messaging client named <code class="codeph">msg_client</code> that evaluates to <code class="codeph">TRUE</code> if a message has <code class="codeph">EUROPE</code> for its region and <code class="codeph">1</code> for its priority. Given this rule, a user or application can use the messaging client to dequeue messages of <code class="codeph">region_pri_msg</code> type that satisfy the rule condition.
                                 </p>
                              </li>
                              <li>
                                 <p>A message rule for an apply process named <code class="codeph">apply_msg</code> that evaluates to <code class="codeph">TRUE</code> if a message has <code class="codeph">AMERICAS</code> for its region and <code class="codeph">2</code> for its priority. Given this rule, the apply process dequeues messages of <code class="codeph">region_pri_msg</code> type that satisfy the rule condition and sends these messages to its message handler or reenqueues the messages into a specified queue.
                                 </p>
                              </li>
                           </ul>
                           <div class="infoboxnotealso" id="GUID-B7E5596E-05BE-48BB-BD66-90F007E4DF87__GUID-6992FE5D-70B8-40EA-B05B-D5D160C38A23">
                              <p class="notep1">See Also:</p>
                              <p></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="oracle-streams-information-consumption.html#GUID-A296EDB6-C3A7-4AD3-BB7B-52BC205ABB71">Message Handlers</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="advanced-rule-concepts.html#GUID-43168977-C0D6-42B2-B0E3-711BDA4BE6AA">Enqueue Destinations for Messages During Apply</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="STRMS439"></a><div class="props_rev_3"><a id="GUID-5B69AA8F-73B4-46C4-836F-54D2CE9A8251" name="GUID-5B69AA8F-73B4-46C4-836F-54D2CE9A8251"></a><h4 id="STRMS-GUID-5B69AA8F-73B4-46C4-836F-54D2CE9A8251" class="sect4"><span class="enumeration_section">5.3.6 </span>System-Created Rules and Negative Rule Sets
                  </h4>
                  <div>
                     <p>You add system-created <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a>s to a <a href="strms_glossary.html#GUID-F44D0886-397B-4E00-A666-A19F96F3C242"><span class="xrefglossterm">negative rule set</span></a> to specify that you do not want an <a href="strms_glossary.html#GUID-1ADE5718-8C94-4762-85E9-6B032F124365"><span class="xrefglossterm">Oracle Streams client</span></a> to perform its task for changes that satisfy these rules. Specifically, a <a href="strms_glossary.html#GUID-53B877C4-24D6-4D27-B80D-C1256A08A87A"><span class="xrefglossterm">system-created rule</span></a> in a negative rule set means the following for each type of Oracle Streams client:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a> discards changes that satisfy the rule. 
                           </p>
                        </li>
                        <li>
                           <p>A <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a> discards <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>s in its <a href="strms_glossary.html#GUID-FF907FD2-BD9E-4622-A33C-A6D400ED2CAF"><span class="xrefglossterm">source queue</span></a> that satisfy the rule.
                           </p>
                        </li>
                        <li>
                           <p>An <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a> discards messages in its <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a> that satisfy the rule.
                           </p>
                        </li>
                        <li>
                           <p>A <a href="strms_glossary.html#GUID-9EAF35D2-24C0-4E0B-ACC4-9EDC22A169C1"><span class="xrefglossterm">messaging client</span></a> discards messages in its queue that satisfy the rule.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-5B69AA8F-73B4-46C4-836F-54D2CE9A8251__GUID-50D20197-16FD-4011-9BA4-A8B6CB3F75E9">
                        <p class="notep1">Note:</p>
                        <p>A <a href="strms_glossary.html#GUID-5CA58899-A02D-422A-AE15-E8FCD004EB17"><span class="xrefglossterm">synchronous capture</span></a> cannot have a negative rule set.
                        </p>
                     </div>
                     <p>If an Oracle Streams client does not have a negative rule set, then you can create a negative rule set and add rules to it by running one of the following procedures and setting the <code class="codeph">inclusion_rule</code> parameter to <code class="codeph">FALSE</code>:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS308"><code class="codeph">DBMS_STREAMS_ADM.ADD_TABLE_RULES</code></a></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS309"><code class="codeph">DBMS_STREAMS_ADM.ADD_SCHEMA_RULES</code></a></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS310"><code class="codeph">DBMS_STREAMS_ADM.ADD_GLOBAL_RULES</code></a></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS521"><code class="codeph">DBMS_STREAMS_ADM.ADD_MESSAGE_RULE</code></a></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS316"><code class="codeph">DBMS_STREAMS_ADM.ADD_TABLE_PROPAGATION_RULES</code></a></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS317"><code class="codeph">DBMS_STREAMS_ADM.ADD_SCHEMA_PROPAGATION_RULES</code></a></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS318"><code class="codeph">DBMS_STREAMS_ADM.ADD_GLOBAL_PROPAGATION_RULES</code></a></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_STREAMS_ADM.html#ARPLS520"><code class="codeph">DBMS_STREAMS_ADM.ADD_MESSAGE_PROPAGATION_RULE</code></a></p>
                        </li>
                     </ul>
                     <p>If a negative rule set already exists for the Oracle Streams client when you run one of these procedures, then the procedure adds the system-created rules to the existing negative rule set. </p>
                     <p>Alternatively, you can create a negative rule set when you create an Oracle Streams client by running one of the following procedures and specifying a non-<code class="codeph">NULL</code> value for the <code class="codeph">negative_rule_set_name</code> parameter:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../arpls/DBMS_CAPTURE_ADM.html#ARPLS311"><code class="codeph">DBMS_CAPTURE_ADM.CREATE_CAPTURE</code></a></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=ARPLS333"><code class="codeph">DBMS_PROPAGATION_ADM.CREATE_PROPAGATION</code></a></p>
                        </li>
                        <li>
                           <p><a href="../arpls/DBMS_APPLY_ADM.html#ARPLS313"><code class="codeph">DBMS_APPLY_ADM.CREATE_APPLY</code></a></p>
                        </li>
                     </ul>
                     <p>Also, you can specify a negative rule set for an existing Oracle Streams client by altering the client. For example, to specify a negative rule set for an existing capture process, use the <code class="codeph">DBMS_CAPTURE_ADM.ALTER_CAPTURE</code> procedure. After an Oracle Streams client has a negative rule set, you can use the procedures in the <code class="codeph">DBMS_STREAMS_ADM</code> package listed previously to add system-created rules to it.
                     </p>
                     <p>Instead of adding rules to a negative rule set, you can also exclude changes to certain tables or schemas in the following ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Do not add system-created rules for the table or schema to a <a href="strms_glossary.html#GUID-A810B839-61A2-4DEB-85C9-8F2F09455268"><span class="xrefglossterm">positive rule set</span></a> for an Oracle Streams client. For example, to capture DML changes to all of the tables in a particular schema except for one table, add a DML <a href="strms_glossary.html#GUID-4A72ABEB-7CC1-4A46-A4B9-41F722D872A4"><span class="xrefglossterm">table rule</span></a> for each table in the schema, except for the excluded table, to the positive rule set for the capture process. The disadvantages of this approach are that there can be many tables in a schema and each one requires a separate DML rule, and, if a new table is added to the schema, and you want to capture changes to this new table, then a new DML rule must be added for this table to the positive rule set for the capture process. 
                           </p>
                        </li>
                        <li>
                           <p>Use the <code class="codeph">NOT</code> logical condition in the <a href="strms_glossary.html#GUID-103148AB-F5B0-47DC-B803-90919571C800"><span class="xrefglossterm">rule condition</span></a> of a complex rule in the positive rule set for an Oracle Streams client. For example, to capture DML changes to all of the tables in a particular schema except for one table, use the <code class="codeph">DBMS_STREAMS_ADM.ADD_SCHEMA_RULES</code> procedure to add a system-created DML <a href="strms_glossary.html#GUID-59A77572-3B32-483A-A816-5938ACA78220"><span class="xrefglossterm">schema rule</span></a> to the positive rule set for the capture process that instructs the capture process to capture changes to the schema, and use the <code class="codeph">and_condition</code> parameter to exclude the table with the <code class="codeph">NOT</code> logical condition. The disadvantages to this approach are that it involves manually specifying parts of rule conditions, which can be error prone, and rule evaluation is not as efficient for complex rules as it is for unmodified system-created rules.
                           </p>
                        </li>
                     </ul>
                     <p>Given the goal of capturing DML changes to all of the tables in a particular schema except for one table, you can add a DML schema rule to the positive rule set for the capture process and a DML table rule for the excluded table to the negative rule set for the capture process. </p>
                     <p>This approach has the following advantages over the alternatives described previously:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You add only two rules to achieve the goal.</p>
                        </li>
                        <li>
                           <p>If a new table is added to the schema, and you want to capture DML changes to the table, then the capture process captures these changes without requiring modifications to existing rules or additions of new rules.</p>
                        </li>
                        <li>
                           <p>You do not need to specify or edit rule conditions manually.</p>
                        </li>
                        <li>
                           <p>Rule evaluation is more efficient because you avoid using complex rules.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-5B69AA8F-73B4-46C4-836F-54D2CE9A8251__GUID-3D5ACF96-8EA1-4A77-BAB8-252490B7EB8C">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="advanced-rule-concepts.html#GUID-E72554A9-54A2-4E4E-BD35-ED8484534E1A">Complex Rule Conditions</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="how-rules-are-used-in-oracle-streams.html#GUID-1DCEB0D2-DADE-4B37-9EC2-59FA09DA24A4">System-Created Rules with Added User-Defined Conditions</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="STRMS440"></a><div class="props_rev_3"><a id="GUID-3BCD739F-8CE2-4088-B0C3-AC4ADD653E0F" name="GUID-3BCD739F-8CE2-4088-B0C3-AC4ADD653E0F"></a><h5 id="STRMS-GUID-3BCD739F-8CE2-4088-B0C3-AC4ADD653E0F" class="sect5"><span class="enumeration_section">5.3.6.1 </span>Negative Rule Set Example
                     </h5>
                     <div>
                        <p>Suppose you want to apply row LCRs that contain the results of DML changes to all of the tables in <code class="codeph">hr</code> schema except for the <code class="codeph">job_history</code> table. To do so, you can use the <code class="codeph">ADD_SCHEMA_RULES</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to instruct an Oracle Streams apply process to apply row LCRs that contain the results of DML changes to the tables in the <code class="codeph">hr</code> schema. In this case, the procedure creates a schema rule and adds the rule to the positive rule set for the apply process. 
                        </p>
                        <p>You can use the <code class="codeph">ADD_TABLE_RULES</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package to instruct the Oracle Streams apply process to discard row LCRs that contain the results of DML changes to the tables in the <code class="codeph">hr.job_history</code> table. In this case, the procedure creates a table rule and adds the rule to the negative rule set for the apply process.
                        </p>
                        <p>The following sections explain how to run these procedures:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-868706C0-351B-47FE-A2D7-C5557D098AFB">Apply All DML Changes to the Tables in the hr Schema</a></p>
                           </li>
                           <li>
                              <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-69D395B3-D918-43B2-AEBE-AF7B766E5C15">Discard Row LCRs Containing DML Changes to the hr.job_history Table</a></p>
                           </li>
                        </ul>
                     </div><a id="STRMS441"></a><div class="props_rev_3"><a id="GUID-868706C0-351B-47FE-A2D7-C5557D098AFB" name="GUID-868706C0-351B-47FE-A2D7-C5557D098AFB"></a><h6 id="STRMS-GUID-868706C0-351B-47FE-A2D7-C5557D098AFB" class="sect6"><span class="enumeration_section">5.3.6.1.1 </span>Apply All DML Changes to the Tables in the hr Schema
                        </h6>
                        <div>
                           <p>These changes originated at the <code class="codeph">dbs1.example.com</code> <a href="strms_glossary.html#GUID-B5BB35D0-9179-4301-BA50-5B9CE22E362D"><span class="xrefglossterm">source database</span></a>. 
                           </p>
                           <p>Run the <code class="codeph">ADD_SCHEMA_RULES</code> procedure to create this rule:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.ADD_SCHEMA_RULES(
    schema_name         =&gt;  'hr',   
    streams_type        =&gt;  'apply',
    streams_name        =&gt;  'apply',
    queue_name          =&gt;  'streams_queue',
&nbsp;&nbsp;&nbsp; include_dml &nbsp;&nbsp;&nbsp;     =&gt;  TRUE,
&nbsp;&nbsp;  include_ddl &nbsp;&nbsp;      =&gt;  FALSE,
    include_tagged_lcr  =&gt;  FALSE,
    source_database     =&gt;  'dbs1.example.com',
    inclusion_rule      =&gt;  TRUE);
END;
/
</pre><p>Notice that the <code class="codeph">inclusion_rule</code> parameter is set to <code class="codeph">TRUE</code>. This setting means that the system-created rule is added to the positive rule set for the apply process.
                           </p>
                           <p>The <code class="codeph">ADD_SCHEMA_RULES</code> procedure creates a rule with a rule condition similar to the following:
                           </p><pre class="oac_no_warn" dir="ltr">((:dml.get_object_owner() = 'HR') and :dml.is_null_tag() = 'Y' 
and :dml.get_source_database_name() = 'DBS1.EXAMPLE.COM' )</pre></div>
                     </div><a id="STRMS442"></a><div class="props_rev_3"><a id="GUID-69D395B3-D918-43B2-AEBE-AF7B766E5C15" name="GUID-69D395B3-D918-43B2-AEBE-AF7B766E5C15"></a><h6 id="STRMS-GUID-69D395B3-D918-43B2-AEBE-AF7B766E5C15" class="sect6"><span class="enumeration_section">5.3.6.1.2 </span>Discard Row LCRs Containing DML Changes to the hr.job_history Table
                        </h6>
                        <div>
                           <p>These changes originated at the <code class="codeph">dbs1.example.com</code> source database. 
                           </p>
                           <p>Run the <code class="codeph">ADD_TABLE_RULES</code> procedure to create this rule:
                           </p><pre class="oac_no_warn" dir="ltr">BEGIN 
  DBMS_STREAMS_ADM.ADD_TABLE_RULES(
    table_name          =&gt;  'hr.job_history',
    streams_type        =&gt;  'apply',
    streams_name        =&gt;  'apply',
    queue_name          =&gt;  'streams_queue',
    include_dml         =&gt;  TRUE,
    include_ddl         =&gt;  FALSE,
    include_tagged_lcr  =&gt;  TRUE,
    source_database     =&gt;  'dbs1.example.com',
    inclusion_rule      =&gt;  FALSE);
END;
/
</pre><p>Notice that the <code class="codeph">inclusion_rule</code> parameter is set to <code class="codeph">FALSE</code>. This setting means that the system-created rule is added to the negative rule set for the apply process. 
                           </p>
                           <p>Also notice that the <code class="codeph">include_tagged_lcr</code> parameter is set to <code class="codeph">TRUE</code>. This setting means that all changes for the table, including tagged LCRs that satisfy all of the other rule conditions, will be discarded. In most cases, specify <code class="codeph">TRUE</code> for the <code class="codeph">include_tagged_lcr</code> parameter if the <code class="codeph">inclusion_rule</code> parameter is set to <code class="codeph">FALSE</code>.
                           </p>
                           <p><a id="d37810e9368" class="indexterm-anchor"></a><a id="d37810e9374" class="indexterm-anchor"></a>The <code class="codeph">ADD_TABLE_RULES</code> procedure creates a rule with a rule condition similar to the following:
                           </p><pre class="oac_no_warn" dir="ltr">(((:dml.get_object_owner() = 'HR' and :dml.get_object_name() = 'JOB_HISTORY')) 
and :dml.get_source_database_name() = 'DBS1.EXAMPLE.COM' )</pre></div>
                     </div><a id="STRMS443"></a><div class="props_rev_3"><a id="GUID-19276757-A619-4ACE-82DE-1B294D7F4F74" name="GUID-19276757-A619-4ACE-82DE-1B294D7F4F74"></a><h6 id="STRMS-GUID-19276757-A619-4ACE-82DE-1B294D7F4F74" class="sect6"><span class="enumeration_section">5.3.6.1.3 </span>Summary of Rules
                        </h6>
                        <div>
                           <p>In this example, the following rules were defined:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A schema rule that evaluates to <code class="codeph">TRUE</code> if a DML operation is performed on the tables in the <code class="codeph">hr</code> schema. This rule is in the positive rule set for the apply process.
                                 </p>
                              </li>
                              <li>
                                 <p>A table rule that evaluates to <code class="codeph">TRUE</code> if a DML operation is performed on the <code class="codeph">hr.job_history</code> table. This rule is in the negative rule set for the apply process.
                                 </p>
                              </li>
                           </ul>
                           <p>Given these rules, the following list provides examples of changes applied by the apply process:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A row is inserted into the <code class="codeph">hr.departments</code> table.
                                 </p>
                              </li>
                              <li>
                                 <p>Five rows are updated in the <code class="codeph">hr.employees</code> table.
                                 </p>
                              </li>
                              <li>
                                 <p>A row is deleted from the <code class="codeph">hr.countries</code> table.
                                 </p>
                              </li>
                           </ul>
                           <p>The apply process dequeues these changes from its associated queue and applies them to the database objects at the destination database.</p>
                           <p>Given these rules, the following list provides examples of changes that are ignored by the apply process:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A row is inserted into the <code class="codeph">hr.job_history</code> table.
                                 </p>
                              </li>
                              <li>
                                 <p>A row is updated in the <code class="codeph">hr.job_history</code> table.
                                 </p>
                              </li>
                              <li>
                                 <p>A row is deleted from the <code class="codeph">hr.job_history</code> table.
                                 </p>
                              </li>
                           </ul>
                           <p>These changes are not applied because they satisfy a rule in the negative rule set for the apply process.</p>
                           <div class="infoboxnotealso" id="GUID-19276757-A619-4ACE-82DE-1B294D7F4F74__GUID-9FBBC6D3-0747-4839-A922-834B3ADD2C77">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="how-rules-are-used-in-oracle-streams.html#GUID-40D0F31E-06AD-400D-BCDB-5FD3A8222B13">Rule Sets and Rule Evaluation of Messages</a>"</span></p>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a id="STRMS139"></a><div class="props_rev_3"><a id="GUID-1DCEB0D2-DADE-4B37-9EC2-59FA09DA24A4" name="GUID-1DCEB0D2-DADE-4B37-9EC2-59FA09DA24A4"></a><h4 id="STRMS-GUID-1DCEB0D2-DADE-4B37-9EC2-59FA09DA24A4" class="sect4"><span class="enumeration_section">5.3.7 </span>System-Created Rules with Added User-Defined Conditions
                  </h4>
                  <div>
                     <p>Some of the procedures that create <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a>s in the <code class="codeph">DBMS_STREAMS_ADM</code> package include an <code class="codeph">and_condition</code> parameter. This parameter enables you to add conditions to <a href="strms_glossary.html#GUID-53B877C4-24D6-4D27-B80D-C1256A08A87A"><span class="xrefglossterm">system-created rule</span></a>s. The condition specified by the <code class="codeph">and_condition</code> parameter is appended to the system-created <a href="strms_glossary.html#GUID-103148AB-F5B0-47DC-B803-90919571C800"><span class="xrefglossterm">rule condition</span></a> using an <code class="codeph">AND</code> clause in the following way:
                     </p><pre class="oac_no_warn" dir="ltr">(<span class="italic">system_condition</span>) AND (<span class="italic">and_condition</span>)
</pre><p>The variable in the specified condition must be <code class="codeph">:lcr</code>. For example, to specify that the <a href="strms_glossary.html#GUID-4A72ABEB-7CC1-4A46-A4B9-41F722D872A4"><span class="xrefglossterm">table rule</span></a>s generated by the <code class="codeph">ADD_TABLE_RULES</code> procedure evaluate to <code class="codeph">TRUE</code> only if the table is <code class="codeph">hr.departments</code>, the <a href="strms_glossary.html#GUID-B5BB35D0-9179-4301-BA50-5B9CE22E362D"><span class="xrefglossterm">source database</span></a> is <code class="codeph">dbs1.example.com</code>, and the Oracle Streams <a href="strms_glossary.html#GUID-D667D798-F9C9-437F-92AB-8C04FAD19B64"><span class="xrefglossterm">tag</span></a> is the hexadecimal equivalent of <code class="codeph">'02'</code>, run the following procedure:
                     </p><pre class="oac_no_warn" dir="ltr">BEGIN 
  DBMS_STREAMS_ADM.ADD_TABLE_RULES(
    table_name          =&gt;  'hr.departments',
    streams_type        =&gt;  'apply',
    streams_name        =&gt;  'apply_02',
    queue_name          =&gt;  'streams_queue',
    include_dml         =&gt;  TRUE,
    include_ddl         =&gt;  TRUE,
    include_tagged_lcr  =&gt;  TRUE,
    source_database     =&gt;  'dbs1.example.com',
    inclusion_rule      =&gt;  TRUE,
    and_condition       =&gt;  ':lcr.get_tag() = HEXTORAW(''02'')');
END;
/
</pre><p>The <code class="codeph">ADD_TABLE_RULES</code> procedure creates a DML rule with the following condition:
                     </p><pre class="oac_no_warn" dir="ltr">(((((:dml.get_object_owner() = 'HR' and :dml.get_object_name() = 'DEPARTMENTS'))
 and :dml.get_source_database_name() = 'DBS1.EXAMPLE.COM' )) 
and (:dml.get_tag() = HEXTORAW('02')))
</pre><p>It creates a DDL rule with the following condition:</p><pre class="oac_no_warn" dir="ltr">(((((:ddl.get_object_owner() = 'HR' and :ddl.get_object_name() = 'DEPARTMENTS')
or (:ddl.get_base_table_owner() = 'HR' 
and :ddl.get_base_table_name() = 'DEPARTMENTS')) 
and :ddl.get_source_database_name() = 'DBS1.EXAMPLE.COM' )) 
and (:ddl.get_tag() = HEXTORAW('02')))
</pre><p>Notice that the <code class="codeph">:lcr</code> in the specified condition is converted to <code class="codeph">:dml</code> or <code class="codeph">:ddl</code>, depending on the rule that is being generated. If you are specifying an LCR member subprogram that is dependent on the LCR type (row or DDL), then ensure that this procedure only generates the appropriate rule. Specifically, if you specify an LCR member subprogram that is valid only for row LCRs, then specify <code class="codeph">TRUE</code> for the <code class="codeph">include_dml</code> parameter and <code class="codeph">FALSE</code> for the <code class="codeph">include_ddl</code> parameter. If you specify an LCR member subprogram that is valid only for DDL LCRs, then specify <code class="codeph">FALSE</code> for the <code class="codeph">include_dml</code> parameter and <code class="codeph">TRUE</code> for the <code class="codeph">include_ddl</code> parameter. 
                     </p>
                     <p>For example, the <code class="codeph">GET_OBJECT_TYPE</code> member function only applies to DDL LCRs. Therefore, if you use this member function in an <code class="codeph">and_condition</code>, then specify <code class="codeph">FALSE</code> for the <code class="codeph">include_dml</code> parameter and <code class="codeph">TRUE</code> for the <code class="codeph">include_ddl</code> parameter.
                     </p>
                     <div class="infoboxnotealso" id="GUID-1DCEB0D2-DADE-4B37-9EC2-59FA09DA24A4__GUID-2401D2B2-430B-4B39-B2A2-A91FA38EF2A3">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../arpls/Logical-Change-Record-TYPEs.html#ARPLS307"><span class="italic">Oracle Database PL/SQL Packages and Types Reference </span></a>for more information about LCR member subprograms
                              </p>
                           </li>
                           <li>
                              <p><a href="../strep/oracle-streams-tags.html#STREP008"><span class="italic">Oracle Streams Replication Administrator's Guide </span></a>for more information about Oracle Streams tags
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>