<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Advanced Propagation Concepts</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="streams-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-01-25T21:40:57-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83781-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="advanced-queue-concepts.html" title="Previous" type="text/html">
      <link rel="next" href="advanced-apply-process-concepts.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Streams Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="STRMS">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="advanced-queue-concepts.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="advanced-apply-process-concepts.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-oracle-streams-concepts.html" property="item" typeof="WebPage"><span property="name">    Advanced Oracle Streams Concepts </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Advanced Propagation Concepts</li>
            </ol>
            <a id="GUID-7FA5EEFC-B496-4CAA-8CF1-8319A895DFA5" name="GUID-7FA5EEFC-B496-4CAA-8CF1-8319A895DFA5"></a><a id="STRMS010"></a>
            
            <h2 id="STRMS-GUID-7FA5EEFC-B496-4CAA-8CF1-8319A895DFA5" class="sect2"><span class="enumeration_chapter">9 </span> Advanced Propagation Concepts
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d56575e125" class="indexterm-anchor"></a><a id="d56575e129" class="indexterm-anchor"></a>The following topics contain conceptual information about staging <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>s in <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a>s and propagating messages from one queue to another:
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="advanced-propagation-concepts.html#GUID-73673B79-2BC2-41B0-84C2-D55CDB2848AA">Propagation Jobs</a></p>
                  </li>
                  <li>
                     <p><a href="advanced-propagation-concepts.html#GUID-370EF988-58F3-4C23-BD4F-886C336E2A38">Oracle Streams Data Dictionary for Propagations</a></p>
                  </li>
                  <li>
                     <p><a href="advanced-propagation-concepts.html#GUID-C4A6B143-1D63-43A8-9EF9-DC181B55CD7C">Binary File Propagation</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-7FA5EEFC-B496-4CAA-8CF1-8319A895DFA5__GUID-88CF471A-AE6D-46F5-8DCB-D769E7F98651">
                  <p class="notep1">See Also:</p>
                  <p></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="oracle-streams-staging-and-propagation.html#GUID-8B86A9B3-04B8-4CBF-BF61-587881F45E7F">Message Propagation Between Queues</a>"</span></p>
                     </li>
                     <li>
                        <p><span class="q">"<a href="managing-staging-and-propagation.html#GUID-138AAD67-94D5-4475-91EF-5EE7A78B4F49">Managing Oracle Streams Propagations and Propagation Jobs</a>"</span></p>
                     </li>
                     <li>
                        <p><a href="../adque/toc.htm"><span class="italic">Oracle Database Advanced Queuing User's Guide </span></a>for detailed information about the propagation infrastructure in&nbsp;Oracle Streams AQ
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="STRMS174"></a><div class="props_rev_3"><a id="GUID-73673B79-2BC2-41B0-84C2-D55CDB2848AA" name="GUID-73673B79-2BC2-41B0-84C2-D55CDB2848AA"></a><h3 id="STRMS-GUID-73673B79-2BC2-41B0-84C2-D55CDB2848AA" class="sect3"><span class="enumeration_section">9.1 </span>Propagation Jobs
               </h3>
               <div>
                  <p>An Oracle Streams <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a> is configured internally using Oracle Scheduler. Therefore, a <span class="bold">propagation job</span> is a job that propagates <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>s from a <a href="strms_glossary.html#GUID-FF907FD2-BD9E-4622-A33C-A6D400ED2CAF"><span class="xrefglossterm">source queue</span></a> to a <a href="strms_glossary.html#GUID-584772DA-C868-4F6B-9B7F-9E665F2D6F85"><span class="xrefglossterm">destination queue</span></a>. Like other Oracle Scheduler jobs, propagation jobs have an owner, and they use slave processes (<code class="codeph">j</code><span class="italic"><code class="codeph">nnn</code></span>) as needed to execute jobs.
                  </p>
                  <p>The following procedures can create a propagation job when they create a propagation:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The <code class="codeph">ADD_GLOBAL_PROPAGATION_RULES</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">ADD_SCHEMA_PROPAGATION_RULES</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">ADD_TABLE_PROPAGATION_RULES</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">ADD_SUBSET_PROPAGATION_RULE</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">CREATE_PROPAGATION</code> procedure in the <code class="codeph">DBMS_PROPAGATION_ADM</code> package
                        </p>
                     </li>
                  </ul>
                  <p>When one of these procedures creates a propagation, a new propagation job is created in the following cases:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If the <code class="codeph">queue_to_queue</code> parameter is set to <code class="codeph">TRUE</code>, then a new propagation job always is created for the propagation. Each queue-to-queue propagation has its own propagation job. However, a slave process can be used by multiple propagation jobs.
                        </p>
                     </li>
                     <li>
                        <p>If the <code class="codeph">queue_to_queue</code> parameter is set to <code class="codeph">FALSE</code>, then a propagation job is created when no propagation job exists for the source queue and database link specified. If a propagation job already exists for the specified source queue and database link, then the new propagation uses the existing propagation job and shares this propagation job with all of the other queue-to-dblink propagations that use the same database link.
                        </p>
                     </li>
                  </ul>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="advanced-propagation-concepts.html#GUID-F620F4FA-970C-4D3A-A552-016A912C95EC">Propagation Scheduling and Oracle Streams Propagations</a></p>
                     </li>
                     <li>
                        <p><a href="advanced-propagation-concepts.html#GUID-C8EC4570-9298-426C-B279-C36A4571FD76">Propagation Jobs and RESTRICTED SESSION</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-73673B79-2BC2-41B0-84C2-D55CDB2848AA__GUID-A4F8CF9A-EA22-4BDC-8384-FB7C2C197BEB">
                     <p class="notep1">Note:</p>
                     <p>The source queue owner performs the propagation, but the propagation job is owned by the user who creates it. These two users might or might not be the same.</p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-73673B79-2BC2-41B0-84C2-D55CDB2848AA__GUID-32D374C9-40E2-4E52-ABD8-9FB6D4E56D75">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="oracle-streams-staging-and-propagation.html#GUID-0789FE44-E2AE-4D2D-9BBD-FA637BCA3A58">Queue-to-Queue Propagations</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=ADMIN035"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about Oracle Scheduler
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="STRMS494"></a><div class="props_rev_3"><a id="GUID-F620F4FA-970C-4D3A-A552-016A912C95EC" name="GUID-F620F4FA-970C-4D3A-A552-016A912C95EC"></a><h4 id="STRMS-GUID-F620F4FA-970C-4D3A-A552-016A912C95EC" class="sect4"><span class="enumeration_section">9.1.1 </span>Propagation Scheduling and Oracle Streams Propagations
                  </h4>
                  <div>
                     <p>A <span class="bold">propagation schedule</span> specifies how often a propagation job propagates messages from a source queue to a destination queue. Each queue-to-queue propagation has its own propagation job and propagation schedule, but queue-to-dblink propagations that use the same propagation job have the same propagation schedule.
                     </p>
                     <p>A default propagation schedule is established when a new propagation job is created by a procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> or <code class="codeph">DBMS_PROPAGATION_ADM</code> package.
                     </p>
                     <p>The default schedule has the following properties:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The start time is <code class="codeph">SYSDATE()</code>.
                           </p>
                        </li>
                        <li>
                           <p>The duration is <code class="codeph">NULL</code>, which means infinite.
                           </p>
                        </li>
                        <li>
                           <p>The next time is <code class="codeph">NULL</code>, which means that propagation restarts as soon as it finishes the current duration.
                           </p>
                        </li>
                        <li>
                           <p>The latency is three seconds, which is the wait time after a queue becomes empty to resubmit the propagation job. Therefore, the latency is the maximum wait, in seconds, in the propagation window for a message to be propagated after it is enqueued.</p>
                        </li>
                     </ul>
                     <p>You can alter the schedule for a propagation job using the <code class="codeph">ALTER_PROPAGATION_SCHEDULE</code> procedure in the <code class="codeph">DBMS_AQADM</code> package. Changes made to a propagation job affect all propagations that use the propagation job.
                     </p>
                     <div class="infoboxnotealso" id="GUID-F620F4FA-970C-4D3A-A552-016A912C95EC__GUID-FD2CEE69-50B4-4000-8B89-5F33742BCDBC">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="advanced-propagation-concepts.html#GUID-73673B79-2BC2-41B0-84C2-D55CDB2848AA">Propagation Jobs</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-staging-and-propagation.html#GUID-44DD74F5-AD3A-486E-98E2-968AE0A5CCAE">Altering the Schedule of a Propagation Job</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="STRMS495"></a><div class="props_rev_3"><a id="GUID-C8EC4570-9298-426C-B279-C36A4571FD76" name="GUID-C8EC4570-9298-426C-B279-C36A4571FD76"></a><h4 id="STRMS-GUID-C8EC4570-9298-426C-B279-C36A4571FD76" class="sect4"><span class="enumeration_section">9.1.2 </span>Propagation Jobs and RESTRICTED SESSION
                  </h4>
                  <div>
                     <p>When the restricted session is enabled during system startup by issuing a <code class="codeph">STARTUP</code> <code class="codeph">RESTRICT</code> statement, propagation jobs with enabled propagation schedules do not propagate messages. When the restricted session is disabled, each propagation schedule that is enabled and ready to run will run when there is an available slave process.
                     </p>
                     <p>When the restricted session is enabled in a running database by the SQL statement <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> <code class="codeph">ENABLE</code> <code class="codeph">RESTRICTED</code> <code class="codeph">SESSION</code>, any running propagation job continues to run to completion. However, any new propagation job submitted for a propagation schedule is not started. Therefore, propagation for an enabled schedule can eventually come to a halt.
                     </p>
                  </div>
               </div>
            </div><a id="STRMS496"></a><div class="props_rev_3"><a id="GUID-370EF988-58F3-4C23-BD4F-886C336E2A38" name="GUID-370EF988-58F3-4C23-BD4F-886C336E2A38"></a><h3 id="STRMS-GUID-370EF988-58F3-4C23-BD4F-886C336E2A38" class="sect3"><span class="enumeration_section">9.2 </span>Oracle Streams Data Dictionary for Propagations
               </h3>
               <div>
                  <p>When a database object is prepared for <a href="strms_glossary.html#GUID-8B2165CC-97F5-415E-8C7B-A356C6D26841"><span class="xrefglossterm">instantiation</span></a> at a <a href="strms_glossary.html#GUID-B5BB35D0-9179-4301-BA50-5B9CE22E362D"><span class="xrefglossterm">source database</span></a>, an Oracle Streams data dictionary is populated automatically at the database where changes to the object are captured by a <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a>. The Oracle Streams data dictionary is a multiversioned copy of some of the information in the primary data dictionary at a source database. The Oracle Streams data dictionary maps object numbers, object version information, and internal column numbers from the source database into table names, column names, and column data types. This mapping keeps each <a href="strms_glossary.html#GUID-0D2E5DAF-804E-4089-9E0E-987C96F59706"><span class="xrefglossterm">captured LCR</span></a> as small as possible, because the message can store numbers rather than names internally.
                  </p>
                  <p>The mapping information in the Oracle Streams data dictionary at the source database is needed to evaluate <a href="strms_glossary.html#GUID-6779E306-1287-45C6-8182-CD04A7325F91"><span class="xrefglossterm">rule</span></a>s at any database that propagates the captured LCRs from the source database. To make this mapping information available to a <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a>, Oracle automatically populates a multiversioned Oracle Streams data dictionary at each database that has an Oracle Streams propagation. Oracle automatically sends internal messages that contain relevant information from the Oracle Streams data dictionary at the source database to all other databases that receive captured LCRs from the source database.
                  </p>
                  <p>The Oracle Streams data dictionary information contained in these internal messages in a <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a> might or might not be propagated by a propagation. Which Oracle Streams data dictionary information to propagate depends on the <a href="strms_glossary.html#GUID-36BC41F8-E073-4AFE-ADF1-5036DD323379"><span class="xrefglossterm">rule set</span></a>s for the propagation. When a propagation encounters Oracle Streams data dictionary information for a table, the propagation rule sets are evaluated with partial information that includes the source database name, table name, and table owner. If the partial rule evaluation of these rule sets determines that there might be relevant LCRs for the given table from the specified database, then the Oracle Streams data dictionary information for the table is propagated. 
                  </p>
                  <p>When Oracle Streams data dictionary information is propagated to a destination queue, it is incorporated into the Oracle Streams data dictionary at the database that contains the destination queue, in addition to being enqueued into the destination queue. Therefore, a propagation reading the destination queue in a directed networks configuration can forward LCRs immediately without waiting for the Oracle Streams data dictionary to be populated. In this way, the Oracle Streams data dictionary for a source database always reflects the correct state of the relevant database objects for the LCRs relating to these database objects.</p>
                  <div class="infoboxnotealso" id="GUID-370EF988-58F3-4C23-BD4F-886C336E2A38__GUID-77A47AEE-ECE0-4A98-98E7-2A821735907F">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="advanced-capture-process-concepts.html#GUID-3A241698-20A0-4604-AC48-26DD82AA4426">The Oracle Streams Data Dictionary</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="how-rules-are-used-in-oracle-streams.html#GUID-FBC295B1-E3CD-428C-A3BF-69F74214DA14"> How Rules Are Used in Oracle Streams</a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="STRMS137"></a><div class="props_rev_3"><a id="GUID-C4A6B143-1D63-43A8-9EF9-DC181B55CD7C" name="GUID-C4A6B143-1D63-43A8-9EF9-DC181B55CD7C"></a><h3 id="STRMS-GUID-C4A6B143-1D63-43A8-9EF9-DC181B55CD7C" class="sect3"><span class="enumeration_section">9.3 </span>Binary File Propagation
               </h3>
               <div>
                  <p>You can propagate a binary file between databases by using Oracle Streams. To do so, you put one or more <code class="codeph">BFILE</code> attributes in a <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a> payload and then propagate the message to a remote <a href="strms_glossary.html#GUID-8D7B2770-B1EC-44C7-B861-B78E571CADA6"><span class="xrefglossterm">queue</span></a>. Each <code class="codeph">BFILE</code> referenced in the payload is transferred to the remote database after the message is propagated, but before the message propagation is committed. The directory object and filename of each propagated <code class="codeph">BFILE</code> are preserved, but you can map the directory object to different directories on the source and <a href="strms_glossary.html#GUID-C73813B0-D8A7-46D5-85B2-15BAB0A146B5"><span class="xrefglossterm">destination database</span></a>s. The message payload can be a <code class="codeph">BFILE</code> wrapped in an <code class="codeph">ANYDATA</code> payload, or the message payload can be one or more <code class="codeph">BFILE</code> attributes of an object wrapped in an <code class="codeph">ANYDATA</code> payload. 
                  </p>
                  <p>The following are not supported in a message payload:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>One or more <code class="codeph">BFILE</code> attributes in a varray
                        </p>
                     </li>
                     <li>
                        <p>A user-defined type object with an <code class="codeph">ANYDATA</code> attribute that contains one or more <code class="codeph">BFILE</code> attributes
                        </p>
                     </li>
                  </ul>
                  <p>Propagating a <code class="codeph">BFILE</code> in Oracle Streams has the same restrictions as the procedure <code class="codeph">DBMS_FILE_TRANSFER.PUT_FILE</code>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-C4A6B143-1D63-43A8-9EF9-DC181B55CD7C__GUID-FA78CED3-1716-49EF-A2E8-1790EB2095E0">
                     <p class="notep1">See Also:</p>
                     <p><a href="../admin/managing-data-files-and-temp-files.html#ADMIN01201"><span class="italic">Oracle Database Administrator's Guide,</span></a> and<a href="../arpls/DBMS_FILE_TRANSFER.html#ARPLS095"><span class="italic"> Oracle Database PL/SQL Packages and Types Reference </span></a>for more information about transferring files with the <code class="codeph">DBMS_FILE_TRANSFER</code> package
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>