<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Oracle Streams High Availability Environments</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="streams-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-01-25T21:40:57-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83781-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="combined-capture-and-apply-optimization.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-streams-administration.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Streams Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="STRMS">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="combined-capture-and-apply-optimization.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-streams-administration.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-oracle-streams-concepts.html" property="item" typeof="WebPage"><span property="name">    Advanced Oracle Streams Concepts </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Oracle Streams High Availability Environments</li>
            </ol>
            <a id="GUID-8E40A4E2-FDE1-404D-B1FF-994DEA81C1FD" name="GUID-8E40A4E2-FDE1-404D-B1FF-994DEA81C1FD"></a><a id="STRMS007"></a>
            
            <h2 id="STRMS-GUID-8E40A4E2-FDE1-404D-B1FF-994DEA81C1FD" class="sect2"><span class="enumeration_chapter">13 </span> Oracle Streams High Availability Environments
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d68074e125" class="indexterm-anchor"></a><a id="d68074e129" class="indexterm-anchor"></a>The following topics contain information about Oracle Streams high availability environments:
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="oracle-streams-high-availability-environments.html#GUID-ACDA7EB3-4267-4710-BF60-064D16BC571E">Overview of Oracle Streams High Availability Environments</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-streams-high-availability-environments.html#GUID-DCE2B8CA-573E-47A5-9ADF-FB14AB030A7C">Protection from Failures</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-streams-high-availability-environments.html#GUID-B98F94F9-416A-4E98-A10B-836B5DA04E7D">Best Practices for Oracle Streams High Availability Environments</a></p>
                  </li>
               </ul>
            </div><a id="STRMS579"></a><div class="props_rev_3"><a id="GUID-ACDA7EB3-4267-4710-BF60-064D16BC571E" name="GUID-ACDA7EB3-4267-4710-BF60-064D16BC571E"></a><h3 id="STRMS-GUID-ACDA7EB3-4267-4710-BF60-064D16BC571E" class="sect3"><span class="enumeration_section">13.1 </span>Overview of Oracle Streams High Availability Environments
               </h3>
               <div>
                  <p>Configuring a high availability solution requires careful planning and analysis of failure scenarios. Database backups and physical standby databases provide physical copies of a source database for failover protection. Oracle Data Guard, in SQL apply mode, implements a logical standby database in a high availability environment. Because Oracle Data Guard is designed for a high availability environment, it handles most failure scenarios. However, some environments might require the flexibility available in Oracle Streams, so that they can take advantage of the extended feature set offered by Oracle Streams. </p>
                  <p>This chapter discusses some of the scenarios that can benefit from an Oracle Streams-based solution and explains Oracle Streams-specific issues that arise in high availability environments.</p>
                  <div class="infoboxnotealso" id="GUID-ACDA7EB3-4267-4710-BF60-064D16BC571E__GUID-3F4B8154-525F-480F-B7D0-7529E449DAFD">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=SBYDB"><span class="italic">Oracle Data Guard Concepts and Administration </span></a>for more information about Oracle Data Guard
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=RACAD"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="STRMS580"></a><div class="props_rev_3"><a id="GUID-DCE2B8CA-573E-47A5-9ADF-FB14AB030A7C" name="GUID-DCE2B8CA-573E-47A5-9ADF-FB14AB030A7C"></a><h3 id="STRMS-GUID-DCE2B8CA-573E-47A5-9ADF-FB14AB030A7C" class="sect3"><span class="enumeration_section">13.2 </span>Protection from Failures
               </h3>
               <div>
                  <p>Oracle Real Application Clusters (Oracle RAC) is the preferred method for protecting from an instance or system failure. After a failure, services are provided by a surviving node in the cluster. However, clustering does not protect from user error, media failure, or disasters. These types of failures require redundant copies of the database. You can make both physical and logical copies of a database.</p>
                  <p>Physical copies are identical, block for block, with the source database, and are the preferred means of protecting data. There are three types of physical copies: database backup, mirrored or multiplexed database files, and a physical standby database.</p>
                  <p>Logical copies contain the same information as the source database, but the information can be stored differently within the database. Creating a logical copy of your database offers many advantages. However, you should always create a logical copy in addition to a physical copy, not instead of physical copy.</p>
                  <p>A logical copy has the following benefits:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A logical copy can be open while being updated. This ability makes the logical copy useful for near real-time reporting.</p>
                     </li>
                     <li>
                        <p>A logical copy can have a different physical layout that is optimized for its own purpose. For example, it can contain additional indexes, and thereby improve the performance of reporting applications that use the logical copy.</p>
                     </li>
                     <li>
                        <p>A logical copy provides better protection from corruptions. Because data is logically captured and applied, it is very unlikely that a physical corruption can propagate to the logical copy of the database.</p>
                     </li>
                  </ul>
                  <p>There are three types of logical copies of a database:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Logical standby databases</p>
                     </li>
                     <li>
                        <p>Oracle Streams replica databases</p>
                     </li>
                     <li>
                        <p>Application-maintained copies</p>
                     </li>
                  </ul>
                  <p>Logical standby databases are best maintained using Oracle Data Guard in SQL apply mode. The rest of this chapter discusses Oracle Streams replica databases and application maintained copies.</p>
                  <div class="infoboxnotealso" id="GUID-DCE2B8CA-573E-47A5-9ADF-FB14AB030A7C__GUID-3A7B5485-AB73-48B5-9FFD-9B952BB74629">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="how-oracle-streams-works-with-other-database-components.html#GUID-3F39A40E-4A33-45F9-99F6-587256787917">Oracle Streams and Oracle Real Application Clusters</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=BRADV"><span class="italic">Oracle Database Backup and Recovery User's Guide </span></a>for more information about database backups and mirroring or multiplexing database files
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=SBYDB"><span class="italic">Oracle Data Guard Concepts and Administration </span></a>for more information about physical standby databases and logical standby databases
                           </p>
                        </li>
                     </ul>
                  </div>
               </div><a id="STRMS581"></a><div class="props_rev_3"><a id="GUID-F594DD3B-3CFC-4117-A847-8130B839669B" name="GUID-F594DD3B-3CFC-4117-A847-8130B839669B"></a><h4 id="STRMS-GUID-F594DD3B-3CFC-4117-A847-8130B839669B" class="sect4"><span class="enumeration_section">13.2.1 </span>Oracle Streams Replica Database
                  </h4>
                  <div>
                     <p>Like Oracle Data Guard in SQL apply mode, Oracle Streams can capture database changes, propagate them to destinations, and apply the changes at these destinations. Oracle Streams is optimized for replicating data. Oracle Streams can capture changes at a source database, and the captured changes can be propagated asynchronously to replica databases. This optimization can reduce the latency and can enable the replicas to lag the primary database by no more than a few seconds.</p>
                     <p>Nevertheless, you might choose to use Oracle Streams to configure and maintain a logical copy of your production database. Although using Oracle Streams might require additional work, it offers increased flexibility that might be required to meet specific business requirements. A logical copy configured and maintained using Oracle Streams is called a replica, not a logical standby, because it provides many capabilities that are beyond the scope of the normal definition of a standby database. Some of the requirements that can best be met using an Oracle Streams replica are listed in the following sections.</p>
                     <div class="infoboxnotealso" id="GUID-F594DD3B-3CFC-4117-A847-8130B839669B__GUID-426F6520-F3ED-4771-97D1-D0A0F92F68A8">
                        <p class="notep1">See Also:</p>
                        <p><a href="../strep/toc.htm"><span class="italic">Oracle Streams Replication Administrator's Guide f</span></a>or more information about replicating database changes with Oracle Streams
                        </p>
                     </div>
                  </div><a id="STRMS582"></a><div class="props_rev_3"><a id="GUID-164A05E1-E351-4E57-ACD7-685EF2833C91" name="GUID-164A05E1-E351-4E57-ACD7-685EF2833C91"></a><h5 id="STRMS-GUID-164A05E1-E351-4E57-ACD7-685EF2833C91" class="sect5"><span class="enumeration_section">13.2.1.1 </span>Updates at the Replica Database
                     </h5>
                     <div>
                        <p>The greatest difference between a replica database and a standby database is that a replica database can be updated and a standby database cannot. Applications that must update data can run against the replica, including jobs and reporting applications that log reporting activity. Replica databases also allow local applications to operate autonomously, protecting local applications from WAN failures and reducing latency for database operations.</p>
                     </div>
                  </div><a id="STRMS583"></a><div class="props_rev_3"><a id="GUID-78D3BE8C-D44B-474F-A3C0-1F050F80FA85" name="GUID-78D3BE8C-D44B-474F-A3C0-1F050F80FA85"></a><h5 id="STRMS-GUID-78D3BE8C-D44B-474F-A3C0-1F050F80FA85" class="sect5"><span class="enumeration_section">13.2.1.2 </span>Heterogeneous Platform Support
                     </h5>
                     <div>
                        <p>The production and the replica do not need to be running on the exact same platform. This provides more flexibility in using computing assets, and facilitates migration between platforms.</p>
                     </div>
                  </div><a id="STRMS584"></a><div class="props_rev_3"><a id="GUID-39F12575-F2C5-44CA-AE7A-49CA70C74754" name="GUID-39F12575-F2C5-44CA-AE7A-49CA70C74754"></a><h5 id="STRMS-GUID-39F12575-F2C5-44CA-AE7A-49CA70C74754" class="sect5"><span class="enumeration_section">13.2.1.3 </span>Multiple Character Sets
                     </h5>
                     <div>
                        <p>Oracle Streams replicas can use different character sets than the production database. Data is automatically converted from one character set to another before being applied. This ability is extremely important if you have global operations and you must distribute data in multiple countries.</p>
                     </div>
                  </div><a id="STRMS585"></a><div class="props_rev_3"><a id="GUID-D1EAA30F-5F14-4A79-B6E9-9D57C16FA5B7" name="GUID-D1EAA30F-5F14-4A79-B6E9-9D57C16FA5B7"></a><h5 id="STRMS-GUID-D1EAA30F-5F14-4A79-B6E9-9D57C16FA5B7" class="sect5"><span class="enumeration_section">13.2.1.4 </span>Mining the Online Redo Logs to Minimize Latency
                     </h5>
                     <div>
                        <p>If the replica is used for near real-time reporting, Oracle Streams can lag the production database by no more than a few seconds, providing up-to-date and accurate queries. Changes can be read from the online redo logs as the logs are written, rather than from the redo logs after archiving.</p>
                     </div>
                  </div><a id="STRMS587"></a><div class="props_rev_3"><a id="GUID-5DD2CD2F-282A-45A8-9824-AB669D1390B0" name="GUID-5DD2CD2F-282A-45A8-9824-AB669D1390B0"></a><h5 id="STRMS-GUID-5DD2CD2F-282A-45A8-9824-AB669D1390B0" class="sect5"><span class="enumeration_section">13.2.1.5 </span>Fast Failover
                     </h5>
                     <div>
                        <p>Oracle Streams replicas can be open to read/write operations at all times. If a primary database fails, then Oracle Streams replicas are able to instantly resume processing. A small window of data might be left at the primary database, but this data will be automatically applied when the primary database recovers. This ability can be important if you value fast recovery time over no lost data. Assuming the primary database can eventually be recovered, the data is only temporarily unavailable.</p>
                     </div>
                  </div><a id="STRMS588"></a><div class="props_rev_3"><a id="GUID-29928382-C876-4239-BC9D-A01C0D7D0A57" name="GUID-29928382-C876-4239-BC9D-A01C0D7D0A57"></a><h5 id="STRMS-GUID-29928382-C876-4239-BC9D-A01C0D7D0A57" class="sect5"><span class="enumeration_section">13.2.1.6 </span>Single Capture for Multiple Destinations
                     </h5>
                     <div>
                        <p>In a complex environment, changes need only be captured once. These changes can then be sent to multiple destinations. When a capture process is used to capture changes, this ability enables more efficient use of the resources needed to mine the redo logs for changes.</p>
                     </div>
                  </div>
               </div><a id="STRMS589"></a><div class="props_rev_3"><a id="GUID-2BFA3DC2-B2CE-4954-BEDE-967502AA237A" name="GUID-2BFA3DC2-B2CE-4954-BEDE-967502AA237A"></a><h4 id="STRMS-GUID-2BFA3DC2-B2CE-4954-BEDE-967502AA237A" class="sect4"><span class="enumeration_section">13.2.2 </span>When Not to Use Oracle Streams
                  </h4>
                  <div>
                     <p>As mentioned previously, there are scenarios in which you might choose to use Oracle Streams to meet some of your high availability requirements. One of the rules of high availability is to keep it simple. Oracle Data Guard is designed for high availability and is easier to implement than an Oracle Streams-based high availability solution. If you decide to leverage the flexibility offered by Oracle Streams, then you must be prepared to invest in the expertise and planning required to make an Oracle Streams-based solution robust. You might need to write scripts to implement much of the automation and management tools provided with Oracle Data Guard.</p>
                  </div>
               </div><a id="STRMS590"></a><div class="props_rev_3"><a id="GUID-C49159AC-FB0D-4705-8C42-64454F0C2458" name="GUID-C49159AC-FB0D-4705-8C42-64454F0C2458"></a><h4 id="STRMS-GUID-C49159AC-FB0D-4705-8C42-64454F0C2458" class="sect4"><span class="enumeration_section">13.2.3 </span>Application-Maintained Copies
                  </h4>
                  <div>
                     <p>The best availability can be achieved by designing the maintenance of logical copies of data directly into an application. The application knows what data is valuable and must be immediately moved off-site to guarantee no data loss. It can also synchronously replicate truly critical data, while asynchronously replicating less critical data. Applications maintain copies of data by either synchronously or asynchronously sending data to other applications that manage another logical copy of the data. Synchronous operations are performed using the distributed SQL or remote procedure features of the database. Asynchronous operations are performed using Advanced Queuing. Advanced Queuing is a database message queuing feature that is part of Oracle Streams.</p>
                     <p>Although the highest levels of availability can be achieved with application-maintained copies of data, great care is required to realize these results. Typically, a great amount of custom development is required. Many of the difficult boundary conditions that have been analyzed and solved with solutions such as Oracle Data Guard and Oracle Streams <a href="strms_glossary.html#GUID-5BC36291-C075-4244-905A-ACDAB250E825"><span class="xrefglossterm">replication</span></a> must be reanalyzed and solved by the custom application developers. In addition, standard solutions like Oracle Data Guard and Oracle Streams replication undergo stringent testing both by Oracle and its customers. It will take a great deal of effort before a custom-developed solution can exhibit the same degree of maturity. For these reasons, only organizations with substantial patience and expertise should attempt to build a high availability solution with application maintained copies.
                     </p>
                     <div class="infoboxnotealso" id="GUID-C49159AC-FB0D-4705-8C42-64454F0C2458__GUID-A00A1169-A059-4A94-A4E3-89518736D7C9">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adque/toc.htm"><span class="italic">Oracle Database Advanced Queuing User's Guide </span></a>for more information about developing applications with Advanced Queuing
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="STRMS591"></a><div class="props_rev_3"><a id="GUID-B98F94F9-416A-4E98-A10B-836B5DA04E7D" name="GUID-B98F94F9-416A-4E98-A10B-836B5DA04E7D"></a><h3 id="STRMS-GUID-B98F94F9-416A-4E98-A10B-836B5DA04E7D" class="sect3"><span class="enumeration_section">13.3 </span>Best Practices for Oracle Streams High Availability Environments
               </h3>
               <div>
                  <p>Implementing Oracle Streams in a high availability environment requires consideration of possible failure and recovery scenarios, and the implementation of procedures to ensure Oracle Streams continues to capture, propagate, and apply changes after a failure. Some of the issues that must be examined include the following:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-streams-high-availability-environments.html#GUID-1928A045-1392-4EDC-AECF-E63772C06D7D">Configuring Oracle Streams for High Availability</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-streams-high-availability-environments.html#GUID-62683454-79D6-4210-ACC9-437CA3893F74">Recovering from Failures</a></p>
                     </li>
                  </ul>
               </div><a id="STRMS592"></a><div class="props_rev_3"><a id="GUID-1928A045-1392-4EDC-AECF-E63772C06D7D" name="GUID-1928A045-1392-4EDC-AECF-E63772C06D7D"></a><h4 id="STRMS-GUID-1928A045-1392-4EDC-AECF-E63772C06D7D" class="sect4"><span class="enumeration_section">13.3.1 </span>Configuring Oracle Streams for High Availability
                  </h4>
                  <div>
                     <p>When configuring a solution using Oracle Streams, it is important to anticipate failures and design availability into the architecture. You must examine every database in the distributed system, and design a recovery plan in case of failure of that database. In some situations, failure of a database affects only services accessing data on that database. In other situations, a failure is multiplied, because it can affect other databases.</p>
                     <p>This section contains these topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-streams-high-availability-environments.html#GUID-78141AE4-DC80-4C65-B9A9-115AFB92145A">Directly Connecting Every Database to Every Other Database</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-streams-high-availability-environments.html#GUID-1BAE77B2-5BDC-4D17-B378-B051207945F8">Creating Hub-and-Spoke Configurations</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-streams-high-availability-environments.html#GUID-386D9BE7-3195-4578-835F-838647A203EA">Local or Downstream Capture with Oracle Streams Capture Processes</a></p>
                        </li>
                     </ul>
                  </div><a id="STRMS593"></a><div class="props_rev_3"><a id="GUID-78141AE4-DC80-4C65-B9A9-115AFB92145A" name="GUID-78141AE4-DC80-4C65-B9A9-115AFB92145A"></a><h5 id="STRMS-GUID-78141AE4-DC80-4C65-B9A9-115AFB92145A" class="sect5"><span class="enumeration_section">13.3.1.1 </span>Directly Connecting Every Database to Every Other Database
                     </h5>
                     <div>
                        <p>A configuration where each database is directly connected to every other database in the distributed system is the most resilient to failures, because a failure of one database will not prevent any other databases from operating or communicating. Assuming all data is replicated, services that were using the failed database can connect to surviving replicas.</p>
                        <div class="infoboxnotealso" id="GUID-78141AE4-DC80-4C65-B9A9-115AFB92145A__GUID-A2D0F28F-9EBE-4319-85EC-75A08A75A9A6">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../strex/n-way-replication-example.html#STREX004"><span class="italic">Oracle Streams Extended Examples </span></a>for a detailed example of such an environment
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-streams-staging-and-propagation.html#GUID-6D8D8A82-0FE1-4ED3-8B92-0B5A0CE97E0E">Queue Forwarding and Apply Forwarding</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS594"></a><div class="props_rev_3"><a id="GUID-1BAE77B2-5BDC-4D17-B378-B051207945F8" name="GUID-1BAE77B2-5BDC-4D17-B378-B051207945F8"></a><h5 id="STRMS-GUID-1BAE77B2-5BDC-4D17-B378-B051207945F8" class="sect5"><span class="enumeration_section">13.3.1.2 </span>Creating Hub-and-Spoke Configurations
                     </h5>
                     <div>
                        <p>Although configurations where each database is directly connected to every other database provide the best high availability characteristics, they can become difficult to manage when the number of databases becomes large. Hub-and-spoke configurations solve this manageability issue by funneling changes from many databases into a hub database, and then to other hub databases, or to other spoke databases. To add a new source or destination, you simply connect it to a hub database, rather than establishing connections to every other database.</p>
                        <p>A hub, however, becomes a very important node in your distributed environment. Should it fail, all communications flowing through the hub will fail. Due to the asynchronous nature of the <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>s propagating through the hub, it can be very difficult to redirect a stream from one hub to another. A better approach is to make the hub resilient to failures. 
                        </p>
                        <p>The same techniques used to make a single database resilient to failures also apply to distributed hub databases. Oracle recommends Oracle Real Application Clusters (Oracle RAC) to provide protection from instance and node failures. This configuration should be combined with a "no loss" physical standby database, to protect from disasters and data errors. Oracle does not recommend using an Oracle Streams replica as the only means to protect from disasters or data errors.</p>
                        <div class="infoboxnotealso" id="GUID-1BAE77B2-5BDC-4D17-B378-B051207945F8__GUID-3053821B-67D7-471A-AD02-BA9531C69060">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../strep/oracle-streams-tags.html#STREP111"><span class="italic">Oracle Streams Replication Administrator's Guide </span></a>for a detailed example of a hub-and-spoke replication environment
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="how-oracle-streams-works-with-other-database-components.html#GUID-3F39A40E-4A33-45F9-99F6-587256787917">Oracle Streams and Oracle Real Application Clusters</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS595"></a><div class="props_rev_3"><a id="GUID-386D9BE7-3195-4578-835F-838647A203EA" name="GUID-386D9BE7-3195-4578-835F-838647A203EA"></a><h5 id="STRMS-GUID-386D9BE7-3195-4578-835F-838647A203EA" class="sect5"><span class="enumeration_section">13.3.1.3 </span>Local or Downstream Capture with Oracle Streams Capture Processes
                     </h5>
                     <div>
                        <p>Oracle Streams capture processes support capturing changes from the redo log on the local <a href="strms_glossary.html#GUID-B5BB35D0-9179-4301-BA50-5B9CE22E362D"><span class="xrefglossterm">source database</span></a> or at a <a href="strms_glossary.html#GUID-BEBC1371-719D-4103-877E-E3FB7B1DBA46"><span class="xrefglossterm">downstream database</span></a> at a different site. The choice of local capture or downstream capture has implications for availability. When a failure occurs at a source database, some changes might not have been captured. With local capture, those changes might not be available until the source database is recovered. In the event of a catastrophic failure, those changes might be lost.
                        </p>
                        <p>Downstream capture at a remote database reduces the window of potential data loss in the event of a failure. Depending on the configuration, downstream capture enables you to guarantee all changes committed at the source database are safely copied to a remote site, where they can be captured and propagated to other databases and applications. Oracle Streams uses the same mechanism as Oracle Data Guard to copy redo data or log files to remote destinations, and supports the same operational modes, including maximum protection, maximum availability, and maximum performance.</p>
                        <div class="infoboxnote" id="GUID-386D9BE7-3195-4578-835F-838647A203EA__GUID-1AD2DB59-D543-418B-8836-27C974628C70">
                           <p class="notep1">Note:</p>
                           <p>Synchronous capture is always configured at the source database.</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-386D9BE7-3195-4578-835F-838647A203EA__GUID-528FDEAA-E15B-421D-9029-270DB68CB5D7">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="oracle-streams-information-capture.html#GUID-5C1059F3-DA6E-4B0A-8179-D5304423656E">Local Capture and Downstream Capture</a>"</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="STRMS596"></a><div class="props_rev_3"><a id="GUID-62683454-79D6-4210-ACC9-437CA3893F74" name="GUID-62683454-79D6-4210-ACC9-437CA3893F74"></a><h4 id="STRMS-GUID-62683454-79D6-4210-ACC9-437CA3893F74" class="sect4"><span class="enumeration_section">13.3.2 </span>Recovering from Failures
                  </h4>
                  <div>
                     <p>The following sections provide best practices for recovering from failures.</p>
                     <p>This section contains these topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-streams-high-availability-environments.html#GUID-3E3B5ECC-3310-451B-8A9F-80E1944CB096">Automatic Capture Process Restart After a Failover</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-streams-high-availability-environments.html#GUID-7B4E0C85-FA7D-4910-9BA5-D7DB3E064F9A">Database Links Reestablishment After a Failover</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-streams-high-availability-environments.html#GUID-1907606E-C825-45D9-BAC0-0EC1FE7A9D92">Propagation Job Restart After a Failover</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-streams-high-availability-environments.html#GUID-7AA9622B-83BD-4607-B928-E822C0047CA5">Automatic Apply Process Restart After a Failover</a></p>
                        </li>
                     </ul>
                  </div><a id="STRMS597"></a><div class="props_rev_3"><a id="GUID-3E3B5ECC-3310-451B-8A9F-80E1944CB096" name="GUID-3E3B5ECC-3310-451B-8A9F-80E1944CB096"></a><h5 id="STRMS-GUID-3E3B5ECC-3310-451B-8A9F-80E1944CB096" class="sect5"><span class="enumeration_section">13.3.2.1 </span>Automatic Capture Process Restart After a Failover
                     </h5>
                     <div>
                        <p>After a failure and restart of a single-node database, or a failure and restart of a database on another node in a cold failover cluster, the <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a> automatically returns to the status it was in at the time of the failure. That is, if it was running at the time of the failure, then the capture process restarts automatically. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-3E3B5ECC-3310-451B-8A9F-80E1944CB096__GUID-8BA6F4FE-AE08-4D90-A570-DBEA5A513AAA">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="how-oracle-streams-works-with-other-database-components.html#GUID-720225FB-3DDB-45AD-957E-BF11688C05F0">Capture Processes and Oracle Real Application Clusters</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-oracle-streams-implicit-capture.html#GUID-6A359154-0CB1-4FE8-B9CE-741887C4DAB8">Starting a Capture Process</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="how-oracle-streams-works-with-other-database-components.html#GUID-9060FEE1-EBE2-4A9A-956D-4C83EE226997">Queues and Oracle Real Application Clusters</a>"</span> for information about primary and secondary instance ownership for queues
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS598"></a><div class="props_rev_3"><a id="GUID-7B4E0C85-FA7D-4910-9BA5-D7DB3E064F9A" name="GUID-7B4E0C85-FA7D-4910-9BA5-D7DB3E064F9A"></a><h5 id="STRMS-GUID-7B4E0C85-FA7D-4910-9BA5-D7DB3E064F9A" class="sect5"><span class="enumeration_section">13.3.2.2 </span>Database Links Reestablishment After a Failover
                     </h5>
                     <div>
                        <p>It is important to ensure that a <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a> continues to function after a failure of a <a href="strms_glossary.html#GUID-C73813B0-D8A7-46D5-85B2-15BAB0A146B5"><span class="xrefglossterm">destination database</span></a> instance. A <a href="strms_glossary.html#GUID-151DCBBA-D3E3-455A-B475-9669A14C554B"><span class="xrefglossterm">propagation job</span></a> will retry (with increasing delay between retries) its database link sixteen times after a failure until the connection is reestablished. If the connection is not reestablished after sixteen tries, then the <a href="strms_glossary.html#GUID-AC57AF6F-D7A0-4128-8CE8-C0F434AF7C9E"><span class="xrefglossterm">propagation schedule</span></a> is aborted.
                        </p>
                        <p>If the database is restarted on the same node, or on a different node in a cold failover cluster, then the connection should be reestablished. In some circumstances, the database link could be waiting on a read or write, and will not detect the failure until a lengthy time out expires. The time out is controlled by the <code class="codeph">TCP_KEEPALIVE_INTERVAL</code> TCP/IP parameter. In such circumstances, you should drop and re-create the database link to ensure that communication is reestablished quickly.
                        </p>
                        <p>In a high availability environment, you can prepare scripts that will drop and re-create all necessary database links. After a failover, you can execute these scripts so that Oracle Streams can resume propagation.</p>
                        <div class="infoboxnotealso" id="GUID-7B4E0C85-FA7D-4910-9BA5-D7DB3E064F9A__GUID-5E8F88DD-6F22-44A2-8EDB-B9A7ACB13E54">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../strep/preparing-for-oracle-streams-replication.html#STREP203"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for information about creating database links in an Oracle Streams environment
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="how-oracle-streams-works-with-other-database-components.html#GUID-28AC6B5C-E194-4128-BE49-90C2E2FC36CC">Propagations and Oracle Real Application Clusters</a>"</span> for more information about database links in an Oracle RAC environment
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS599"></a><div class="props_rev_3"><a id="GUID-1907606E-C825-45D9-BAC0-0EC1FE7A9D92" name="GUID-1907606E-C825-45D9-BAC0-0EC1FE7A9D92"></a><h5 id="STRMS-GUID-1907606E-C825-45D9-BAC0-0EC1FE7A9D92" class="sect5"><span class="enumeration_section">13.3.2.3 </span>Propagation Job Restart After a Failover
                     </h5>
                     <div>
                        <p>For <a href="strms_glossary.html#GUID-62ABA207-07D4-453A-AC59-B0C780A3FB59"><span class="xrefglossterm">message</span></a>s to be propagated from a <a href="strms_glossary.html#GUID-FF907FD2-BD9E-4622-A33C-A6D400ED2CAF"><span class="xrefglossterm">source queue</span></a> to a <a href="strms_glossary.html#GUID-584772DA-C868-4F6B-9B7F-9E665F2D6F85"><span class="xrefglossterm">destination queue</span></a>, a <a href="strms_glossary.html#GUID-151DCBBA-D3E3-455A-B475-9669A14C554B"><span class="xrefglossterm">propagation job</span></a> must run on the instance owning the source queue. In a single-node database, or cold failover cluster, propagation resumes when the single database instance is restarted. 
                        </p>
                        <div class="infoboxnotealso" id="GUID-1907606E-C825-45D9-BAC0-0EC1FE7A9D92__GUID-250F497B-256F-49E5-BCFA-915B02781D25">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="how-oracle-streams-works-with-other-database-components.html#GUID-28AC6B5C-E194-4128-BE49-90C2E2FC36CC">Propagations and Oracle Real Application Clusters</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="STRMS600"></a><div class="props_rev_3"><a id="GUID-7AA9622B-83BD-4607-B928-E822C0047CA5" name="GUID-7AA9622B-83BD-4607-B928-E822C0047CA5"></a><h5 id="STRMS-GUID-7AA9622B-83BD-4607-B928-E822C0047CA5" class="sect5"><span class="enumeration_section">13.3.2.4 </span>Automatic Apply Process Restart After a Failover
                     </h5>
                     <div>
                        <p>After a failure and restart of a single-node database, or a failure and restart of a database on another node in a cold failover cluster, the apply process automatically returns to the status it was in at the time of the failure. That is, if it was running at the time of the failure, then the apply process restarts automatically.</p>
                        <div class="infoboxnotealso" id="GUID-7AA9622B-83BD-4607-B928-E822C0047CA5__GUID-426D83B1-6BAC-41E5-8BBB-E497FBB34650">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="how-oracle-streams-works-with-other-database-components.html#GUID-8F1577E3-E3BB-455D-BB36-C8F8635BF494">Apply Processes and Oracle Real Application Clusters</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-oracle-streams-information-consumption.html#GUID-99793C11-1703-4A3A-BA60-80F91E5E4448">Starting an Apply Process</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="how-oracle-streams-works-with-other-database-components.html#GUID-9060FEE1-EBE2-4A9A-956D-4C83EE226997">Queues and Oracle Real Application Clusters</a>"</span> for information about primary and secondary instance ownership for queues
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>