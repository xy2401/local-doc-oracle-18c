<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Using Oracle Streams to Record Table Changes</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="streams-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-01-25T21:40:57-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83781-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="managing-rule-based-transformations.html" title="Previous" type="text/html">
      <link rel="next" href="other-oracle-streams-management-tasks.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Streams Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="STRMS">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-rule-based-transformations.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="other-oracle-streams-management-tasks.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-streams-administration.html" property="item" typeof="WebPage"><span property="name">    Oracle Streams Administration </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Using Oracle Streams to Record Table Changes</li>
            </ol>
            <a id="GUID-FC8D54BA-D861-455A-AB5C-DED756F4333B" name="GUID-FC8D54BA-D861-455A-AB5C-DED756F4333B"></a><a id="STRMS1519"></a>
            
            <h2 id="STRMS-GUID-FC8D54BA-D861-455A-AB5C-DED756F4333B" class="sect2"><span class="enumeration_chapter">20 </span> Using Oracle Streams to Record Table Changes
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d90840e125" class="indexterm-anchor"></a><a id="d90840e127" class="indexterm-anchor"></a><a id="d90840e131" class="indexterm-anchor"></a>This chapter describes using Oracle Streams to record data manipulation language (DML) changes made to tables.
               </p>
               <p>This chapter contains these topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-43E350E2-CECA-48A7-80FD-0013F0E5E67D">About Using Oracle Streams to Record Changes to Tables</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-E1838CDC-BBB6-4854-BDD0-D94C4890A40D">Preparing for an Oracle Streams Environment That Records Table Changes</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-FA749520-3E44-4038-9786-981957B37471">Configuring an Oracle Streams Environment That Records Table Changes</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-882B2D7F-DA27-485E-A2B2-5E6BC1B117BF">Managing an Oracle Streams Environment That Records Table Changes</a></p>
                  </li>
                  <li>
                     <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-4B23B590-2F75-4BCF-9C7D-4C4598B00DC8">Monitoring an Oracle Streams Environment That Records Table Changes</a></p>
                  </li>
               </ul>
            </div><a id="STRMS1520"></a><div class="props_rev_3"><a id="GUID-43E350E2-CECA-48A7-80FD-0013F0E5E67D" name="GUID-43E350E2-CECA-48A7-80FD-0013F0E5E67D"></a><h3 id="STRMS-GUID-43E350E2-CECA-48A7-80FD-0013F0E5E67D" class="sect3"><span class="enumeration_section">20.1 </span>About Using Oracle Streams to Record Changes to Tables
               </h3>
               <div>
                  <p>Oracle Streams can record information about the changes made to database tables, including information about inserts, updates, and deletes. The table for which changes are recorded is called the <span class="bold">source table</span>, and the information about the recorded changes is stored in another table called the <span class="bold">change table</span>. Also, the database that contains the source table is called the <span class="bold">source database</span>, while the database that contains the change table is called the <span class="bold">destination database</span>. The destination database can be the same database as the source database, or it can be a different database.
                  </p>
                  <p>The recorded information describes the data that was changed in each row because of a DML operation, and metadata about each change. Typically, data warehouse environments record information about table changes, but other types of environments might track table changes as well.</p>
                  <p>To record table changes in a change table, an Oracle Stream apply process uses a change handler. A <span class="bold">change handler</span> is a special type of <a href="strms_glossary.html#GUID-97540303-85CC-46DF-9237-AFDEFB57D400"><span class="xrefglossterm">statement DML handler</span></a> that tracks table changes and was created by either the <code class="codeph">DBMS_STREAMS_ADM.MAINTAIN_CHANGE_TABLE</code> procedure or the <code class="codeph">DBMS_APPLY_ADM.SET_CHANGE_HANDLER</code> procedure. This chapter describes using these procedures to create and manage change handlers. Information about change handlers is stored in the <code class="codeph">ALL_APPLY_CHANGE_HANDLERS</code> and <code class="codeph">DBA_APPLY_CHANGE_HANDLERS</code> views.
                  </p>
                  <div class="infoboxnote" id="GUID-43E350E2-CECA-48A7-80FD-0013F0E5E67D__GUID-3AC23EE9-E440-4C5D-828E-D31C4F32FEF9">
                     <p class="notep1">Note:</p>
                     <p>It is possible to create a statement DML handler that tracks table changes without using the change handler procedures. Such statement DML handlers are not technically considered change handlers, and information about them is not stored in the <code class="codeph">ALL_APPLY_CHANGE_HANDLERS</code> and <code class="codeph">DBA_APPLY_CHANGE_HANDLERS</code> views.
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-43E350E2-CECA-48A7-80FD-0013F0E5E67D__GUID-C263F0B3-FC04-48E2-B704-3039C101A899">
                     <p class="notep1">See Also:</p>
                     <p></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="oracle-streams-information-consumption.html#GUID-B0A12CDB-8207-4AA5-8093-A0EA0FCF9C22">Statement DML Handlers</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="managing-oracle-streams-information-consumption.html#GUID-52FFD329-6D03-4389-A7B2-F00088248092">Managing a Statement DML Handler</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="monitoring-oracle-streams-apply-processes.html#GUID-9365EAA5-67EF-4095-B70B-3D52100F6977">Displaying Information About Statement DML Handlers</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=ARPLS72443"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="STRMS1521"></a><div class="props_rev_3"><a id="GUID-E1838CDC-BBB6-4854-BDD0-D94C4890A40D" name="GUID-E1838CDC-BBB6-4854-BDD0-D94C4890A40D"></a><h3 id="STRMS-GUID-E1838CDC-BBB6-4854-BDD0-D94C4890A40D" class="sect3"><span class="enumeration_section">20.2 </span>Preparing for an Oracle Streams Environment That Records Table Changes
               </h3>
               <div>
                  <p>The <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package can configure an Oracle Streams environment that records changes to a source table. This procedure configures all of the required Oracle Streams components. This procedure also enables you to identify the metadata to record for each change. For example, you can choose to record the username of the user who made the change and the time when the change was made, as well as many other types of metadata.
                  </p>
                  <p>Before you use the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure to configure an Oracle Stream environment that records the changes to a table, you have decisions to make and prerequisites to complete.
                  </p>
                  <p>The following sections describe the decisions and prerequisites for the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-21372FFB-D876-428B-980C-F3F57A4680E8">Decisions to Make Before Running the MAINTAIN_CHANGE_TABLE Procedure</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-1A4A130C-EB9A-4CFB-B17C-58FC410633FF">Prerequisites for the MAINTAIN_CHANGE _TABLE Procedure</a></p>
                     </li>
                  </ul>
               </div><a id="STRMS1522"></a><div class="props_rev_3"><a id="GUID-21372FFB-D876-428B-980C-F3F57A4680E8" name="GUID-21372FFB-D876-428B-980C-F3F57A4680E8"></a><h4 id="STRMS-GUID-21372FFB-D876-428B-980C-F3F57A4680E8" class="sect4"><span class="enumeration_section">20.2.1 </span>Decisions to Make Before Running the MAINTAIN_CHANGE_TABLE Procedure
                  </h4>
                  <div>
                     <p>The following sections describe the decisions to make before running the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB">Decide Which Type of Environment to Configure</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-81796914-7858-4126-8C52-FE18B40484E9">Decide Which Columns to Track</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49">Decide Which Metadata to Record</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-8F55224C-C45C-4543-8EF8-D1500D0DEFFD">Decide Which Values to Track for Update Operations</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19">Decide Whether to Configure a KEEP_COLUMNS Transformation</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-122AEFEC-0431-4868-B8A3-FCFC1E730DCA">Decide Whether to Specify CREATE TABLE Options for the Change Table</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-2ACF45A2-BA03-4B7E-BB63-B569168C814B">Decide Whether to Perform the Configuration Actions Directly or with a Script</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-5EFDF85C-9009-40C9-9314-60021274DCCA">Decide Whether to Replicate the Source Table</a></p>
                        </li>
                     </ul>
                  </div><a id="STRMS1524"></a><a id="STRMS1523"></a><div class="props_rev_3"><a id="GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB" name="GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB"></a><h5 id="STRMS-GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB" class="sect5"><span class="enumeration_section">20.2.1.1 </span>Decide Which Type of Environment to Configure
                     </h5>
                     <div>
                        <p>An Oracle Streams environment that records table changes has the following components:</p>
                        <ol>
                           <li>
                              <p>A <a href="strms_glossary.html#GUID-7E24C191-B4E0-45F2-A55B-9F76D4F9E8B0"><span class="xrefglossterm">capture process</span></a> captures information about changes to the source table from the redo log. The capture process encapsulates the information for each row change in a <a href="strms_glossary.html#GUID-AE0440A4-BB98-4135-8EB5-FB933D1E51CC"><span class="xrefglossterm">row logical change record (row LCR)</span></a>. The database where the changes originated is called the source database. The database that contains the capture process is called the capture database.
                              </p>
                           </li>
                           <li>
                              <p>If the source table and change table are on different databases, then a <a href="strms_glossary.html#GUID-13E35632-96B9-4A58-8990-EF95ECE9746E"><span class="xrefglossterm">propagation</span></a> sends the captured row LCRs to the database that contains the change table. The propagation is not needed if the source table and change table are in the same database.
                              </p>
                           </li>
                           <li>
                              <p>An <a href="strms_glossary.html#GUID-8FCB69CE-7655-4991-B988-0373A0A20085"><span class="xrefglossterm">apply process</span></a> records the information in the change table. The apply process uses <a href="strms_glossary.html#GUID-97540303-85CC-46DF-9237-AFDEFB57D400"><span class="xrefglossterm">statement DML handler</span></a>s to insert the information in the row LCRs into the change table.
                              </p>
                           </li>
                        </ol>
                        <p>You can configure these components in the following ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Local capture and apply on one database:</span> The source table, capture process, apply process, and change table are all in the same database. This option is the easiest to configure and maintain because all of the components are contained in one database.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Local capture and remote apply:</span> The source table and capture process are in one database, and the apply process and change table are in another database. A propagation sends row LCRs from the source database to the destination database. This option is best when you want easy configuration and maintenance and when the source table and change table must reside in different databases.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Downstream capture and local apply:</span> The source table is in one database, and the capture process, apply process, and change table are in another database. This option is best when you want to optimize the performance of the database with the source table and want to offload change capture to another database. With this option, most of the components run on the database with the change table.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Downstream capture and remote apply:</span> The source table is in one database, the apply process and change table are in another database, and the capture process is in a third database. This option is best when you want to optimize the performance of both the database with the source table and the database with the change table. With this option, the capture process runs on a third database, and a propagation sends row LCRs from the capture database to the destination database.
                              </p>
                           </li>
                        </ul>
                        <p>The capture database is always the database on which the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure is run. <a href="using-oracle-streams-to-record-table-changes.html#GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB__CHDEEFBD" title="This table describes each type of environment that records table changes and where to run the MAINTAIN_CHANGE_TABLE procedure to configure the environment.">Table 20-1</a> describes where to run the procedure to configure each type of environment.
                        </p>
                        <div class="tblformalwide" id="GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB__CHDEEFBD">
                           <p class="titleintable">Table 20-1 Configuration Options for MAINTAIN_CHANGE_TABLE</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Configuration Options for MAINTAIN_CHANGE_TABLE" summary="This table describes each type of environment that records table changes and where to run the MAINTAIN_CHANGE_TABLE procedure to configure the environment." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="39%" id="d90840e924">Type of Environment</th>
                                    <th align="left" valign="bottom" width="61%" id="d90840e927">Where to Run MAINTAIN_CHANGE_TABLE</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d90840e932" headers="d90840e924 ">
                                       <p>Local capture and apply on one database</p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d90840e932 d90840e927 ">
                                       <p>On the source database that contains the source table</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d90840e939" headers="d90840e924 ">
                                       <p>Local capture and remote apply</p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d90840e939 d90840e927 ">
                                       <p>On the source database that contains the source table</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d90840e946" headers="d90840e924 ">
                                       <p>Downstream capture and local apply</p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d90840e946 d90840e927 ">
                                       <p>On the destination database that does not contain the source table but will contain the change table</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="39%" id="d90840e953" headers="d90840e924 ">
                                       <p>Downstream capture and remote apply</p>
                                    </td>
                                    <td align="left" valign="top" width="61%" headers="d90840e953 d90840e927 ">
                                       <p>On a third database that does not contain the source table and will not contain the change table</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>Additional requirements must be met to configure downstream capture. See <span class="q">"<a href="oracle-streams-information-capture.html#GUID-9419FADC-A4D8-44EE-9201-F14C52938E37">Operational Requirements for Downstream Capture</a>"</span> for information.
                        </p>
                        <p>If you decide to configure a downstream capture process, then you must decide which type of downstream capture process you want to configure. The following types are available:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A <span class="bold">real-time downstream capture process</span> configuration means that redo transport services at the source database sends redo data to the downstream database, and a remote file server process (RFS) at the downstream database receives the redo data over the network and stores the redo data in the standby redo log.
                              </p>
                           </li>
                           <li>
                              <p>An <span class="bold">archived-log downstream capture process</span> configuration means that archived redo log files from the source database are copied to the downstream database, and the capture process captures changes in these archived redo log files. These log files can be transferred automatically using redo transport services, or they can be transferred manually using a method such as FTP.
                              </p>
                           </li>
                        </ul>
                        <p>The advantage of real-time downstream capture over archived-log downstream capture is that real-time downstream capture reduces the amount of time required to capture changes made at the source database. The time is reduced because the real-time downstream capture process does not need to wait for the redo log file to be archived before it can capture changes from it. You can configure more than one real-time downstream capture process that captures changes from the same source database, but you cannot configure real-time downstream capture for multiple source databases at one downstream database.</p>
                        <p>The advantage of archived-log downstream capture over real-time downstream capture is that archived-log downstream capture allows downstream capture processes for multiple source databases at a downstream database. You can copy redo log files from multiple source databases to a single downstream database and configure multiple archived-log downstream capture processes to capture changes in these redo log files.</p>
                        <div class="infoboxnotealso" id="GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB__GUID-93380AEF-51DB-44B3-9ECD-4DE8C6F9F5CF">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="oracle-streams-information-capture.html#GUID-84DD3325-51A9-46D7-8BE0-81E48893DFAB">Implicit Capture with an Oracle Streams Capture Process</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="oracle-streams-staging-and-propagation.html#GUID-4DDA26DF-0603-4461-8311-B7C73FCDF36F"> Oracle Streams Staging and Propagation</a></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-streams-information-consumption.html#GUID-40F2B660-C0DA-4DE4-BBC6-D8C47BE535ED">Implicit Consumption with an Apply Process</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-streams-information-consumption.html#GUID-B0A12CDB-8207-4AA5-8093-A0EA0FCF9C22">Statement DML Handlers</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS1525"></a><div class="props_rev_3"><a id="GUID-81796914-7858-4126-8C52-FE18B40484E9" name="GUID-81796914-7858-4126-8C52-FE18B40484E9"></a><h5 id="STRMS-GUID-81796914-7858-4126-8C52-FE18B40484E9" class="sect5"><span class="enumeration_section">20.2.1.2 </span>Decide Which Columns to Track
                     </h5>
                     <div>
                        <p>The <code class="codeph">column_type_list</code> parameter in the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure enables you to specify which columns to track in the change table. The Oracle Streams environment records changes for the listed columns only. To track all of the columns in the table, list all of the columns in this parameter. To track a subset of columns, list the columns to track. In the <code class="codeph">column_type_list</code> parameter, you can specify the data type of the column and any valid column properties, such as inline constraint specifications.
                        </p>
                        <p>You might choose to omit columns from the list for various reasons. For example, some columns might contain sensitive information, such as salary data, that you do not want to populate in the change table. Or, the table might contain hundreds of columns, and you might be interested in tracking only a small number of them.</p>
                     </div>
                  </div><a id="STRMS1526"></a><div class="props_rev_3"><a id="GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49" name="GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49"></a><h5 id="STRMS-GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49" class="sect5"><span class="enumeration_section">20.2.1.3 </span>Decide Which Metadata to Record
                     </h5>
                     <div>
                        <p>The <code class="codeph">extra_column_list</code> parameter in the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure enables you to specify which metadata to record in the change table. The following types of metadata can be listed in this parameter:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">value_type</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">source_database_name</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">command_type</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">object_owner</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">object_name</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">tag</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">transaction_id</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">scn</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">commit_scn</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">commit_time</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">position</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">compatible</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">instance_number</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">message_number</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">row_text</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">row_id</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">serial#</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">session#</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">source_time</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">thread#</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">tx_name</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">username</code></p>
                           </li>
                        </ul>
                        <p>In the change table, a dollar sign ($) is appended to the column name for each metadata attribute. For example, the metadata for the <code class="codeph">command_type</code> attribute is stored in the <code class="codeph">command_type$</code> column in the change table.
                        </p>
                        <p>All of these metadata attributes, except for <code class="codeph">value_type</code> and <code class="codeph">message_number</code>, are row LCR attributes that can be stored in row LCRs.
                        </p>
                        <p>The <code class="codeph">value_type$</code> column in the change table contains either <code class="codeph">OLD</code> or <code class="codeph">NEW</code>, depending on whether the column value is the original column value or the new column value, respectively.
                        </p>
                        <p>The <code class="codeph">message_number$</code> column in the change table contains the identification number of each row LCR within a transaction. The message number increases incrementally for each row LCR within a transaction and shows the order of the row LCRs within a transaction.
                        </p>
                        <div class="infoboxnote" id="GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49__GUID-8D18D853-8AC6-4CF2-86DC-D49BAD297377">
                           <p class="notep1">Note:</p>
                           <p>LCR position is commonly used in XStream configurations.</p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49__GUID-C26FCB17-220E-43E9-80B4-F66DD1FB59D8">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="oracle-streams-information-capture.html#GUID-326872EA-5C68-4BDA-B0A3-4E191A8E726C">Row LCRs</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-streams-information-capture.html#GUID-7CAA1711-DC69-469A-A54B-30629C3FCE2F">Extra Information in LCRs</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../xstrm/general-xstream-concepts.html#XSTRM1101"><span class="italic">Oracle Database XStream Guide</span></a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS1527"></a><div class="props_rev_3"><a id="GUID-8F55224C-C45C-4543-8EF8-D1500D0DEFFD" name="GUID-8F55224C-C45C-4543-8EF8-D1500D0DEFFD"></a><h5 id="STRMS-GUID-8F55224C-C45C-4543-8EF8-D1500D0DEFFD" class="sect5"><span class="enumeration_section">20.2.1.4 </span>Decide Which Values to Track for Update Operations
                     </h5>
                     <div>
                        <p>The <code class="codeph">capture_values</code> parameter in the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure enables you to specify the values to record in the change table for update operations on the source table. When an update operation is performed on a row, the old value for each column is the value before the update operation and the new value is the value after the update operation. You can choose to record old values, new values, or both old and new values.
                        </p>
                     </div>
                  </div><a id="STRMS1528"></a><div class="props_rev_3"><a id="GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19" name="GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19"></a><h5 id="STRMS-GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19" class="sect5"><span class="enumeration_section">20.2.1.5 </span>Decide Whether to Configure a KEEP_COLUMNS Transformation
                     </h5>
                     <div>
                        <p>The <code class="codeph">keep_change_columns_only</code> parameter in the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure enables you to specify whether to configure a <code class="codeph">KEEP_COLUMNS</code> declarative rule-based transformation. The <code class="codeph">KEEP_COLUMNS</code> declarative rule-based transformation keeps the list of columns specified in the <code class="codeph">column_type_list</code> parameter in a row LCR. The transformation removes columns that are not in the list from the row LCR.
                        </p>
                        <p>For example, suppose a table has ten columns, but only three of these columns need to be tracked in a change table. In this case, it is usually more efficient to configure one <code class="codeph">KEEP_COLUMNS</code> declarative rule-based transformation that keeps the three columns that must be tracked than to configure seven <code class="codeph">DELETE_COLUMN</code> declarative rule-based transformations that remove the seven columns that should not be tracked.
                        </p>
                        <p>The <code class="codeph">keep_change_columns_only</code> parameter is relevant only if you specify a subset of the table columns in the <code class="codeph">column_type_list</code> parameter. In this case, you might choose to configure the transformation to reduce the amount of information sent over the network or to eliminate sensitive information from row LCRs.
                        </p>
                        <p>Set the <code class="codeph">keep_change_columns_only</code> parameter to <code class="codeph">FALSE</code> when information about columns that are not included in the <code class="codeph">column_type_list</code> parameter is needed at the destination database. For example, if the <code class="codeph">execute_lcr</code> parameter is set to <code class="codeph">TRUE</code> and the configuration will replicate all of the columns in a source table, but the <code class="codeph">column_type_list</code> parameter includes a subset of these columns, then set the <code class="codeph">keep_change_columns_only</code> parameter to <code class="codeph">FALSE</code>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19__GUID-028B9A33-B4AA-49E0-8916-D01F7EE3BE55">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="rule-based-transformations.html#GUID-706DC628-4237-41A2-86CA-C9BCCA984052">Declarative Rule-Based Transformations</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-81796914-7858-4126-8C52-FE18B40484E9">Decide Which Columns to Track</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-5EFDF85C-9009-40C9-9314-60021274DCCA">Decide Whether to Replicate the Source Table</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS1529"></a><div class="props_rev_3"><a id="GUID-122AEFEC-0431-4868-B8A3-FCFC1E730DCA" name="GUID-122AEFEC-0431-4868-B8A3-FCFC1E730DCA"></a><h5 id="STRMS-GUID-122AEFEC-0431-4868-B8A3-FCFC1E730DCA" class="sect5"><span class="enumeration_section">20.2.1.6 </span>Decide Whether to Specify CREATE TABLE Options for the Change Table
                     </h5>
                     <div>
                        <p>The <code class="codeph">options_string</code> parameter in the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure enables you to append a string of options to the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement that creates the change table. The string is appended to the generated <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement after the closing parenthesis that defines the columns of the table. The string must be syntactically correct. For example, you can specify a <code class="codeph">TABLESPACE</code> clause to store the table in a specific tablespace. You can also partition the change table. The advantage of partitioning a change table is that you can truncate a partition using the <code class="codeph">TRUNCATE</code> <code class="codeph">PARTITION</code> clause of an <code class="codeph">ALTER</code> <code class="codeph">TABLE</code> statement instead of deleting rows with a <code class="codeph">DELETE</code> statement.
                        </p>
                        <div class="infoboxnotealso" id="GUID-122AEFEC-0431-4868-B8A3-FCFC1E730DCA__GUID-2C68D9D7-2D30-4F6B-AEE4-B517F4BC4674">
                           <p class="notep1">See Also:</p>
                           <p><a href="../sqlrf/CREATE-TABLE.html#SQLRF01402"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> options
                           </p>
                        </div>
                     </div>
                  </div><a id="STRMS1530"></a><div class="props_rev_3"><a id="GUID-2ACF45A2-BA03-4B7E-BB63-B569168C814B" name="GUID-2ACF45A2-BA03-4B7E-BB63-B569168C814B"></a><h5 id="STRMS-GUID-2ACF45A2-BA03-4B7E-BB63-B569168C814B" class="sect5"><span class="enumeration_section">20.2.1.7 </span>Decide Whether to Perform the Configuration Actions Directly or with a Script
                     </h5>
                     <div>
                        <p>The <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure can configure the Oracle Streams environment directly, or it can generate a script that configures the environment. Using the procedure to configure directly is simpler than running a script, and the environment is configured immediately. However, you might choose to generate a script for the following reasons:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You want to review the actions performed by the procedure before configuring the environment.</p>
                           </li>
                           <li>
                              <p>You want to modify the script to customize the configuration.</p>
                           </li>
                        </ul>
                        <p>For example, you might want an apply process to use apply handlers for customized processing of the changes before applying these changes. In this case, you can use the procedure to generate a script and modify the script to add the apply handlers.</p>
                        <p>The <code class="codeph">perform_actions</code> parameter controls whether the procedure configures the environment directly:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To configure the environment directly when you run the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure, set the <code class="codeph">perform_actions</code> parameter to <code class="codeph">TRUE</code>. The default value for this parameter is <code class="codeph">TRUE</code>.
                              </p>
                           </li>
                           <li>
                              <p>To generate a configuration script when you run the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure, set the <code class="codeph">perform_actions</code> parameter to <code class="codeph">FALSE</code>, and use the <code class="codeph">script_name</code> and <code class="codeph">script_directory_object</code> parameters to specify the name and location of the configuration script.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="STRMS1531"></a><div class="props_rev_3"><a id="GUID-5EFDF85C-9009-40C9-9314-60021274DCCA" name="GUID-5EFDF85C-9009-40C9-9314-60021274DCCA"></a><h5 id="STRMS-GUID-5EFDF85C-9009-40C9-9314-60021274DCCA" class="sect5"><span class="enumeration_section">20.2.1.8 </span>Decide Whether to Replicate the Source Table
                     </h5>
                     <div>
                        <p>In addition to a change table, some environments require that the source table is replicated at the destination database. In this case, the source table is on a different database than the change table, and an additional replica of the source table is in the same database as the change table.</p>
                        <p>For example, consider an Oracle Streams environment that records the changes made the <code class="codeph">hr.employees</code> table. Assume that the change table is named <code class="codeph">hr.emp_change_table</code> and that the source table and the change table are on different databases. In this case, the following tables are involved in an Oracle Streams environment that records changes to the <code class="codeph">hr.employees</code> table.
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">hr.employees</code> table in database 1
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">hr.emp_change_table</code> in database 2
                              </p>
                           </li>
                        </ul>
                        <p>The apply process at the destination database has a separate change handler that records changes for each type of operation (insert, update, and delete).</p>
                        <p>If the Oracle Streams environment also replicates the <code class="codeph">hr.employees</code> table at database 2, then the following tables are involved:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">hr.employees</code> table in database 1
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">hr.employees</code> table (replica) in database 2
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">hr.emp_change_table</code> in database 2
                              </p>
                           </li>
                        </ul>
                        <p>In an environment that replicates the table in addition to recording its changes, an additional change handler is added to the apply process at the destination database for each type of operation (insert, update, and delete). These change handlers execute the row LCRs to apply their changes to the replicated table.</p>
                        <p>The <code class="codeph">execute_lcr</code> parameter controls whether the procedure configures replication of the source table:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To configure an Oracle Streams environment that replicates the source table, set the <code class="codeph">execute_lcr</code> parameter to <code class="codeph">TRUE</code>.
                              </p>
                           </li>
                           <li>
                              <p>To configure an Oracle Streams environment that does not replicate the source table, set the <code class="codeph">execute_lcr</code> parameter to <code class="codeph">FALSE</code>. The default value for this parameter is <code class="codeph">FALSE</code>.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-5EFDF85C-9009-40C9-9314-60021274DCCA__GUID-90CA5246-33B5-46A2-A21D-84377E5F92E9">
                           <p class="notep1">Note:</p>
                           <p>When the <code class="codeph">keep_change_columns_only</code> parameter is set to <code class="codeph">TRUE</code> and the <code class="codeph">column_list</code> parameter includes a subset of the columns in the source table, the <code class="codeph">execute_lcr</code> parameter must be set to <code class="codeph">FALSE</code>. Apply errors will result if the row LCRs do not contain the column values required to replicate changes.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-5EFDF85C-9009-40C9-9314-60021274DCCA__GUID-4D19DA0E-1B58-4B96-813B-8D01AA962696">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19">Decide Whether to Configure a KEEP_COLUMNS Transformation</a>"</span></p>
                        </div>
                     </div>
                  </div>
               </div><a id="STRMS1532"></a><div class="props_rev_3"><a id="GUID-1A4A130C-EB9A-4CFB-B17C-58FC410633FF" name="GUID-1A4A130C-EB9A-4CFB-B17C-58FC410633FF"></a><h4 id="STRMS-GUID-1A4A130C-EB9A-4CFB-B17C-58FC410633FF" class="sect4"><span class="enumeration_section">20.2.2 </span>Prerequisites for the MAINTAIN_CHANGE _TABLE Procedure
                  </h4>
                  <div>
                     <p>The <code class="codeph">DBMS_STREAMS_ADM</code> package includes procedures that configure replication environments, such as <code class="codeph">MAINTAIN_GLOBAL</code>, <code class="codeph">MAINTAIN_SCHEMAS</code>, and <code class="codeph">MAINTAIN_TABLES</code>. Using the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure is similar to using these other procedures, and many of the prerequisites are the same.
                     </p>
                     <p>The following sections describe the prerequisites to complete before running the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-5DE841D7-F4C2-4A6C-9F04-2BEC7543E174">Configure an Oracle Streams Administrator on All Databases</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-00020DA1-CD12-4A94-A0B1-67363FA42F13">Configure Network Connectivity and Database Links</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-36F3BD35-BA62-4BF1-A81D-C701D8280156">Ensure That the Source Database Is in ARCHIVELOG Mode</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-DB446A71-FEC3-42C9-A2CF-A2EE2FD540CA">Set Initialization Parameters That Are Relevant to Oracle Streams</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-FC856755-5AAC-45AE-BA5F-6360A49C51CD">Configure the Oracle Streams Pool</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-8F38A7D6-CCA4-417D-8D4F-6B8938374C1F">Configure Log File Transfer to a Downstream Capture Database</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-1CB670D8-057B-4893-BFCC-021C2C681AC4">Configure Standby Redo Logs for Real-Time Downstream Capture</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-5F0655FE-5994-4D74-AC72-9E9D8852F04F">Configure the Required Directory Object If You Are Using a Script</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-62179F38-70AB-41ED-8AE9-1B0C291C1791">Instantiate the Source Table at the Destination Database</a></p>
                        </li>
                     </ul>
                     <p>Many of these prerequisites are described in detail in <a href="../strep/preparing-for-oracle-streams-replication.html#STREP232"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a>.
                     </p>
                  </div><a id="STRMS1533"></a><div class="props_rev_3"><a id="GUID-5DE841D7-F4C2-4A6C-9F04-2BEC7543E174" name="GUID-5DE841D7-F4C2-4A6C-9F04-2BEC7543E174"></a><h5 id="STRMS-GUID-5DE841D7-F4C2-4A6C-9F04-2BEC7543E174" class="sect5"><span class="enumeration_section">20.2.2.1 </span>Configure an Oracle Streams Administrator on All Databases
                     </h5>
                     <div>
                        <p>Each database in the environment must have an Oracle Streams administrator to configure and manage the Oracle Streams components. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=STREP200"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information.
                        </p>
                     </div>
                  </div><a id="STRMS1534"></a><div class="props_rev_3"><a id="GUID-00020DA1-CD12-4A94-A0B1-67363FA42F13" name="GUID-00020DA1-CD12-4A94-A0B1-67363FA42F13"></a><h5 id="STRMS-GUID-00020DA1-CD12-4A94-A0B1-67363FA42F13" class="sect5"><span class="enumeration_section">20.2.2.2 </span>Configure Network Connectivity and Database Links
                     </h5>
                     <div>
                        <p>Depending on the type of Oracle Streams environment you plan to configure, network connectivity and one or more database links might be required. If the environment will include more than one database, then network connectivity between the databases in the environment is required.</p>
                        <p>The following database links are required for each type of Oracle Streams environment:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Local capture and apply on one database:</span> No database links are required.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Local capture and remote apply:</span> A database link from the source database to the destination database is required.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Downstream capture and local apply:</span> The following database links are required:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>A database link from the source database to the destination database</p>
                                 </li>
                                 <li>
                                    <p>A database link from the destination database to the source database</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p><span class="bold">Downstream capture and remote apply:</span> The following database links are required:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>A database link from the source database to the destination database</p>
                                 </li>
                                 <li>
                                    <p>A database link from the source database to the capture database</p>
                                 </li>
                                 <li>
                                    <p>A database link from the capture database to the source database</p>
                                 </li>
                                 <li>
                                    <p>A database link from the capture database to the destination database</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>See <a href="../strep/preparing-for-oracle-streams-replication.html#STREP203"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information.
                        </p>
                     </div>
                  </div><a id="STRMS1535"></a><div class="props_rev_3"><a id="GUID-36F3BD35-BA62-4BF1-A81D-C701D8280156" name="GUID-36F3BD35-BA62-4BF1-A81D-C701D8280156"></a><h5 id="STRMS-GUID-36F3BD35-BA62-4BF1-A81D-C701D8280156" class="sect5"><span class="enumeration_section">20.2.2.3 </span>Ensure That the Source Database Is in ARCHIVELOG Mode
                     </h5>
                     <div>
                        <p>The source database that contains the source table must be in <code class="codeph">ARCHIVELOG</code> mode because an Oracle Streams capture process scans the redo log to capture changes. If you plan to configure a downstream capture process, then the capture database also must be in <code class="codeph">ARCHIVELOG</code> mode. See <a href="../admin/managing-archived-redo-log-files.html#ADMIN008"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information.
                        </p>
                     </div>
                  </div><a id="STRMS1536"></a><div class="props_rev_3"><a id="GUID-DB446A71-FEC3-42C9-A2CF-A2EE2FD540CA" name="GUID-DB446A71-FEC3-42C9-A2CF-A2EE2FD540CA"></a><h5 id="STRMS-GUID-DB446A71-FEC3-42C9-A2CF-A2EE2FD540CA" class="sect5"><span class="enumeration_section">20.2.2.4 </span>Set Initialization Parameters That Are Relevant to Oracle Streams
                     </h5>
                     <div>
                        <p>Some initialization parameters are important for the configuration, operation, reliability, and performance of an Oracle Streams environment. Set these parameters appropriately for your Oracle Streams environment. See <a href="../strep/preparing-for-oracle-streams-replication.html#STREP201"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information.
                        </p>
                     </div>
                  </div><a id="STRMS1537"></a><div class="props_rev_3"><a id="GUID-FC856755-5AAC-45AE-BA5F-6360A49C51CD" name="GUID-FC856755-5AAC-45AE-BA5F-6360A49C51CD"></a><h5 id="STRMS-GUID-FC856755-5AAC-45AE-BA5F-6360A49C51CD" class="sect5"><span class="enumeration_section">20.2.2.5 </span>Configure the Oracle Streams Pool
                     </h5>
                     <div>
                        <p>The Oracle Streams pool is a portion of memory in the System Global Area (SGA) that is used by Oracle Streams. Configure your database memory so that there is enough space available in the Oracle Streams pool. See <a href="../strep/preparing-for-oracle-streams-replication.html#STREP202"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information.
                        </p>
                     </div>
                  </div><a id="STRMS1538"></a><div class="props_rev_3"><a id="GUID-8F38A7D6-CCA4-417D-8D4F-6B8938374C1F" name="GUID-8F38A7D6-CCA4-417D-8D4F-6B8938374C1F"></a><h5 id="STRMS-GUID-8F38A7D6-CCA4-417D-8D4F-6B8938374C1F" class="sect5"><span class="enumeration_section">20.2.2.6 </span>Configure Log File Transfer to a Downstream Capture Database
                     </h5>
                     <div>
                        <p>If you decided to use a local capture process at the source database, then log file transfer is not required. However, if you decided to use downstream capture that uses redo transport services to transfer archived redo log files to the downstream database automatically, then configure log file transfer from the source database to the capture database before configuring the Oracle Streams environment. See <a href="../strep/preparing-for-oracle-streams-replication.html#STREP211"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information.
                        </p>
                        <div class="infoboxnotealso" id="GUID-8F38A7D6-CCA4-417D-8D4F-6B8938374C1F__GUID-E949BF42-795E-471E-8F0C-613CBC408417">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB">Decide Which Type of Environment to Configure</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="STRMS1539"></a><div class="props_rev_3"><a id="GUID-1CB670D8-057B-4893-BFCC-021C2C681AC4" name="GUID-1CB670D8-057B-4893-BFCC-021C2C681AC4"></a><h5 id="STRMS-GUID-1CB670D8-057B-4893-BFCC-021C2C681AC4" class="sect5"><span class="enumeration_section">20.2.2.7 </span>Configure Standby Redo Logs for Real-Time Downstream Capture
                     </h5>
                     <div>
                        <p>If you decided to use a real-time downstream capture process, then you must configure standby redo logs at the capture database. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=STREP251"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information.
                        </p>
                        <div class="infoboxnotealso" id="GUID-1CB670D8-057B-4893-BFCC-021C2C681AC4__GUID-553FC1B4-B33B-4ECA-BB49-804094F5BF17">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB">Decide Which Type of Environment to Configure</a>"</span></p>
                        </div>
                     </div>
                  </div><a id="STRMS1540"></a><div class="props_rev_3"><a id="GUID-5F0655FE-5994-4D74-AC72-9E9D8852F04F" name="GUID-5F0655FE-5994-4D74-AC72-9E9D8852F04F"></a><h5 id="STRMS-GUID-5F0655FE-5994-4D74-AC72-9E9D8852F04F" class="sect5"><span class="enumeration_section">20.2.2.8 </span>Configure the Required Directory Object If You Are Using a Script
                     </h5>
                     <div>
                        <p>If you decided to generate a script with the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure and configure the Oracle Streams environment with the script, then create the directory object that will store the script in the capture database. The capture database is the database on which you will run the procedure. This directory object is not required if you are not generating a script.
                        </p>
                        <p>A directory object is similar to an alias for a directory on a file system. Each directory object must be created using the SQL statement <code class="codeph">CREATE</code> <code class="codeph">DIRECTORY</code>, and the user who invokes the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure must have <code class="codeph">READ</code> and <code class="codeph">WRITE</code> privilege on the directory object.
                        </p>
                        <p>For example, the following statement creates a directory object named <code class="codeph">db_files_directory</code> that corresponds to the <code class="codeph">/usr/db_files</code> directory:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE DIRECTORY db_files_directory AS '/usr/db_files';
</pre><p>The user who creates the directory object automatically has <code class="codeph">READ</code> and <code class="codeph">WRITE</code> privilege on the directory object. When you are configuring an Oracle Streams replication environment, typically the Oracle Streams administrator creates the directory object.
                        </p>
                        <div class="infoboxnotealso" id="GUID-5F0655FE-5994-4D74-AC72-9E9D8852F04F__GUID-164082F4-B33E-4699-8847-B13947B3F13E">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-2ACF45A2-BA03-4B7E-BB63-B569168C814B">Decide Whether to Perform the Configuration Actions Directly or with a Script</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-5DE841D7-F4C2-4A6C-9F04-2BEC7543E174">Configure an Oracle Streams Administrator on All Databases</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="STRMS1541"></a><div class="props_rev_3"><a id="GUID-62179F38-70AB-41ED-8AE9-1B0C291C1791" name="GUID-62179F38-70AB-41ED-8AE9-1B0C291C1791"></a><h5 id="STRMS-GUID-62179F38-70AB-41ED-8AE9-1B0C291C1791" class="sect5"><span class="enumeration_section">20.2.2.9 </span>Instantiate the Source Table at the Destination Database
                     </h5>
                     <div>
                        <p>If you decided to replicate the source table, then instantiate the source table at the destination database. Instantiation is not required if you decided not to replicate the source table.</p>
                        <p>If instantiation is required because you decided to replicate the source table, then complete the following steps before running the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure:
                        </p>
                        <ol>
                           <li>
                              <p>Prepare the source table for instantiation.</p>
                           </li>
                           <li>
                              <p>Ensure that the source table and the replica table are consistent.</p>
                           </li>
                           <li>
                              <p>Set the instantiation SCN for the replica table at the destination database.</p>
                           </li>
                        </ol>
                        <div class="infoboxnotealso" id="GUID-62179F38-70AB-41ED-8AE9-1B0C291C1791__GUID-68360FD5-4DFF-4A08-AFB6-E3AFDE3761DE">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/strms&amp;id=STREP012"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for instantiation instructions
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-5EFDF85C-9009-40C9-9314-60021274DCCA">Decide Whether to Replicate the Source Table</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="STRMS1542"></a><div class="props_rev_3"><a id="GUID-FA749520-3E44-4038-9786-981957B37471" name="GUID-FA749520-3E44-4038-9786-981957B37471"></a><h3 id="STRMS-GUID-FA749520-3E44-4038-9786-981957B37471" class="sect3"><span class="enumeration_section">20.3 </span>Configuring an Oracle Streams Environment That Records Table Changes
               </h3>
               <div>
                  <p>This section uses examples to illustrate how to configure an Oracle Streams environment that records table changes. Specifically, this section illustrates the four types of Oracle Streams environments that record table changes.</p>
                  <p>This section includes the following examples:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B">Recording Table Changes Using Local Capture and Apply on One Database</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-E1544519-CC74-4D55-877B-BDA7A10BBCB0">Recording Table Changes Using Local Capture and Remote Apply with Replication</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-16927F05-1020-461F-BCFA-5E704413E52F">Recording Table Changes Using Downstream Capture and Local Apply</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-5A571AED-0DE2-41C8-BEC2-6ED7EEB01AD0">Recording Table Changes Using Downstream Capture and Remote Apply</a></p>
                     </li>
                  </ul>
               </div><a id="STRMS1627"></a><a id="STRMS1543"></a><div class="props_rev_3"><a id="GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B" name="GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B"></a><h4 id="STRMS-GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B" class="sect4"><span class="enumeration_section">20.3.1 </span>Recording Table Changes Using Local Capture and Apply on One Database
                  </h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates how to record the changes to a table using local capture and apply on one database. Specifically, this example records the changes made to the <code class="codeph">hr.jobs</code> table.
                        </p>
                        <p>The following table lists the decisions that were made about the Oracle Streams environment configured in this example.</p>
                        <div class="tblformalwide" id="GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B__GUID-B1FC711E-D0CA-41E9-9D51-9CC5358E63A2">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This table lists the decisions made about the example in this section." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="42%" id="d90840e4228">Decision</th>
                                    <th align="left" valign="bottom" width="58%" id="d90840e4231">Assumption for This Example</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4236" headers="d90840e4228 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB">Decide Which Type of Environment to Configure</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4236 d90840e4231 ">
                                       <p>This example configures local capture and apply on one database.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4245" headers="d90840e4228 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-81796914-7858-4126-8C52-FE18B40484E9">Decide Which Columns to Track</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4245 d90840e4231 ">
                                       <p>This example tracks all of the columns in the <code class="codeph">hr.jobs</code> table.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4257" headers="d90840e4228 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49">Decide Which Metadata to Record</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4257 d90840e4231 ">
                                       <p>This example records the <code class="codeph">command_type</code>, <code class="codeph">value_type</code> (<code class="codeph">OLD</code> or <code class="codeph">NEW</code>), and <code class="codeph">commit_scn</code> metadata.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4281" headers="d90840e4228 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-8F55224C-C45C-4543-8EF8-D1500D0DEFFD">Decide Which Values to Track for Update Operations</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4281 d90840e4231 ">
                                       <p>This example tracks both the old and new column values when an update is performed on the source table.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4290" headers="d90840e4228 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19">Decide Whether to Configure a KEEP_COLUMNS Transformation</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4290 d90840e4231 ">
                                       <p>This example does not configure a <code class="codeph">KEEP_COLUMNS</code> declarative rule-based transformation.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4302" headers="d90840e4228 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-122AEFEC-0431-4868-B8A3-FCFC1E730DCA">Decide Whether to Specify CREATE TABLE Options for the Change Table</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4302 d90840e4231 ">
                                       <p>This example does not specify any <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> options. The change table is created with the default <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> options.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4323" headers="d90840e4228 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-2ACF45A2-BA03-4B7E-BB63-B569168C814B">Decide Whether to Perform the Configuration Actions Directly or with a Script</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4323 d90840e4231 ">
                                       <p>This example performs the configuration actions directly. It does not use a script.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4332" headers="d90840e4228 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-5EFDF85C-9009-40C9-9314-60021274DCCA">Decide Whether to Replicate the Source Table</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4332 d90840e4231 ">
                                       <p>This example does not replicate the source table.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B__CHDFAHCI">Figure 20-1</a> provides an overview of the Oracle Stream environment created in this example.
                        </p>
                        <div class="figure" id="GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B__CHDFAHCI">
                           <p class="titleinfigure">Figure 20-1 Recording Changes Using Local Capture and Apply on One Database</p><img width="416" src="img/strms065.gif" alt="Description of Figure 20-1 follows" title="Description of Figure 20-1 follows" longdesc="img_text/strms065.html"><br><a href="img_text/strms065.html">Description of "Figure 20-1 Recording Changes Using Local Capture and Apply on One Database"</a></div>
                        <!-- class="figure" -->
                        <p>Complete the following steps to configure an Oracle Streams environment that records the changes to a table using local capture and apply on one database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Complete the required prerequisites before running the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-1A4A130C-EB9A-4CFB-B17C-58FC410633FF">Prerequisites for the MAINTAIN_CHANGE _TABLE Procedure</a>"</span> for more information.</span><div>
                              <p>For this configuration, the following tasks must be completed:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Configure an Oracle Streams administrator on the database. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-5DE841D7-F4C2-4A6C-9F04-2BEC7543E174">Configure an Oracle Streams Administrator on All Databases</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the database is in <code class="codeph">ARCHIVELOG</code> mode. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-36F3BD35-BA62-4BF1-A81D-C701D8280156">Ensure That the Source Database Is in ARCHIVELOG Mode</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the initialization parameters are set properly at the database. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-DB446A71-FEC3-42C9-A2CF-A2EE2FD540CA">Set Initialization Parameters That Are Relevant to Oracle Streams</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure the Oracle Streams pool properly at the database. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-FC856755-5AAC-45AE-BA5F-6360A49C51CD">Configure the Oracle Streams Pool</a>"</span>.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the database as the Oracle Streams administrator.</span><div>
                              <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.MAINTAIN_CHANGE_TABLE(
    change_table_name       =&gt; 'hr.jobs_change_table',
    source_table_name       =&gt; 'hr.jobs',
    column_type_list        =&gt; 'job_id VARCHAR2(10),
                                job_title VARCHAR2(35),
                                min_salary NUMBER(6),
                                max_salary NUMBER(6)',
    extra_column_list        =&gt; 'command_type,value_type,commit_scn',
    capture_values           =&gt; '*',
    keep_change_columns_only =&gt; FALSE);
END;
/
</pre><p>This procedure uses the default value for each parameter that is not specified. The <code class="codeph">keep_change_columns_only</code> parameter is set to <code class="codeph">FALSE</code> because all of the columns in the <code class="codeph">hr.jobs</code> table are listed in the <code class="codeph">column_type_list</code> parameter.
                              </p>
                              <p>When this procedure completes, the Oracle Streams environment is configured.</p>
                              <p>If this procedure encounters an error and stops, then see <a href="../strep/managing-oracle-streams-replication.html#STREP149"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for information about either recovering from the error or rolling back the configuration operation by using the <code class="codeph">DBMS_STREAMS_ADM.RECOVER_OPERATION</code> procedure.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>The resulting Oracle Streams environment has the following characteristics:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An unconditional supplemental log group includes all of the columns in the <code class="codeph">hr.jobs</code> table.
                              </p>
                           </li>
                           <li>
                              <p>The database has an <code class="codeph">hr.jobs_change_table</code>. This change table has the following definition:
                              </p><pre class="oac_no_warn" dir="ltr"> Name                                      Null?    Type
 ----------------------------------------- -------- ---------------------------
 COMMAND_TYPE$                                      VARCHAR2(10)
 VALUE_TYPE$                                        VARCHAR2(3)
 COMMIT_SCN$                                        NUMBER
 JOB_ID                                             VARCHAR2(10)
 JOB_TITLE                                          VARCHAR2(35)
 MIN_SALARY                                         NUMBER(6)
 MAX_SALARY                                         NUMBER(6)
</pre></li>
                           <li>
                              <p>The database has a queue with a system-generated name. This queue is used by the capture process and apply process.</p>
                           </li>
                           <li>
                              <p>A capture process with a system-generated name captures data manipulation language (DML) changes made to the <code class="codeph">hr.jobs</code> table.
                              </p>
                           </li>
                           <li>
                              <p>An apply process with a system-generated name. The apply process uses change handlers with system-generated names to process the captured row LCRs for inserts, updates, and deletes on the <code class="codeph">hr.jobs</code> table. The change handlers use the information in the row LCRs to populate the <code class="codeph">hr.jobs_change_table</code>.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B__GUID-C818DD8F-446A-4693-BFB6-F70871EC7A22">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-9BA4D532-C2F3-4662-85E8-F77799A3DFEA">Monitoring a Change Table</a>"</span> for an example that makes changes to the <code class="codeph">hr.jobs</code> table and then queries the <code class="codeph">hr.jobs_change_table</code> to verify change tracking
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STRMS1628"></a><a id="STRMS1595"></a><div class="props_rev_3"><a id="GUID-E1544519-CC74-4D55-877B-BDA7A10BBCB0" name="GUID-E1544519-CC74-4D55-877B-BDA7A10BBCB0"></a><h4 id="STRMS-GUID-E1544519-CC74-4D55-877B-BDA7A10BBCB0" class="sect4"><span class="enumeration_section">20.3.2 </span>Recording Table Changes Using Local Capture and Remote Apply with Replication
                  </h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates how to record the changes to a table using local capture and remote apply. In addition to recording table changes, the Oracle Stream environment configured by this example also replicates the changes made to the table.</p>
                        <p>Specifically, this example records the changes made to a subset of columns in the <code class="codeph">hr.departments</code> table. This example also replicates data manipulation language (DML) changes made to all of the columns in the <code class="codeph">hr.departments</code> table. The Oracle Streams environment configured in this example captures the changes on the source database <code class="codeph">ct1.example.com</code> and sends the changes to the destination database <code class="codeph">ct2.example.com</code>. An apply process on <code class="codeph">ct2.example.com</code> records the changes in a change table and applies the changes to the replica <code class="codeph">hr.departments</code> table.
                        </p>
                        <p>The following table lists the decisions that were made about the Oracle Streams environment configured in this example.</p>
                        <div class="tblformalwide" id="GUID-E1544519-CC74-4D55-877B-BDA7A10BBCB0__GUID-50265881-8811-4FB8-AB6D-16B4F678A528">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This table lists the decisions made about the example in this section." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="42%" id="d90840e4658">Decision</th>
                                    <th align="left" valign="bottom" width="58%" id="d90840e4661">Assumption for This Example</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4666" headers="d90840e4658 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB">Decide Which Type of Environment to Configure</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4666 d90840e4661 ">
                                       <p>This example configures local capture and remote apply using two databases: the source database is <code class="codeph">ct1.example.com</code> and the destination database is <code class="codeph">ct2.example.com</code>. The capture process will be a local capture process on <code class="codeph">ct1.example.com</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4684" headers="d90840e4658 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-81796914-7858-4126-8C52-FE18B40484E9">Decide Which Columns to Track</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4684 d90840e4661 ">
                                       <p>This example tracks the <code class="codeph">department_id</code> and <code class="codeph">manager_id</code> columns in the <code class="codeph">hr.departments</code> table.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4702" headers="d90840e4658 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49">Decide Which Metadata to Record</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4702 d90840e4661 ">
                                       <p>This example records the <code class="codeph">command_type</code> and <code class="codeph">value_type</code> (<code class="codeph">OLD</code> or <code class="codeph">NEW</code>) metadata. This metadata is recorded by default when the <code class="codeph">extra_column_list</code> parameter is not specified in <code class="codeph">MAINTAIN_CHANGE_TABLE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4730" headers="d90840e4658 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-8F55224C-C45C-4543-8EF8-D1500D0DEFFD">Decide Which Values to Track for Update Operations</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4730 d90840e4661 ">
                                       <p>This example tracks both the old and new column values when an update is performed on the source table.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4739" headers="d90840e4658 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19">Decide Whether to Configure a KEEP_COLUMNS Transformation</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4739 d90840e4661 ">
                                       <p>This example does not configure a <code class="codeph">KEEP_COLUMNS</code> declarative rule-based transformation because all of the table columns are replicated.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4751" headers="d90840e4658 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-122AEFEC-0431-4868-B8A3-FCFC1E730DCA">Decide Whether to Specify CREATE TABLE Options for the Change Table</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4751 d90840e4661 ">
                                       <p>This example does not specify any <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> options. The change table is created with the default <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> options.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4772" headers="d90840e4658 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-2ACF45A2-BA03-4B7E-BB63-B569168C814B">Decide Whether to Perform the Configuration Actions Directly or with a Script</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4772 d90840e4661 ">
                                       <p>This example performs the configuration actions directly. It does not use a script.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e4781" headers="d90840e4658 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-5EFDF85C-9009-40C9-9314-60021274DCCA">Decide Whether to Replicate the Source Table</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e4781 d90840e4661 ">
                                       <p>This example replicates the source table at the destination database. Therefore, the <code class="codeph">hr.departments</code> table exists on both the source database and the destination database, and the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure configures a one-way replication environment for this table from the source database to the destination database.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-E1544519-CC74-4D55-877B-BDA7A10BBCB0__CHDGIJHF">Figure 20-2</a> provides an overview of the Oracle Stream environment created in this example.
                        </p>
                        <div class="figure" id="GUID-E1544519-CC74-4D55-877B-BDA7A10BBCB0__CHDGIJHF">
                           <p class="titleinfigure">Figure 20-2 Recording Changes Using Local Capture and Remote Apply with Replication</p><img src="img/strms066.gif" width="584" alt="Description of Figure 20-2 follows" title="Description of Figure 20-2 follows" longdesc="img_text/strms066.html"><br><a href="img_text/strms066.html">Description of "Figure 20-2 Recording Changes Using Local Capture and Remote Apply with Replication"</a></div>
                        <!-- class="figure" -->
                        <p>Complete the following steps to configure an Oracle Streams environment that records and replicates the changes to a table local capture and remote apply:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Complete the required prerequisites before running the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-1A4A130C-EB9A-4CFB-B17C-58FC410633FF">Prerequisites for the MAINTAIN_CHANGE _TABLE Procedure</a>"</span> for more information.</span><div>
                              <p>For this configuration, the following tasks must be completed:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Configure an Oracle Streams administrator on both databases. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-5DE841D7-F4C2-4A6C-9F04-2BEC7543E174">Configure an Oracle Streams Administrator on All Databases</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure network connectivity and database links:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Configure network connectivity between the source database <code class="codeph">ct1.example.com</code> and the destination database <code class="codeph">ct2.example.com</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Create a database link from the source database <code class="codeph">ct1.example.com</code> to the destination database <code class="codeph">ct2.example.com</code>.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>See <a href="../strep/preparing-for-oracle-streams-replication.html#STREP203"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the source database is in <code class="codeph">ARCHIVELOG</code> mode. In this example, the source database is <code class="codeph">ct1.example.com</code>. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-36F3BD35-BA62-4BF1-A81D-C701D8280156">Ensure That the Source Database Is in ARCHIVELOG Mode</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the initialization parameters are set properly at all databases. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-DB446A71-FEC3-42C9-A2CF-A2EE2FD540CA">Set Initialization Parameters That Are Relevant to Oracle Streams</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure the Oracle Streams pool properly at all databases. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-FC856755-5AAC-45AE-BA5F-6360A49C51CD">Configure the Oracle Streams Pool</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Because this example replicates the source table <code class="codeph">hr.departments</code>, instantiate the source table at the destination database. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-62179F38-70AB-41ED-8AE9-1B0C291C1791">Instantiate the Source Table at the Destination Database</a>"</span>.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the source database <code class="codeph">ct1.example.com</code> as the Oracle Streams administrator.</span><div>
                              <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Run the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.MAINTAIN_CHANGE_TABLE(
    change_table_name       =&gt; 'hr.dep_change_table',
    source_table_name       =&gt; 'hr.departments',
    column_type_list        =&gt; 'department_id NUMBER(4),
                                manager_id NUMBER(6)',
    capture_values           =&gt; '*',
    source_database          =&gt; 'ct1.example.com',
    destination_database     =&gt; 'ct2.example.com',
    keep_change_columns_only =&gt; FALSE,
    execute_lcr              =&gt; TRUE);
END;
/
</pre><p>This procedure uses the default value for each parameter that is not specified. The <code class="codeph">keep_change_columns_only</code> parameter is set to <code class="codeph">FALSE</code> because the <code class="codeph">execute_lcr</code> parameter is set to <code class="codeph">TRUE</code>. The row logical change records (LCRs) must contain information about changes to all of the columns in the table because all of the columns are replicated at the destination database. When the <code class="codeph">execute_lcr</code> parameter is set to <code class="codeph">TRUE</code>, the <code class="codeph">keep_change_columns_only</code> parameter can be set to <code class="codeph">TRUE</code> only if the <code class="codeph">column_type_list</code> parameter includes all of the columns that are replicated, which is not the case in this example.
                              </p>
                              <p>When this procedure completes, the Oracle Streams environment is configured.</p>
                              <p>If this procedure encounters an error and stops, then see <a href="../strep/managing-oracle-streams-replication.html#STREP149"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for information about either recovering from the error or rolling back the configuration operation by using the <code class="codeph">DBMS_STREAMS_ADM.RECOVER_OPERATION</code> procedure.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>The resulting Oracle Streams environment has the following characteristics:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An unconditional supplemental log group includes the columns in the <code class="codeph">hr.departments</code> table for which changes are recorded at the source database <code class="codeph">ct1.example.com</code>. These columns are the ones specified in the <code class="codeph">column_type_list</code> parameter of the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure.
                              </p>
                           </li>
                           <li>
                              <p>The destination database <code class="codeph">ct2.example.com</code> has an <code class="codeph">hr.dep_change_table</code>. This change table has the following definition:
                              </p><pre class="oac_no_warn" dir="ltr"> Name                                      Null?    Type
 ----------------------------------------- -------- ---------------------------
 COMMAND_TYPE$                                      VARCHAR2(10)
 VALUE_TYPE$                                        VARCHAR2(3)
 DEPARTMENT_ID                                      NUMBER(4)
 MANAGER_ID                                         NUMBER(6)
</pre></li>
                           <li>
                              <p>The source database <code class="codeph">ct1.example.com</code> has a queue with a system-generated name. This queue is used by the capture process.
                              </p>
                           </li>
                           <li>
                              <p>The destination database <code class="codeph">ct2.example.com</code> has a queue with a system-generated name. This queue is used by the apply process.
                              </p>
                           </li>
                           <li>
                              <p>The source database <code class="codeph">ct1.example.com</code> has a local capture process with a system-generated name that captures data manipulation language (DML) changes made to the <code class="codeph">hr.departments</code> table.
                              </p>
                           </li>
                           <li>
                              <p>The destination database <code class="codeph">ct2.example.com</code> has an apply process with a system-generated name. The apply process uses change handlers with system-generated names to process the captured row LCRs for inserts, updates, and deletes on the <code class="codeph">hr.departments</code> table. The change handlers use the information in the row LCRs to populate the <code class="codeph">hr.dep_change_table</code>.
                              </p>
                              <p>The apply process also includes change handlers with system-generated names to execute row LCRs for each type of operation (insert, update, and delete). The row LCRs are executed so that the changes made to the source table are applied to the replica <code class="codeph">hr.departments</code> table at the destination database.
                              </p>
                           </li>
                           <li>
                              <p>A propagation running on the <code class="codeph">ct1.example.com</code> database with a system-generated name sends the captured changes from the <code class="codeph">ct1.example.com</code> database to the <code class="codeph">ct2.example.com</code> database.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STRMS1629"></a><a id="STRMS1596"></a><div class="props_rev_3"><a id="GUID-16927F05-1020-461F-BCFA-5E704413E52F" name="GUID-16927F05-1020-461F-BCFA-5E704413E52F"></a><h4 id="STRMS-GUID-16927F05-1020-461F-BCFA-5E704413E52F" class="sect4"><span class="enumeration_section">20.3.3 </span>Recording Table Changes Using Downstream Capture and Local Apply
                  </h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates how to record the changes to a table using downstream capture and local apply. Specifically, this example records the changes made to the <code class="codeph">hr.locations</code> table using a source database and a destination database. The destination database is also the capture database for the downstream capture process.
                        </p>
                        <p>The following table lists the decisions that were made about the Oracle Streams environment configured in this example.</p>
                        <div class="tblformalwide" id="GUID-16927F05-1020-461F-BCFA-5E704413E52F__GUID-930426BB-BC14-4708-9F82-64437312BAB9">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This table lists the decisions made about the example in this section." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="42%" id="d90840e5189">Decision</th>
                                    <th align="left" valign="bottom" width="58%" id="d90840e5192">Assumption for This Example</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5197" headers="d90840e5189 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB">Decide Which Type of Environment to Configure</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5197 d90840e5192 ">
                                       <p>This example configures downstream capture and local apply using the source database <code class="codeph">ct1.example.com</code> and the destination database <code class="codeph">ct2.example.com</code>. The capture process will be a real-time downstream capture process running on <code class="codeph">ct2.example.com</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5215" headers="d90840e5189 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-81796914-7858-4126-8C52-FE18B40484E9">Decide Which Columns to Track</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5215 d90840e5192 ">
                                       <p>This example tracks all of the columns in the <code class="codeph">hr.locations</code> table.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5227" headers="d90840e5189 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49">Decide Which Metadata to Record</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5227 d90840e5192 ">
                                       <p>This example records the following metadata: <code class="codeph">command_type</code>, <code class="codeph">value_type</code> (<code class="codeph">OLD</code> or <code class="codeph">NEW</code>), <code class="codeph">object_owner</code>, <code class="codeph">object_name</code>, and <code class="codeph">username</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5258" headers="d90840e5189 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-8F55224C-C45C-4543-8EF8-D1500D0DEFFD">Decide Which Values to Track for Update Operations</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5258 d90840e5192 ">
                                       <p>This example tracks both the old and new column values when an update is performed on the source table.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5267" headers="d90840e5189 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19">Decide Whether to Configure a KEEP_COLUMNS Transformation</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5267 d90840e5192 ">
                                       <p>This example does not configure a <code class="codeph">KEEP_COLUMNS</code> declarative rule-based transformation.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5279" headers="d90840e5189 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-122AEFEC-0431-4868-B8A3-FCFC1E730DCA">Decide Whether to Specify CREATE TABLE Options for the Change Table</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5279 d90840e5192 ">
                                       <p>This example does not specify any <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> options. The change table is created with the default <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> options.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5300" headers="d90840e5189 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-2ACF45A2-BA03-4B7E-BB63-B569168C814B">Decide Whether to Perform the Configuration Actions Directly or with a Script</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5300 d90840e5192 ">
                                       <p>This example performs the configuration actions directly. It does not use a script.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5309" headers="d90840e5189 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-5EFDF85C-9009-40C9-9314-60021274DCCA">Decide Whether to Replicate the Source Table</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5309 d90840e5192 ">
                                       <p>This example does not replicate the source table.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-16927F05-1020-461F-BCFA-5E704413E52F__CHDBAAGH">Figure 20-3</a> provides an overview of the Oracle Stream environment created in this example.
                        </p>
                        <div class="figure" id="GUID-16927F05-1020-461F-BCFA-5E704413E52F__CHDBAAGH">
                           <p class="titleinfigure">Figure 20-3 Recording Changes Using Downstream Capture and Local Apply</p><img width="584" src="img/strms067.png" alt="Description of Figure 20-3 follows" title="Description of Figure 20-3 follows" longdesc="img_text/strms067.html"><br><a href="img_text/strms067.html">Description of "Figure 20-3 Recording Changes Using Downstream Capture and Local Apply"</a></div>
                        <!-- class="figure" -->
                        <p>Complete the following steps to configure an Oracle Streams environment that records the changes to a table using downstream capture and remote apply:</p>
                        <ol>
                           <li>
                              <p>Complete the required prerequisites before running the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-1A4A130C-EB9A-4CFB-B17C-58FC410633FF">Prerequisites for the MAINTAIN_CHANGE _TABLE Procedure</a>"</span> for more information.
                              </p>
                              <p>For this configuration, the following tasks must be completed:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Configure an Oracle Streams administrator on both databases. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-5DE841D7-F4C2-4A6C-9F04-2BEC7543E174">Configure an Oracle Streams Administrator on All Databases</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure network connectivity and database links:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Configure network connectivity between the source database <code class="codeph">ct1.example.com</code> and the destination database <code class="codeph">ct2.example.com</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Because downstream capture will be configured at the destination database, create a database link from the source database <code class="codeph">ct1.example.com</code> to the destination database <code class="codeph">ct2.example.com</code>. The database link is used to send redo log data from <code class="codeph">ct1.example.com</code> to <code class="codeph">ct2.example.com</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Because downstream capture will be configured at the destination database, create a database link from the destination database <code class="codeph">ct2.example.com</code> to the source database <code class="codeph">ct1.example.com</code>. The database link is used to complete management tasks related to downstream capture on the source database.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>See <a href="../strep/preparing-for-oracle-streams-replication.html#STREP203"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the source database and the destination database are in <code class="codeph">ARCHIVELOG</code> mode. In this example, the source database is <code class="codeph">ct1.example.com</code> and the destination database is <code class="codeph">ct2.example.com</code>. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-36F3BD35-BA62-4BF1-A81D-C701D8280156">Ensure That the Source Database Is in ARCHIVELOG Mode</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the initialization parameters are set properly at both databases. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-DB446A71-FEC3-42C9-A2CF-A2EE2FD540CA">Set Initialization Parameters That Are Relevant to Oracle Streams</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure the Oracle Streams pool properly at both databases. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-FC856755-5AAC-45AE-BA5F-6360A49C51CD">Configure the Oracle Streams Pool</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Because a destination database will be the capture database for changes made to the source database, configure log file copying from the source database <code class="codeph">ct1.example.com</code> to the capture database <code class="codeph">ct2.example.com</code>. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-8F38A7D6-CCA4-417D-8D4F-6B8938374C1F">Configure Log File Transfer to a Downstream Capture Database</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Because this example configures a real-time downstream capture process, add standby redo logs at the capture database, and configure standby redo logs at the capture database <code class="codeph">ct2.example.com</code>. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-1CB670D8-057B-4893-BFCC-021C2C681AC4">Configure Standby Redo Logs for Real-Time Downstream Capture</a>"</span>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Connect to the destination database <code class="codeph">ct2.example.com</code> as the Oracle Streams administrator.
                              </p>
                              <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.MAINTAIN_CHANGE_TABLE(
    change_table_name       =&gt; 'hr.loc_change_table',
    source_table_name       =&gt; 'hr.locations',
    column_type_list        =&gt; 'location_id NUMBER(4),
                                street_address VARCHAR2(40),
                                postal_code VARCHAR2(12),
                                city VARCHAR2(30),
                                state_province VARCHAR2(25),
                                country_id CHAR(2)',
    extra_column_list       =&gt; 'command_type,value_type,object_owner,
                                object_name,username',
    capture_values          =&gt; '*',
    source_database          =&gt; 'ct1.example.com',
    destination_database     =&gt; 'ct2.example.com',
    keep_change_columns_only =&gt; FALSE);
END;
/
</pre><p>This procedure uses the default value for each parameter that is not specified. The <code class="codeph">keep_change_columns_only</code> parameter is set to <code class="codeph">FALSE</code> because all of the columns in the <code class="codeph">hr.locations</code> table are listed in the <code class="codeph">column_type_list</code> parameter.
                              </p>
                              <p>When this procedure completes, the Oracle Streams environment is configured.</p>
                              <p>If this procedure encounters an error and stops, then see <a href="../strep/managing-oracle-streams-replication.html#STREP149"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for information about either recovering from the error or rolling back the configuration operation by using the <code class="codeph">DBMS_STREAMS_ADM.RECOVER_OPERATION</code> procedure.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">downstream_real_time_mine</code> capture process parameter to <code class="codeph">Y</code>.
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>Query the <code class="codeph">CAPTURE_NAME</code> column in the <code class="codeph">DBA_CAPTURE</code> view to determine the name of the capture process.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Run the <code class="codeph">SET_PARAMETER</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package to set the <code class="codeph">downstream_real_time_mine</code> capture process parameter to&nbsp;<code class="codeph">Y</code>.
                                    </p>
                                    <p>For example, if the capture process name is <code class="codeph">cap$chg5</code>, then run the following procedure:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_CAPTURE_ADM.SET_PARAMETER(
    capture_name =&gt; 'cap$chg5',
    parameter    =&gt; 'downstream_real_time_mine',
    value        =&gt; 'Y');
END;
/
</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>Connect to the source database <code class="codeph">ct1.example.com</code> as an administrative user with the necessary privileges to switch log files.
                              </p>
                           </li>
                           <li>
                              <p>Archive the current log file at the source database:</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM ARCHIVE LOG CURRENT;
</pre><p>Archiving the current log file at the source database starts real time mining of the source database redo log.</p>
                           </li>
                        </ol>
                        <p>The resulting Oracle Streams environment has the following characteristics:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An unconditional supplemental log group at the source database <code class="codeph">ct1.example.com</code> includes all o the columns in the <code class="codeph">hr.locations</code> table.
                              </p>
                           </li>
                           <li>
                              <p>Because <code class="codeph">username</code> is specified in the <code class="codeph">extra_column_list</code> parameter, the source database is configured to place additional information about the username of the user who makes a change in the redo log. The capture process captures this information, and it is recorded in the change table. The other values specified in the <code class="codeph">extra_column_list</code> parameter (<code class="codeph">command_type</code>, <code class="codeph">value_type</code>, <code class="codeph">object_owner</code>, and <code class="codeph">object_name</code>) are always tracked in the redo log. Therefore, no additional configuration is necessary to capture this information.
                              </p>
                           </li>
                           <li>
                              <p>The destination database <code class="codeph">ct2.example.com</code> has an <code class="codeph">hr.loc_change_table</code>. This change table has the following definition:
                              </p><pre class="oac_no_warn" dir="ltr"> Name                                      Null?    Type
 ----------------------------------------- -------- ---------------------------
 COMMAND_TYPE$                                      VARCHAR2(10)
 VALUE_TYPE$                                        VARCHAR2(3)
 OBJECT_OWNER$                                      VARCHAR2(30)
 OBJECT_NAME$                                       VARCHAR2(30)
 USERNAME$                                          VARCHAR2(30)
 LOCATION_ID                                        NUMBER(4)
 STREET_ADDRESS                                     VARCHAR2(40)
 POSTAL_CODE                                        VARCHAR2(12)
 CITY                                               VARCHAR2(30)
 STATE_PROVINCE                                     VARCHAR2(25)
 COUNTRY_ID                                         CHAR(2)
</pre></li>
                           <li>
                              <p>The destination database <code class="codeph">ct2.example.com</code> has a queue with a system-generated name. This queue is used by the downstream capture process and the apply process.
                              </p>
                           </li>
                           <li>
                              <p>The destination database <code class="codeph">ct2.example.com</code> has a real-time downstream capture process with a system-generated name that captures data manipulation language (DML) changes made to the <code class="codeph">hr.locations</code> table.
                              </p>
                           </li>
                           <li>
                              <p>The destination database <code class="codeph">ct2.example.com</code> has an apply process with a system-generated name. The apply process uses change handlers with system-generated names to process the captured row LCRs for inserts, updates, and deletes on the <code class="codeph">hr.locations</code> table. The change handlers use the information in the row LCRs to populate the <code class="codeph">hr.loc_change_table</code>.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-16927F05-1020-461F-BCFA-5E704413E52F__GUID-D16E050F-05A9-4917-9B90-38E89395F707">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="managing-oracle-streams-implicit-capture.html#GUID-44B88D46-C551-4C17-A1A0-B68842A87C44">Setting a Capture Process Parameter</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STRMS1630"></a><a id="STRMS1544"></a><div class="props_rev_3"><a id="GUID-5A571AED-0DE2-41C8-BEC2-6ED7EEB01AD0" name="GUID-5A571AED-0DE2-41C8-BEC2-6ED7EEB01AD0"></a><h4 id="STRMS-GUID-5A571AED-0DE2-41C8-BEC2-6ED7EEB01AD0" class="sect4"><span class="enumeration_section">20.3.4 </span>Recording Table Changes Using Downstream Capture and Remote Apply
                  </h4>
                  <div>
                     <div class="section">
                        <p>This example illustrates how to record the changes to a table using downstream capture and remote apply. Specifically, this example records the changes made to the <code class="codeph">hr.employees</code> table using three databases: the source database, the destination database, and the capture database.
                        </p>
                        <p>The following table lists the decisions that were made about the Oracle Streams environment configured in this example.</p>
                        <div class="tblformalwide" id="GUID-5A571AED-0DE2-41C8-BEC2-6ED7EEB01AD0__GUID-EEE7FE1B-189A-40CE-B6D5-FAA8AD575E54">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This table lists the decisions made about the example in this section." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="42%" id="d90840e5779">Decision</th>
                                    <th align="left" valign="bottom" width="58%" id="d90840e5782">Assumption for This Example</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5787" headers="d90840e5779 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB">Decide Which Type of Environment to Configure</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5787 d90840e5782 ">
                                       <p>This example configures downstream capture and remote apply using three databases: the source database is <code class="codeph">ct1.example.com</code>, the destination database is <code class="codeph">ct2.example.com</code>, and the capture database is <code class="codeph">ct3.example.com</code>. The capture process will be a real-time downstream capture process.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5805" headers="d90840e5779 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-81796914-7858-4126-8C52-FE18B40484E9">Decide Which Columns to Track</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5805 d90840e5782 ">
                                       <p>This example tracks the columns in the <code class="codeph">hr.employees</code> table, except for the <code class="codeph">salary</code> and <code class="codeph">commission_pct</code> columns.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5823" headers="d90840e5779 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49">Decide Which Metadata to Record</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5823 d90840e5782 ">
                                       <p>This example records the following metadata: <code class="codeph">command_type</code>, <code class="codeph">value_type</code> (<code class="codeph">OLD</code> or <code class="codeph">NEW</code>), <code class="codeph">object_owner</code>, <code class="codeph">object_name</code>, and <code class="codeph">username</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5854" headers="d90840e5779 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-8F55224C-C45C-4543-8EF8-D1500D0DEFFD">Decide Which Values to Track for Update Operations</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5854 d90840e5782 ">
                                       <p>This example tracks both the old and new column values when an update is performed on the source table.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5863" headers="d90840e5779 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19">Decide Whether to Configure a KEEP_COLUMNS Transformation</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5863 d90840e5782 ">
                                       <p>This example configures a <code class="codeph">KEEP_COLUMNS</code> declarative rule-based transformation so that row LCRs do not contain salary and commission percentage information for employees.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5875" headers="d90840e5779 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-122AEFEC-0431-4868-B8A3-FCFC1E730DCA">Decide Whether to Specify CREATE TABLE Options for the Change Table</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5875 d90840e5782 ">
                                       <p>This example specifies a <code class="codeph">STORAGE</code> clause in the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> options.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5893" headers="d90840e5779 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-2ACF45A2-BA03-4B7E-BB63-B569168C814B">Decide Whether to Perform the Configuration Actions Directly or with a Script</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5893 d90840e5782 ">
                                       <p>This example performs the configuration actions directly. It does not use a script.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e5902" headers="d90840e5779 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-5EFDF85C-9009-40C9-9314-60021274DCCA">Decide Whether to Replicate the Source Table</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e5902 d90840e5782 ">
                                       <p>This example does not replicate the source table.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-5A571AED-0DE2-41C8-BEC2-6ED7EEB01AD0__CHDCCAEE">Figure 20-4</a> provides an overview of the Oracle Stream environment created in this example.
                        </p>
                        <div class="figure" id="GUID-5A571AED-0DE2-41C8-BEC2-6ED7EEB01AD0__CHDCCAEE">
                           <p class="titleinfigure">Figure 20-4 Recording Changes Using Downstream Capture and Remote Apply</p><img width="584" src="img/strms068.png" alt="Description of Figure 20-4 follows" title="Description of Figure 20-4 follows" longdesc="img_text/strms068.html"><br><a href="img_text/strms068.html">Description of "Figure 20-4 Recording Changes Using Downstream Capture and Remote Apply"</a></div>
                        <!-- class="figure" -->
                        <p>Complete the following steps to configure an Oracle Streams environment that records the changes to a table using downstream capture and remote apply:</p>
                        <ol>
                           <li>
                              <p>Complete the required prerequisites before running the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-1A4A130C-EB9A-4CFB-B17C-58FC410633FF">Prerequisites for the MAINTAIN_CHANGE _TABLE Procedure</a>"</span> for more information.
                              </p>
                              <p>For this configuration, the following tasks must be completed:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Configure an Oracle Streams administrator on all of three databases. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-5DE841D7-F4C2-4A6C-9F04-2BEC7543E174">Configure an Oracle Streams Administrator on All Databases</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure network connectivity and database links:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Configure network connectivity between the source database <code class="codeph">ct1.example.com</code> and the destination database <code class="codeph">ct2.example.com</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Configure network connectivity between the source database <code class="codeph">ct1.example.com</code> and the third database <code class="codeph">ct3.example.com</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Configure network connectivity between the destination database <code class="codeph">ct2.example.com</code> and the third database <code class="codeph">ct3.example.com</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Create a database link from the source database <code class="codeph">ct1.example.com</code> to the destination database <code class="codeph">ct2.example.com</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Because downstream capture will be configured at the third database, create a database link from the source database <code class="codeph">ct1.example.com</code> to the third database <code class="codeph">ct3.example.com</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Because downstream capture will be configured at the third database, create a database link from the third database <code class="codeph">ct3.example.com</code> to the source database <code class="codeph">ct1.example.com</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Because downstream capture will be configured at the third database, create a database link from the third database <code class="codeph">ct3.example.com</code> to the destination database <code class="codeph">ct2.example.com</code>.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>See <a href="../strep/preparing-for-oracle-streams-replication.html#STREP203"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the source database and the capture database are in <code class="codeph">ARCHIVELOG</code> mode. In this example, the source database is <code class="codeph">ct1.example.com</code> and the capture database is <code class="codeph">ct3.example.com</code>. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-36F3BD35-BA62-4BF1-A81D-C701D8280156">Ensure That the Source Database Is in ARCHIVELOG Mode</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the initialization parameters are set properly at all databases. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-DB446A71-FEC3-42C9-A2CF-A2EE2FD540CA">Set Initialization Parameters That Are Relevant to Oracle Streams</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure the Oracle Streams pool properly at all databases. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-FC856755-5AAC-45AE-BA5F-6360A49C51CD">Configure the Oracle Streams Pool</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Because a third database (<code class="codeph">ct3.example.com</code>) will be the capture database for changes made to the source database, configure log file copying from the source database <code class="codeph">ct1.example.com</code> to the capture database <code class="codeph">ct3.example.com</code>. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-8F38A7D6-CCA4-417D-8D4F-6B8938374C1F">Configure Log File Transfer to a Downstream Capture Database</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Because this example configures a real-time downstream capture process, add standby redo logs at the capture database, and configure standby redo logs at the capture database <code class="codeph">ct3.example.com</code>. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-1CB670D8-057B-4893-BFCC-021C2C681AC4">Configure Standby Redo Logs for Real-Time Downstream Capture</a>"</span>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Connect to the capture database <code class="codeph">ct3.example.com</code> as the Oracle Streams administrator.
                              </p>
                              <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </li>
                           <li>
                              <p>Run the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.MAINTAIN_CHANGE_TABLE(
    change_table_name       =&gt; 'hr.emp_change_table',
    source_table_name       =&gt; 'hr.employees',
    column_type_list        =&gt; 'employee_id VARCHAR2(6),
                                first_name VARCHAR2(20),
                                last_name VARCHAR2(25),
                                email VARCHAR2(25),
                                phone_number VARCHAR2(20),
                                hire_date DATE,
                                job_id VARCHAR2(10),
                                manager_id NUMBER(6),
                                department_id NUMBER(4)',
    capture_values          =&gt; '*',
    options_string          =&gt; 'STORAGE (INITIAL     6144  
                                         NEXT        6144 
                                         MINEXTENTS     1  
                                         MAXEXTENTS     5)',
    source_database          =&gt; 'ct1.example.com',
    destination_database     =&gt; 'ct2.example.com',
    keep_change_columns_only =&gt; TRUE);
END;
/
</pre><p>This procedure uses the default value for each parameter that is not specified. The <code class="codeph">options_string</code> parameter specifies a storage clause for the change table. The <code class="codeph">keep_change_columns_only</code> parameter is set to <code class="codeph">TRUE</code> to create a keep columns declarative rule-based transformation that excludes the <code class="codeph">salary</code> and <code class="codeph">commission_pct</code> columns from captured row logical change records (LCRs). The <code class="codeph">salary</code> and <code class="codeph">commission_pct</code> columns are excluded because they are not in the <code class="codeph">column_type_list</code> parameter.
                              </p>
                              <p>When this procedure completes, the Oracle Streams environment is configured.</p>
                              <p>If this procedure encounters an error and stops, then see <a href="../strep/managing-oracle-streams-replication.html#STREP149"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for information about either recovering from the error or rolling back the configuration operation by using the <code class="codeph">DBMS_STREAMS_ADM.RECOVER_OPERATION</code> procedure.
                              </p>
                           </li>
                           <li>
                              <p>Set the <code class="codeph">downstream_real_time_mine</code> capture process parameter to <code class="codeph">Y</code>.
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>Query the <code class="codeph">CAPTURE_NAME</code> column in the <code class="codeph">DBA_CAPTURE</code> view to determine the name of the capture process.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Run the <code class="codeph">SET_PARAMETER</code> procedure in the <code class="codeph">DBMS_CAPTURE_ADM</code> package to set the <code class="codeph">downstream_real_time_mine</code> capture process parameter to&nbsp;<code class="codeph">Y</code>.
                                    </p>
                                    <p>For example, if the capture process name is <code class="codeph">cap$chg5</code>, then run the following procedure:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_CAPTURE_ADM.SET_PARAMETER(
    capture_name =&gt; 'cap$chg5',
    parameter    =&gt; 'downstream_real_time_mine',
    value        =&gt; 'Y');
END;
/
</pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>Connect to the source database <code class="codeph">ct1.example.com</code> as an administrative user with the necessary privileges to switch log files.
                              </p>
                           </li>
                           <li>
                              <p>Archive the current log file at the source database:</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM ARCHIVE LOG CURRENT;
</pre><p>Archiving the current log file at the source database starts real time mining of the source database redo log.</p>
                           </li>
                        </ol>
                        <p>The resulting Oracle Streams environment has the following characteristics:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>An unconditional supplemental log group includes the columns in the <code class="codeph">hr.employees</code> table for which changes are recorded at the source database <code class="codeph">ct1.example.com</code>. These columns are the ones specified in the <code class="codeph">column_type_list</code> parameter of the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure.
                              </p>
                           </li>
                           <li>
                              <p>The destination database <code class="codeph">ct2.example.com</code> has an <code class="codeph">hr.emp_change_table</code>. This change table has the following definition:
                              </p><pre class="oac_no_warn" dir="ltr"> Name                                      Null?    Type
 ----------------------------------------- -------- ---------------------------
 COMMAND_TYPE$                                      VARCHAR2(10)
 VALUE_TYPE$                                        VARCHAR2(3)
 EMPLOYEE_ID                               NOT NULL NUMBER(6)
 FIRST_NAME                                         VARCHAR2(20)
 LAST_NAME                                 NOT NULL VARCHAR2(25)
 EMAIL                                     NOT NULL VARCHAR2(25)
 PHONE_NUMBER                                       VARCHAR2(20)
 HIRE_DATE                                 NOT NULL DATE
 JOB_ID                                    NOT NULL VARCHAR2(10)
 MANAGER_ID                                         NUMBER(6)
 DEPARTMENT_ID                                      NUMBER(4)
</pre></li>
                           <li>
                              <p>The capture database <code class="codeph">ct3.example.com</code> has a queue with a system-generated name. This queue is used by the downstream capture process.
                              </p>
                           </li>
                           <li>
                              <p>The destination database <code class="codeph">ct2.example.com</code> has a queue with a system-generated name. This queue is used by the apply process.
                              </p>
                           </li>
                           <li>
                              <p>The capture database <code class="codeph">ct3.example.com</code> has a real-time downstream capture process with a system-generated name that captures data manipulation language (DML) changes made to the <code class="codeph">hr.employees</code> table.
                              </p>
                           </li>
                           <li>
                              <p>The capture database <code class="codeph">ct3.example.com</code> has a <code class="codeph">KEEP_COLUMNS</code> declarative rule-based transformation that keeps all of the columns in the row LCRs for the <code class="codeph">hr.employees</code> table, except for the <code class="codeph">salary</code> and <code class="codeph">commission_pct</code> columns.
                              </p>
                           </li>
                           <li>
                              <p>A propagation running on the <code class="codeph">ct3.example.com</code> database with a system-generated name sends the captured changes from the <code class="codeph">ct3.example.com</code> database to the <code class="codeph">ct2.example.com</code> database.
                              </p>
                           </li>
                           <li>
                              <p>The destination database <code class="codeph">ct2.example.com</code> has an apply process with a system-generated name. The apply process uses change handlers with system-generated names to process the captured row LCRs for inserts, updates, and deletes on the <code class="codeph">hr.employees</code> table. The change handlers use the information in the row LCRs to populate the <code class="codeph">hr.emp_change_table</code>.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-5A571AED-0DE2-41C8-BEC2-6ED7EEB01AD0__GUID-7448C39F-7A3E-4AEF-BD47-F990E9A60A23">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="managing-oracle-streams-implicit-capture.html#GUID-44B88D46-C551-4C17-A1A0-B68842A87C44">Setting a Capture Process Parameter</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="STRMS1597"></a><div class="props_rev_3"><a id="GUID-882B2D7F-DA27-485E-A2B2-5E6BC1B117BF" name="GUID-882B2D7F-DA27-485E-A2B2-5E6BC1B117BF"></a><h3 id="STRMS-GUID-882B2D7F-DA27-485E-A2B2-5E6BC1B117BF" class="sect3"><span class="enumeration_section">20.4 </span>Managing an Oracle Streams Environment That Records Table Changes
               </h3>
               <div>
                  <p>This section describes setting and unsetting change handlers.</p>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-E3EB9223-62D4-4E49-B491-AFC34A75E1E1">Unsetting and Setting a Change Handler</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-1BE636BE-ECD6-4894-BA57-5A466F23DAC0">Recording Changes to a Table Using Existing Oracle Streams Components</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C">Maintaining Change Tables</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-E7EA7E53-3930-4B19-88F0-E18F4A258BA5">Managing the Oracle Streams Environment</a></p>
                     </li>
                  </ul>
               </div><a id="STRMS1598"></a><div class="props_rev_3"><a id="GUID-E3EB9223-62D4-4E49-B491-AFC34A75E1E1" name="GUID-E3EB9223-62D4-4E49-B491-AFC34A75E1E1"></a><h4 id="STRMS-GUID-E3EB9223-62D4-4E49-B491-AFC34A75E1E1" class="sect4"><span class="enumeration_section">20.4.1 </span>Unsetting and Setting a Change Handler
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <code class="codeph">SET_CHANGE_HANDLER</code> procedure in the <code class="codeph">DBMS_APPLY_ADM</code> package can unset and set a change handler for a specified operation on a specified table for a single apply process. This procedure assumes that the Oracle Streams components are configured to capture changes to the specified table and send the changes to the specified apply process.
                        </p>
                        <p>For the example in this section, assume that you want to unset the change handler for update operations that was created in <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-E1544519-CC74-4D55-877B-BDA7A10BBCB0">Recording Table Changes Using Local Capture and Remote Apply with Replication</a>"</span>. Next, you want to reset this change handler.
                        </p>
                        <p>Complete the following steps to set a change handler:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the database that contains the apply process as the Oracle Streams administrator.</span><div>
                              <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span><a id="d90840e6620" class="indexterm-anchor"></a>Identify the change handler to modify.</span><div>
                              <p>This example unsets the change handler for <code class="codeph">UPDATE</code> operations on the <code class="codeph">hr.departments</code> table. Assume that these changes are applied by the <code class="codeph">app$chg38</code> apply process. Run the following query to determine the owner of the change table, the name of the change table, the capture values tracked in the change table, and the name of the change handler:
                              </p><pre class="oac_no_warn" dir="ltr">COLUMN CHANGE_TABLE_OWNER HEADING 'Change Table Owner' FORMAT A20
COLUMN CHANGE_TABLE_NAME HEADING 'Change Table Name' FORMAT A20
COLUMN CAPTURE_VALUES HEADING 'Capture|Values' FORMAT A7
COLUMN HANDLER_NAME HEADING 'Change Handler Name' FORMAT A25
 
SELECT CHANGE_TABLE_OWNER, 
       CHANGE_TABLE_NAME, 
       CAPTURE_VALUES, 
       HANDLER_NAME 
  FROM DBA_APPLY_CHANGE_HANDLERS
  WHERE SOURCE_TABLE_OWNER = 'HR' AND
        SOURCE_TABLE_NAME  = 'DEPARTMENTS' AND
        APPLY_NAME         = 'APP$CHG38' AND
        OPERATION_NAME     = 'UPDATE';
</pre><p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">                                          Capture
Change Table Owner   Change Table Name    Values  Change Handler Name
-------------------- -------------------- ------- -------------------------
HR                   DEP_CHANGE_TABLE     *       HR_DEPARTMENTS_CHG$10
</pre><p>Make a note of the values returned by this query, and use these values in the subsequent steps in this example.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Unset the change handler.</span><div>
                              <p>To unset a change handler, specify <code class="codeph">NULL</code> in the <code class="codeph">change_handler_name</code> parameter in the <code class="codeph">SET_CHANGE_HANDLER</code> procedure, and specify the change table owner, change table name, capture values, operation, source table, and apply process using the other procedure parameters. For example:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_APPLY_ADM.SET_CHANGE_HANDLER(
    change_table_name    =&gt;  'hr.dep_change_table',
    source_table_name    =&gt;  'hr.departments',
    capture_values       =&gt;  '*',
    apply_name           =&gt;  'app$chg38',
    operation_name       =&gt;  'UPDATE',
    change_handler_name  =&gt;  NULL);
END;
/
</pre><p>When this change handler is unset, it no longer records update changes.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Set the change handler.</span><div>
                              <p>To set the change handler, specify the change handler in the <code class="codeph">change_handler_name</code> parameter in the <code class="codeph">SET_CHANGE_HANDLER</code> procedure, and specify the change table owner, change table name, capture values, operation, source table, and apply process using the other procedure parameters. For example:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_APPLY_ADM.SET_CHANGE_HANDLER(
    change_table_name    =&gt;  'hr.dep_change_table',
    source_table_name    =&gt;  'hr.departments',
    capture_values       =&gt;  '*',
    apply_name           =&gt;  'app$chg38',
    operation_name       =&gt;  'UPDATE',
    change_handler_name  =&gt;  'hr_departments_chg$10');
END;
/
</pre><p>When this change handler is reset, it records update changes.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="STRMS1631"></a><div class="props_rev_3"><a id="GUID-1BE636BE-ECD6-4894-BA57-5A466F23DAC0" name="GUID-1BE636BE-ECD6-4894-BA57-5A466F23DAC0"></a><h4 id="STRMS-GUID-1BE636BE-ECD6-4894-BA57-5A466F23DAC0" class="sect4"><span class="enumeration_section">20.4.2 </span>Recording Changes to a Table Using Existing Oracle Streams Components
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can configure existing Oracle Streams components to record changes to a table. These existing components include capture processes, propagations, and apply processes. To use existing components, specify the component names when you run the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure in the <code class="codeph">DBMS_STREAMS_ADM</code> package.
                        </p>
                        <p>The example in this section builds on the Oracle Streams environment created in <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B">Recording Table Changes Using Local Capture and Apply on One Database</a>"</span>. That example configured an Oracle Streams environment that records changes to the <code class="codeph">hr.jobs</code> table. The example in this section configures the existing capture process and apply process to record changes to the <code class="codeph">hr.employees</code> table as well.
                        </p>
                        <p>The following table lists the decisions that were made about the changes that will be recorded for the <code class="codeph">hr.employees</code> table.
                        </p>
                        <div class="tblformalwide" id="GUID-1BE636BE-ECD6-4894-BA57-5A466F23DAC0__GUID-AD8E81D6-BF0E-4B83-90A8-12D2AB1A515A">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This table lists the decisions made about the example in this section." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="42%" id="d90840e6846">Decision</th>
                                    <th align="left" valign="bottom" width="58%" id="d90840e6849">Assumption for This Example</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e6854" headers="d90840e6846 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-FE72632A-BB26-4D4C-9327-F0BC5A9FB9AB">Decide Which Type of Environment to Configure</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e6854 d90840e6849 ">
                                       <p>This example uses existing Oracle Streams components that perform local capture and apply on one database.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e6863" headers="d90840e6846 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-81796914-7858-4126-8C52-FE18B40484E9">Decide Which Columns to Track</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e6863 d90840e6849 ">
                                       <p>This example tracks all of the columns in the <code class="codeph">hr.employees</code> table.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e6875" headers="d90840e6846 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-0692A127-781B-40A5-BA3E-87A0D1DB7F49">Decide Which Metadata to Record</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e6875 d90840e6849 ">
                                       <p>This example records the <code class="codeph">command_type</code>, <code class="codeph">value_type</code> (<code class="codeph">OLD</code> or <code class="codeph">NEW</code>), and <code class="codeph">commit_scn</code> metadata.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e6899" headers="d90840e6846 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-8F55224C-C45C-4543-8EF8-D1500D0DEFFD">Decide Which Values to Track for Update Operations</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e6899 d90840e6849 ">
                                       <p>This example tracks both the old and new column values when an update is performed on the source table.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e6908" headers="d90840e6846 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-6A65BE32-5775-43AC-BA3F-C6805968EE19">Decide Whether to Configure a KEEP_COLUMNS Transformation</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e6908 d90840e6849 ">
                                       <p>This example does not configure a <code class="codeph">KEEP_COLUMNS</code> declarative rule-based transformation.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e6920" headers="d90840e6846 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-122AEFEC-0431-4868-B8A3-FCFC1E730DCA">Decide Whether to Specify CREATE TABLE Options for the Change Table</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e6920 d90840e6849 ">
                                       <p>This example does not specify any <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> options. The change table is created with the default <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> options.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e6941" headers="d90840e6846 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-2ACF45A2-BA03-4B7E-BB63-B569168C814B">Decide Whether to Perform the Configuration Actions Directly or with a Script</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e6941 d90840e6849 ">
                                       <p>This example performs the configuration actions directly. It does not use a script.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d90840e6950" headers="d90840e6846 ">
                                       <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-5EFDF85C-9009-40C9-9314-60021274DCCA">Decide Whether to Replicate the Source Table</a></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d90840e6950 d90840e6849 ">
                                       <p>This example does not replicate the source table.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>Complete the following steps to record changes to a table using existing Oracle Streams components:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Ensure that the required prerequisites are met before running the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-1A4A130C-EB9A-4CFB-B17C-58FC410633FF">Prerequisites for the MAINTAIN_CHANGE _TABLE Procedure</a>"</span> for more information.</span><div>
                              <p>For this configuration, the following tasks must be completed:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Configure an Oracle Streams administrator on the database. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-5DE841D7-F4C2-4A6C-9F04-2BEC7543E174">Configure an Oracle Streams Administrator on All Databases</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the database is in <code class="codeph">ARCHIVELOG</code> mode. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-36F3BD35-BA62-4BF1-A81D-C701D8280156">Ensure That the Source Database Is in ARCHIVELOG Mode</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Ensure that the initialization parameters are set properly at the database. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-DB446A71-FEC3-42C9-A2CF-A2EE2FD540CA">Set Initialization Parameters That Are Relevant to Oracle Streams</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Configure the Oracle Streams pool properly at the database. See <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-FC856755-5AAC-45AE-BA5F-6360A49C51CD">Configure the Oracle Streams Pool</a>"</span>.
                                    </p>
                                 </li>
                              </ul>
                              <p>In this example, these requirements should already be met because an existing Oracle Streams environment is recording changes to the <code class="codeph">hr.jobs</code> table.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Determine the names of the existing Oracle Streams components.</span><div>
                              <p>In SQL*Plus, connect to the database that contains a component and query the appropriate data dictionary view:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Query the <code class="codeph">CAPTURE_NAME</code> column in the <code class="codeph">DBA_CAPTURE</code> view to determine the names of the capture processes in a database.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Query the <code class="codeph">PROPAGATION_NAME</code> column in the <code class="codeph">DBA_PROPAGATION</code> view to determine the names of the propagations in a database.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Query the <code class="codeph">APPLY_NAME</code> column in the <code class="codeph">DBA_APPLY</code> view to determine the names of the apply processes in a database.
                                    </p>
                                 </li>
                              </ul>
                              <p>This example records changes using a capture process and apply process in a single database. Therefore, it does not use a propagation.</p>
                              <p>Assume that the name of the capture process is <code class="codeph">cap$chg3</code> and that the name of the apply process is <code class="codeph">app$chg4</code>.
                              </p>
                              <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Connect to the database that contains the existing capture process as the Oracle Streams administrator.</span></li>
                        <li class="stepexpand"><span>Run the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure:</span><div><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_STREAMS_ADM.MAINTAIN_CHANGE_TABLE(
    change_table_name       =&gt; 'hr.employees_change_table',
    source_table_name       =&gt; 'hr.employees',
    column_type_list        =&gt; 'employee_id VARCHAR2(6),
                                first_name VARCHAR2(20),
                                last_name VARCHAR2(25),
                                email VARCHAR2(25),
                                phone_number VARCHAR2(20),
                                hire_date DATE,
                                job_id VARCHAR2(10),
                                salary NUMBER(8,2),
                                commission_pct NUMBER(2,2),
                                manager_id NUMBER(6),
                                department_id NUMBER(4)',
    extra_column_list        =&gt; 'command_type,value_type,commit_scn',
    capture_values           =&gt; '*',
    capture_name             =&gt; 'cap$chg3',
    apply_name               =&gt; 'app$chg4',
    keep_change_columns_only =&gt; FALSE);
END;
/
</pre><p>This procedure uses the default value for each parameter that is not specified. The <code class="codeph">keep_change_columns_only</code> parameter is set to <code class="codeph">FALSE</code> because all of the columns in the <code class="codeph">hr.jobs</code> table are listed in the <code class="codeph">column_type_list</code> parameter.
                              </p>
                              <p>When this procedure completes, the Oracle Streams environment is configured.</p>
                              <p>If this procedure encounters an error and stops, then see <a href="../strep/managing-oracle-streams-replication.html#STREP149"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for information about either recovering from the error or rolling back the configuration operation by using the <code class="codeph">DBMS_STREAMS_ADM.RECOVER_OPERATION</code> procedure.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>The resulting Oracle Streams environment has the following characteristics:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The characteristics previously described in <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B">Recording Table Changes Using Local Capture and Apply on One Database</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>An unconditional supplemental log group includes all of the columns in the <code class="codeph">hr.employees</code> table.
                              </p>
                           </li>
                           <li>
                              <p>The database has an <code class="codeph">hr.employees_change_table</code>. This change table has the following definition:
                              </p><pre class="oac_no_warn" dir="ltr"> Name                                      Null?    Type
 ----------------------------------------- -------- ---------------------------
 COMMAND_TYPE$                                      VARCHAR2(10)
 VALUE_TYPE$                                        VARCHAR2(3)
 COMMIT_SCN$                                        NUMBER
 EMPLOYEE_ID                                        VARCHAR2(6)
 FIRST_NAME                                         VARCHAR2(20)
 LAST_NAME                                          VARCHAR2(25)
 EMAIL                                              VARCHAR2(25)
 PHONE_NUMBER                                       VARCHAR2(20)
 HIRE_DATE                                          DATE
 JOB_ID                                             VARCHAR2(10)
 SALARY                                             NUMBER(8,2)
 COMMISSION_PCT                                     NUMBER(2,2)
 MANAGER_ID                                         NUMBER(6)
 DEPARTMENT_ID                                      NUMBER(4)
</pre></li>
                           <li>
                              <p>The capture process <code class="codeph">cap$chg3</code> captures data manipulation language (DML) changes made to the <code class="codeph">hr.employees</code> table.
                              </p>
                           </li>
                           <li>
                              <p>An apply process <code class="codeph">app$chg4</code> uses change handlers with system-generated names to process the captured row LCRs for inserts, updates, and deletes on the <code class="codeph">hr.employees</code> table. The change handlers use the information in the row LCRs to populate the <code class="codeph">hr.employees_change_table</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STRMS1637"></a><div class="props_rev_3"><a id="GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C" name="GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C"></a><h4 id="STRMS-GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C" class="sect4"><span class="enumeration_section">20.4.3 </span>Maintaining Change Tables
                  </h4>
                  <div>
                     <div class="section">
                        <p>Change tables can grow large over time. You can query one or more change tables to obtain a transactionally consistent set of change data. When the change data is no longer needed, you can remove it from the change tables. To perform these operations, configure the change table to track commit SCN metadata by including <code class="codeph">commit_scn</code> in the <code class="codeph">extra_column_list</code> parameter when you run the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure. You can use the commit SCN to obtain consistent data and to specify which data to remove when it is no longer needed.
                        </p>
                        <p>The example in this section maintains the change tables created in the following sections:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The <code class="codeph">hr.jobs_change_table</code> is created in the example in <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B">Recording Table Changes Using Local Capture and Apply on One Database</a>"</span></p>
                           </li>
                           <li>
                              <p>The <code class="codeph">hr.employees_change_table</code> is created in the example in <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-1BE636BE-ECD6-4894-BA57-5A466F23DAC0">Recording Changes to a Table Using Existing Oracle Streams Components</a>"</span></p>
                           </li>
                        </ul>
                        <p>The example in this section queries the change tables to obtain a transactionally consistent set of change data and then removes the change data that has been viewed.</p>
                        <p>Complete the following steps to maintain change tables:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand" id="GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C__CHDDIAID"><span>Determine the current low-watermark of the apply process that applies changes to the change table. Changes that were committed at a system change number (SCN) less than or equal to the low-watermark have definitely been applied.</span><div>
                              <p>For example, if the name of the apply process is <code class="codeph">app$chg4</code>, then run the following query to determine its low-watermark:
                              </p><pre class="oac_no_warn" dir="ltr">SELECT APPLIED_MESSAGE_NUMBER 
  FROM DBA_APPLY_PROGRESS 
  WHERE APPLY_NAME='APP$CHG4';
</pre><p>Make a note of the returned low-watermark SCN. For this example, assume that the low-watermark SCN is <code class="codeph">663090</code>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C__CHDEEGDE"><span>Query the change tables for changes that are less than or equal to the low-watermark returned in Step <a href="using-oracle-streams-to-record-table-changes.html#GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C__CHDDIAID">1</a>.</span><div>
                              <p>For example, run the following query on the <code class="codeph">hr.jobs_change_table</code>:
                              </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM hr.jobs_change_table WHERE commit_scn$ &lt;= 663090;
</pre><p>For example, run the following query on the <code class="codeph">hr.employees_change_table</code>:
                              </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM hr.employees_change_table WHERE commit_scn$ &lt;= 663090;
</pre><p>These queries specify the low-watermark SCN returned in Step <a href="using-oracle-streams-to-record-table-changes.html#GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C__CHDDIAID">1</a>. The changes returned are transactionally consistent up to the specified SCN.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>When the changes viewed in Step <a href="using-oracle-streams-to-record-table-changes.html#GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C__CHDEEGDE">2</a> are no longer needed, run the following statements to remove the changes:</span><div><pre class="oac_no_warn" dir="ltr">DELETE FROM hr.jobs_change_table WHERE commit_scn$ &lt;= 663090;

DELETE FROM hr.employees_change_table WHERE commit_scn$ &lt;= 663090;

COMMIT;
</pre><p>These queries specify the same low-watermark SCN returned in Step <a href="using-oracle-streams-to-record-table-changes.html#GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C__CHDDIAID">1</a> and used in the queries in Step <a href="using-oracle-streams-to-record-table-changes.html#GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C__CHDEEGDE">2</a>.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>There are other ways to maintain change tables. For example, you can query them using a range of changes between two SCN values. You can also create a view to show a consistent set of data in two or more change tables.</p>
                        <div class="infoboxnotealso" id="GUID-96F9D7F8-1E05-431C-B3B1-0A5A22AAA44C__GUID-32C13DF2-BB3F-4200-92F4-F27429A8FF08">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="advanced-apply-process-concepts.html#GUID-BA8BABE8-1FE3-4B6E-9C40-42DD80D59259">Low-Watermark and High-Watermark for an Apply Process</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="STRMS1599"></a><div class="props_rev_3"><a id="GUID-E7EA7E53-3930-4B19-88F0-E18F4A258BA5" name="GUID-E7EA7E53-3930-4B19-88F0-E18F4A258BA5"></a><h4 id="STRMS-GUID-E7EA7E53-3930-4B19-88F0-E18F4A258BA5" class="sect4"><span class="enumeration_section">20.4.4 </span>Managing the Oracle Streams Environment
                  </h4>
                  <div>
                     <p>After the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure has configured the Oracle Streams environment, you can manage the Oracle Streams environment by referring to the sections in the following table.
                     </p>
                     <div class="tblformal" id="GUID-E7EA7E53-3930-4B19-88F0-E18F4A258BA5__GUID-4E75F5E3-BF09-4F9F-84F5-2957A414C9D8">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table includes cross references to instructions for managing various parts of an Oracle Streams environment." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="28%" id="d90840e7536">To Manage</th>
                                 <th align="left" valign="bottom" width="72%" id="d90840e7539">See</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e7544" headers="d90840e7536 ">
                                    <p>Supplemental logging</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e7544 d90840e7539 ">
                                    <p><a href="../strep/preparing-for-oracle-streams-replication.html#STREP107"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e7554" headers="d90840e7536 ">
                                    <p>Capture processes</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e7554 d90840e7539 ">
                                    <p><span class="q">"<a href="managing-oracle-streams-implicit-capture.html#GUID-0D7FEE0E-48E4-43E2-AFBB-DF89D37A94B7">Managing a Capture Process</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e7564" headers="d90840e7536 ">
                                    <p>Apply processes</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e7564 d90840e7539 ">
                                    <p><a href="managing-oracle-streams-information-consumption.html#GUID-9DEB34C0-21DC-41E0-96CE-699D279F8C42"> Managing Oracle Streams Information Consumption</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e7573" headers="d90840e7536 ">
                                    <p>Statement DML handlers</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e7573 d90840e7539 ">
                                    <p><span class="q">"<a href="managing-oracle-streams-information-consumption.html#GUID-52FFD329-6D03-4389-A7B2-F00088248092">Managing a Statement DML Handler</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e7583" headers="d90840e7536 ">
                                    <p>Queues</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e7583 d90840e7539 ">
                                    <p><span class="q">"<a href="managing-staging-and-propagation.html#GUID-868E73A3-D956-460B-ACBF-B9796CEB3889">Managing Queues</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e7593" headers="d90840e7536 ">
                                    <p>Propagations</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e7593 d90840e7539 ">
                                    <p><span class="q">"<a href="managing-staging-and-propagation.html#GUID-138AAD67-94D5-4475-91EF-5EE7A78B4F49">Managing Oracle Streams Propagations and Propagation Jobs</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e7603" headers="d90840e7536 ">
                                    <p>Rules</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e7603 d90840e7539 ">
                                    <p><a href="managing-rules.html#GUID-AB9D9589-CD21-4EED-959B-72CA569334F3"> Managing Rules</a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div><a id="STRMS1545"></a><div class="props_rev_3"><a id="GUID-4B23B590-2F75-4BCF-9C7D-4C4598B00DC8" name="GUID-4B23B590-2F75-4BCF-9C7D-4C4598B00DC8"></a><h3 id="STRMS-GUID-4B23B590-2F75-4BCF-9C7D-4C4598B00DC8" class="sect3"><span class="enumeration_section">20.5 </span>Monitoring an Oracle Streams Environment That Records Table Changes
               </h3>
               <div>
                  <p>This section describes monitoring the Oracle Streams components in a configuration that tracks table changes.</p>
                  <p>This section contains these topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-9BA4D532-C2F3-4662-85E8-F77799A3DFEA">Monitoring a Change Table</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-8D73A262-DF7B-40AA-8C52-FCB19A618ED1">Monitoring Change Handlers</a></p>
                     </li>
                     <li>
                        <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-C728BFA6-884B-4035-A91C-4156EB89EB32">Monitoring the Oracle Streams Environment</a></p>
                     </li>
                  </ul>
               </div><a id="STRMS1547"></a><div class="props_rev_3"><a id="GUID-9BA4D532-C2F3-4662-85E8-F77799A3DFEA" name="GUID-9BA4D532-C2F3-4662-85E8-F77799A3DFEA"></a><h4 id="STRMS-GUID-9BA4D532-C2F3-4662-85E8-F77799A3DFEA" class="sect4"><span class="enumeration_section">20.5.1 </span>Monitoring a Change Table
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can monitor a change table using <code class="codeph">SELECT</code> statement the same way you monitor other database tables. The columns in the change table depend on the <code class="codeph">column_type_list</code> parameter in the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure. The change table can include a tracking column for each column in the source table, or it can include a subset of the columns in the source table. In addition, the change table can include several additional columns that contain metadata about each change.
                        </p>
                        <p>For example, the Oracle Streams environment configured in <span class="q">"<a href="using-oracle-streams-to-record-table-changes.html#GUID-245E4052-B915-4DA9-B171-FBE9EEBD8E2B">Recording Table Changes Using Local Capture and Apply on One Database</a>"</span> records changes to the <code class="codeph">hr.jobs</code> table. Each column in the <code class="codeph">hr.jobs</code> table is tracked in the change table <code class="codeph">hr.jobs_change_table</code>, and the default metadata columns (<code class="codeph">command_type$</code>, <code class="codeph">value_type$</code>, and <code class="codeph">commit_scn$</code>) are included in the change table.
                        </p>
                        <p>To monitor this sample change table, complete the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect to the database as <code class="codeph">hr</code> user.</span><div>
                              <p>See <a href="../admin/index.html"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand" id="GUID-9BA4D532-C2F3-4662-85E8-F77799A3DFEA__CHDFJCFF"><span>Make changes to the source table so that the change table is populated:</span><div><pre class="oac_no_warn" dir="ltr">INSERT INTO hr.jobs VALUES('BN_CNTR','Bean Counter',6000,8000);
COMMIT;

UPDATE hr.jobs SET min_salary=7000 WHERE job_id='BN_CNTR';
COMMIT;

DELETE FROM hr.jobs WHERE job_id='BN_CNTR';
COMMIT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Query the change table:</span><div><pre class="oac_no_warn" dir="ltr">COLUMN COMMAND_TYPE$ HEADING 'Command Type' FORMAT A12
COLUMN VALUE_TYPE$ HEADING 'Value|Type' FORMAT A5
COLUMN COMMIT_SCN$ HEADING 'Commit SCN' FORMAT 9999999
COLUMN JOB_ID HEADING 'Job ID' FORMAT A10
COLUMN JOB_TITLE HEADING 'Job Title' FORMAT A12
COLUMN MIN_SALARY HEADING 'Minimum|Salary' FORMAT 9999999
COLUMN MAX_SALARY HEADING 'Maximum|Salary' FORMAT 9999999

SELECT * FROM hr.jobs_change_table;
</pre><p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">             Value                                     Minimum  Maximum
Command Type Type  Commit SCN Job ID     Job Title      Salary   Salary
------------ ----- ---------- ---------- ------------ -------- --------
INSERT       NEW       663075 BN_CNTR    Bean Counter     6000     8000
UPDATE       OLD       663082 BN_CNTR    Bean Counter     6000     8000
UPDATE       NEW       663082 BN_CNTR    Bean Counter     7000     8000
DELETE       OLD       663090 BN_CNTR    Bean Counter     7000     8000
</pre><p>This output shows the changes made in Step <a href="using-oracle-streams-to-record-table-changes.html#GUID-9BA4D532-C2F3-4662-85E8-F77799A3DFEA__CHDFJCFF">2</a>.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="STRMS1600"></a><div class="props_rev_3"><a id="GUID-8D73A262-DF7B-40AA-8C52-FCB19A618ED1" name="GUID-8D73A262-DF7B-40AA-8C52-FCB19A618ED1"></a><h4 id="STRMS-GUID-8D73A262-DF7B-40AA-8C52-FCB19A618ED1" class="sect4"><span class="enumeration_section">20.5.2 </span>Monitoring Change Handlers
                  </h4>
                  <div>
                     <p>This section describes monitoring change handlers.</p>
                     <p>This section contains these topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-B12AFFB8-38EC-4A64-B1CE-A397A74A3368">Displaying General Information About Change Handlers</a></p>
                        </li>
                        <li>
                           <p><a href="using-oracle-streams-to-record-table-changes.html#GUID-7E22F093-E047-4F07-9DA9-F554031F3359">Displaying the Change Table and Source Table for Change Handlers</a></p>
                        </li>
                     </ul>
                  </div><a id="STRMS1601"></a><div class="props_rev_3"><a id="GUID-B12AFFB8-38EC-4A64-B1CE-A397A74A3368" name="GUID-B12AFFB8-38EC-4A64-B1CE-A397A74A3368"></a><h5 id="STRMS-GUID-B12AFFB8-38EC-4A64-B1CE-A397A74A3368" class="sect5"><span class="enumeration_section">20.5.2.1 </span>Displaying General Information About Change Handlers
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can query the <code class="codeph">DBA_APPLY_CHANGE_HANDLERS</code> view to display the following information about each change handler in a database:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The name of the change handler</p>
                              </li>
                              <li>
                                 <p>The captured values tracked by the change handler for update operations, either <code class="codeph">NEW</code> for new column values, <code class="codeph">OLD</code> for old column values, or <code class="codeph">*</code> for both new and old column values
                                 </p>
                              </li>
                              <li>
                                 <p>The name of the apply process that uses the change handler</p>
                              </li>
                              <li>
                                 <p>The operation for which the change handler is invoked, either <code class="codeph">INSERT</code>, <code class="codeph">UPDATE</code>, or <code class="codeph">DELETE</code></p>
                              </li>
                           </ul>
                           <p>Run the following query to display this information:</p><pre class="oac_no_warn" dir="ltr">COLUMN HANDLER_NAME HEADING 'Change Handler Name' FORMAT A30
COLUMN CAPTURE_VALUES HEADING 'Capture|Values' FORMAT A7
COLUMN APPLY_NAME HEADING 'Apply|Process' FORMAT A10
COLUMN OPERATION_NAME HEADING 'Operation' FORMAT A10
 
SELECT HANDLER_NAME, 
       CAPTURE_VALUES,
       APPLY_NAME,
       OPERATION_NAME
  FROM DBA_APPLY_CHANGE_HANDLERS
  ORDER BY HANDLER_NAME;
</pre><p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">                               Capture Apply 
Change Handler Name            Values  Process    Operation
------------------------------ ------- ---------- ----------
HR_DEPARTMENTS_CHG$40                  APP$CHG38  INSERT
HR_DEPARTMENTS_CHG$41                  APP$CHG38  DELETE
HR_DEPARTMENTS_CHG$42          *       APP$CHG38  UPDATE
HR_JOBS_CHG$80                         APP$CHG79  INSERT
HR_JOBS_CHG$81                         APP$CHG79  DELETE
HR_JOBS_CHG$82                 *       APP$CHG79  UPDATE
</pre><p>Notice that the "Capture Values" column is <code class="codeph">NULL</code> for <code class="codeph">INSERT</code> and <code class="codeph">DELETE</code> operations. The <code class="codeph">DBA_APPLY_CHANGE_HANDLERS</code> view only displays captured values for change handlers that track <code class="codeph">UPDATE</code> operations. Only new column values are possible for inserts, and only old column values are possible for deletes.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="STRMS1602"></a><div class="props_rev_3"><a id="GUID-7E22F093-E047-4F07-9DA9-F554031F3359" name="GUID-7E22F093-E047-4F07-9DA9-F554031F3359"></a><h5 id="STRMS-GUID-7E22F093-E047-4F07-9DA9-F554031F3359" class="sect5"><span class="enumeration_section">20.5.2.2 </span>Displaying the Change Table and Source Table for Change Handlers
                     </h5>
                     <div>
                        <div class="section">
                           <p>You can query the <code class="codeph">DBA_APPLY_CHANGE_HANDLERS</code> view to display the following information about each change handler in a database:
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The name of the change handler</p>
                              </li>
                              <li>
                                 <p>The owner of the change table that tracks changes to the source table</p>
                              </li>
                              <li>
                                 <p>The name of the change table that tracks changes to the source table</p>
                              </li>
                              <li>
                                 <p>The owner of the source table</p>
                              </li>
                              <li>
                                 <p>The name of the source table</p>
                              </li>
                           </ul>
                           <p>Run the following query to display this information:</p><pre class="oac_no_warn" dir="ltr">COLUMN HANDLER_NAME HEADING 'Change Handler Name' FORMAT A25
COLUMN CHANGE_TABLE_OWNER HEADING 'Change|Table|Owner' FORMAT A8
COLUMN CHANGE_TABLE_NAME HEADING 'Change|Table|Name' FORMAT A17
COLUMN SOURCE_TABLE_OWNER HEADING 'Source|Table|Owner' FORMAT A8
COLUMN SOURCE_TABLE_NAME HEADING 'Source|Table|Name' FORMAT A17
 
SELECT HANDLER_NAME,
       CHANGE_TABLE_OWNER, 
       CHANGE_TABLE_NAME, 
       SOURCE_TABLE_OWNER, 
       SOURCE_TABLE_NAME 
  FROM DBA_APPLY_CHANGE_HANDLERS
  ORDER BY HANDLER_NAME;
</pre><p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">                          Change   Change            Source   Source
                          Table    Table             Table    Table
Change Handler Name       Owner    Name              Owner    Name
------------------------- -------- ----------------- -------- -----------------
HR_DEPARTMENTS_CHG$40     HR       DEP_CHANGE_TABLE  HR       DEPARTMENTS
HR_DEPARTMENTS_CHG$41     HR       DEP_CHANGE_TABLE  HR       DEPARTMENTS
HR_DEPARTMENTS_CHG$42     HR       DEP_CHANGE_TABLE  HR       DEPARTMENTS
HR_JOBS_CHG$80            HR       JOBS_CHANGE_TABLE HR       JOBS
HR_JOBS_CHG$81            HR       JOBS_CHANGE_TABLE HR       JOBS
HR_JOBS_CHG$82            HR       JOBS_CHANGE_TABLE HR       JOBS
</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="STRMS1546"></a><div class="props_rev_3"><a id="GUID-C728BFA6-884B-4035-A91C-4156EB89EB32" name="GUID-C728BFA6-884B-4035-A91C-4156EB89EB32"></a><h4 id="STRMS-GUID-C728BFA6-884B-4035-A91C-4156EB89EB32" class="sect4"><span class="enumeration_section">20.5.3 </span>Monitoring the Oracle Streams Environment
                  </h4>
                  <div>
                     <p>After the <code class="codeph">MAINTAIN_CHANGE_TABLE</code> procedure has configured the Oracle Streams environment, you can monitor the Oracle Streams environment by referring to the sections in the following table.
                     </p>
                     <div class="tblformal" id="GUID-C728BFA6-884B-4035-A91C-4156EB89EB32__GUID-40D01D3F-6CF1-4B8F-86E3-10B9BF513CE9">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This table includes cross references to instructions for monitoring various parts of an Oracle Streams environment." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="28%" id="d90840e8606">To Monitor</th>
                                 <th align="left" valign="bottom" width="72%" id="d90840e8609">See</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e8614" headers="d90840e8606 ">
                                    <p>Supplemental logging</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e8614 d90840e8609 ">
                                    <p><span class="q">"<a href="monitoring-oracle-streams-implicit-capture.html#GUID-14568F8A-2CC6-44AF-A0FB-C04960ECA4A3">Monitoring Supplemental Logging</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e8624" headers="d90840e8606 ">
                                    <p>Capture processes</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e8624 d90840e8609 ">
                                    <p><span class="q">"<a href="monitoring-oracle-streams-implicit-capture.html#GUID-F763BE4D-CE6B-4C91-9FBF-73F9E75D5A62">Monitoring a Capture Process</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e8634" headers="d90840e8606 ">
                                    <p>Apply processes</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e8634 d90840e8609 ">
                                    <p><a href="monitoring-oracle-streams-apply-processes.html#GUID-F371ACB8-C66F-4580-9DD0-491997F6DF80"> Monitoring Oracle Streams Apply Processes</a></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e8643" headers="d90840e8606 ">
                                    <p>Statement DML handlers</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e8643 d90840e8609 ">
                                    <p><span class="q">"<a href="monitoring-oracle-streams-apply-processes.html#GUID-9365EAA5-67EF-4095-B70B-3D52100F6977">Displaying Information About Statement DML Handlers</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e8653" headers="d90840e8606 ">
                                    <p>Queues</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e8653 d90840e8609 ">
                                    <p><span class="q">"<a href="monitoring-oracle-streams-queues-and-propagations.html#GUID-856FBF7C-3736-4F60-BE15-90034CAE4ACA">Monitoring Buffered Queues</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e8663" headers="d90840e8606 ">
                                    <p>Propagations</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e8663 d90840e8609 ">
                                    <p><span class="q">"<a href="monitoring-oracle-streams-queues-and-propagations.html#GUID-F1B5E12C-21C0-416E-8D6C-CB1B6B6A93B2">Monitoring Oracle Streams Propagations and Propagation Jobs</a>"</span></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="28%" id="d90840e8673" headers="d90840e8606 ">
                                    <p>Rules</p>
                                 </td>
                                 <td align="left" valign="top" width="72%" headers="d90840e8673 d90840e8609 ">
                                    <p><a href="monitoring-rules.html#GUID-8D031A97-43B4-4575-9931-FF4491058194"> Monitoring Rules</a></p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>