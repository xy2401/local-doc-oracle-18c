<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Development and Deployment of a .NET&nbsp;Stored Function Demo</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Extensions for .NET Developer's Guide ">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Extensions for .NET Developer's Guide for Microsoft Windows">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-database-extensions-net.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-08-05T11:02:35-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E90596-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="devdeploy.html" title="Previous" type="text/html">
      <link rel="next" href="datatype-conversion.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="OracleÂ® Database Extensions for .NET">
    <meta name="dcterms.isVersionOf" content="CLRNT">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="devdeploy.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="datatype-conversion.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Extensions for .NET Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Development and Deployment of a .NET&nbsp;Stored Function Demo</li>
            </ol>
            <a id="GUID-EDE4477A-076A-42DB-989F-AF9009AA82B1" name="GUID-EDE4477A-076A-42DB-989F-AF9009AA82B1"></a><a id="CLRNT0004"></a>
            
            <h2 id="CLRNT-GUID-EDE4477A-076A-42DB-989F-AF9009AA82B1" class="sect2"><span class="enumeration_chapter">4 </span> Development and Deployment of a .NET&nbsp;Stored Function Demo
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><a id="d6671e33" class="indexterm-anchor"></a><a id="d6671e37" class="indexterm-anchor"></a><a id="d6671e41" class="indexterm-anchor"></a>These topics demonstrate how to develop and deploy a .NET stored function.
               </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="demo.html#GUID-1D68D53A-AD55-4953-886E-34BA2ED527A8">Overview of .NET Stored Function Demonstration</a></p>
                  </li>
                  <li>
                     <p><a href="demo.html#GUID-643EF069-AD2A-4801-B41F-54F5A12F6609">Step 1: Create the GetDeptNo Function and Build it into an Assembly</a></p>
                  </li>
                  <li>
                     <p><a href="demo.html#GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774">Step 2: Start the Oracle Deployment Wizard for .NET</a></p>
                  </li>
                  <li>
                     <p><a href="demo.html#GUID-85910CF7-EA77-42A6-A51D-6F313BAD61ED">Step 3: Choose the Function to Deploy</a></p>
                  </li>
                  <li>
                     <p><a href="demo.html#GUID-DA044AAC-330C-47F7-B049-106CF64244BE">Step 4: Determine the Appropriate Parameter Type Mappings</a></p>
                  </li>
                  <li>
                     <p><a href="demo.html#GUID-2EA049D6-69EC-4DC0-9615-7CB64C43987C">Step 5: Deploy the Function to an Oracle Database</a></p>
                  </li>
                  <li>
                     <p><a href="demo.html#GUID-66394FD3-43AC-4969-9678-EEC3F9ECCACA">Step 6: Test the Function</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-EDE4477A-076A-42DB-989F-AF9009AA82B1__GUID-10536744-8D7B-4386-9A36-1508C045A9C7">
                  <p class="notep1">See Also:</p>
                  <p><span class="italic">Oracle Developer Tools for Visual Studio Help</span> for further information for further information about these components
                  </p>
               </div>
            </div><a id="CLRNT153"></a><div class="props_rev_3"><a id="GUID-1D68D53A-AD55-4953-886E-34BA2ED527A8" name="GUID-1D68D53A-AD55-4953-886E-34BA2ED527A8"></a><h3 id="CLRNT-GUID-1D68D53A-AD55-4953-886E-34BA2ED527A8" class="sect3"><span class="enumeration_section">4.1 </span>Overview of .NET Stored Function Demonstration
               </h3>
               <div>
                  <p>This demonstration uses Oracle Developer Tools for Visual Studio extensively although some processes can be performed with other Oracle tools. Also, the demonstration refers to the following components of Oracle Developer Tools for Visual Studio:      </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Oracle Explorer</p>
                     </li>
                     <li>
                        <p>Oracle Project</p>
                     </li>
                     <li>
                        <p>Oracle Deployment Wizard for .NET</p>
                     </li>
                  </ul>
                  <p>In this demonstration, you will develop and deploy a .NET stored function named <code class="codeph">GetDeptNo</code>, with a PL/SQL wrapper, <code class="codeph">GETDEPTNO</code>. The <code class="codeph">GetDeptNo</code> function accepts an employee number (<code class="codeph">EMPNO</code>), performs a query, and returns the department number (<code class="codeph">DEPTNO)</code> of the employee. 
                  </p>
               </div>
            </div><a id="CLRNT154"></a><div class="props_rev_3"><a id="GUID-643EF069-AD2A-4801-B41F-54F5A12F6609" name="GUID-643EF069-AD2A-4801-B41F-54F5A12F6609"></a><h3 id="CLRNT-GUID-643EF069-AD2A-4801-B41F-54F5A12F6609" class="sect3"><span class="enumeration_section">4.2 </span>Step 1: Create the GetDeptNo Function and Build it into an Assembly
               </h3>
               <div>
                  <div class="section">
                     <p>This demonstration begins by opening Visual Studio, creating a function, and building it into an assembly.</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Open Visual Studio and connect as <code class="codeph">scott/</code><span class="italic"><code class="codeph">password</code></span>. See <span class="italic">Oracle Developer Tools for Visual Studio Help</span> for information about connecting.</span></li>
                     <li class="stepexpand"><span>From the Visual Studio menu, select <span class="bold">File</span>, then <span class="bold">New Project</span>. </span></li>
                     <li class="stepexpand"><span>To create an Oracle Project template, select the project type <span class="bold">Visual C# Projects</span>, and select <span class="bold">Oracle Project</span>.</span></li>
                     <li class="stepexpand"><span>Name the project <code class="codeph">CLRLibrary1</code> and provide a location for it.</span><div>
                           <p>A class named <code class="codeph">CLRLibrary1.Class1</code> appears. It contains a template for a stored procedure.
                           </p>
                           <div class="figure" id="GUID-643EF069-AD2A-4801-B41F-54F5A12F6609__GUID-3D0A1E84-1BF0-49D7-8EB9-1CBF42E2D004"><img src="img/oracleproject.gif" alt="Description of oracleproject.gif follows" title="Description of oracleproject.gif follows" longdesc="img_text/oracleproject.html"><br><a href="img_text/oracleproject.html">Description of the illustration oracleproject.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>Copy the following code over the base class and save.</span><div><pre class="oac_no_warn" dir="ltr">using System;
// use the ODP.NET provider
using Oracle.DataAccess.Client;
using Oracle.DataAccess.Types;
 
namespace CLRLibrary1
{
  // Sample .NET stored function returning department number for 
  // a given employee number
  public class Class1
  {
    public static int GetDeptNo(int empno)
    {
      int deptno = 0;
 
      // Check for context connection
      OracleConnection conn = new OracleConnection();
      if( OracleConnection.IsAvailable == true )
      {
        conn.ConnectionString = "context connection=true";
      }
      else
      {
        throw new InvalidOperationException("context connection" +
          "not available");
      }
 
      conn.Open();
      // Create and execute a command
      OracleCommand cmd = conn.CreateCommand();
      cmd.CommandText = "SELECT DEPTNO FROM EMP WHERE EMPNO = :1";
 
      cmd.Parameters.Add(":1",OracleDbType.Int32,empno, 
        System.Data.ParameterDirection.Input);
 
      OracleDataReader rdr = cmd.ExecuteReader();
 
      if (rdr.Read())
        deptno = rdr.GetInt32(0);
 
      rdr.Close();
      cmd.Dispose();
      conn.Close();
 
      return deptno;
 
    } // GetDeptNo
  } // Class1
} // CLRLibrary1
</pre></div>
                     </li>
                     <li class="stepexpand"><span>From the <span class="bold">Build</span> menu, select <span class="bold">Build Solution</span> or <span class="bold">Build CLRLibrary1</span>.</span><div>
                           <p>This builds the code into an assembly.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Save.</span></li>
                  </ol>
               </div>
            </div><a id="CLRNT155"></a><div class="props_rev_3"><a id="GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774" name="GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774"></a><h3 id="CLRNT-GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774" class="sect3"><span class="enumeration_section">4.3 </span>Step 2: Start the Oracle Deployment Wizard for .NET
               </h3>
               <div>
                  <div class="section">
                     <p>Oracle Deployment Wizard for .NET can be started from the build menu.</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>From the <span class="bold">Build</span> menu, select <span class="bold">Deploy CLRLibrary1</span>.</span><div>
                           <div class="figure" id="GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774__GUID-D1D60DF4-D97C-4625-AD6A-ECDA204A8DCC"><img src="img/deploymenu.gif" alt="Description of deploymenu.gif follows" title="Description of deploymenu.gif follows" longdesc="img_text/deploymenu.html"><br><a href="img_text/deploymenu.html">Description of the illustration deploymenu.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>When the Welcome window appears, select <span class="bold">Do not show this page again</span>, if you want.</span><div>
                           <p>Then, click <span class="bold">Next</span>. 
                           </p>
                           <div class="figure" id="GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774__GUID-92CADC4F-CD90-4C63-B1E1-66B32F8F1D33"><img src="img/titlepage.gif" alt="Description of titlepage.gif follows" title="Description of titlepage.gif follows" longdesc="img_text/titlepage.html"><br><a href="img_text/titlepage.html">Description of the illustration titlepage.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>The Configure your OracleConnection window appears. </span><div>
                           <p>Choose your connection from the drop-down list, and click <span class="bold">Next</span> or click <span class="bold">New Connection</span>, if you are not connected.
                           </p>
                           <p>You must choose or add a <code class="codeph">SYSBA</code> connection.
                           </p>
                           <div class="figure" id="GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774__GUID-21E4451A-510C-4615-8099-7F38572BC245"><img src="img/usingdeploywizard1.gif" alt="Description of usingdeploywizard1.gif follows" title="Description of usingdeploywizard1.gif follows" longdesc="img_text/usingdeploywizard1.html"><br><a href="img_text/usingdeploywizard1.html">Description of the illustration usingdeploywizard1.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>If you have selected New Connection, the Add Connection window appears. </span><div>
                           <p>In the Connection Details tab, select the Data source name from the drop-down list.You can select an option to Use Windows integrated authentication or an option Use a specific user name and password, and enter that information.If you want, select <span class="bold">Save</span> password.The option for Role shows <code class="codeph">SYSDBA</code>, which is the only available option.If you want to test the connection, click <span class="bold">Test connection</span>.Click <span class="bold">OK</span>,
                           </p>
                           <div class="figure" id="GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774__GUID-16C6132A-1073-4AC5-BDFC-4794A526FD67"><img src="img/sysdbaaddconnection.gif" alt="Description of sysdbaaddconnection.gif follows" title="Description of sysdbaaddconnection.gif follows" longdesc="img_text/sysdbaaddconnection.html"><br><a href="img_text/sysdbaaddconnection.html">Description of the illustration sysdbaaddconnection.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>The Specify your deployment option window appears. </span><div>
                           <p>The first time you run the deployment wizard, select <span class="bold">Copy assembly and generate stored procedures</span>. If you later modify your function or stored procedure, you can run the deployment wizard again, and choose to perform just one of these operations.Click <span class="bold">Next</span>.
                           </p>
                           <div class="figure" id="GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774__GUID-2C627A89-C8F1-41B7-AFE8-3C857F9CA16D"><img src="img/usingdeploywizard2.gif" alt="Description of usingdeploywizard2.gif follows" title="Description of usingdeploywizard2.gif follows" longdesc="img_text/usingdeploywizard2.html"><br><a href="img_text/usingdeploywizard2.html">Description of the illustration usingdeploywizard2.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>The Specify an assembly and library name window appears.</span><div>
                           <p>To specify the assembly, select the project from the drop-down list, or select <span class="bold">File</span>, and click <span class="bold">Browse</span> to navigate to the one you want. 
                           </p>
                           <p>To specify the name of the library database object to be used for the selected assembly, accept the default, select the name from the drop-down list, or enter a new name. </p>
                           <p>For this demonstration, accept the default project and library name and click <span class="bold">Next</span>.
                           </p>
                           <div class="figure" id="GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774__GUID-58894107-725C-41B1-9A97-80CA1A355E89"><img src="img/usingdeploywizard3.gif" alt="Description of usingdeploywizard3.gif follows" title="Description of usingdeploywizard3.gif follows" longdesc="img_text/usingdeploywizard3.html"><br><a href="img_text/usingdeploywizard3.html">Description of the illustration usingdeploywizard3.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>The Specify Copy Options window appears.</span><div>
                           <p>To specify the dependent assemblies to copy to the database, select them from the list. The list displays all possible dependent assemblies. In this case, the assemblies displayed have already been copied to the database and, therefore, there is no need to copy them. To deploy the assembly to a directory other than the default <code class="codeph">bin\clr</code> directory, modify the destination path. The destination must be a <code class="codeph">bin\clr</code> directory or one of its existing subdirectories.
                           </p>
                           <p>For this demonstration, do not select any dependent assemblies, and do not modify the destination path.</p>
                           <p>If you want to, select <span class="bold">Overwrite the file if it already exists in the database</span>. 
                           </p>
                           <p>Then, click <span class="bold">Next</span>.
                           </p>
                           <div class="figure" id="GUID-EF6C7D35-A372-4C23-B8CF-3572F9822774__GUID-B899394D-677C-4CFD-8477-4BFB9F88C3EE"><img src="img/copyoptions.gif" alt="Description of copyoptions.gif follows" title="Description of copyoptions.gif follows" longdesc="img_text/copyoptions.html"><br><a href="img_text/copyoptions.html">Description of the illustration copyoptions.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="CLRNT156"></a><div class="props_rev_3"><a id="GUID-85910CF7-EA77-42A6-A51D-6F313BAD61ED" name="GUID-85910CF7-EA77-42A6-A51D-6F313BAD61ED"></a><h3 id="CLRNT-GUID-85910CF7-EA77-42A6-A51D-6F313BAD61ED" class="sect3"><span class="enumeration_section">4.4 </span>Step 3: Choose the Function to Deploy
               </h3>
               <div>
                  <div class="section">
                     <p>The Specify methods and security details window appears.</p>
                     <p>You can select the entire project to deploy, or expand it to deploy specific functions. Because there is only one function in this project, selecting any one item, checks the entire project. If there were more functions or procedures, you could select individual items to deploy.</p>
                     <p>If you want to select a different schema to deploy, you can do so here. If the schema you want is not listed, you need to apply different filters. For information on this process, see <span class="italic">Oracle Developer Tools for Visual Studio Help</span>.
                     </p>
                     <p>You can set the security level using the drop-down list. The possible levels are:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Safe</span> - (Default)   
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">External</span></p>
                        </li>
                        <li>
                           <p><span class="bold">Unsafe</span></p>
                        </li>
                     </ul>
                     <p>For this demonstration, do the following:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Choose <code class="codeph">GetDeptNo()</code> from the list of procedures and functions contained within that assembly.</span></li>
                     <li class="stepexpand"><span>The schema initially says <code class="codeph">SYS</code>. Change it to <code class="codeph">Scott</code>, so that you can deploy it in the <code class="codeph">scott</code> schema.</span></li>
                     <li class="stepexpand"><span>Accept the default security level. You can either click <span class="bold">Next</span> to continue, or you can click <span class="bold">Parameter Type Mapping...</span> to view the type mappings.</span><div>
                           <div class="figure" id="GUID-85910CF7-EA77-42A6-A51D-6F313BAD61ED__GUID-7C33605C-6377-436D-BF25-C7744C3BD2CC"><img src="img/specifymethoddetails.gif" alt="Description of specifymethoddetails.gif follows" title="Description of specifymethoddetails.gif follows" longdesc="img_text/specifymethoddetails.html"><br><a href="img_text/specifymethoddetails.html">Description of the illustration specifymethoddetails.gif</a></div>
                           <!-- class="figure" -->
                           <div class="infoboxnotealso" id="GUID-85910CF7-EA77-42A6-A51D-6F313BAD61ED__GUID-57D36490-B844-4C24-AAFE-9ECC6D632587">
                              <p class="notep1">See Also:</p>
                              <p><a href="devdeploy.html#GUID-371835EA-C025-441B-8BFB-75C4DFB4B737">Step 3: Choose the Procedure or Function to Deploy and Security Level</a></p>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="CLRNT157"></a><div class="props_rev_3"><a id="GUID-DA044AAC-330C-47F7-B049-106CF64244BE" name="GUID-DA044AAC-330C-47F7-B049-106CF64244BE"></a><h3 id="CLRNT-GUID-DA044AAC-330C-47F7-B049-106CF64244BE" class="sect3"><span class="enumeration_section">4.5 </span>Step 4: Determine the Appropriate Parameter Type Mappings
               </h3>
               <div>
                  <div class="section">
                     <p>If you have selected Parameter Type Mapping..., the Parameter Type Mapping window appears, which allows you to change the data type, using the drop-down list.</p>
                     <p>For this demonstration, accept the default mappings of the .NET data type <code class="codeph">System.Int32</code> to the Oracle type <code class="codeph">BINARY_INTEGER</code>.
                     </p>
                     <p>Click <span class="bold">OK</span> to return to the Specify methods and security details window.
                     </p>
                     <div class="figure" id="GUID-DA044AAC-330C-47F7-B049-106CF64244BE__GUID-98ACE8F4-B716-4808-8415-AD46F0CAC23F"><img src="img/datatypemapping.gif" alt="Description of datatypemapping.gif follows" title="Description of datatypemapping.gif follows" longdesc="img_text/datatypemapping.html"><br><a href="img_text/datatypemapping.html">Description of the illustration datatypemapping.gif</a></div>
                     <!-- class="figure" -->
                     <div class="infoboxnotealso" id="GUID-DA044AAC-330C-47F7-B049-106CF64244BE__GUID-114A42D2-F9DA-4A53-B7D7-147069F9EFE0">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="datatype-conversion.html#GUID-70A2F34D-AB7F-4E0C-89C9-452A45FF1CAC">Data Type Conversion</a>"</span> for data type mapping tables
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="CLRNT158"></a><div class="props_rev_3"><a id="GUID-2EA049D6-69EC-4DC0-9615-7CB64C43987C" name="GUID-2EA049D6-69EC-4DC0-9615-7CB64C43987C"></a><h3 id="CLRNT-GUID-2EA049D6-69EC-4DC0-9615-7CB64C43987C" class="sect3"><span class="enumeration_section">4.6 </span>Step 5: Deploy the Function to an Oracle Database
               </h3>
               <div>
                  <div class="section">
                     <p>The Summary window of the Oracle Deployment Wizard for .NET appears, showing all the indicated specifications. This window permits you to modify any values by selecting Back.</p>
                     <p>To complete the demonstration, do the following:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Review the summary.</span></li>
                     <li class="stepexpand"><span>To verify SQL commands, select <span class="bold">Show Script</span>.</span><div>
                           <div class="figure" id="GUID-2EA049D6-69EC-4DC0-9615-7CB64C43987C__GUID-4CDEFAEC-71D2-4D89-B435-4FD4F1D1AA95"><img src="img/summary.gif" alt="Description of summary.gif follows" title="Description of summary.gif follows" longdesc="img_text/summary.html"><br><a href="img_text/summary.html">Description of the illustration summary.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>When the Show Sql window appears, review the code for the PL/SQL wrapper and click <span class="bold">OK</span> to return to the Summary window.</span><div>
                           <div class="figure" id="GUID-2EA049D6-69EC-4DC0-9615-7CB64C43987C__GUID-0977E5FB-0786-4940-B66E-66927B4F1CC3"><img src="img/showsqldialog.gif" alt="Description of showsqldialog.gif follows" title="Description of showsqldialog.gif follows" longdesc="img_text/showsqldialog.html"><br><a href="img_text/showsqldialog.html">Description of the illustration showsqldialog.gif</a></div>
                           <!-- class="figure" -->
                        </div>
                     </li>
                     <li class="stepexpand"><span>Click <span class="bold">Finish</span> to deploy the <code class="codeph">GetDeptNo()</code> function.</span></li>
                  </ol>
               </div>
            </div><a id="CLRNT159"></a><div class="props_rev_3"><a id="GUID-66394FD3-43AC-4969-9678-EEC3F9ECCACA" name="GUID-66394FD3-43AC-4969-9678-EEC3F9ECCACA"></a><h3 id="CLRNT-GUID-66394FD3-43AC-4969-9678-EEC3F9ECCACA" class="sect3"><span class="enumeration_section">4.7 </span>Step 6: Test the Function
               </h3>
               <div>
                  <div class="section">
                     <p>At this point, <code class="codeph">GetDeptNo()</code> function has been deployed to the Oracle Database and you are ready to test it by invoking the PL/SQL wrapper function.
                     </p>
                     <p>You must be connected as the default user, <code class="codeph">scott</code>, in this demonstration, to call the function.
                     </p>
                     <p>Test the function by invoking it from the following tools:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="demo.html#GUID-78691D37-3CDD-40B2-87F4-511C8E4BBA9A">Invoking from Oracle Developer Tools for Visual Studio</a></p>
                        </li>
                        <li>
                           <p><a href="demo.html#GUID-826378CA-F736-4B81-A013-6273B1AB7892">Invoking from ODP.NET client</a></p>
                        </li>
                        <li>
                           <p><a href="demo.html#GUID-7EDA82C3-5C38-4DEC-8EE2-ABFB4ABC8860">Invoking from SQL*Plus</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="CLRNT160"></a><div class="props_rev_3"><a id="GUID-78691D37-3CDD-40B2-87F4-511C8E4BBA9A" name="GUID-78691D37-3CDD-40B2-87F4-511C8E4BBA9A"></a><h4 id="CLRNT-GUID-78691D37-3CDD-40B2-87F4-511C8E4BBA9A" class="sect4"><span class="enumeration_section">4.7.1 </span>Invoking from Oracle Developer Tools for Visual Studio
                  </h4>
                  <div>
                     <div class="section">
                        <p>To locate and call the function from Oracle Developer Tools for Visual Studio:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>From the <span class="bold">View</span> menu, select <span class="bold">Oracle Explorer</span>.</span></li>
                        <li class="stepexpand"><span>Expand the <span class="bold">Functions</span> node.</span></li>
                        <li class="stepexpand"><span>Locate <span class="bold">GETDEPTNO</span>.</span></li>
                        <li class="stepexpand"><span>Right-click <span class="bold">GETDEPTNO</span> and from the menu, select <span class="bold">Run</span>.</span><div>
                              <div class="figure" id="GUID-78691D37-3CDD-40B2-87F4-511C8E4BBA9A__GUID-92E7AF53-6075-4996-9B99-80739EACE646"><img src="img/runsp.gif" alt="Description of runsp.gif follows" title="Description of runsp.gif follows" longdesc="img_text/runsp.html"><br><a href="img_text/runsp.html">Description of the illustration runsp.gif</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>When the Run Function dialog box appears, enter employee number 7934 as the input value. </span><div>
                              <div class="p">
                                 <div class="figure" id="GUID-78691D37-3CDD-40B2-87F4-511C8E4BBA9A__GUID-728ACED7-7E10-4BA9-B0C9-4DDCA95AF348"><img src="img/runfunction.gif" alt="Description of runfunction.gif follows" title="Description of runfunction.gif follows" longdesc="img_text/runfunction.html"><br><a href="img_text/runfunction.html">Description of the illustration runfunction.gif</a></div>
                                 <!-- class="figure" -->
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Click <span class="bold">OK</span>.</span><div>
                              <p>The output value 10 appears in the Document Window, indicating that employee number 7934 belongs to department 10.</p>
                              <div class="figure" id="GUID-78691D37-3CDD-40B2-87F4-511C8E4BBA9A__GUID-F97F72FF-BFBA-4C73-B699-C2AA7547926D"><img src="img/success.gif" alt="Description of success.gif follows" title="Description of success.gif follows" longdesc="img_text/success.html"><br><a href="img_text/success.html">Description of the illustration success.gif</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="CLRNT161"></a><div class="props_rev_3"><a id="GUID-826378CA-F736-4B81-A013-6273B1AB7892" name="GUID-826378CA-F736-4B81-A013-6273B1AB7892"></a><h4 id="CLRNT-GUID-826378CA-F736-4B81-A013-6273B1AB7892" class="sect4"><span class="enumeration_section">4.7.2 </span>Invoking from ODP.NET client
                  </h4>
                  <div>
                     <div class="section">
                        <p>The following code sample demonstrates how to invoke the PL/SQL wrapper for .NET function.</p><pre class="oac_no_warn" dir="ltr">using System;
using System.Data;
using Oracle.DataAccess.Client;
 
namespace ODPNETClientApp
{
  public class Class1
  {
    public static void Main()
    {
      int empno  = 7934;
      int deptno = 0;
 
      try
      {
        // Open a connection to the database
        OracleConnection con = new OracleConnection(
          "User Id=scott; Password=tiger; Data Source=inst1");
        con.Open();
 
        // Create and execute the command
        OracleCommand cmd = con.CreateCommand();
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = "GETDEPTNO";
 
        // Set parameters
        OracleParameter retParam = cmd.Parameters.Add(":DEPTNO",
            OracleDbType.Int32, System.Data.ParameterDirection.ReturnValue); 
        cmd.Parameters.Add(":EMPNO", OracleDbType.Int32, empno, 
        System.Data.ParameterDirection.Input);
        
        cmd.ExecuteNonQuery();
        deptno = (int)retParam.Value;
 
        Console.WriteLine("\nEmployee# {0} working in department# {1}\n", 
          empno, deptno);
 
        cmd.Dispose();
        con.Close();
      }
      catch (Exception e)
      {
        Console.WriteLine(e.Message);
      }
    }
  } // Class1
} // ODPNETClientApp namespace
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CLRNT162"></a><div class="props_rev_3"><a id="GUID-7EDA82C3-5C38-4DEC-8EE2-ABFB4ABC8860" name="GUID-7EDA82C3-5C38-4DEC-8EE2-ABFB4ABC8860"></a><h4 id="CLRNT-GUID-7EDA82C3-5C38-4DEC-8EE2-ABFB4ABC8860" class="sect4"><span class="enumeration_section">4.7.3 </span>Invoking from SQL*Plus
                  </h4>
                  <div>
                     <div class="section">
                        <p>To invoke the <code class="codeph">GetDeptNo()</code> function .NET function from SQL* Plus: 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Start SQL*Plus and log in as user <code class="codeph">scott</code> with the password <code class="codeph">tiger</code>. </span></li>
                        <li class="stepexpand"><span>Enter the following commands:</span><div><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON;
DECLARE
deptno BINARY_INTEGER;
BEGIN
  deptno := GetDeptNo(7934);
  DBMS_OUTPUT.PUT_LINE(deptno);
END;
 </pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Alternatively, you can execute following statement:</p><pre class="oac_no_warn" dir="ltr">SELECT GetDeptNo(7934) FROM DUAL;

</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>