<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Large Objects (LOBs)</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Programmer's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Programmer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="cobol-programmers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-01-31T09:23:15-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E84342-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="multithreaded-applications.html" title="Previous" type="text/html">
      <link rel="next" href="precompiler-options.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Pro*COBOL Programmer's Guide">
    <meta name="dcterms.isVersionOf" content="LNPCB">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="multithreaded-applications.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="precompiler-options.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Programmer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="applications.html" property="item" typeof="WebPage"><span property="name">  Applications </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">  Large Objects (LOBs)</li>
            </ol>
            <a id="GUID-8F9739C2-B753-4707-A060-EE9086FD5196" name="GUID-8F9739C2-B753-4707-A060-EE9086FD5196"></a><a id="LNPCB013"></a>
            
            <h2 id="LNPCB-GUID-8F9739C2-B753-4707-A060-EE9086FD5196" class="sect2"><span class="enumeration_chapter">13 </span>  Large Objects (LOBs)
            </h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='large-objects-LOBs'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
            </noscript>
            <div>
               <p>This chapter describes the support provided by embedded SQL statements for the <span class="italic">LOB</span> (Large Object) datatypes. The four types of LOBs are introduced and compared to the older LONG and LONG RAW datatypes. 
               </p>
               <p>The embedded SQL interface in Pro*COBOL is shown to provide similar functionality to that of the PL/SQL language.</p>
               <p>The LOB statements and their options and host variables are presented.</p>
               <p>Last, an example of Pro*COBOL programming using the LOB interface.</p>
               <p>The main sections are:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="large-objects-LOBs.html#GUID-94DAE6EE-A155-4072-8EB5-8A25249585CA">Using LOBs</a></p>
                  </li>
                  <li>
                     <p><a href="large-objects-LOBs.html#GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB">How to Use LOBs</a></p>
                  </li>
                  <li>
                     <p><a href="large-objects-LOBs.html#GUID-75ABC03D-2DD4-4399-A294-5655F2F91312">Rules for LOB Statements</a></p>
                  </li>
                  <li>
                     <p><a href="large-objects-LOBs.html#GUID-5783536E-5066-41C8-9155-AC28C8CF8CDD">LOB Statements</a></p>
                  </li>
                  <li>
                     <p><a href="large-objects-LOBs.html#GUID-F7E1C804-7A87-4903-B8F4-B573B32E5C77">LOB Sample Program: LOBDEMO1.PCO</a></p>
                  </li>
               </ul>
            </div><a id="LNPCB812"></a><div class="props_rev_3"><a id="GUID-94DAE6EE-A155-4072-8EB5-8A25249585CA" name="GUID-94DAE6EE-A155-4072-8EB5-8A25249585CA"></a><h3 id="LNPCB-GUID-94DAE6EE-A155-4072-8EB5-8A25249585CA" class="sect3"><span class="enumeration_section">13.1 </span>Using LOBs
               </h3>
               <div>
                  <p>LOBs (large objects) are database types that are used to store large amounts of data (maximum size is 4 Gigabytes) such as ASCII text, text in National Characters, files in various graphics formats, and sound wave forms.</p>
               </div><a id="LNPCB813"></a><div class="props_rev_3"><a id="GUID-4ECF02C5-F364-4208-B71B-07DD6B53BA60" name="GUID-4ECF02C5-F364-4208-B71B-07DD6B53BA60"></a><h4 id="LNPCB-GUID-4ECF02C5-F364-4208-B71B-07DD6B53BA60" class="sect4"><span class="enumeration_section">13.1.1 </span>Internal LOBs
                  </h4>
                  <div>
                     <p>Internal LOBs (BLOBs, CLOBs, NCLOBs) are stored in database table spaces and have transactional support of the database server. (COMMITT, ROLLBACK, and so forth work with them.) </p>
                     <p><span class="italic">BLOBs</span> (Binary LOBs) store unstructured binary (also called "raw") data, such as video clips.
                     </p>
                     <p><span class="italic">CLOBs</span> (Character LOBs) store large blocks of character data from the database character set.
                     </p>
                     <p><span class="italic">NCLOBs</span> (National Character LOBs) store large blocks of character data from the national character set.
                     </p>
                  </div>
               </div><a id="LNPCB814"></a><div class="props_rev_3"><a id="GUID-FF9B0F1C-8603-4C2C-A1A4-68700DF7FEEB" name="GUID-FF9B0F1C-8603-4C2C-A1A4-68700DF7FEEB"></a><h4 id="LNPCB-GUID-FF9B0F1C-8603-4C2C-A1A4-68700DF7FEEB" class="sect4"><span class="enumeration_section">13.1.2 </span>External LOBs
                  </h4>
                  <div>
                     <p>External LOBs are operating system files outside the database tablespaces, that have no transactional support from the database server.</p>
                     <p><span class="italic">BFILEs</span> (Binary Files) store data in external binary files. A BFILE can be in GIF, JPEG, MPEG, MPEG2, text, or other formats.<a id="d79022e165" class="indexterm-anchor"></a></p>
                  </div>
               </div><a id="LNPCB815"></a><div class="props_rev_3"><a id="GUID-2528FB25-9D4A-462D-BDC0-9E0A4B4159F3" name="GUID-2528FB25-9D4A-462D-BDC0-9E0A4B4159F3"></a><h4 id="LNPCB-GUID-2528FB25-9D4A-462D-BDC0-9E0A4B4159F3" class="sect4"><span class="enumeration_section">13.1.3 </span>Security for BFILEs
                  </h4>
                  <div>
                     <p>The <span class="italic">DIRECTORY</span> object is used to access and use BFILEs. The DIRECTORY is a logical alias name (stored in the server) for the actual physical directory in the server file system containing the file. Users are permitted to access the file only if granted access privilege on the DIRECTORY object.
                     </p>
                     <p>Two kinds of SQL statements can be used with BFILEs:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The DDL (data definition language) SQL statements CREATE, REPLACE, ALTER, and DROP. </p>
                        </li>
                        <li>
                           <p>The DML (Data Management Language) SQL statements are used to GRANT and REVOKE the READ system and object privileges on DIRECTORY objects.</p>
                        </li>
                     </ul>
                     <p>A sample CREATE DIRECTORY directive is:</p><pre class="oac_no_warn" dir="ltr">     EXEC SQL CREATE OR REPLACE DIRECTORY "Mydir" AS '/usr/home/mydir' END-EXEC.
</pre><p>Other users or roles can read the directory only if you grant them permission with a DML (Data Manipulation Language) statement, such as GRANT. For example, to allow user <code class="codeph">scott</code> to read BFILES in directory <code class="codeph">/usr/home/mydir</code>:
                     </p><pre class="oac_no_warn" dir="ltr">     EXEC SQL GRANT READ ON DIRECTORY "Mydir" TO scott END-EXEC.
</pre><p>Up to 10 BFILES can be opened simultaneously in one session. This default value can be changed by setting the SESSION_MAX_OPEN_FILES parameter.</p>
                     <p>See <a href="../adfns/toc.htm"><span class="italic">Oracle Database Advanced Application Developer's Guide</span></a> for more details on DIRECTORY objects and BFILE security, and the the GRANT command.
                     </p>
                  </div>
               </div><a id="LNPCB816"></a><div class="props_rev_3"><a id="GUID-57F79F4F-D22D-41DD-8AF2-6D359FC6F37B" name="GUID-57F79F4F-D22D-41DD-8AF2-6D359FC6F37B"></a><h4 id="LNPCB-GUID-57F79F4F-D22D-41DD-8AF2-6D359FC6F37B" class="sect4"><span class="enumeration_section">13.1.4 </span>LOBs Compared with LONG and LONG RAW
                  </h4>
                  <div>
                     <p>LOBs are different from the older LONG and LONG RAW datatypes in many ways.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The maximum size of a LOB is 4 Gigabytes versus 2 Gigabytes for LONG and LONG RAW.</p>
                        </li>
                        <li>
                           <p>You can use random as well as sequential access methods on LOBs; you can only use sequential access methods on LONG and LONG RAW.</p>
                        </li>
                        <li>
                           <p>LOBs (except NCLOBs) can be attributes of an object type that you define.</p>
                        </li>
                        <li>
                           <p>Tables can have multiple LOB columns, but can have only one LONG or LONG RAW column.</p>
                        </li>
                     </ul>
                     <p>Migration of existing LONG and LONG Raw attributes to LOBs is recommended by Oracle. Oracle plans to end support of LONG and LONG RAW in future releases. See Also: <a href="../upgrd/index.html"><span class="italic">Oracle Database Upgrade Guide</span></a>   for more information on migration, and <a href="../adlob/toc.htm"><span class="italic">Oracle Database SecureFiles and Large Objects Developer's Guide</span></a> for more information on LOBs.
                     </p>
                  </div>
               </div><a id="LNPCB817"></a><div class="props_rev_3"><a id="GUID-C99B0261-7EA8-4049-892E-880178746FE7" name="GUID-C99B0261-7EA8-4049-892E-880178746FE7"></a><h4 id="LNPCB-GUID-C99B0261-7EA8-4049-892E-880178746FE7" class="sect4"><span class="enumeration_section">13.1.5 </span>LOB Locators
                  </h4>
                  <div>
                     <p>A <span class="italic">LOB locator</span> points to the actual LOB contents. The locator is returned when you retrieve the LOB, not the LOB's contents. LOB locators cannot be saved in one transaction or session and used again in a later transaction or session.
                     </p>
                  </div>
               </div><a id="LNPCB818"></a><div class="props_rev_3"><a id="GUID-95075C97-6736-4BEC-9346-8BCDFDE17669" name="GUID-95075C97-6736-4BEC-9346-8BCDFDE17669"></a><h4 id="LNPCB-GUID-95075C97-6736-4BEC-9346-8BCDFDE17669" class="sect4"><span class="enumeration_section">13.1.6 </span>Temporary LOBs
                  </h4>
                  <div>
                     <p>You can create <span class="italic">temporary</span> LOBs to assist your use of database LOBs. Temporary LOBs are like local variables and are not associated with any table. They are only accessible by their creator using their locators and are deleted when a session ends.
                     </p>
                     <p>There is no support for temporary BFILES. Temporary LOBs are only permitted to be input variables (IN values) in the WHERE clause of an INSERT statement, in the SET clause of an UPDATE, or in the WHERE clause of a DELETE statement. Temporary LOBs have no transactional support from the database server, which means that you cannot do a COMMIT or ROLLBACK on them.</p>
                     <p>Temporary LOB locators can span transactions. They are deleted when the server abnormally terminates, and when an error is returned from a database SQL operation.</p>
                  </div>
               </div><a id="LNPCB819"></a><div class="props_rev_3"><a id="GUID-9A70D912-CBC9-4C60-ACE3-0C75C78BAB0F" name="GUID-9A70D912-CBC9-4C60-ACE3-0C75C78BAB0F"></a><h4 id="LNPCB-GUID-9A70D912-CBC9-4C60-ACE3-0C75C78BAB0F" class="sect4"><span class="enumeration_section">13.1.7 </span>LOB Buffering Subsystem
                  </h4>
                  <div>
                     <p>The <span class="italic">LBS</span> (LOB Buffering Subsystem) is an area of user memory provided for use as a buffer for one or more LOBs in the client's address space.
                     </p>
                     <p>Buffering has these advantages, especially for applications on a client that does many small reads and writes to specific regions of the LOB:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The LBS reduces round-trips to the server because you fill the buffer with multiple reads/writes to the LOBs, and then write to the server when a FLUSH directive is executed. </p>
                        </li>
                        <li>
                           <p>Buffering also reduces the total number of LOB updates on the server. This creates better LOB performance and saves disk space.</p>
                        </li>
                     </ul>
                     <p>Oracle provides a simple buffer subsystem, not a cache. Oracle does not guarantee that the contents of a buffer are always synchronized with the server LOB value. Use the FLUSH statement to actually write updates in the server LOB.</p>
                     <p>Buffered reads/writes of a LOB are performed through its locator. A locator enabled for buffering provides a consistent read version of the LOB until you perform a write through that locator.</p>
                     <p>After being used for a buffered WRITE, a locator becomes an updated locator and provides access to the latest LOB version <span class="italic">as seen through the buffering subsystem</span>. All further buffered WRITEs to the LOB can be done only through this updated locator. Transactions involving buffered LOB operations cannot migrate across user sessions.
                     </p>
                     <p>The LBS is managed by the user, who is responsible for updating server LOB values by using FLUSH statements to update them. The LBS is single-user and single-threaded. Use ROLLBACK and SAVEPOINT actions to guarantee correctness in the server LOBs. Transactional support for buffered LOB operations is not guaranteed by Oracle. To ensure transactional semantics for buffered LOB updates, you must maintain logical savepoints to perform a rollback in the event of an error.</p>
                  </div>
               </div>
            </div><a id="LNPCB821"></a><a id="LNPCB820"></a><div class="props_rev_3"><a id="GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB" name="GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB"></a><h3 id="LNPCB-GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB" class="sect3"><span class="enumeration_section">13.2 </span>How to Use LOBs
               </h3>
               <div>
                  <p>There are two methods available to access LOBs in Pro*COBOL:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The DBMS_LOB package inside PL/SQL blocks.</p>
                     </li>
                     <li>
                        <p>Embedded SQL statements.</p>
                     </li>
                  </ul>
                  <p>The imbedded SQL statements are designed to give users a functional equivalent to the PL/SQL interface.</p>
                  <p>The following table compares LOB access in PL/SQL and embedded SQL statements in Pro*COBOL. Dashes indicate missing functionality.</p>
                  <div class="tblformal" id="GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB__GUID-EC169E21-D671-4F9E-8158-7A2AB6BCACB7">
                     <p class="titleintable">Table 13-1 LOB Access Methods </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="LOB Access Methods " summary="q" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="47%" id="d79022e454">PL/SQL(1)</th>
                              <th align="left" valign="bottom" width="53%" id="d79022e461">Pro*COBOL Embedded SQL</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e466" headers="d79022e454 ">
                                 <p>COMPARE()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e466 d79022e461 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e473" headers="d79022e454 ">
                                 <p>INSTR()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e473 d79022e461 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e480" headers="d79022e454 ">
                                 <p>SUBSTR()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e480 d79022e461 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e487" headers="d79022e454 ">
                                 <p>APPEND()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e487 d79022e461 ">
                                 <p>APPEND</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e494" headers="d79022e454 ">
                                 <p>:=</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e494 d79022e461 ">
                                 <p>ASSIGN</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e501" headers="d79022e454 ">
                                 <p>CLOSE()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e501 d79022e461 ">
                                 <p>CLOSE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e508" headers="d79022e454 ">
                                 <p>COPY()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e508 d79022e461 ">
                                 <p>COPY</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e515" headers="d79022e454 ">
                                 <p>CREATETEMPORARY()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e515 d79022e461 ">
                                 <p>CREATE TEMPORARY</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e522" headers="d79022e454 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e522 d79022e461 ">
                                 <p>DISABLE BUFFERING</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e529" headers="d79022e454 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e529 d79022e461 ">
                                 <p>ENABLE BUFFERING</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e536" headers="d79022e454 ">
                                 <p>ERASE()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e536 d79022e461 ">
                                 <p>ERASE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e544" headers="d79022e454 ">
                                 <p>GETCHUNKSIZE()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e544 d79022e461 ">
                                 <p>DESCRIBE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e551" headers="d79022e454 ">
                                 <p>ISOPEN()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e551 d79022e461 ">
                                 <p>DESCRIBE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e558" headers="d79022e454 ">
                                 <p>FILECLOSE()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e558 d79022e461 ">
                                 <p>CLOSE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e565" headers="d79022e454 ">
                                 <p>FILECLOSEALL()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e565 d79022e461 ">
                                 <p>FILE CLOSE ALL</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e572" headers="d79022e454 ">
                                 <p>FILEEXISTS()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e572 d79022e461 ">
                                 <p>DESCRIBE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e579" headers="d79022e454 ">
                                 <p>FILEGETNAME()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e579 d79022e461 ">
                                 <p>DESCRIBE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e586" headers="d79022e454 ">
                                 <p>FILEISOPEN()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e586 d79022e461 ">
                                 <p>DESCRIBE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e593" headers="d79022e454 ">
                                 <p>FILEOPEN()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e593 d79022e461 ">
                                 <p>OPEN</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e600" headers="d79022e454 ">
                                 <p>BFILENAME()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e600 d79022e461 ">
                                 <p>FILE SET<a id="fn_2" name="fn_2" href="#fn_2" onclick="footdisplay(2, "The BFILENAME() built in SQL function may also be used.")"><sup>Foot&nbsp;2</sup></a></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e611" headers="d79022e454 ">
                                 <p>-</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e611 d79022e461 ">
                                 <p>FLUSH BUFFER</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e618" headers="d79022e454 ">
                                 <p>FREETEMPORARY()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e618 d79022e461 ">
                                 <p>FREE TEMPORARY</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e626" headers="d79022e454 ">
                                 <p>GETLENGTH()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e626 d79022e461 ">
                                 <p>DESCRIBE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e633" headers="d79022e454 ">
                                 <p>=</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e633 d79022e461 ">
                                 <p>-</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e640" headers="d79022e454 ">
                                 <p>ISTEMPORARY()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e640 d79022e461 ">
                                 <p>DESCRIBE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e647" headers="d79022e454 ">
                                 <p>LOADFROMFILE()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e647 d79022e461 ">
                                 <p>LOAD FROM FILE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e654" headers="d79022e454 ">
                                 <p>OPEN()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e654 d79022e461 ">
                                 <p>OPEN</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e661" headers="d79022e454 ">
                                 <p>READ()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e661 d79022e461 ">
                                 <p>READ</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e668" headers="d79022e454 ">
                                 <p>TRIM()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e668 d79022e461 ">
                                 <p>TRIM</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e675" headers="d79022e454 ">
                                 <p>WRITE()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e675 d79022e461 ">
                                 <p>WRITE</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="47%" id="d79022e682" headers="d79022e454 ">
                                 <p>WRITEAPPEND()</p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d79022e682 d79022e461 ">
                                 <p>WRITE</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1 </sup>From dbmslob.sql. All routines are prefixed with 'DBMS_LOB.' except BFILENAME.
                  </p>
                  <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2 </sup></p><p><span class="bold">The BFILENAME() built in SQL function may also be used.</span></p>
                  <p></p>
                  <div class="infoboxnote" id="GUID-30BAFE59-F850-4F23-99BB-AE3C6C5834CB__GUID-849F9CBC-97E6-419D-9177-27C1B0F9AE8D">
                     <p class="notep1">Note:</p>
                     <p> You must explicitly lock the row before using any of the new statements that modify or change a LOB in any way. Operations that can modify a LOB value are APPEND, COPY, ERASE, LOAD FROM FILE, TRIM, and WRITE.</p>
                  </div>
               </div><a id="LNPCB822"></a><div class="props_rev_3"><a id="GUID-17BED256-DEFB-49BA-BB49-2A1D664348CC" name="GUID-17BED256-DEFB-49BA-BB49-2A1D664348CC"></a><h4 id="LNPCB-GUID-17BED256-DEFB-49BA-BB49-2A1D664348CC" class="sect4"><span class="enumeration_section">13.2.1 </span>LOB Locators in Your Application
                  </h4>
                  <div>
                     <p>To use LOB locators in your Pro*COBOL application use these pseudo-types: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>SQL-BLOB</p>
                        </li>
                        <li>
                           <p>SQL-CLOB</p>
                        </li>
                        <li>
                           <p>SQL-NCLOB</p>
                        </li>
                        <li>
                           <p>SQL-BFILE</p>
                        </li>
                     </ul>
                     <p>For example, to declare an NCLOB variable called MY-NCLOB:</p><pre class="oac_no_warn" dir="ltr"> 01  MY-NCLOB    SQL-NCLOB.</pre></div>
               </div><a id="LNPCB823"></a><div class="props_rev_3"><a id="GUID-E87093C7-CDF5-4FAB-BA0E-5844DD2AC7B6" name="GUID-E87093C7-CDF5-4FAB-BA0E-5844DD2AC7B6"></a><h4 id="LNPCB-GUID-E87093C7-CDF5-4FAB-BA0E-5844DD2AC7B6" class="sect4"><span class="enumeration_section">13.2.2 </span>Initializing a LOB
                  </h4>
                  <div>
                     <div class="section">
                        <p>This section discusses how to initialize different varieties of LOBs.</p>
                     </div>
                     <!-- class="section" -->
                  </div><a id="LNPCB824"></a><div class="props_rev_3"><a id="GUID-828BF7BF-7B45-455C-B420-B8A694B1F969" name="GUID-828BF7BF-7B45-455C-B420-B8A694B1F969"></a><h5 id="LNPCB-GUID-828BF7BF-7B45-455C-B420-B8A694B1F969" class="sect5"><span class="enumeration_section">13.2.2.1 </span>Internal LOBs
                     </h5>
                     <div>
                        <p>To initialize a BLOB to empty, use the <span class="italic">EMPTY_BLOB()</span> function or use the ALLOCATE SQL statement. For CLOBs and NCLOBs, use the <span class="italic">EMPTY_CLOB() </span>function<span class="italic">.</span> See <a href="../sqlrf/index.html"><span class="italic">Oracle Database SQL Language Reference</span></a> for more about EMPTY_BLOB() and EMPTY_CLOB(). These functions are permitted only in the VALUES clause of an INSERT statement or as the source of the SET clause in an UPDATE statement.
                        </p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">     EXEC SQL INSERT INTO lob_table (a_blob, a_clob)
        VALUES (EMPTY_BLOB(), EMPTY_CLOB()) END-EXEC.
</pre><p>The ALLOCATE statement allocates a LOB locator and initializes it to empty, so, the following code is equivalent to the previous example:</p><pre class="oac_no_warn" dir="ltr">...
 01  A-BLOB      SQL-BLOB.
 01  A-CLOB      SQL-CLOB.
...
     EXEC SQL ALLOCATE :A-BLOB END-EXEC.
     EXEC SQL ALLOCATE :A-CLOB END-EXEC.
     EXEC SQL INSERT INTO lob_table (a_blob, a_clob)
        VALUES (:A-BLOB, :A-CLOB) END-EXEC.</pre></div>
                  </div><a id="LNPCB825"></a><div class="props_rev_3"><a id="GUID-0A3FB714-8AB5-4393-8601-F62E452D40E3" name="GUID-0A3FB714-8AB5-4393-8601-F62E452D40E3"></a><h5 id="LNPCB-GUID-0A3FB714-8AB5-4393-8601-F62E452D40E3" class="sect5"><span class="enumeration_section">13.2.2.2 </span>External LOBs
                     </h5>
                     <div>
                        <p>Use the LOB FILE SET statement to initialize the DIRECTORY alias of the BFILE and FILENAME this way:</p><pre class="oac_no_warn" dir="ltr">...
 01  ALIAS        PIC X(14) VARYING.
 01  FILENAME     PIC X(14) VARYING.
 01  A-BFILE      SQL-BFILE.
 ...
     MOVE "lob_dir" TO ALIAS-ARR.
     MOVE 7 TO ALIAS-LEN.
     MOVE "image.gif" TO FILENAME-ARR
     MOVE 9 TO FILENAME-LEN..     
     EXEC SQL ALLOCATE :A-BFILE END-EXEC.
     EXEC SQL LOB FILE SET :A-BFILE
        DIRECTORY = :ALIAS, FILENAME = :FILENAME END-EXEC.
     EXEC SQL INSERT INTO file_table (a_bfile) VALUES (:A-BFILE) END-EXEC.
</pre><p>Refer to <a href="../adfns/toc.htm"><span class="italic">Oracle Database Advanced Application Developer's Guide</span></a> for a complete description of DIRECTORY object naming conventions and DIRECTORY object privileges.
                        </p>
                        <p>Alternatively, you can use the BFILENAME('directory', 'filename') function in an INSERT or UPDATE statement to initialize a BFILE column or attribute for a particular row, and give the name of the actual physical directory and filename:</p><pre class="oac_no_warn" dir="ltr">     EXEC SQL INSERT INTO file_table (a_bfile)
        VALUES (BFILENAME('lob_dir', 'image.gif'))
           RETURNING a_bfile INTO :A-BFILE END-EXEC.</pre><div class="infoboxnote" id="GUID-0A3FB714-8AB5-4393-8601-F62E452D40E3__GUID-E23D3EC8-0B46-4D37-989C-768FCC212A88">
                           <p class="notep1">Note:</p>
                           <p> BFILENAME() does not check permissions on the directory or filename, or whether the physical directory actually exists. Subsequent file accesses that use the BFILE locator will do those checks and return an error if the file is inaccessible.</p>
                        </div>
                     </div>
                  </div><a id="LNPCB826"></a><div class="props_rev_3"><a id="GUID-171B9CBF-13D3-496C-AC61-74A877427B89" name="GUID-171B9CBF-13D3-496C-AC61-74A877427B89"></a><h5 id="LNPCB-GUID-171B9CBF-13D3-496C-AC61-74A877427B89" class="sect5"><span class="enumeration_section">13.2.2.3 </span>Temporary LOBs
                     </h5>
                     <div>
                        <p>A temporary LOB is initialized to empty when it is first created using the embedded SQL LOB CREATE TEMPORARY statement. The EMPTY_BLOB() and EMPTY_CLOB() functions cannot be used with temporary LOBs.</p>
                     </div>
                  </div><a id="LNPCB827"></a><div class="props_rev_3"><a id="GUID-CF5DBCA3-325A-4EA4-876B-CCFEB0F55E92" name="GUID-CF5DBCA3-325A-4EA4-876B-CCFEB0F55E92"></a><h5 id="LNPCB-GUID-CF5DBCA3-325A-4EA4-876B-CCFEB0F55E92" class="sect5"><span class="enumeration_section">13.2.2.4 </span>Freeing LOBs
                     </h5>
                     <div>
                        <div class="section">
                           <p>The FREE statement is used to free the memory used by an ALLOCATE statement:</p><pre class="oac_no_warn" dir="ltr">EXEC SQL FREE :A-BLOB END-EXEC.</pre></div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="LNPCB828"></a><div class="props_rev_3"><a id="GUID-75ABC03D-2DD4-4399-A294-5655F2F91312" name="GUID-75ABC03D-2DD4-4399-A294-5655F2F91312"></a><h3 id="LNPCB-GUID-75ABC03D-2DD4-4399-A294-5655F2F91312" class="sect3"><span class="enumeration_section">13.3 </span>Rules for LOB Statements
               </h3>
               <div>
                  <p>Here are the rules for using LOB statements:</p>
               </div><a id="LNPCB829"></a><div class="props_rev_3"><a id="GUID-AA333C14-0CBB-4C1E-B06C-A445152FA84B" name="GUID-AA333C14-0CBB-4C1E-B06C-A445152FA84B"></a><h4 id="LNPCB-GUID-AA333C14-0CBB-4C1E-B06C-A445152FA84B" class="sect4"><span class="enumeration_section">13.3.1 </span>For All LOB Statements
                  </h4>
                  <div>
                     <p>These general restrictions and limitations apply when manipulating LOBs with the SQL LOB statements:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The FOR clause is not allowed in embedded SQL LOB statements. Only one LOB locator can be used in those statement. However, the ALLOCATE and FREE statements do allow FOR clauses.</p>
                        </li>
                        <li>
                           <p>Distributed LOBs are not supported. Although you may use the AT database clause in any of the new embedded SQL LOB statements, you cannot mix LOB locators that were created or allocated using different database connections in the same SQL LOB statement.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCB830"></a><div class="props_rev_3"><a id="GUID-85CF8A3E-F407-4089-BA75-EA4C65B7D6CA" name="GUID-85CF8A3E-F407-4089-BA75-EA4C65B7D6CA"></a><h4 id="LNPCB-GUID-85CF8A3E-F407-4089-BA75-EA4C65B7D6CA" class="sect4"><span class="enumeration_section">13.3.2 </span>For the LOB Buffering Subsystem
                  </h4>
                  <div>
                     <p>For the LBS, these rules must be followed:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Errors in read or write accesses are reported at the next access to the server. Therefore, error recovery has to be coded by you, the user.</p>
                        </li>
                        <li>
                           <p>When updating a LOB with buffered writes, do not update the same LOB with a method that bypasses the LOB Buffering Subsystem.</p>
                        </li>
                        <li>
                           <p>An updated LOB locator enabled for buffering can be passed as an IN parameter to a PL/SQL procedure, but not as an IN OUT or OUT parameter. An error is returned. An error is also returned when there is an attempt to return an updated locator.</p>
                        </li>
                        <li>
                           <p>An ASSIGN of an <span class="italic">updated</span> locator enabled for buffering to another locator is not allowed.
                           </p>
                        </li>
                        <li>
                           <p>You can append to the LOB value with buffered writes, but the starting offset must be one character after the end of the LOB. The LBS does not allow APPEND statements resulting in zero-byte fillers or spaces in LOBs in the database server.</p>
                        </li>
                        <li>
                           <p>The character sets of the host locator bind variable and the database server CLOB must be the same.</p>
                        </li>
                        <li>
                           <p>Only ASSIGN, READ and WRITE statements work with a locator enabled for buffering. </p>
                        </li>
                        <li>
                           <p>The following statements result in errors when used with a locator enabled for buffering: APPEND, COPY, ERASE, DESCRIBE (LENGTH only), SELECT, and TRIM. Errors are also returned when you use these statements with a locator that is not enabled for buffering, if the LOB pointed to by the locator is being accessed in buffered mode by another locator.</p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-85CF8A3E-F407-4089-BA75-EA4C65B7D6CA__GUID-B6A421A8-6576-49B5-9968-8B7FD6624090">
                        <p class="notep1">Note:</p>
                        <p> The FLUSH statement must be used on a LOB enabled by the LOB Buffering Subsystem before</p>
                     </div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Committing the transaction.</p>
                        </li>
                        <li>
                           <p>Migrating from the current transaction to another.</p>
                        </li>
                        <li>
                           <p>Disabling buffer operations on a LOB.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="LNPCB831"></a><div class="props_rev_3"><a id="GUID-C6854F26-7A57-4913-A024-62CC6D1E24F2" name="GUID-C6854F26-7A57-4913-A024-62CC6D1E24F2"></a><h4 id="LNPCB-GUID-C6854F26-7A57-4913-A024-62CC6D1E24F2" class="sect4"><span class="enumeration_section">13.3.3 </span>For Host Variables
                  </h4>
                  <div>
                     <p>Use the following rules and notes for the LOB statements:<a id="d79022e1071" class="indexterm-anchor"></a></p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="italic">src</span> and <span class="italic">dst</span> can refer to either internal or external LOB locators, but <span class="italic">file</span> refers only to external locators.
                           </p>
                        </li>
                        <li>
                           <p>Numeric host values (<code class="codeph">amt, src_offset, dst_offset</code><span class="italic">,</span> and so forth.) are declared <code class="codeph">as </code>a 4-byte integer variable, PIC S9(9) COMP. The values are restricted between 0 and 4 Gigabytes.
                           </p>
                        </li>
                        <li>
                           <p>The concept of NULL is part of a LOB locator. There is no need for indicator variables in the LOB statements. NULL cannot be used with numeric value variables such as <code class="codeph">amt, src_offset</code>, and so forth and result in an error.
                           </p>
                        </li>
                        <li>
                           <p>The offset values <code class="codeph">src_offset </code>and <code class="codeph">dst_offset</code> have default values 1.
                           </p>
                           <div class="infoboxnote" id="GUID-C6854F26-7A57-4913-A024-62CC6D1E24F2__GUID-7A3B45F1-8260-476A-9C8E-1DEBF2FC141E">
                              <p class="notep1">Note:</p>
                              <p>BLOB, CLOB, and NCLOB variables need to respect the alignment requirements of your platform. Refer to you platform documentation on alignment restrictions of your particular platform.</p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="LNPCB832"></a><div class="props_rev_3"><a id="GUID-5783536E-5066-41C8-9155-AC28C8CF8CDD" name="GUID-5783536E-5066-41C8-9155-AC28C8CF8CDD"></a><h3 id="LNPCB-GUID-5783536E-5066-41C8-9155-AC28C8CF8CDD" class="sect3"><span class="enumeration_section">13.4 </span>LOB Statements
               </h3>
               <div>
                  <div class="section">
                     <p>The statements are presented alphabetically. In all the statements where it appears, <span class="italic">database </span>refers to a database connection
                     </p>
                  </div>
                  <!-- class="section" -->
               </div><a id="LNPCB834"></a><a id="LNPCB835"></a><a id="LNPCB836"></a><a id="LNPCB837"></a><a id="LNPCB833"></a><div class="props_rev_3"><a id="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A" name="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A"></a><h4 id="LNPCB-GUID-8E05707F-F13B-4363-91EB-094DEBD7545A" class="sect4"><span class="enumeration_section">13.4.1 </span>APPEND
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The APPEND statement appends a LOB value at the end of another LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB APPEND :<span class="italic">src</span> TO :<span class="italic">dst </span>END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <dl>
                           <dt class="dlterm"><a name="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A__GUID-420DEB49-4DDC-41CC-872C-B456AB3307D8">
                                 <!-- --></a>src (IN)
                           </dt>
                           <dd>
                              <p>An internal LOB locator uniquely referencing the source LOB.</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-8E05707F-F13B-4363-91EB-094DEBD7545A__GUID-CE4CC92B-D55F-441D-8049-318FDDC81837">
                                 <!-- --></a>dsc (IN OUT)
                           </dt>
                           <dd>
                              <p>An internal LOB locator uniquely referencing the destination LOB.</p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The data is copied from the source LOB to the end of the destination LOB, extending the destination LOB up to a maximum of 4 Gigabytes. If the LOB is extended beyond 4 Gigabytes, an error will occur.</p>
                        <p>The source and destination LOBs must already exist and the destination LOB must be initialized.</p>
                        <p>Both the source and destination LOBs must be of the same internal LOB type. It is an error to have enabled LOB buffering for either type of locator.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB839"></a><a id="LNPCB840"></a><a id="LNPCB841"></a><a id="LNPCB842"></a><a id="LNPCB838"></a><div class="props_rev_3"><a id="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC" name="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC"></a><h4 id="LNPCB-GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC" class="sect4"><span class="enumeration_section">13.4.2 </span>ASSIGN
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Assigns a LOB or BFILE locator to another.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB ASSIGN :<span class="italic">src</span> to :<span class="italic">dst </span>END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <dl>
                           <dt class="dlterm"><a name="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC__GUID-FE497AAB-F112-4069-82DF-4AFA42AC0181">
                                 <!-- --></a>src (IN)
                           </dt>
                           <dd>
                              <p>LOB or BFILE locator source copied from.</p>
                           </dd>
                           <dt class="dlterm"><a name="GUID-066FEEFA-0533-4872-A631-7A58EDE9AEEC__GUID-18A78FA3-C6D8-46CF-9C12-94F107303EA4">
                                 <!-- --></a>dsc (IN OUT)
                           </dt>
                           <dd>
                              <p>LOB or BFILE locator copied to.</p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>After the assignment, both locators refer to the same LOB value. The destination LOB locator must be a valid initialized (allocated) locator.</p>
                        <p>For internal LOBs, the source locator's LOB value is copied to the destination locator's LOB value only when the destination locator is stored in the table. For Pro*COBOL, issuing a FLUSH of an object containing the destination locator will copy the LOB value.</p>
                        <p>An error is returned when a BFILE locator is assigned to an internal LOB locator and vice-versa. It is also an error if the <span class="italic">src </span>and <span class="italic">dst</span> LOBs are not of the same type.
                        </p>
                        <p>If the source locator is for an internal LOB that was enabled for buffering, and the source locator has been used to modify the LOB value through the LOB Buffering Subsystem, and the buffers have not been flushed since the WRITE, then the source locator cannot be assigned to the destination locator. This is because only one locator for each LOB can modify the LOB value through the LOB Buffering Subsystem.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB844"></a><a id="LNPCB845"></a><a id="LNPCB846"></a><a id="LNPCB847"></a><a id="LNPCB843"></a><div class="props_rev_3"><a id="GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF" name="GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF"></a><h4 id="LNPCB-GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF" class="sect4"><span class="enumeration_section">13.4.3 </span>CLOSE
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Close an open LOB or BFILE.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB CLOSE :<span class="italic">src </span>END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <dl>
                           <dt class="dlterm"><a name="GUID-9DB20604-8FF9-4276-A365-4F47CEC93CDF__GUID-0F160797-2A7F-443A-A032-521DB1AB5039">
                                 <!-- --></a>src (IN OUT)
                           </dt>
                           <dd>
                              <p>The locator of the LOB or BFILE to be closed.</p>
                           </dd>
                        </dl>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>It is an error to close the same LOB twice either with different locators or with the same locator. For external LOBs, no error is produced if the BFILE exists but has not been opened.</p>
                        <p>It is an error to COMMIT a transaction before closing all previously opened LOBs. At transaction ROLLBACK time, all LOBs that are still open will be discarded without first being closed.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB849"></a><a id="LNPCB850"></a><a id="LNPCB851"></a><a id="LNPCB852"></a><a id="LNPCB853"></a><a id="LNPCB854"></a><a id="LNPCB855"></a><a id="LNPCB856"></a><a id="LNPCB857"></a><a id="LNPCB848"></a><div class="props_rev_3"><a id="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5" name="GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5"></a><h4 id="LNPCB-GUID-EFFE5F7C-4321-425F-81FF-1C89BB0108A5" class="sect4"><span class="enumeration_section">13.4.4 </span>COPY
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Copy all or part of a LOB value into a second LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB COPY :<span class="italic">amt </span>FROM :<span class="italic">src</span> [AT :<span class="italic">src_offset</span>]
        TO :<span class="italic">dst</span> [AT :<span class="italic">dst_offset</span>] END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">amt (IN)</p>
                        <p>The maximum number of bytes for BLOBs, or characters for CLOBs and NCLOBs, to copy.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN)</p>
                        <p>The locator of the source LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src_offset (IN)</p>
                        <p>This is the number of characters for CLOB or NCLOB, and the number of bytes for a BLOB, starting from 1 at the beginning of the LOB. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">dst (IN)</p>
                        <p>The locator of the destination LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">dst_offset (IN)</p>
                        <p>The destination offset. Same rules as for src_offset.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If the data already exists at the destination's offset and beyond, it is overwritten with the source data. If the destination's offset is beyond the end of the current data, zero-byte fillers (BLOBs) or spaces (CLOBs) are written into the destination LOB from the end of the current data to the beginning of the newly written data from the source.</p>
                        <p>The destination LOB is extended to accommodate the newly written data if it extends beyond the current length of the destination LOB. It is a runtime error to extend this LOB beyond 4 Gigabytes.</p>
                        <p>It is also an error to try to copy from a LOB that is not initialized.</p>
                        <p>Both the source and destination LOBs must be of the same type. LOB buffering must not be enabled for either locator. </p>
                        <p>To make a temporary LOB permanent, the COPY statement must be used to explicitly COPY the temporary LOB into a permanent one.The <code class="codeph">amt</code> variable indicates the maximum amount to copy. If the end of the source LOB is reached before the specified amount is copied, the operation terminates without an error.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB859"></a><a id="LNPCB860"></a><a id="LNPCB861"></a><a id="LNPCB862"></a><a id="LNPCB863"></a><a id="LNPCB858"></a><div class="props_rev_3"><a id="GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843" name="GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843"></a><h4 id="LNPCB-GUID-4362D0D2-54BB-45EA-9810-2F31FB4FE843" class="sect4"><span class="enumeration_section">13.4.5 </span>CREATE TEMPORARY
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Creates a temporary LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB CREATE TEMPORARY :<span class="italic">src </span>END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN OUT)</p>
                        <p>Before execution, when IN,<code class="codeph"> src</code> is a LOB locator previously allocated.
                        </p>
                        <p>After execution, when OUT, <code class="codeph">src</code> is a LOB locator that will point to a new empty temporary LOB.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>After successful execution, the locator points to a newly created temporary LOB that resides on the database server independent of a table. The temporary LOB is empty and has zero length.</p>
                        <p>At the end of a session, all temporary LOBs are freed. Reads and Writes to temporary LOBs never go through the buffer cache.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB865"></a><a id="LNPCB866"></a><a id="LNPCB867"></a><a id="LNPCB868"></a><a id="LNPCB869"></a><a id="LNPCB864"></a><div class="props_rev_3"><a id="GUID-7C573474-BB16-4815-B2E9-6B05B333CD47" name="GUID-7C573474-BB16-4815-B2E9-6B05B333CD47"></a><h4 id="LNPCB-GUID-7C573474-BB16-4815-B2E9-6B05B333CD47" class="sect4"><span class="enumeration_section">13.4.6 </span>DISABLE BUFFERING
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Disables LOB buffering for the LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB DISABLE BUFFERING :<span class="italic">src </span>END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN OUT)</p>
                        <p>An internal LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This statement does not support BFILEs. Subsequent reads or writes will not be done through the LBS.</p>
                        <p><span class="bold">Note:</span> Use a FLUSH BUFFER command to make changes permanent, since the DISABLE BUFFERING statement does not implicitly flush the changes made in the LOB Buffering Subsystem.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB871"></a><a id="LNPCB872"></a><a id="LNPCB873"></a><a id="LNPCB874"></a><a id="LNPCB875"></a><a id="LNPCB870"></a><div class="props_rev_3"><a id="GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658" name="GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658"></a><h4 id="LNPCB-GUID-74790F0A-067C-4C9A-B1CD-C8CBE84AF658" class="sect4"><span class="enumeration_section">13.4.7 </span>ENABLE BUFFERING
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Enables LOB buffering for the LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB ENABLE BUFFERING :<span class="italic">src </span>END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN OUT)</p>
                        <p>An internal LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This statement does not support BFILEs. Subsequent reads and writes are done through the LBS.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB877"></a><a id="LNPCB878"></a><a id="LNPCB879"></a><a id="LNPCB880"></a><a id="LNPCB881"></a><a id="LNPCB882"></a><a id="LNPCB883"></a><a id="LNPCB876"></a><div class="props_rev_3"><a id="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC" name="GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC"></a><h4 id="LNPCB-GUID-6D27FAFC-5B61-45AF-826C-EE7F12220DBC" class="sect4"><span class="enumeration_section">13.4.8 </span>ERASE
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Erases a given amount of LOB data starting from a given offset.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB ERASE :amt 
        FROM :src [AT :src_offset] END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">amt (IN OUT)</p>
                        <p>The input is the number of bytes or characters to erase. The returned output is the actual number erased.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN OUT)</p>
                        <p>An internal LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src_offset (IN)</p>
                        <p>The offset from the beginning of the LOB, starting from 1.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This statement does not support BFILEs. </p>
                        <p>After execution, <span class="italic">amt </span>returns the actual number of characters/bytes that were erased. The actual number and requested number will differ if the end of the LOB value is reached before erasing the requested number of characters/bytes. If the LOB is empty, <span class="italic">amt</span> will indicate that 0 characters/bytes were erased.
                        </p>
                        <p>For BLOBs, erasing means zero-byte fillers overwrite the existing LOB value. For CLOBs, erasing means that spaces overwrite the existing LOB value.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB885"></a><a id="LNPCB886"></a><a id="LNPCB887"></a><a id="LNPCB884"></a><div class="props_rev_3"><a id="GUID-AF7F4B27-9400-4201-917F-23013E0657C3" name="GUID-AF7F4B27-9400-4201-917F-23013E0657C3"></a><h4 id="LNPCB-GUID-AF7F4B27-9400-4201-917F-23013E0657C3" class="sect4"><span class="enumeration_section">13.4.9 </span>FILE CLOSE ALL
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Closes all BFILES opened in the current session.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB FILE CLOSE ALL END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If there are any open files in the session whose closure has not been handled properly, you can use the FILE CLOSE ALL statement to close all files opened in the session and resume file operations from the beginning.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB889"></a><a id="LNPCB890"></a><a id="LNPCB891"></a><a id="LNPCB892"></a><a id="LNPCB893"></a><a id="LNPCB894"></a><a id="LNPCB895"></a><a id="LNPCB888"></a><div class="props_rev_3"><a id="GUID-50066F85-1DE1-457C-8861-79D3693A412C" name="GUID-50066F85-1DE1-457C-8861-79D3693A412C"></a><h4 id="LNPCB-GUID-50066F85-1DE1-457C-8861-79D3693A412C" class="sect4"><span class="enumeration_section">13.4.10 </span>FILE SET
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Sets DIRECTORY alias and FILENAME in a BFILE locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB FILE SET :<span class="italic">file</span>
        DIRECTORY = :<span class="italic">alias</span>, FILENAME = :<span class="italic">filename </span>END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">file (IN OUT)</p>
                        <p>BFILE locator where the DIRECTORY alias and FILENAME is set.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">alias (IN)</p>
                        <p>DIRECTORY alias name to set.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">filename (IN)</p>
                        <p>The FILENAME to set.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The given BFILE locator must be first ALLOCATEd prior to its use in this statement.</p>
                        <p>Both the DIRECTORY alias name and FILENAME must be provided.</p>
                        <p>The maximum length of the DIRECTORY alias is 128 bytes. The maximum length of the FILENAME is 255 bytes.</p>
                        <p>The only external datatypes supported for use with the DIRECTORY alias name and FILENAME attributes are VARCHAR, VARCHAR2 and CHARF.</p>
                        <p>It is an error to use this statement with anything but an external LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB897"></a><a id="LNPCB898"></a><a id="LNPCB899"></a><a id="LNPCB900"></a><a id="LNPCB901"></a><a id="LNPCB896"></a><div class="props_rev_3"><a id="GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448" name="GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448"></a><h4 id="LNPCB-GUID-CB0A00CE-3BC5-4E3B-B304-DDC4B46C1448" class="sect4"><span class="enumeration_section">13.4.11 </span>FLUSH BUFFER
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Writes this LOB's buffers to the database server.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB FLUSH BUFFER :src [FREE] END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN OUT)</p>
                        <p>Internal LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Writes the buffer data to the database LOB in the server from the LOB referenced by the input locator.</p>
                        <p>LOB buffering must have already been enabled for the input LOB locator.</p>
                        <p>The FLUSH operation, by default, does not free the buffer resources for reallocation to another buffered LOB operation. However, if you want to free the buffer explicitly, you can include the optional FREE keyword to so indicate.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB903"></a><a id="LNPCB904"></a><a id="LNPCB905"></a><a id="LNPCB906"></a><a id="LNPCB907"></a><a id="LNPCB902"></a><div class="props_rev_3"><a id="GUID-284D7C30-A00F-4503-9F12-E4F723F76218" name="GUID-284D7C30-A00F-4503-9F12-E4F723F76218"></a><h4 id="LNPCB-GUID-284D7C30-A00F-4503-9F12-E4F723F76218" class="sect4"><span class="enumeration_section">13.4.12 </span>FREE TEMPORARY
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Free the temporary space for the LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB FREE TEMPORARY :<span class="italic">src </span>END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN OUT)</p>
                        <p>The LOB locator pointing to the temporary LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The input locator must point to a temporary LOB. The output locator is marked not initialized and can be used in subsequent LOB statements. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB909"></a><a id="LNPCB910"></a><a id="LNPCB911"></a><a id="LNPCB912"></a><a id="LNPCB913"></a><a id="LNPCB914"></a><a id="LNPCB915"></a><a id="LNPCB916"></a><a id="LNPCB917"></a><a id="LNPCB908"></a><div class="props_rev_3"><a id="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550" name="GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550"></a><h4 id="LNPCB-GUID-9A977BA5-64F6-4EAD-82A1-4FC2BCB03550" class="sect4"><span class="enumeration_section">13.4.13 </span>LOAD FROM FILE
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Copy all or a part of a BFILE into an internal LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB LOAD :<span class="italic">amt</span> 
        FROM FILE :<span class="italic">file</span> [AT :<span class="italic">src_offset</span>] INTO :<span class="italic">dst</span> [AT :<span class="italic">dst_offset</span>] END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">amt (IN)</p>
                        <p>Maximum number of bytes to be loaded.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">file (IN OUT)</p>
                        <p>The source BFILE locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src_offset (IN)</p>
                        <p>The number of bytes offset from the beginning of the file, starting from 1.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">dst (IN OUT)</p>
                        <p>The destination LOB locator which can be BLOB, CLOB, be NCLOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">dst_offset (IN)</p>
                        <p>The number of bytes (for BLOBs) or characters (CLOBs and NCLOBs) from the beginning of the destination LOB where writing will begin. It starts at 1.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The data is copied from the source BFILE to the destination internal LOB. No character set conversions are performed when copying the BFILE data to a CLOB or NCLOB. Therefore, the BFILE data must already be in the same character set as the CLOB or NCLOB in the database.</p>
                        <p>The source and destination LOBs must already exist. If the data already exists at the destination's start position, it is overwritten with the source data. If the destination's start position is beyond the end of the current data, zero-byte fillers (BLOBs) or spaces (CLOBs and NCLOBs) are written into the destination LOB from the end of the data to the beginning of the newly written data from the source.</p>
                        <p>The destination LOB is extended to accommodate the newly written data if it extends beyond the current length of the destination LOB. It is an error to extend this LOB beyond 4 Gigabytes.</p>
                        <p>It is also an error to copy from a BFILE that is not initialized.</p>
                        <p>The amount parameter indicates the maximum amount to load. If the end of the source BFILE is reached before the specified amount is loaded, the operation terminates without error.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB919"></a><a id="LNPCB920"></a><a id="LNPCB921"></a><a id="LNPCB922"></a><a id="LNPCB923"></a><a id="LNPCB918"></a><div class="props_rev_3"><a id="GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B" name="GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B"></a><h4 id="LNPCB-GUID-D9CF8AB7-F5FB-46E8-B8A9-EAC44221B85B" class="sect4"><span class="enumeration_section">13.4.14 </span>OPEN
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Open a LOB or BFILE for read or read/write access.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB OPEN :<span class="italic">src</span> 
        [ READ ONLY | READ WRITE ] END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN OUT)</p>
                        <p>LOB locator of the LOB or BFILE.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The default mode in which a LOB or BFILE can be Opened is for READ ONLY access.</p>
                        <p>For internal LOBs, being OPEN is associated with the LOB, not with the locator. Assigning an already Opened locator to another locator does not count as OPENing a new LOB. Instead, both locators refer to the same LOB. For BFILEs, being OPEN is associated with the locator.</p>
                        <p>Only 32 LOBs can be OPEN at any one time. An error will be returned when the 33rd LOB is Opened.</p>
                        <p>There is no support for writable BFILEs. Therefore, when you OPEN a BFILE in READ WRITE mode, an error is returned.</p>
                        <p>It is also an error to open a LOB in READ ONLY mode and then attempt to WRITE to the LOB. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB925"></a><a id="LNPCB926"></a><a id="LNPCB927"></a><a id="LNPCB928"></a><a id="LNPCB929"></a><a id="LNPCB930"></a><a id="LNPCB931"></a><a id="LNPCB932"></a><a id="LNPCB933"></a><a id="LNPCB934"></a><a id="LNPCB924"></a><div class="props_rev_3"><a id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1" name="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1"></a><h4 id="LNPCB-GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1" class="sect4"><span class="enumeration_section">13.4.15 </span>READ
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Reads all or part of a LOB or BFILE into a buffer.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB READ :amt FROM :<span class="italic">src </span>[AT :<span class="italic">src_offset</span>]
        INTO :<span class="italic">buffer</span> [WITH LENGTH :<span class="italic">buflen</span>] END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">amt (IN OUT)</p>
                        <p>The input is the number of characters or bytes to be read. The output is the actual number of characters or bytes that were read.</p>
                        <p>If the amount of bytes to be read is larger than the buffer length it is assumed that the LOB is being READ in a polling mode. On input if this value is 0, then the data will be read in a polling mode from the input offset until the end of the LOB. </p>
                        <p>The number of bytes or characters actually read is returned in <code class="codeph">amt.</code> If the data is read in pieces, <code class="codeph">amt</code> will always contain the length of the last piece read. 
                        </p>
                        <p>When the end of a LOB is reached an <span class="italic">ORA-1403: no data found</span> error will be issued. 
                        </p>
                        <p>When reading in a polling mode, the application must invoke the LOB READ repeatedly to read more pieces of the LOB until no more data is left. Control the use of the polling mode with the NOT FOUND condition in a WHENEVER directive to catch the ORA-1403 error.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN)</p>
                        <p>The LOB or BFILE locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src_offset (IN)</p>
                        <p>This is the absolute offset from the beginning of the LOB value from which to start reading. For character LOBs it is the number of characters from the beginning of the LOB. For binary LOBs or BFILEs it is the number of bytes. The first position is 1.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">buffer (IN OUT)</p>
                        <p>A buffer into which the LOB data will be read. The external datatype of the buffer is restricted to only a few types depending on the type of the source LOB. The maximum length of the buffer depends on the external datatype being used to store the LOB value. <a id="d79022e2361" class="indexterm-anchor"></a>The following table summarizes the legal external datatypes and their corresponding maximum lengths categorized by source LOB type:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1__GUID-69796C34-F48B-433B-B291-B6467C69B977">
                        <p class="titleintable">Table 13-2 Source LOB and Precompiler Datatypes</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Source LOB and Precompiler Datatypes" summary="q" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="11%" id="d79022e2378">External LOB(3)</th>
                                 <th align="left" valign="bottom" width="17%" id="d79022e2385">Internal LOB</th>
                                 <th align="left" valign="bottom" width="24%" id="d79022e2388">Precompiler External Datatype</th>
                                 <th align="left" valign="bottom" width="17%" id="d79022e2391">Precompiler Maximum Length (4)</th>
                                 <th align="left" valign="bottom" width="18%" id="d79022e2398">PL/SQL Datatype</th>
                                 <th align="left" valign="bottom" width="14%" id="d79022e2401">PL/SQL Maximum Length</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d79022e2406" headers="d79022e2378 ">
                                    <p></p>
                                    <p></p>
                                    <p></p>
                                    <p>BFILE </p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79022e2406 d79022e2385 ">
                                    <p>BLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d79022e2406 d79022e2388 ">
                                    <p>RAW</p>
                                    <p>VARRAW</p>
                                    <p>LONG RAW</p>
                                    <p>LONG VARRAW</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79022e2406 d79022e2391 ">
                                    <p>65535</p>
                                    <p>65533</p>
                                    <p>2147483647</p>
                                    <p>2147483643</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d79022e2406 d79022e2398 ">
                                    <p>RAW</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d79022e2406 d79022e2401 ">
                                    <p>32767</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d79022e2440" headers="d79022e2378 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79022e2440 d79022e2385 ">
                                    <p>CLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d79022e2440 d79022e2388 ">
                                    <p>VARCHAR2</p>
                                    <p>VARCHAR</p>
                                    <p>LONG VARCHAR</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79022e2440 d79022e2391 ">
                                    <p>65535 </p>
                                    <p>65533</p>
                                    <p>2147483643</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d79022e2440 d79022e2398 ">
                                    <p>VARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d79022e2440 d79022e2401 ">
                                    <p>32767</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="11%" id="d79022e2467" headers="d79022e2378 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79022e2467 d79022e2385 ">
                                    <p>NCLOB</p>
                                 </td>
                                 <td align="left" valign="top" width="24%" headers="d79022e2467 d79022e2388 ">
                                    <p>NVARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="17%" headers="d79022e2467 d79022e2391 ">
                                    <p>4000</p>
                                 </td>
                                 <td align="left" valign="top" width="18%" headers="d79022e2467 d79022e2398 ">
                                    <p>NVARCHAR2</p>
                                 </td>
                                 <td align="left" valign="top" width="14%" headers="d79022e2467 d79022e2401 ">
                                    <p>4000</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;3 </sup> Any of the external datatypes shown can be used with BFILES.
                     </p>
                     <p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;4 </sup> Lengths are measured in bytes, not characters.
                     </p>
                     <div class="section">
                        <p class="subhead3">buflen (IN)</p>
                        <p>Specifies the length of the given buffer when it cannot be determined otherwise. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>A BFILE must already exist on the database server and must have been opened using the input locator. The database must have permission to read the file and the user must have read permission on the directory.</p>
                        <p>It is an error to try to read from an un-initialized LOB or BFILE.</p>
                        <p>The length of the buffer is determined this way:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>From <code class="codeph">buflen</code>, when the WITH LENGTH clause is present.
                              </p>
                           </li>
                           <li>
                              <p>In the absence of the WITH LENGTH clause, the length is determined by treating the buffer host variable in OUT mode according to the rules in “Handling Character Data”.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="datatypes-and-host-variables.html#GUID-7DFCC56E-3326-4BE0-B808-60AF4F50D39B">Handling Character Data</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCB936"></a><a id="LNPCB937"></a><a id="LNPCB938"></a><a id="LNPCB939"></a><a id="LNPCB940"></a><a id="LNPCB941"></a><a id="LNPCB935"></a><div class="props_rev_3"><a id="GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2" name="GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2"></a><h4 id="LNPCB-GUID-3CD6A848-4CC9-402F-B376-DFF772FF59F2" class="sect4"><span class="enumeration_section">13.4.16 </span>TRIM
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Truncates the LOB value.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB TRIM :<span class="italic">src</span> TO :<span class="italic">newlen </span>END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN OUT)</p>
                        <p>LOB locator for internal LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">newlen (IN)</p>
                        <p>The new length of the LOB value.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This statement is not for BFILES. The new length cannot be greater than the current length, or an error is returned.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB943"></a><a id="LNPCB944"></a><a id="LNPCB945"></a><a id="LNPCB946"></a><a id="LNPCB947"></a><a id="LNPCB948"></a><a id="LNPCB949"></a><a id="LNPCB950"></a><a id="LNPCB951"></a><a id="LNPCB942"></a><div class="props_rev_3"><a id="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0" name="GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0"></a><h4 id="LNPCB-GUID-CFBD67AB-5DFC-418D-87E6-BBDF9FA243F0" class="sect4"><span class="enumeration_section">13.4.17 </span>WRITE
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Writes the contents of a buffer to a LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB WRITE [APPEND] [ FIRST | NEXT | LAST | ONE ]
        :<span class="italic">amt </span>FROM :<span class="italic">buffer</span> [WITH LENGTH :<span class="italic">buflen</span>] 
           INTO :<span class="italic">dst</span> [AT :<span class="italic">dst_offset</span>] END-EXEC.</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">amt (IN OUT)</p>
                        <p>The input is the number of characters or bytes to be written.</p>
                        <p>The output is the actual number of characters or bytes that is written.</p>
                        <p>When writing using a polling method, <code class="codeph">amt</code> will return the cumulative total length written for the execution of the WRITE statement after a WRITE LAST is executed. If the WRITE statement is interrupted, <code class="codeph">amt</code> will be undefined.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">buffer (IN)</p>
                        <p>A buffer from which the LOB data is written. See “READ” for the lengths of datatypes.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">dst (IN OUT)</p>
                        <p>The LOB locator.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">dst_offset (IN)</p>
                        <p>The offset from the beginning of the LOB (counting from 1), in characters for CLOBs and NCLOBs, in bytes for BLOBs.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">buflen (IN)</p>
                        <p>The buffer length when it cannot be calculated in any other way.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>If LOB data already exists, it is overwritten with the data stored in the buffer. If the offset specified is beyond the end of the data currently in the LOB, zero-byte fillers or spaces are inserted into the LOB.</p>
                        <p>Specifying the keyword APPEND in the WRITE statement causes the data to automatically be written to the end of the LOB. When APPEND is specified, the destination offset is assumed to be the end of the LOB. It is an error to specify the destination offset when using the APPEND option in the WRITE statement.</p>
                        <p>The buffer can be written to the LOB in one piece (using the ONE orientation which is the default) or it can be provided piece-wise using a standard polling method.</p>
                        <p>Polling is begun by using FIRST, then NEXT to write subsequent pieces. The LAST keyword is used to write the final piece that terminates the write. </p>
                        <p>Using this piece-wise write mode, the buffer and the length can be different in each call if the pieces are of different sizes and from different locations.</p>
                        <p>If the total amount of data passed to Oracle is less than the amount specified by the <code class="codeph">amt</code> parameter after doing all the writes, an error results.
                        </p>
                        <p>The same rules apply for determining the buffer length as in the READ statement. See “READ”.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="large-objects-LOBs.html#GUID-889494EC-DF64-42DA-BBD3-BA2F09F35DB1">READ</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="LNPCB953"></a><a id="LNPCB954"></a><a id="LNPCB955"></a><a id="LNPCB956"></a><a id="LNPCB957"></a><a id="LNPCB958"></a><a id="LNPCB959"></a><a id="LNPCB960"></a><a id="LNPCB961"></a><a id="LNPCB952"></a><div class="props_rev_3"><a id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582" name="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582"></a><h4 id="LNPCB-GUID-21CC05FA-CD63-46CD-8271-7DD342C05582" class="sect4"><span class="enumeration_section">13.4.18 </span>DESCRIBE
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">Purpose</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This is a statement that is equivalent to several OCI and PL/SQL statements. Use the LOB DESCRIBE SQL statement to retrieve attributes from a LOB. The LOB DESCRIBE statement has this format:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">     EXEC SQL [AT [:]<span class="italic">database</span>] LOB DESCRIBE :<span class="italic">src</span> GET <span class="italic">attribute1</span> [{, <span class="italic">attributeN</span>}]
        INTO :<span class="italic">hv1</span> [[INDICATOR] :<span class="italic">hv_ind1</span>] [{, :<span class="italic">hvN</span> [[INDICATOR] :<span class="italic">hv_indN</span>] }] 
           END-EXEC.
</pre><p>where an attribute can be any of these choices:</p><pre class="oac_no_warn" dir="ltr">CHUNKSIZE | DIRECTORY | FILEEXISTS | FILENAME | ISOPEN | ISTEMPORARY | LENGTH</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Host Variables</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">src (IN)</p>
                        <p>The LOB locator of an internal or external LOB.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">hv1 ... hvN (OUT)</p>
                        <p>The host variables that receive the attribute values, in the order specified in the attribute name list.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">hv_ind1 ... hv_indN (OUT)</p>
                        <p>Optional host variables that receive the indicator NULL status in the order of the attribute name list.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The following table describes the attributes, which LOB it is associated with, and the COBOL types into which they should be read:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformalwide" id="GUID-21CC05FA-CD63-46CD-8271-7DD342C05582__GUID-A02641D0-117A-4AF8-898E-A8B06184B37E">
                        <p class="titleintable">Table 13-3 LOB Attributes</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="LOB Attributes" summary="q" width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d79022e2840">LOB Attribute</th>
                                 <th align="left" valign="bottom" width="54%" id="d79022e2843">Attribute Description</th>
                                 <th align="left" valign="bottom" width="15%" id="d79022e2846">Restrictions</th>
                                 <th align="left" valign="bottom" width="12%" id="d79022e2849">COBOL Type</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79022e2854" headers="d79022e2840 ">
                                    <p>CHUNKSIZE<a id="d79022e2857" class="indexterm-anchor"></a> 
                                    </p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79022e2854 d79022e2843 ">
                                    <p>The optimum amount (in bytes for BLOBs and characters for CLOBs/NCLOBs) of space of a given tablespace block, which is used to store the LOB value. Chunk sizes are not fixed and the maximum possible value based on the available chunk sizes is used for storage. If you make multiple WRITE requests on the same page or set of pages, data is written to the disk only when committed and is treated as a single modification. This allows for data being written in larger chunk sizes.</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79022e2854 d79022e2846 ">
                                    <p>BLOBs, CLOBs and NCLOBs only</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79022e2854 d79022e2849 ">
                                    <p>PIC S9(9) COMP</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79022e2872" headers="d79022e2840 ">
                                    <p>DIRECTORY<a id="d79022e2875" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79022e2872 d79022e2843 ">
                                    <p>The name of the DIRECTORY alias for the BFILE. The length, n, is between 1 and 128 bytes. Use that length in the picture.</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79022e2872 d79022e2846 ">
                                    <p>FILE LOBs only</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79022e2872 d79022e2849 ">
                                    <p>PIC X(n) [VARYING]</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79022e2889" headers="d79022e2840 ">
                                    <p>FILEEXISTS<a id="d79022e2892" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79022e2889 d79022e2843 ">
                                    <p>Determines whether or not the BFILE exists on the server's operating system file system. FILEEXISTS is true when it is nonzero; false when it equals 0.</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79022e2889 d79022e2846 ">
                                    <p>FILE LOBs only</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79022e2889 d79022e2849 ">
                                    <p>PIC S9(9) COMP</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79022e2906" headers="d79022e2840 ">
                                    <p>FILENAME<a id="d79022e2909" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79022e2906 d79022e2843 ">
                                    <p>The name of the BFILE. The length, n, is between 1 and 255 bytes. Use that length in the picture.</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79022e2906 d79022e2846 ">
                                    <p>FILE LOBs only</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79022e2906 d79022e2849 ">
                                    <p>PIC X(n) [VARYING]</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79022e2923" headers="d79022e2840 ">
                                    <p>ISOPEN<a id="d79022e2926" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79022e2923 d79022e2843 ">
                                    <p>For BFILEs, if the input BFILE locator was never used in an OPEN statement, the BFILE is considered not to be OPENed by this locator. However, a different BFILE locator may have OPENed the BFILE. More than one OPEN can be performed on the same BFILE using different locators. For LOBs, if a different locator opened the LOB, the LOB is still considered to be OPEN by the input locator. ISOPEN is true when it is nonzero; false when it equals 0.</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79022e2923 d79022e2846 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79022e2923 d79022e2849 ">
                                    <p>PIC S9(9) COMP</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79022e2940" headers="d79022e2840 ">
                                    <p>ISTEMPORARY<a id="d79022e2943" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79022e2940 d79022e2843 ">
                                    <p>Determines whether or not the input LOB locator refers to a temporary LOB or not. ISTEMPORARY is true when it is nonzero; false when it equals 0.</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79022e2940 d79022e2846 ">
                                    <p>BLOBs, CLOBs and NCLOBs only</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79022e2940 d79022e2849 ">
                                    <p>PIC S9(9) COMP</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d79022e2957" headers="d79022e2840 ">
                                    <p>LENGTH<a id="d79022e2960" class="indexterm-anchor"></a></p>
                                 </td>
                                 <td align="left" valign="top" width="54%" headers="d79022e2957 d79022e2843 ">
                                    <p>Length of BLOBs and BFILEs in bytes, CLOBs and NCLOBs in characters. For BFILEs, the length includes EOF if it exists. Empty internal LOBs have zero length. LOBs/BFILEs that are not initialized have undefined length.</p>
                                 </td>
                                 <td align="left" valign="top" width="15%" headers="d79022e2957 d79022e2846 ">
                                    <p>-</p>
                                 </td>
                                 <td align="left" valign="top" width="12%" headers="d79022e2957 d79022e2849 ">
                                    <p>PIC 9(9) COMP</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Indicator variables should be declared as PIC S9(4) COMP. After execution has completed, SQLERRD(3) contains the number of attributes retrieved without error. If there was an execution error, the attribute at which it occurred is one more than the contents of SQLERRD(3).</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">DESCRIBE Example</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>Here is a simple Pro*COBOL example that extracts the DIRECTORY and FILENAME attributes of a given BFILE:</p><pre class="oac_no_warn" dir="ltr">...
 01  A-BFILE      SQL-BFILE.
 01  DIRECTORY    PIC X(30) VARYING.
 01  FILENAME     PIC X(30) VARYING.
 01  D-IND        PIC S9(4) COMP.
 01  F-IND        PIC S9(4) COMP.
 01  FEXISTS      PIC S9(9) COMP.
 01  ISOPN        PIC S9(9) COMP.  
...
</pre><p>Finally, select a BFILE locator from some LOB table and do the DESCRIBE:</p><pre class="oac_no_warn" dir="ltr">     EXEC SQL ALLOCATE :A-BFILE END-EXEC.
     EXEC SQL INSERT INTO lob_table (a_bfile) VALUES (BFILENAME ('lob.dir',
        'image.gif')) END-EXEC.
     EXEC SQL SELECT a_bfile INTO :A-BFILE FROM lob_table WHERE ... END-EXEC.
     EXEC SQL DESCRIBE :A-BFILE GET DIRECTORY, FILENAME, FILEEXISTS, ISOPEN
        INTO :DIRECTORY:D-IND, :FILENAME:F-IND, FEXISTS, ISOPN ND-EXEC.
</pre><p>Indicator variables are valid for use only with the DIRECTORY and FILENAME attributes. These attributes are character strings whose values may be truncated if the host variable buffers used to hold their values are not large enough. When truncation occurs, the value of the indicator will be set to the original length of the attribute.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="LNPCB962"></a><div class="props_rev_3"><a id="GUID-35E01A34-6DD5-4D82-BE5E-4DA0BEB48A3B" name="GUID-35E01A34-6DD5-4D82-BE5E-4DA0BEB48A3B"></a><h4 id="LNPCB-GUID-35E01A34-6DD5-4D82-BE5E-4DA0BEB48A3B" class="sect4"><span class="enumeration_section">13.4.19 </span>READ and WRITE Using the Polling Method
                  </h4>
                  <div>
                     <div class="section">
                        <p>Here is an outline of using READ with the polling method:</p>
                        <p>Start the read polling by setting the amount to zero in the first LOB READ (or set the amount to the size of the total data to be read). The amount is first set to zero in this case outline which omits details:</p><pre class="oac_no_warn" dir="ltr">      EXEC SQL ALLOCATE :CLOB1 END-EXEC.

      EXEC SQL WHENEVER NOT FOUND GOTO END-OF-CLOB END-EXEC.

      EXEC SQL SELECT A_CLOB INTO :CLOB1 FROM LOB_TABLE WHERE ... END-EXEC.

      MOVE 0 TO AMT.
      EXEC SQL LOB READ :AMT FROM :VLOB1 AT :OFFSET INTO :BUFFER END-EXEC.

 READ-LOOP.
      EXEC SQL LOB READ :AMT FROM :CLOB1 INTO BUFFER $END-EXEC.
      GO TO READ-LOOP.

 END-OF-CLOB.     
      EXEC SQL WHENEVER NOT FOUND CONTINUE END-EXEC.

      EXEC SQL FREE :CLOB1 END-EXEC.
</pre><p>The following code outline writes data from a buffer into an internal CLOB. The value of AMT (16 characters) in the initial write statement should be the length of the entire data you will write. The buffer is 5 characters long. </p>
                        <p>If EOF is read in the initial read, then do the LOB WRITE ONE. If not, start polling with a LOB WRITE FIRST of the buffer. Read the data, and do a LOB WRITE NEXT of the output. No offset is needed in the LOB WRITE NEXT because data is written at the end of the last write. After EOF is read, break out of the read loop and do a LOB WRITE LAST. The amount returned must equal the initial amount value (16).</p><pre class="oac_no_warn" dir="ltr">     MOVE 16 TO AMT.
     PERFORM READ-NEXT-RECORD.
     MOVE INREC TO BUFFER-ARR.
     MOVE 5 TO BUFFER-LEN.
     IF (END-OF-FILE = "Y")
         EXEC SQL LOB WRITE ONE :AMT FROM :BUFFER INTO CLOB1 
            AT :OFFSET END-EXEC.
         PERFORM DISPLAY-CLOB
     ELSE
         EXEC SQL LOB WRITE FIRST :AMT FROM :BUFFER INTO :CLOB1
            AT :OFFSET END-EXEC.
     PERFORM READ-NEXT-RECORD.
     PERFORM WRITE-TO-CLOB 
        UNTIL END-OF-FILE = "Y".
     MOVE INREC TO BUFFER-ARR.
     MOVE 1 TO BUFFER-LEN.
     EXEC SQL LOB WRITE LAST :AMT FROM :BUFFER INTO :CLOB1 END-EXEC.
     PERFORM DISPLAY-CLOB.
     ...
 WRITE-TO-CLOB.
     MOVE INREC TO BUFFER-ARR.
     MOVE 5 TO BUFFER-LEN.
     EXEC SQL LOB WRITE NEXT :AMT FROM :BUFFER INTO :CLOB1 END-EXEC.
     PERFORM READ-NEXT RECORD.

 READ-NEXT-RECORD.
     MOVE SPACES TO INREC.
     READ INFILE NEXT RECORD
        AT END
        MOVE "Y" TO END-OF-FILE.
 ...</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="LNPCB963"></a><div class="props_rev_3"><a id="GUID-F7E1C804-7A87-4903-B8F4-B573B32E5C77" name="GUID-F7E1C804-7A87-4903-B8F4-B573B32E5C77"></a><h3 id="LNPCB-GUID-F7E1C804-7A87-4903-B8F4-B573B32E5C77" class="sect3"><span class="enumeration_section">13.5 </span>LOB Sample Program: LOBDEMO1.PCO
               </h3>
               <div>
                  <p>The LOBDEMO1.PCO program illustrates several LOB embedded SQL statements. The source code is in your <code class="codeph">demo</code> directory. The application uses a table named <code class="codeph">license_table</code> whose columns are social security number, name, and a CLOB containing text summarizing driving offenses. Several simplified SQL operations of a typical motor vehicle department are modeled.
                  </p>
                  <p>The possible actions are:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Add new records.</p>
                     </li>
                     <li>
                        <p>List records by social security number.</p>
                     </li>
                     <li>
                        <p>List information in a record, given a social security number.</p>
                     </li>
                     <li>
                        <p>Append a new traffic violation to an existing CLOB's contents.</p>
                     </li>
                  </ul>
                  <p>Here is the listing of LOBDEMO1.PCO:</p><pre class="oac_no_warn" dir="ltr">      *********************************************************************
      * LOB Demo 1: DMV Database                                          *
      *                                                                   *
      * SCENARIO:                                                         *
      *                                                                   *
      * We consider the example of a database used to store driver's      *
      * licenses. The licenses are stored as rows of a table containing   *
      * three columns: the sss number of a person, his/her name and the   *
      * text summary of the info found in his license.                    *
      *                                                                   *
      * The sss number and the name are the unique social security number *
      * and name of an individual.  The text summary is a summary of the  *
      * information on the individual, including his driving record,      *
      * which can be arbitrarily long and may contain comments and data   *
      * regarding the person's driving ability.                           *
      *                                                                   *
      * APPLICATION OVERVIEW:                                             *
      *                                                                   *
      * This example demonstrate how a Pro*COBOL client can handle the    *
      * new LOB datatypes.  Demonstrated are the mechanisms for accessing *
      * and storing lobs to/from tables.                                  *
      *                                                                   *
      *  To run the demo:                                                 *
      *                                                                   *
      *  1. Execute the script, lobdemo1.sql in Server Manager            *
      *  2. Precompile using Pro*COBOL                                    *
      *       procob lobdemo1                                             *
      *  3. Compile/Link (This step is platform specific)                 *
      *                                                                   *
      * lobdemo1.sql contains the following SQL statements:               *
      *                                                                   *
      * connect scott/tiger;                                              *
      *                                                                   *
      * drop table license_table;                                         *
      *                                                                   *
      * create table license_table(                                       *
      * sss char(9),                                                      *
      * name varchar2(50),                                                *
      * txt_summary clob);                                                *
      *                                                                   *
      * insert into license_table                                         *
      *  values('971517006', 'Dennis Kernighan',                          *
      *  'Wearing a Bright Orange Shirt');                                *
      *                                                                   *
      * insert into license_table                                         *
      *  values('555001212', 'Eight H. Number',                           *
      *  'Driving Under the Influence');                                  *
      *                                                                   *
      * insert into license_table                                         *
      *  values('010101010', 'P. Doughboy',                               *
      *  'Impersonating An Oracle Employee');                             *
      *                                                                   *
      * insert into license_table                                         *
      *  values('555377012', 'Calvin N. Hobbes',                          *
      *  'Driving Under the Influence');                                  *
      *                                                                   *
      * The main program provides the menu of actions that can be         *
      * performed.  The program stops when the number 5 (Quit) option     *
      * is entered.  Depending on the input, this main program calls      *
      * the appropriate nested program to execute the chosen action.      *
      *                                                                   *
      *********************************************************************
       IDENTIFICATION DIVISION.
       PROGRAM-ID.  LOBDEMO1.
       DATA DIVISION.
       WORKING-STORAGE SECTION.
       01  USERNAME       PIC X(5).
       01  PASSWD         PIC X(5).
       01  CHOICE         PIC 9 VALUE 0.
       01  SSS            PIC X(9).
       01  SSSEXISTS      PIC 9 VALUE ZERO.
       01  LICENSE-TXT    SQL-CLOB .
       01  NEWCRIME       PIC X(35) VARYING.
       01  SSSCOUNT       PIC S9(4) COMP.
       01  THE-STRING    PIC X(200) VARYING.
       01  TXT-LENGTH    PIC S9(9) COMP.
       01  CRIMES.
           05 FILLER PIC X(35) VALUE "Driving Under the Influence".
           05 FILLER PIC X(35) VALUE "Grand Theft Auto".
           05 FILLER PIC X(35) VALUE "Driving Without a License".
           05 FILLER PIC X(35) VALUE 
                  "Impersonating an Oracle Employee".
           05 FILLER PIC X(35) VALUE "Wearing a Bright Orange Shirt".
       01  CRIMELIST REDEFINES CRIMES.
           05 CRIME  PIC X(35) OCCURS 5 TIMES.
       01  CRIME-INDEX   PIC 9.
       01  TXT-LEN       PIC S9(9) COMP.
       01  CRIME-LEN     PIC S9(9) COMP.
       01  NAME1         PIC X(50) VARYING.
       01  NEWNAME         PIC X(50).
      *********************************************************************

           EXEC SQL INCLUDE SQLCA END-EXEC.

       PROCEDURE DIVISION.
       A000-CONTROL SECTION.
      *********************************************************************
      *  A000-CONTROL
      *     Overall control section 
      *********************************************************************
       A000-CNTRL.
              EXEC SQL 
		WHENEVER SQLERROR DO PERFORM Z900-SQLERROR 
	      END-EXEC.
              PERFORM B000-LOGON.
	      PERFORM C000-MAIN UNTIL CHOICE = 5.
	      PERFORM D000-LOGOFF.
       A000-EXIT.
	      STOP RUN.

       B000-LOGON SECTION.
      *********************************************************************
      *  B000-LOGON
      *    Log on to database.
      *********************************************************************
       B000-LGN.
           DISPLAY '**************************************************'.
           DISPLAY '*            Welcome to the DMV Database         *'.
           DISPLAY '**************************************************'.
           MOVE "scott" TO USERNAME.
           MOVE "tiger" TO PASSWD.
           EXEC SQL
              CONNECT :USERNAME IDENTIFIED BY :PASSWD
           END-EXEC.
           DISPLAY " ".
           DISPLAY "Connecting to license database account:  ", 
              USERNAME, "/", PASSWD.
           DISPLAY " ".
       B000-EXIT.
           EXIT.
       C000-MAIN SECTION.
      *********************************************************************
      *  C000-MAIN
      *    Display the main menu and action requests   
      *********************************************************************
       C000-MN.

           DISPLAY " ".
           DISPLAY "License Options:".
           DISPLAY "1. List available records by SSS number".
           DISPLAY "2. Get information on a particular record".
           DISPLAY "3. Add crime to a record".
           DISPLAY "4. Insert new record to database".
           DISPLAY "5. Quit".
           DISPLAY " ".
 
           MOVE ZERO TO CHOICE.
           PERFORM Z300-ACCEPT-CHOICE UNTIL CHOICE &lt; 6 
                                   AND CHOICE &gt; 0.
           IF (CHOICE = 1)
              PERFORM C100-LIST-RECORDS.
           IF (CHOICE = 2)
               PERFORM C200-GET-RECORD.
           IF (CHOICE = 3)
               PERFORM C300-ADD-CRIME.
           IF (CHOICE = 4)
               PERFORM C400-NEW-RECORD.
        C000-EXIT.
	   EXIT.
       
        C100-LIST-RECORDS SECTION.
      *********************************************************************
      *  C100-LIST-RECORDS
      *   Select  Social Security Numbers from LICENCSE_TABLE
      *   and display the list
      *********************************************************************
        C100-LST.

           EXEC SQL DECLARE SSS_CURSOR CURSOR FOR 
			SELECT SSS FROM LICENSE_TABLE
           END-EXEC.
 
           EXEC SQL OPEN SSS_CURSOR END-EXEC.
 
           DISPLAY "Available records:".

           PERFORM C110-DISPLAY-RECORDS UNTIL SQLCODE = 1403.
           EXEC SQL CLOSE SSS_CURSOR END-EXEC.
       C100-EXIT.
           EXIT. 
       C110-DISPLAY-RECORDS SECTION.
      *********************************************************************
      *  C110-DISPLAY-RECORDS
      *    Fetch the next record from the cursor and display it.
      *********************************************************************
       C110-DSPLY.
            EXEC SQL FETCH SSS_CURSOR INTO :SSS END-EXEC.
            IF SQLCODE = 0 THEN
                DISPLAY SSS.
       C110-EXIT.
            EXIT. 

       C200-GET-RECORD SECTION.
      *******************************************************************
      *  C200-GET-RECORD
      *    Allocates the global clob LICENSE-TXT then selects 
      *    the name and text which corresponds to the client-supplied
      *    sss.  It then calls Z200-PRINTCRIME to print the information and
      *    frees the clob.
      *******************************************************************
       C200-GTRECRD.
           PERFORM Z100-GET-SSS.
           IF (SSSEXISTS = 1)
             EXEC SQL ALLOCATE :LICENSE-TXT END-EXEC
             EXEC SQL SELECT NAME, TXT_SUMMARY 
                  INTO :NAME1, :LICENSE-TXT FROM LICENSE_TABLE 
                  WHERE SSS = :SSS END-EXEC
             DISPLAY "==================================================
      -         "========================"
             DISPLAY " "
             DISPLAY "NAME:  ", NAME1-ARR, "SSS:  ", SSS
             DISPLAY " "
             PERFORM Z200-PRINTCRIME       
             DISPLAY " "
             DISPLAY "==================================================
      -         "========================"
             EXEC SQL FREE :LICENSE-TXT END-EXEC
           ELSE
              DISPLAY "SSS Number Not Found".
       C200-EXIT.
           EXIT.
       C310-GETNEWCRIME SECTION.
      *******************************************************************
      *  C310-GETNEWCRIME
      *    Provides a list of the possible crimes to the user and
      *    stores the user's correct response in the variable
      *    NEWCRIME.
      *******************************************************************
       C310-GTNWCRM.

            EXEC SQL WHENEVER SQLERROR CONTINUE END-EXEC.
           
            DISPLAY " ".
            DISPLAY "Select from the following:".
            PERFORM C311-DISPLAY-CRIME
              VARYING CRIME-INDEX FROM 1 BY 1
              UNTIL CRIME-INDEX &gt; 5.
            MOVE ZERO TO CHOICE.
            PERFORM Z300-ACCEPT-CHOICE UNTIL CHOICE &lt; 6
                                  AND CHOICE &gt; 0.
            MOVE CRIME(CHOICE) TO NEWCRIME-ARR.
            MOVE 35 TO NEWCRIME-LEN.
            MOVE ZERO TO CHOICE.
       C310-EXIT.
            EXIT.
       C311-DISPLAY-CRIME SECTION.
      *******************************************************************
      *   C311-DISPLAY-CRIME
      *      Display an element of the crime table
      *******************************************************************
       C311-DSPLYCRM.
           DISPLAY "(", CRIME-INDEX, ") ", CRIME(CRIME-INDEX).
       C311-EXIT.
            EXIT.
       C320-APPENDTOCLOB SECTION.
      *******************************************************************
      * C320-APPENDTOCLOB
      *    Obtains the length of the global clob LICENSE-TXT and
      *    uses that in the LOB WRITE statement to append the NEWCRIME
      *    character buffer to the global clob LICENSE-TXT.
      *    The name corresponding the global SSS is then selected
      *    and displayed to the screen along with value of LICENSE-TXT.
      *    The caller to this function must allocate, select and later
      *    free the global clob LICENSE-TXT.
      *******************************************************************
       C320-PPNDTCLB.

           EXEC SQL 
		WHENEVER SQLERROR DO PERFORM Z900-SQLERROR 
	   END-EXEC.

           EXEC SQL LOB DESCRIBE :LICENSE-TXT GET LENGTH
               INTO :TXT-LEN END-EXEC.

           MOVE NEWCRIME-LEN TO CRIME-LEN.
           IF (TXT-LEN NOT = 0)
             ADD 3 TO TXT-LEN
           ELSE
             ADD 1 TO TXT-LEN.
           EXEC SQL LOB WRITE :CRIME-LEN FROM :NEWCRIME
                 INTO :LICENSE-TXT AT :TXT-LEN END-EXEC.

           EXEC SQL SELECT NAME INTO :NAME1 FROM LICENSE_TABLE 
               WHERE SSS = :SSS END-EXEC.
           DISPLAY " ".
           DISPLAY "NAME:  ", NAME1-ARR, "SSS:  ", SSS.
           DISPLAY " ".
           PERFORM Z200-PRINTCRIME.       
           DISPLAY " ".          

       C320-EXIT.
          EXIT.
 
       C300-ADD-CRIME SECTION.
      *******************************************************************
      * ADD-CRIME
      *    Obtains a sss and crime from the user and appends
      *    the crime to the list of crimes of the corresponding sss.
      *******************************************************************
       C300-DDCRM.

           EXEC SQL 
              WHENEVER SQLERROR DO PERFORM Z900-SQLERROR 
	   END-EXEC.

           PERFORM Z100-GET-SSS.
           IF (SSSEXISTS = 1)
             EXEC SQL ALLOCATE :LICENSE-TXT END-EXEC
             PERFORM C310-GETNEWCRIME       
             EXEC SQL SELECT TXT_SUMMARY INTO :LICENSE-TXT
                  FROM LICENSE_TABLE WHERE SSS = :SSS 
                  FOR UPDATE END-EXEC
             PERFORM C320-APPENDTOCLOB
             EXEC SQL FREE :LICENSE-TXT END-EXEC
           ELSE
              DISPLAY "SSS Number Not Found".
       C300-EXIT.
           EXIT.

       C400-NEW-RECORD SECTION.
      *******************************************************************
      * C400-NEW-RECORD
      *    Obtains the sss and name of a new record and inserts them
      *    along with an empty_clob() for the clob in the table.
      *******************************************************************
       C400-NWRCRD.

           PERFORM Z100-GET-SSS.
           IF (SSSEXISTS = 1)
             DISPLAY "Record with that sss number already exists"
           ELSE
             DISPLAY "Name? " WITH NO ADVANCING
             ACCEPT NEWNAME
             DISPLAY " ".
             EXEC SQL ALLOCATE :LICENSE-TXT END-EXEC
             EXEC SQL INSERT INTO LICENSE_TABLE
                  VALUES (:SSS, :NEWNAME, EMPTY_CLOB()) END-EXEC
             EXEC SQL SELECT TXT_SUMMARY INTO :LICENSE-TXT
                  FROM LICENSE_TABLE WHERE SSS = :SSS END-EXEC
             DISPLAY "==================================================
      -         "========================"
             DISPLAY "NAME: ", NEWNAME,"SSS: ", SSS
             PERFORM Z200-PRINTCRIME
             DISPLAY "==================================================
      -         "========================"
             EXEC SQL FREE :LICENSE-TXT END-EXEC.
       C400-EXIT.
          EXIT.
       D000-LOGOFF SECTION.
      *******************************************************************
      *  D000-LOGOFF
      *    Commit the work done to the database and log off
      *******************************************************************
       D000-LGFF.
           EXEC SQL COMMIT WORK RELEASE END-EXEC.
           DISPLAY " ".
           DISPLAY "HAVE A GOOD DAY!".
           DISPLAY " ".
       D000-EXIT.
           STOP RUN.
       Z100-GET-SSS SECTION.
      *******************************************************************
      *  Z100-GET-SSS
      *    Fills the global variable SSS with the client-supplied sss.
      *    Sets the global variable SSSEXISTS to 0 if the sss does not 
      *    correspond to any entry in the database, else sets it to 1.
      *******************************************************************
       Z100-GTSSS.
           DISPLAY "Social Security Number? " WITH NO ADVANCING.
           ACCEPT SSS.
           DISPLAY " ".
          
           EXEC SQL SELECT COUNT(*) INTO :SSSCOUNT FROM LICENSE_TABLE
               WHERE SSS = :SSS END-EXEC.
           
           IF (SSSCOUNT = 0)
              MOVE 0 TO SSSEXISTS
           ELSE 
              MOVE 1 TO SSSEXISTS.
       Z100-EXIT.
          EXIT.
       Z200-PRINTCRIME SECTION.
      *******************************************************************
      *  Z200-PRINTCRIME
      *    Obtains the length of the global clob LICENSE-TXT and
      *    uses that in the LOB READ statement to read the clob
      *    into a character buffer to display the contents of the clob.
      *    The caller to this function must allocate, select and later
      *    free the global clob LICENSE-TXT.
      *******************************************************************
       Z200-PRNTCRM.
           DISPLAY "=====================".
           DISPLAY " CRIME SHEET SUMMARY ".
           DISPLAY "=====================".

           MOVE SPACE TO THE-STRING-ARR.
           EXEC SQL LOB DESCRIBE :LICENSE-TXT GET LENGTH
               INTO :TXT-LENGTH END-EXEC.

           IF (TXT-LENGTH = 0)
              DISPLAY "Record is clean"
            ELSE
              EXEC SQL LOB READ :TXT-LENGTH FROM :LICENSE-TXT
                 INTO :THE-STRING END-EXEC
              DISPLAY THE-STRING-ARR.

       Z200-EXIT.
           EXIT.
       Z300-ACCEPT-CHOICE SECTION.
      *******************************************************************
      *   Z300-ACCEPT-CHOICE
      *      Accept a choice between 1 and 5
      *******************************************************************
       Z300-CCPT.
           DISPLAY "Your Selection (1-5)? " WITH NO ADVANCING.
           ACCEPT CHOICE.
           DISPLAY " ".
           IF CHOICE &gt;5 OR CHOICE &lt; 1 THEN
              DISPLAY "Invalid Selection"
              DISPLAY "Please Choose from the indicated list".
       Z300-EXIT.
          EXIT.
       
       Z900-SQLERROR SECTION.
      *******************************************************************
      * Z900-SQLERROR
      *    Called whenever a SQLERROR occurs.
      *    Display the Error, Roll Back any work done and Log Off
      *******************************************************************
       Z900-SQLRRR.
           EXEC SQL WHENEVER SQLERROR CONTINUE END-EXEC.
           DISPLAY " ".
           DISPLAY "ORACLE ERROR DETECTED:".
           DISPLAY " ".
           DISPLAY SQLERRMC.
           EXEC SQL ROLLBACK WORK RELEASE END-EXEC.
       Z900-EXIT.
           STOP RUN.
</pre></div>
            </div>
         </div>
      </article>
   </body>
</html>