<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Complete the following procedure to deploy HACMP and MDNDHP for Oracle Clusterware.">
      <meta name="description" content="Complete the following procedure to deploy HACMP and MDNDHP for Oracle Clusterware.">
      <title>Deploying HACMP and MDNDHB for Oracle Clusterware</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Grid Infrastructure Installation and Upgrade Guide">
      <meta property="og:description" content="Complete the following procedure to deploy HACMP and MDNDHP for Oracle Clusterware.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Grid Infrastructure Installation and Upgrade Guide for IBM AIX on POWER Systems (64-Bit)">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="grid-infrastructure-installation-and-upgrade-guide-ibm-aix-power-systems-64-bit.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-11-16T20:03:49-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2013, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E84123-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="about-using-hacmp-with-oracle-clusterware.html" title="Previous" type="text/html">
      <link rel="next" href="upgrading-an-existing-hacmp-oracle-clusterware-installation.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Grid Infrastructure Installation and Upgrade Guide for IBM AIX on POWER Systems (64-Bit)">
    <meta name="dcterms.isVersionOf" content="CWAIX">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="about-using-hacmp-with-oracle-clusterware.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="upgrading-an-existing-hacmp-oracle-clusterware-installation.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Grid Infrastructure Installation and Upgrade Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-storage-for-oracle-grid-infrastructure-for-a-cluster.html" property="item" typeof="WebPage"><span property="name">Configuring Storage for Oracle Grid Infrastructure</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-multi-node-disk-heartbeat.html" property="item" typeof="WebPage"><span property="name">Configuring HACMP Multinode Disk Heartbeat (MNDHB)</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Deploying HACMP and MDNDHB for Oracle Clusterware</li>
            </ol>
            <a id="GUID-6969D251-2290-4E2D-A44E-BE50834D1477" name="GUID-6969D251-2290-4E2D-A44E-BE50834D1477"></a>
            
            <h2 id="CWAIX-GUID-6969D251-2290-4E2D-A44E-BE50834D1477" class="sect2">Deploying HACMP and MDNDHB for Oracle Clusterware</h2>
         </header>
         <div class="ind">
            <div>
               <p>Complete the following procedure to deploy HACMP and MDNDHP for Oracle Clusterware.</p>
               <div class="p">Ensure that your versions of HACMP and AIX meet the system requirements as listed in this guide.</div>
               <!-- class="section" -->
               <ol>
                  <li class="stepexpand"><span>Start HACMP.</span></li>
                  <li class="stepexpand"><span>Enter the following command to ensure that the HACMP clcomdES daemon is running:</span><div><pre class="pre codeblock"><code># lssrc -s clcomdES</code></pre><p>If the daemon is not running, then start it using the following command:</p><pre class="pre codeblock"><code># startsrc &#x2013;s clcomdES</code></pre></div>
                  </li>
                  <li class="stepexpand"><span>Create HACMP cluster and add the Oracle Clusterware nodes. For example:</span><div><pre class="pre codeblock"><code># smitty cm_add_change_show_an_hacmp_cluster.dialog
* Cluster Name [mycluster] </code></pre></div>
                  </li>
                  <li class="stepexpand"><span>Create an HACMP cluster node for each Oracle Clusterware node. For example:</span><div><pre class="pre codeblock"><code># smitty cm_add_a_node_to_the_hacmp_cluster_dialog 
* Node Name [mycluster_node1]
Communication Path to Node [] 
</code></pre></div>
                  </li>
                  <li class="stepexpand"><span>Create HACMP Ethernet heartbeat networks. The HACMP configuration requires network definitions. Select <code class="codeph">NO</code> for the IP address takeover for these networks, since they are used by Oracle Clusterware.</span><div>
                        <p>Create at least two network definitions: one for the Oracle public interface and a second one for the Oracle private (cluster interconnect) network. Additional Ethernet heartbeat networks can be added if desired. For example:</p><pre class="pre codeblock"><code># smitty cm_add_a_network_to_the_hacmp_cluster_select 
- select ether network 
* Network Name [my_network_name] 
* Network Type ether 
* Netmask [my.network.netmask.here] 
* Enable IP Address Takeover via IP Aliases [No] 
IP Address Offset for Heart beating over IP Aliases [] 
</code></pre></div>
                  </li>
                  <li class="stepexpand"><span>For each of the networks added in the previous step, define all of the IP names for each Oracle Clusterware node associated with that network, including the public, private and VIP names for each Oracle Clusterware node. For example:</span><div><pre class="pre codeblock"><code># smitty cm_add_communication_interfaces_devices.select 
- select: Add Pre-defined Communication Interfaces and Devices / Communication Interfaces / desired network 
* IP Label/Address [node_ip_address] 
* Network Type ether 
* Network Name some_network_name 
* Node Name [my_node_name] 
Network Interface [] </code></pre></div>
                  </li>
                  <li class="stepexpand"><span>Create an HACMP resource group for the enhanced concurrent volume group resource with the following options:</span><div><pre class="pre codeblock"><code># smitty config_resource_group.dialog.custom 
* Resource Group Name [my_resource_group_name] 
* Participating Nodes (Default Node Priority) [mynode1,mynode2,mynode3] 
Startup Policy Online On All Available Nodes 
Fallover Policy Bring Offline (On Error Node Only) 
Fallback Policy Never Fallback 
</code></pre></div>
                  </li>
                  <li class="stepexpand"><span>Create an AIX enhanced concurrent volume group (Big VG, or Scalable VG) using either the command <code class="codeph">smitty mkvg</code>, or using command lines. The VG must contain at least one hard disk for each voting disk. You must configure at least three voting disks.</span><div>
                        <p>In the following example, where you see default, accept the default response:</p><pre class="pre codeblock"><code># smitty _mksvg 
VOLUME GROUP name [my_vg_name] PP SIZE in MB 
* PHYSICAL VOLUME names [mydisk1,mydisk2,mydisk3] 
Force the creation of a volume group? no 
Activate volume group AUTOMATICALLY no at system restart? 
Volume Group MAJOR NUMBER [] 
Create VG Concurrent Capable? enhanced concurrent 
Max PPs per VG in kilobytes default
Max Logical Volumes default
</code></pre></div>
                  </li>
                  <li class="stepexpand"><span>Under "Change/Show Resources for a Resource Group (standard)", add the concurrent volume group to the resource group added in the preceding steps.</span><div>
                        <p>For example:</p><pre class="pre codeblock"><code># smitty cm_change_show_resources_std_resource_group_menu_dmn.select 
- select_resource_group_from_step_6
Resource Group Name shared_storage 
Participating Nodes (Default Node Priority) mynode1,mynode2,mynode3
Startup Policy Online On All Available Nodes 
Fallover Policy Bring Offline (On Error Node Only) 
Fallback Policy Never Fallback 
Concurrent Volume Groups [enter_VG_from_step_7]
Use forced varyon of volume groups, if necessary false 
Application Servers [] 
</code></pre></div>
                  </li>
                  <li class="stepexpand"><span>Using the following command, ensure that one MNDHB network is defined for each Oracle Clusterware voting disk. Each MNDHB and voting disk pair must be collocated on a single hard disk, separate from the other pairs. The MNDHB network and Voting Disks exist on shared logical volumes in an enhanced concurrent logical volume managed by HACMP as an enhanced concurrent resource. For each of the hard disks in the VG created in step 8 on which you want to place a voting disk logical volume (LV), create a MNDHB LV.</span><div><pre class="pre codeblock"><code># smitty cl_add_mndhb_lv 
- select_resource_group_defined_in_step_6
* Physical Volume name enter F4, then select a hard disk
Logical Volume Name [] 
Logical Volume Label [] 
Volume Group name ccvg 
Resource Group Name shared_storage 
Network Name [n]</code></pre></div>
                     <div>When you define the LVs for the Oracle Clusterware voting disks, they should be defined on the same disks: one for each disk, as used in this step for the MNDHB LVs.</div>
                  </li>
                  <li class="stepexpand"><span>Configure MNDHB so that the node is halted if access is lost to a quorum of the MNDHB networks in the enhanced concurrent volume group. For example:</span><div><pre class="pre codeblock"><code># smitty cl_set_mndhb_response 
- select_the_VG_created_in_step_7 
On loss of access Halt the node 
Optional notification method [] 
Volume Group ccvg 
</code></pre></div>
                  </li>
                  <li class="stepexpand"><span>Verify and Synchronize HACMP configuration. For example:</span><div><pre class="pre codeblock"><code># smitty cm_initialization_and_standard_config_menu_dmn  - 
select Verify and Synchronize HACMP Configuration</code></pre></div>
                     <div>Enter <span class="uicontrol bold">Yes</span> if prompted: <code class="codeph">"Would you like to import shared VG: ccvg, in resource group my_resource_group onto node: mynode to node: racha702 [Yes / No]:"</code></div>
                  </li>
                  <li class="stepexpand"><span>Add the HACMP cluster node IP names to the file <code class="codeph">/usr/es/sbin/cluster/etc/rhosts</code>.</span></li>
               </ol>
            </div>
            <div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="configuring-multi-node-disk-heartbeat.html#GUID-1566D410-C02F-43D8-B67B-91179E04C06C" title="Review these topics to configure Multi-node Disk Heartbeat (MNDHB) for Oracle Clusterware.">Configuring HACMP Multinode Disk Heartbeat (MNDHB)</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>