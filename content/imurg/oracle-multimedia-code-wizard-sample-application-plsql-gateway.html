<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The Oracle Multimedia Code Wizard sample application for the PL/SQL Gateway creates PL/SQL procedures for the PL/SQL Gateway to upload and retrieve multimedia data stored in a database using Oracle Multimedia object types.">
      <meta name="description" content="The Oracle Multimedia Code Wizard sample application for the PL/SQL Gateway creates PL/SQL procedures for the PL/SQL Gateway to upload and retrieve multimedia data stored in a database using Oracle Multimedia object types.">
      <title>Oracle Multimedia Code Wizard Sample Application for the PL/SQL Gateway</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content="The Oracle Multimedia Code Wizard sample application for the PL/SQL Gateway creates PL/SQL procedures for the PL/SQL Gateway to upload and retrieve multimedia data stored in a database using Oracle Multimedia object types.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="multimedia-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-07T03:26:44-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E84257-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="oracle-multimedia-photo-album-sample-application.html" title="Previous" type="text/html">
      <link rel="next" href="working-with-metadata-in-oracle-multimedia-images.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multimedia User's Guide">
    <meta name="dcterms.isVersionOf" content="IMURG">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-multimedia-photo-album-sample-application.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="working-with-metadata-in-oracle-multimedia-images.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Oracle Multimedia Code Wizard Sample Application for the PL/SQL Gateway </li>
            </ol>
            <a id="GUID-27A7994A-7D2C-474E-B759-EAC45C65CBDD" name="GUID-27A7994A-7D2C-474E-B759-EAC45C65CBDD"></a><a id="IMURG11833"></a><a id="IMURG4500"></a>
            
            <h2 id="IMURG-GUID-27A7994A-7D2C-474E-B759-EAC45C65CBDD" class="sect2"><span class="enumeration_chapter">4 </span> Oracle Multimedia Code Wizard Sample Application for the PL/SQL Gateway 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The Oracle Multimedia Code Wizard sample application for the PL/SQL Gateway creates PL/SQL procedures for the PL/SQL Gateway to upload and retrieve multimedia data stored in a database using Oracle Multimedia object types.</p>
               <p>This application assumes the following:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>You are familiar with developing PL/SQL applications using the PL/SQL Gateway.</p>
                  </li>
                  <li>
                     <p>You have installed and configured the Oracle Multimedia Code Wizard sample application.</p>
                  </li>
               </ul>
               <p>You can install the Oracle Multimedia Code Wizard sample application from the Oracle Database Examples media, which is available for download from the Oracle Technology Network (OTN). After installing the Oracle Database Examples media, the sample application files and <code class="codeph">README.txt</code> file are located at:
               </p>
               <p><span class="italic"><code class="codeph">&lt;ORACLE_HOME&gt;</code></span><code class="codeph">/ord/http/demo/plsgwycw</code> (on Linux and UNIX)
               </p>
               <p><span class="italic"><code class="codeph">&lt;ORACLE_HOME&gt;</code></span><code class="codeph">\ord\http\demo\plsgwycw</code> (on Windows)
               </p>
               <p>This chapter describes how to run the Code Wizard sample application. See the <code class="codeph">README.txt</code> file for additional requirements and instructions on installing and configuring this sample application.
               </p>
               <p>This chapter includes these sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-13DAC7EC-4402-49CB-95FA-A0E7557748C8" title="This topic describes how to run the Code Wizard application.">Running the Code Wizard Sample Application</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-DC70FD30-0242-4455-8BB8-1F43F677A006" title="You can use the Code Wizard sample application to create PL/SQL stored procedures for the PL/SQL Gateway to upload and retrieve media data (images, audio, video, and general media) stored in a database.">Description of the Code Wizard Sample Application</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-40568052-61CE-429F-B5AD-3AFD9EF47722" title="This sample session uses the SCOTT schema to demonstrate the creation of image media upload and retrieval procedures. To use a different schema, substitute a different schema name and password. Or, if you have changed the password for the SCOTT schema, use your new password.">Sample Session: Using Images</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-AEF16B1A-06A3-4D48-BE09-9C33ACAE19DA" title="The Code Wizard supports the features of Oracle Multimedia, with a few known restrictions.">Known Restrictions of the Oracle Multimedia Code Wizard</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-27A7994A-7D2C-474E-B759-EAC45C65CBDD__GUID-A7C018C7-958C-4D2C-8D5A-50EDCFB0AA48">
                  <p class="notep1">See Also:</p>
                  <p><a href="oracle-multimedia-photo-album-sample-application.html#GUID-4F64BE39-7F90-4B17-838F-3BF9163D729E" title="The Oracle Multimedia PL/SQL Web Toolkit Photo Album sample application is a media upload and retrieval Web application using Oracle Multimedia object types. This application uses the PL/SQL Gateway and PL/SQL Web Toolkit.">Oracle Multimedia PL/SQL Photo Album Sample Application</a> for a Photo Album sample Web application that uses PL/SQL scripts to upload and retrieve media using Oracle Multimedia object types
                  </p>
               </div>
            </div><a id="IMURG11843"></a><div class="props_rev_3"><a id="GUID-13DAC7EC-4402-49CB-95FA-A0E7557748C8" name="GUID-13DAC7EC-4402-49CB-95FA-A0E7557748C8"></a><h3 id="IMURG-GUID-13DAC7EC-4402-49CB-95FA-A0E7557748C8" class="sect3"><span class="enumeration_section">4.1 </span>Running the Code Wizard Sample Application
               </h3>
               <div>
                  <p>This topic describes how to run the Code Wizard application.</p>
                  <div class="section">
                     <p>To use the Code Wizard sample application to create and test media access procedures, you must perform these steps:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>Create a new database access descriptor (DAD) or choose an existing DAD for use with the Code Wizard.</span></li>
                     <li><span>Authorize use of the DAD using the Code Wizard's administration function.</span></li>
                     <li><span>Create and test media upload and retrieval procedures.</span></li>
                  </ol>
               </div>
            </div><a id="IMURG4510"></a><div class="props_rev_3"><a id="GUID-DC70FD30-0242-4455-8BB8-1F43F677A006" name="GUID-DC70FD30-0242-4455-8BB8-1F43F677A006"></a><h3 id="IMURG-GUID-DC70FD30-0242-4455-8BB8-1F43F677A006" class="sect3"><span class="enumeration_section">4.2 </span>Description of the Code Wizard Sample Application
               </h3>
               <div>
                  <p>You can use the Code Wizard sample application to create PL/SQL stored procedures for the PL/SQL Gateway to upload and retrieve media data (images, audio, video, and general media) stored in a database.</p>
                  <p>The Oracle Multimedia Code Wizard sample application uses these Oracle Multimedia object types and their respective methods:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>ORDImage</p>
                     </li>
                     <li>
                        <p>ORDAudio</p>
                     </li>
                     <li>
                        <p>ORDVideo</p>
                     </li>
                     <li>
                        <p>ORDDoc</p>
                     </li>
                  </ul>
                  <p>The Code Wizard guides you through a series of self-explanatory steps to create either a media retrieval procedure or a media upload procedure. You can create and compile standalone media access procedures. Or, you can create the source of media access procedures for inclusion in a PL/SQL package. Finally, after creating media access procedures, you can customize them to meet your specific application requirements.</p>
                  <p>These processes are similar to how the Oracle Multimedia PL/SQL Web Toolkit Photo Album application uses the <code class="codeph">insert_new_photo</code> procedure as the image upload procedure, and the <code class="codeph">deliver_media</code> procedure as the image retrieval procedure.
                  </p>
                  <p>The following subsections describe how to use the Code Wizard application:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3C2DB3FC-EFA3-46EA-81B0-9615520DF144" title="To create media upload or retrieval procedures, you must select one or more database access descriptors (DADs) for use with the Code Wizard. To prevent the unauthorized browsing of schema tables and to prevent the unauthorized creation of media access procedures, you must authorize each DAD using the Code Wizard administration function.">Creating a New DAD or Choosing an Existing DAD</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-CF988B88-1D61-4A1B-9B14-EC360924A4FC" title="To use the Code Wizard, you must first authorize a database access descriptor (DAD).">Authorizing a DAD</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-F5A9EC99-4E99-4D1C-A7CA-DDD6BB7D52F7" title="After you specify and authorize a database access descriptor (DAD), you are ready to run this application to create media upload and retrieval procedures.">Creating and Testing Media Upload and Retrieval Procedures</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03" title="Follow this process to create a media upload procedure using the Oracle Multimedia Code Wizard for the PL/SQL Gateway.">Creating a Media Upload Procedure</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F" title="Follow this process to create a media retrieval procedure using the Oracle Multimedia Code Wizard for the PL/SQL Gateway.">Creating a Media Retrieval Procedure</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-EFF939AF-CE4C-48A2-8306-9719E7CAD2A8" title="All files uploaded using the PL/SQL Gateway are stored in a document table. Media upload procedures created by the Code Wizard automatically move uploaded media from the specified document table to the application's table. To avoid transient files from appearing temporarily in a document table used by another application component, use a document table that is not being used to store documents permanently.">Using the PL/SQL Gateway Document Table</a></p>
                     </li>
                     <li>
                        <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-C3506C2A-3193-462B-8850-8D12AF75AE0B" title="User response times are improved and network traffic is reduced if a browser can cache resources received from a Web server and subsequently use those cached resources to satisfy future requests. This section describes, at a very high level, how the browser caching mechanism works and how the Code Wizard utility package is used to support that mechanism. Within this discussion, all HTTP date and time stamps are expressed in Coordinated Universal Time (UTC).">How Time Zone Information Is Used to Support Browser Caching</a></p>
                     </li>
                  </ul>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-multimedia-photo-album-sample-application.html#GUID-0E12A997-540D-44B4-BC2B-12A978857EB9" title="This topic describes the setup process for the Oracle Multimedia PL/SQL Web Toolkit Photo Album sample application.">Overview of the PL/SQL Photo Album Sample Application</a></li>
                     </ul>
                  </div>
               </div>
               <a id="IMURG11608"></a><div class="props_rev_3"><a id="GUID-3C2DB3FC-EFA3-46EA-81B0-9615520DF144" name="GUID-3C2DB3FC-EFA3-46EA-81B0-9615520DF144"></a><h4 id="IMURG-GUID-3C2DB3FC-EFA3-46EA-81B0-9615520DF144" class="sect4"><span class="enumeration_section">4.2.1 </span>Creating a New DAD or Choosing an Existing DAD
                  </h4>
                  <div>
                     <p>To create media upload or retrieval procedures, you must select one or more database access descriptors (DADs) for use with the Code Wizard. To prevent the unauthorized browsing of schema tables and to prevent the unauthorized creation of media access procedures, you must authorize each DAD using the Code Wizard administration function.</p>
                     <div class="section">
                        <p>Depending on your database and application security requirements, you can create and authorize one or more new DADs specifically for use with the Code Wizard. Or, you can authorize the use of one or more existing DADs.</p>
                        <p>Oracle recommends that any DAD authorized for use with the Code Wizard employ some form of user authentication mechanism. The simplest approach is to create or use a DAD that uses database authentication. To use this approach, select <span class="bold">Basic Authentication Mode</span> and omit the password in the DAD specification. Alternatively, you can use a DAD that specifies an existing application-specific authentication mechanism.
                        </p>
                        <p>The following example describes how to create a DAD that enables you to create and test media upload and retrieval procedures in the <code class="codeph">SCOTT</code> schema.
                        </p>
                        <div class="infoboxnote" id="GUID-3C2DB3FC-EFA3-46EA-81B0-9615520DF144__GUID-FBF54051-C3E9-484B-B160-F72CB6693D76">
                           <p class="notep1">Note:</p>
                           <p>To test media upload procedures, you must specify the name of a document table in the DAD. When testing an upload procedure, you can choose either the DAD you used to create the procedure or the DAD you used to access the application. You can choose a document table name when you create a DAD, edit a DAD to specify the document table name at a later time, or use an existing DAD that specifies a document table name. This example shows how to specify the document table name when you create the DAD.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Set your Web browser to the Oracle HTTP Server Home page. Select <span class="bold">PL/SQL Properties</span> in the Administration page to open the mod_plsql Services page.</span></li>
                        <li><span>Scroll to the DAD Status section on the mod_plsql Services page. Then, click <span class="bold">Create</span> to open the DAD Type page.</span></li>
                        <li><span>Select the DAD type to be <span class="bold">General</span>. Then, click <span class="bold">Next</span> to open the Database Connection page.</span></li>
                        <li><span>Enter <code class="codeph">/scottcw</code> in the DAD Name field. Enter <code class="codeph">SCOTT</code> for the database account, and leave the password blank. Enter the connection information in the Database Connectivity Information section. Enter <code class="codeph">ORDCWPKG.MENU</code> in the Default page field, and leave the other fields blank. Then, click <span class="bold">Next</span> to open the Document, Alias, and Session page.</span></li>
                        <li><span>Enter <code class="codeph">MEDIA_UPLOAD_TABLE</code> for the Document Table on the Document, Alias, and Session page. Then, click <span class="bold">Apply.</span></span></li>
                        <li><span>Restart Oracle HTTP Server for the changes to take effect.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-3C2DB3FC-EFA3-46EA-81B0-9615520DF144__GUID-A0D7C38C-0835-4E1D-B244-841574468084">
                           <p class="notep1">See Also:</p>
                           <p><a href="../adfns/web-applications.html#ADFNS-GUID-B7C7170E-69AC-42D2-9597-451B1053209E" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a> for more information about configuring DADs
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="IMURG11844"></a><a id="IMURG11845"></a><a id="IMURG11846"></a><a id="IMURG11609"></a><div class="props_rev_3"><a id="GUID-CF988B88-1D61-4A1B-9B14-EC360924A4FC" name="GUID-CF988B88-1D61-4A1B-9B14-EC360924A4FC"></a><h4 id="IMURG-GUID-CF988B88-1D61-4A1B-9B14-EC360924A4FC" class="sect4"><span class="enumeration_section">4.2.2 </span>Authorizing a DAD
                  </h4>
                  <div>
                     <p>To use the Code Wizard, you must first authorize a database access descriptor (DAD).</p>
                     <div class="section">
                        <p>To authorize a DAD for use with the Code Wizard, perform these steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Enter the Code Wizard's administration URL into the location bar for your browser. For example:</span><div><pre class="oac_no_warn" dir="ltr">http://<span class="italic"><code class="codeph">&lt;host-name&gt;</code></span>:<span class="italic"><code class="codeph">&lt;port-number&gt;</code></span>/ordcwadmin
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Enter the user name and password when prompted by the browser.</span></li>
                        <li class="stepexpand"><span>Select <span class="bold">DAD authorization</span> from the <span class="bold">Main menu</span>, as shown in the following figure. Then, click <span class="bold">Next</span>.</span><div>
                              <div class="figure" id="GUID-CF988B88-1D61-4A1B-9B14-EC360924A4FC__CHDCFBGE">
                                 <p class="titleinfigure">Figure 4-1 Main Menu for the Code Wizard </p><img src="img/cw1.gif" width="422" alt="Description of Figure 4-1 follows" title="Description of Figure 4-1 follows" longdesc="img_text/cw1.html"><br><a href="img_text/cw1.html">Description of "Figure 4-1 Main Menu for the Code Wizard "</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Enter the name of the DAD you want to authorize along with the user name, as shown in the following figure. Then, click <span class="bold">Apply</span>.</span><div>
                              <div class="figure" id="GUID-CF988B88-1D61-4A1B-9B14-EC360924A4FC__CHDEGFGG">
                                 <p class="titleinfigure">Figure 4-2 Authorize the SCOTTCW DAD</p><img src="img/cw2.gif" width="429" alt="Description of Figure 4-2 follows" title="Description of Figure 4-2 follows" longdesc="img_text/cw2.html"><br><a href="img_text/cw2.html">Description of "Figure 4-2 Authorize the SCOTTCW DAD"</a></div>
                              <!-- class="figure" -->
                              <div class="infoboxnote" id="GUID-CF988B88-1D61-4A1B-9B14-EC360924A4FC__GUID-08215DD9-17C4-4A0A-8DCF-0453C7DF6686">
                                 <p class="notep1">Note:</p>
                                 <p>Duplicate DADs are not permitted, and each authorized DAD must indicate which database schema the user is authorized to access with the Code Wizard, using the DAD. Use this same page to delete the authorization for any existing DADs that no longer require the Code Wizard.</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Review the updated list of DADs that are authorized to use the Oracle Multimedia Code Wizard, as shown in the following figure. Then, click <span class="bold">Done</span>.</span><div>
                              <div class="figure" id="GUID-CF988B88-1D61-4A1B-9B14-EC360924A4FC__CHDGCBFA">
                                 <p class="titleinfigure">Figure 4-3 List of Authorized DADs</p><img src="img/cw3.gif" width="430" alt="Description of Figure 4-3 follows" title="Description of Figure 4-3 follows" longdesc="img_text/cw3.html"><br><a href="img_text/cw3.html">Description of "Figure 4-3 List of Authorized DADs"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Select <span class="bold">Logout</span> from the <span class="bold">Main menu</span> to log out (clear HTTP authentication information), then click <span class="bold">Next</span>. The log out operation redirects the request to the PL/SQL Gateway built-in <code class="codeph">logmeoff</code> function.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-CF988B88-1D61-4A1B-9B14-EC360924A4FC__GUID-9E503ED0-18D6-4DBB-AD1B-FB2462CB9785">
                           <p class="notep1">See Also:</p>
                           <p><a href="../adfns/web-applications.html#ADFNS-GUID-6FABD340-FE72-464E-A3D9-947FEB7164E4" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a> for more information about configuring DADs
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="IMURG11847"></a><a id="IMURG11613"></a><div class="props_rev_3"><a id="GUID-F5A9EC99-4E99-4D1C-A7CA-DDD6BB7D52F7" name="GUID-F5A9EC99-4E99-4D1C-A7CA-DDD6BB7D52F7"></a><h4 id="IMURG-GUID-F5A9EC99-4E99-4D1C-A7CA-DDD6BB7D52F7" class="sect4"><span class="enumeration_section">4.2.3 </span>Creating and Testing Media Upload and Retrieval Procedures
                  </h4>
                  <div>
                     <p>After you specify and authorize a database access descriptor (DAD), you are ready to run this application to create media upload and retrieval procedures.</p>
                     <div class="section">
                        <p>To start the Code Wizard after completing all the setup tasks, follow these steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Enter the appropriate URL into the address field of your Web browser.</span><div>
                              <p>For example:</p>
                              <p><code class="codeph">http://</code><span class="italic"><code class="codeph">&lt;hostname&gt;</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">&lt;port-number&gt;</code></span><code class="codeph">/scottcw</code></p>
                              <p>or</p>
                              <p><code class="codeph">http://</code><span class="italic"><code class="codeph">&lt;hostname&gt;</code></span><code class="codeph">:</code><span class="italic"><code class="codeph">&lt;port-number&gt;</code></span><code class="codeph">/mediadad/ordcwpkg.menu</code></p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Enter the user name and password when prompted by the browser. The <span class="bold">Main menu</span> page of the Oracle Multimedia Code Wizard for the PL/SQL Gateway is displayed, as shown in the following figure.</span><div>
                              <div class="figure" id="GUID-F5A9EC99-4E99-4D1C-A7CA-DDD6BB7D52F7__CHDCFIAF">
                                 <p class="titleinfigure">Figure 4-4 Use the SCOTTCW DAD</p><img src="img/cw4.gif" width="426" alt="Description of Figure 4-4 follows" title="Description of Figure 4-4 follows" longdesc="img_text/cw4.html"><br><a href="img_text/cw4.html">Description of "Figure 4-4 Use the SCOTTCW DAD"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>If the DAD is configured specifically for use with the Code Wizard, enter the DAD name. To use another DAD, enter the DAD name along with the Code Wizard package name and <span class="bold">Main menu</span> procedure name (<code class="codeph">ORDCWPKG.MENU</code>) after the DAD name.</span></li>
                        <li class="stepexpand"><span>After logging in, you can log out (clear HTTP authentication information) at any time by selecting <span class="bold">Logout</span> from the <span class="bold">Main menu</span>, then clicking <span class="bold">Next</span>. The logout operation redirects the request to the PL/SQL Gateway built-in <code class="codeph">logmeoff</code> function.</span></li>
                     </ol>
                     <div class="section">
                        <p>To create a media upload procedure or a media retrieval procedure, select the appropriate option from the <span class="bold">Main menu</span> page, then click <span class="bold">Next</span>. The Code Wizard then guides you through a series of self-explanatory steps to create the procedure.
                        </p>
                        <p>If you create a standalone media upload or retrieval procedure, you will have the opportunity to view the contents of the procedure and test it. </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-40568052-61CE-429F-B5AD-3AFD9EF47722" title="This sample session uses the SCOTT schema to demonstrate the creation of image media upload and retrieval procedures. To use a different schema, substitute a different schema name and password. Or, if you have changed the password for the SCOTT schema, use your new password.">Sample Session: Using Images</a></li>
                           <li><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03" title="Follow this process to create a media upload procedure using the Oracle Multimedia Code Wizard for the PL/SQL Gateway.">Creating a Media Upload Procedure</a></li>
                           <li><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F" title="Follow this process to create a media retrieval procedure using the Oracle Multimedia Code Wizard for the PL/SQL Gateway.">Creating a Media Retrieval Procedure</a></li>
                        </ul>
                     </div>
                     <div class="infoboxnotealso" id="GUID-F5A9EC99-4E99-4D1C-A7CA-DDD6BB7D52F7__GUID-9A5D9C1A-E49D-47DF-AEE0-799BDD185036">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adfns/web-applications.html#ADFNS-GUID-6FABD340-FE72-464E-A3D9-947FEB7164E4" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a> for more information about using the embedded PL/SQL Gateway
                        </p>
                     </div>
                  </div>
                  
               </div><a id="IMURG11848"></a><a id="IMURG11849"></a><a id="IMURG11850"></a><a id="IMURG11851"></a><a id="IMURG11852"></a><a id="IMURG11853"></a><a id="IMURG11854"></a><a id="IMURG11855"></a><a id="IMURG11615"></a><div class="props_rev_3"><a id="GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03" name="GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03"></a><h4 id="IMURG-GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03" class="sect4"><span class="enumeration_section">4.2.4 </span>Creating a Media Upload Procedure
                  </h4>
                  <div>
                     <p>Follow this process to create a media upload procedure using the Oracle Multimedia Code Wizard for the PL/SQL Gateway.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Select <span class="bold">Create media upload procedure</span> from the <span class="bold">Main menu</span> page, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDGEHFD">Figure 4-5</a>. Then, click <span class="bold">Next</span>.</span><div>
                              <div class="figure" id="GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDGEHFD">
                                 <p class="titleinfigure">Figure 4-5 Create a Media Upload Procedure</p><img src="img/cw5.gif" width="287" alt="Description of Figure 4-5 follows" title="Description of Figure 4-5 follows" longdesc="img_text/cw5.html"><br><a href="img_text/cw5.html">Description of "Figure 4-5 Create a Media Upload Procedure"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Select <span class="bold">PHOTOS</span> and <span class="bold">Standalone procedure</span> from <span class="bold">Step 1: Select database table and procedure type</span>, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDIHBBC">Figure 4-6</a>. Then, click <span class="bold">Next</span>.</span><div>
                              <div class="figure" id="GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDIHBBC">
                                 <p class="titleinfigure">Figure 4-6 Media Upload Step 1: Select Database Table and Procedure Type</p><img src="img/cw6.gif" width="430" alt="Description of Figure 4-6 follows" title="Description of Figure 4-6 follows" longdesc="img_text/cw6.html"><br><a href="img_text/cw6.html">Description of "Figure 4-6 Media Upload Step 1: Select Database Table and Procedure Type"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span> Select <span class="bold">Use existing document table</span> from <span class="bold">Step 2: Select PL/SQL Gateway document upload table</span>, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDBIBJJ">Figure 4-7</a>, because the <code class="codeph">SCOTTCW</code> DAD is configured to use this document table. Then, click <span class="bold">Next</span>.</span><div>
                              <div class="figure" id="GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDBIBJJ">
                                 <p class="titleinfigure">Figure 4-7 Media Upload Step 2: Select PL/SQL Gateway Document Upload Table</p><img src="img/cw7.gif" width="425" alt="Description of Figure 4-7 follows" title="Description of Figure 4-7 follows" longdesc="img_text/cw7.html"><br><a href="img_text/cw7.html">Description of "Figure 4-7 Media Upload Step 2: Select PL/SQL Gateway Document Upload Table"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Check <span class="bold">PHOTO (ORDIMAGE), </span>select <span class="bold">ID (Primary key)</span>, and select <span class="bold">Conditional insert or update</span> from <span class="bold">Step 3: Select data access and media column(s)</span>, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDJHIGH">Figure 4-8</a>. Then, click <span class="bold">Next</span>.</span><div>
                              <div class="figure" id="GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDJHIGH">
                                 <p class="titleinfigure">Figure 4-8 Media Upload Step 3: Select Data Access and Media Column(s)</p><img src="img/cw8.gif" width="422" alt="Description of Figure 4-8 follows" title="Description of Figure 4-8 follows" longdesc="img_text/cw8.html"><br><a href="img_text/cw8.html">Description of "Figure 4-8 Media Upload Step 3: Select Data Access and Media Column(s)"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Check <span class="bold">DESCRIPTION</span>, accept the default procedure name, <span class="bold">UPLOAD_PHOTOS_PHOTO</span>, and select <span class="bold">Create procedure in the database</span> from <span class="bold">Step 4: Select additional columns and procedure name</span>, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDCCCDJ">Figure 4-9</a>. Then, click <span class="bold">Next</span>.</span><div>
                              <div class="figure" id="GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDCCCDJ">
                                 <p class="titleinfigure">Figure 4-9 Media Upload Step 4: Select Additional Columns and Procedure Name</p><img src="img/cw9.gif" width="425" alt="Description of Figure 4-9 follows" title="Description of Figure 4-9 follows" longdesc="img_text/cw9.html"><br><a href="img_text/cw9.html">Description of "Figure 4-9 Media Upload Step 4: Select Additional Columns and Procedure Name"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Review the options you selected from <span class="bold">Step 5: Review selected options</span>, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDDFHDF">Figure 4-10</a>. If the options selected are correct, click <span class="bold">Finish</span>.</span><div>
                              <div class="figure" id="GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDDFHDF">
                                 <p class="titleinfigure">Figure 4-10 Media Upload Step 5: Review Selected Options</p><img src="img/cw10.gif" width="426" alt="Description of Figure 4-10 follows" title="Description of Figure 4-10 follows" longdesc="img_text/cw10.html"><br><a href="img_text/cw10.html">Description of "Figure 4-10 Media Upload Step 5: Review Selected Options"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>The message <code class="codeph">Procedure created successfully: UPLOAD_PHOTOS_PHOTO</code> is displayed on the <span class="bold">Compile procedure and review generated source</span> page, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDFCACI">Figure 4-11</a>.</span><div>
                              <div class="figure" id="GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDFCACI">
                                 <p class="titleinfigure">Figure 4-11 Compiled Upload Procedure with Success Message</p><img src="img/cw11.gif" width="423" alt="Description of Figure 4-11 follows" title="Description of Figure 4-11 follows" longdesc="img_text/cw11.html"><br><a href="img_text/cw11.html">Description of "Figure 4-11 Compiled Upload Procedure with Success Message"</a></div>
                              <!-- class="figure" -->
                              <p>To review the compiled PL/SQL source code in another window, click <span class="bold">View</span>. Assuming you have configured the <code class="codeph">SCOTTCW</code> DAD and specified <code class="codeph">MEDIA_UPLOAD_TABLE</code> as the document table, in the <span class="bold">DAD:</span> field, the DAD name <code class="codeph">scottcw</code> is displayed by default.
                              </p>
                              <p>To test the PL/SQL procedure created, click <span class="bold">Test</span>.
                              </p>
                              <p>The <span class="bold">Oracle Multimedia Code Wizard: Template Upload Form</span> is displayed in another window.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Enter the value <code class="codeph">1</code> in the <span class="bold">ID</span> field on the <span class="bold">Oracle Multimedia Code Wizard: Template Upload Form</span> window. Click <span class="bold">Browse...</span> to find and select the image you want to upload in the <span class="bold">PHOTO</span> field, and enter a brief description of the image to be uploaded in the <span class="bold">DESCRIPTION</span> field, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDFFIHG">Figure 4-12</a>. Then, click <span class="bold">Upload media</span>.</span><div>
                              <div class="figure" id="GUID-3F67F682-ADFF-435E-B29A-57E1FC118E03__CHDFFIHG">
                                 <p class="titleinfigure">Figure 4-12 Template Upload Form for the Code Wizard</p><img src="img/cw12.gif" width="291" alt="Description of Figure 4-12 follows" title="Description of Figure 4-12 follows" longdesc="img_text/cw12.html"><br><a href="img_text/cw12.html">Description of "Figure 4-12 Template Upload Form for the Code Wizard"</a></div>
                              <!-- class="figure" -->
                              <p>The image is uploaded into the table row, and this message is displayed:</p>
                              <p><code class="codeph">Media uploaded successfully.</code></p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Return to the <span class="bold">Compile procedure and review generated source</span> page. If you are finished testing, click <span class="bold">Done</span> to return to the <span class="bold">Main menu</span> page.</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-40568052-61CE-429F-B5AD-3AFD9EF47722" title="This sample session uses the SCOTT schema to demonstrate the creation of image media upload and retrieval procedures. To use a different schema, substitute a different schema name and password. Or, if you have changed the password for the SCOTT schema, use your new password.">Sample Session: Using Images</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="IMURG11856"></a><a id="IMURG11857"></a><a id="IMURG11858"></a><a id="IMURG11859"></a><a id="IMURG11860"></a><a id="IMURG11861"></a><a id="IMURG11626"></a><div class="props_rev_3"><a id="GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F" name="GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F"></a><h4 id="IMURG-GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F" class="sect4"><span class="enumeration_section">4.2.5 </span>Creating a Media Retrieval Procedure
                  </h4>
                  <div>
                     <p>Follow this process to create a media retrieval procedure using the Oracle Multimedia Code Wizard for the PL/SQL Gateway.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Select <span class="bold">Create media retrieval procedure</span> from the <span class="bold">Main menu</span> page, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDJDDGA">Figure 4-13</a>. Then, click <span class="bold">Next</span>.</span><div>
                              <div class="figure" id="GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDJDDGA">
                                 <p class="titleinfigure">Figure 4-13 Create a Media Retrieval Procedure</p><img src="img/cw13.gif" width="288" alt="Description of Figure 4-13 follows" title="Description of Figure 4-13 follows" longdesc="img_text/cw13.html"><br><a href="img_text/cw13.html">Description of "Figure 4-13 Create a Media Retrieval Procedure"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Select <span class="bold">PHOTOS</span> and <span class="bold">Standalone procedure</span> from <span class="bold">Step 1: Select database table and procedure type</span>, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDCEEEH">Figure 4-14</a>. Then, click <span class="bold">Next</span>.</span><div>
                              <div class="figure" id="GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDCEEEH">
                                 <p class="titleinfigure">Figure 4-14 Media Retrieval Step 1: Select Database Table and Procedure Type</p><img src="img/cw14.gif" width="426" alt="Description of Figure 4-14 follows" title="Description of Figure 4-14 follows" longdesc="img_text/cw14.html"><br><a href="img_text/cw14.html">Description of "Figure 4-14 Media Retrieval Step 1: Select Database Table and Procedure Type"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Select <span class="bold">PHOTO (ORDIMAGE)</span> and <span class="bold">ID (Primary key)</span> from <span class="bold">Step 2: Select media column and key column</span>, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDFBIID">Figure 4-15</a>. Then, click <span class="bold">Next</span>.</span><div>
                              <div class="figure" id="GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDFBIID">
                                 <p class="titleinfigure">Figure 4-15 Media Retrieval Step 2: Select Media Column and Key Column</p><img src="img/cw15.gif" width="429" alt="Description of Figure 4-15 follows" title="Description of Figure 4-15 follows" longdesc="img_text/cw15.html"><br><a href="img_text/cw15.html">Description of "Figure 4-15 Media Retrieval Step 2: Select Media Column and Key Column"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Accept the default procedure name, <code class="codeph">GET_PHOTOS_PHOTO</code>, the default parameter name, <code class="codeph">MEDIA_ID</code>, and <span class="bold">Create procedure in the database</span> from <span class="bold">Step 3: Select procedure name and parameter name</span>, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDHDHCE">Figure 4-16</a>. Then, click <span class="bold">Next</span>.</span><div>
                              <div class="figure" id="GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDHDHCE">
                                 <p class="titleinfigure">Figure 4-16 Media Retrieval Step 3: Select Procedure Name and Parameter Name</p><img src="img/cw16.gif" width="430" alt="Description of Figure 4-16 follows" title="Description of Figure 4-16 follows" longdesc="img_text/cw16.html"><br><a href="img_text/cw16.html">Description of "Figure 4-16 Media Retrieval Step 3: Select Procedure Name and Parameter Name"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Review the options you selected from <span class="bold">Step 4: Review Selected Options</span>, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDBGAFC">Figure 4-17</a>. If the options selected are correct, click <span class="bold">Finish</span>.</span><div>
                              <div class="figure" id="GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDBGAFC">
                                 <p class="titleinfigure">Figure 4-17 Media Retrieval Step 4: Review Selected Options</p><img src="img/cw17.gif" width="434" alt="Description of Figure 4-17 follows" title="Description of Figure 4-17 follows" longdesc="img_text/cw17.html"><br><a href="img_text/cw17.html">Description of "Figure 4-17 Media Retrieval Step 4: Review Selected Options"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>The message <code class="codeph">Procedure created successfully: GET_PHOTOS_PHOTO</code> is displayed in the <span class="bold">Compile procedure and review generated source</span> page, as shown in <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDJDCAH">Figure 4-18</a>.</span><div>
                              <div class="figure" id="GUID-D9D75780-7F12-4C5B-9C8B-BDADE647940F__CHDJDCAH">
                                 <p class="titleinfigure">Figure 4-18 Compiled Retrieval Procedure with Success Message</p><img src="img/cw18.gif" width="429" alt="Description of Figure 4-18 follows" title="Description of Figure 4-18 follows" longdesc="img_text/cw18.html"><br><a href="img_text/cw18.html">Description of "Figure 4-18 Compiled Retrieval Procedure with Success Message"</a></div>
                              <!-- class="figure" -->
                              <p>To review the compiled PL/SQL source code in another window, click <span class="bold">View</span>.
                              </p>
                              <p>To test the PL/SQL procedure created, assuming you have an image loaded in the database with an ID value of <code class="codeph">1</code>, enter the value <code class="codeph">1</code> for the Key parameter (<code class="codeph">MEDIA_ID</code>), then click <span class="bold">Test</span>.
                              </p>
                              <p>The image is retrieved from the table row and displayed in another window.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Click <span class="bold">Done</span> to return to the <span class="bold">Main menu</span> page.</span></li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-40568052-61CE-429F-B5AD-3AFD9EF47722" title="This sample session uses the SCOTT schema to demonstrate the creation of image media upload and retrieval procedures. To use a different schema, substitute a different schema name and password. Or, if you have changed the password for the SCOTT schema, use your new password.">Sample Session: Using Images</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div><a id="IMURG11634"></a><div class="props_rev_3"><a id="GUID-EFF939AF-CE4C-48A2-8306-9719E7CAD2A8" name="GUID-EFF939AF-CE4C-48A2-8306-9719E7CAD2A8"></a><h4 id="IMURG-GUID-EFF939AF-CE4C-48A2-8306-9719E7CAD2A8" class="sect4"><span class="enumeration_section">4.2.6 </span>Using the PL/SQL Gateway Document Table
                  </h4>
                  <div>
                     <p>All files uploaded using the PL/SQL Gateway are stored in a document table. Media upload procedures created by the Code Wizard automatically move uploaded media from the specified document table to the application's table. To avoid transient files from appearing temporarily in a document table used by another application component, use a document table that is not being used to store documents permanently.</p>
                     <p>Specify the selected document table in the application's database access descriptor (DAD). If the DAD specifies a different document table, create a new DAD for media upload procedures. If you choose to create a new document table, the Code Wizard creates a table with the following format:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE document-table-name
  ( name           VARCHAR2(256) UNIQUE NOT NULL,
    mime_type      VARCHAR2(128),
    doc_size       NUMBER,
    dad_charset    VARCHAR2(128),
    last_updated   DATE,
    content_type   VARCHAR2(128),
    blob_content   BLOB )
-- 
-- store BLOBs as SecureFiles LOBs
-- 
LOB(blob_content)  STORE AS SECUREFILE;</pre><div class="infoboxnotealso" id="GUID-EFF939AF-CE4C-48A2-8306-9719E7CAD2A8__GUID-086FA0F1-56D3-4D6F-8F2A-C682641C97E3">
                        <p class="notep1">See Also:</p>
                        <p><a href="../adfns/web-applications.html#ADFNS-GUID-6AE0812B-F36D-4AA7-933E-6397A4CCF841" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a> for more information about file upload and document tables
                        </p>
                     </div>
                  </div>
               </div><a id="IMURG11635"></a><div class="props_rev_3"><a id="GUID-C3506C2A-3193-462B-8850-8D12AF75AE0B" name="GUID-C3506C2A-3193-462B-8850-8D12AF75AE0B"></a><h4 id="IMURG-GUID-C3506C2A-3193-462B-8850-8D12AF75AE0B" class="sect4"><span class="enumeration_section">4.2.7 </span>How Time Zone Information Is Used to Support Browser Caching
                  </h4>
                  <div>
                     <p>User response times are improved and network traffic is reduced if a browser can cache resources received from a Web server and subsequently use those cached resources to satisfy future requests. This section describes, at a very high level, how the browser caching mechanism works and how the Code Wizard utility package is used to support that mechanism. Within this discussion, all HTTP date and time stamps are expressed in Coordinated Universal Time (UTC).</p>
                     <p>All HTTP responses include a Date header, which indicates the date and time when the response was generated. When a Web server sends a resource in response to a request from a browser, it can also include the Last-Modified HTTP response header, which indicates the date and time when the requested resource was last modified. The Last-Modified header must not be <span class="italic">later</span> than the Date header.
                     </p>
                     <p>After receiving and caching a resource, if a browser must retrieve the same resource again, it sends a request to the Web server with the If-Modified-Since request header specified as the value of the Last-Modified date, which was returned by the application server when the resource was previously retrieved and cached. When the Web server receives the request, it compares the date in the If-Modified-Since request header with the last update time of the resource. Assuming the resource still exists, if the resource has not changed since it was cached by the browser, the Web server responds with an HTTP <code class="codeph">304 Not Modified</code> status with no response body, which indicates that the browser can use the resource currently stored in its cache. Assuming again that the resource still exists, if the request does not include an If-Modified-Since header or if the resource has been updated since it was cached by the browser, the Web server responds with an HTTP <code class="codeph">200 OK</code> status and sends the resource to the browser.
                     </p>
                     <p>The ORDImage, ORDAudio, ORDVideo, and ORDDoc objects all possess an updateTime attribute stored as a DATE in the embedded ORDSource object. Although the DATE data type has no support for time zones or daylight savings time, Oracle Database does support time zones and also provides functions for converting a DATE value stored in a database to UTC.</p>
                     <p>When a response is first returned to a browser, a media retrieval procedure sets the Last-Modified HTTP response header based on the updateTime attribute. If a request for media data includes an If-Modified-Since header, the media retrieval procedure compares the value with the updateTime attribute and returns an appropriate response. If the resource in the browser's cache is still valid, an HTTP <code class="codeph">304 Not Modified</code> status is returned with no response body. If the resource has been updated since it was cached by the browser, then an HTTP <code class="codeph">200 OK</code> status is returned with the media resource as the response body. Media retrieval procedures created by the Code Wizard call the utility package to convert a DATE value stored in the database to UTC. The utility package uses the time zone information stored with Oracle Database and the date and time functions to convert database date and time stamps to UTC. To ensure that the resulting date conforms to the rule for the Last-Modified date described previously, the time zone information must be specified correctly.
                     </p>
                     <div class="infoboxnotealso" id="GUID-C3506C2A-3193-462B-8850-8D12AF75AE0B__GUID-24EE47C3-8253-40EE-B7D2-388880ABC310">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/imurg&amp;id=w3_org_protocols" target="_blank"><span class="italic">W3C HTTP- Hypertext Transfer Protocol</span></a> for more information about the HTTP specification
                              </p>
                           </li>
                           <li>
                              <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN11095" target="_blank"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about how to set a time zone for a database
                              </p>
                           </li>
                           <li>
                              <p><a href="../sqlrf/Single-Row-Functions.html#SQLRF20033" target="_blank"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about date and time functions
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="IMURG11862"></a><a id="IMURG11863"></a><a id="IMURG11864"></a><a id="IMURG11865"></a><a id="IMURG11866"></a><a id="IMURG11868"></a><a id="IMURG4520"></a><div class="props_rev_3"><a id="GUID-40568052-61CE-429F-B5AD-3AFD9EF47722" name="GUID-40568052-61CE-429F-B5AD-3AFD9EF47722"></a><h3 id="IMURG-GUID-40568052-61CE-429F-B5AD-3AFD9EF47722" class="sect3"><span class="enumeration_section">4.3 </span>Sample Session: Using Images
               </h3>
               <div>
                  <p>This sample session uses the <code class="codeph">SCOTT</code> schema to demonstrate the creation of image media upload and retrieval procedures. To use a different schema, substitute a different schema name and password. Or, if you have changed the password for the <code class="codeph">SCOTT</code> schema, use your new password.
                  </p>
                  <div class="section">
                     <p>Perform these steps:</p>
                     <dl>
                        <dt class="dlterm"><a name="GUID-40568052-61CE-429F-B5AD-3AFD9EF47722__GUID-895A6424-E668-47A2-A0E5-D35C7C3F2F69">
                              <!-- --></a>Step 1. Create a table to store images for the application after connecting to a schema with privileges to create a table.
                        </dt>
                        <dd>
                           <p>For example:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE TABLE cw_images_table( id NUMBER PRIMARY KEY,
                                  description VARCHAR2(30) NOT NULL,
                                  location VARCHAR2(30),
                                  image ORDSYS.ORDIMAGE )
--
-- store media as SecureFiles LOBs
--
LOB(image.source.localdata)  STORE AS SECUREFILE;
</pre></dd>
                        <dt class="dlterm"><a name="GUID-40568052-61CE-429F-B5AD-3AFD9EF47722__GUID-9F21FE22-58CE-4626-90AE-F39B50251787">
                              <!-- --></a>Step 2. Create the <span class="bold"><code class="codeph">SCOTTCW</code></span> DAD to be used to create the procedures.
                        </dt>
                        <dd>
                           <ol>
                              <li>
                                 <p>Set your Web browser to the Oracle HTTP Server Home page. Select <span class="bold">PL/SQL Properties</span> in the Administration page to open the mod_plsql Services page.
                                 </p>
                              </li>
                              <li>
                                 <p>On the mod_plsql Services page, scroll to the DAD Status section. Then, click <span class="bold">Create</span> to open the DAD Type page.
                                 </p>
                              </li>
                              <li>
                                 <p>Select the DAD type to be <span class="bold">General</span>. Then, click <span class="bold">Next</span> to open the Database Connection page.
                                 </p>
                              </li>
                              <li>
                                 <p>Enter <code class="codeph">/scottcw</code> in the DAD Name field. Enter <code class="codeph">SCOTT</code> for the database account, and leave the password blank. Enter the connection information in the Database Connectivity Information section. Enter <code class="codeph">ORDCWPKG.MENU</code> in the Default page field, and leave the other fields blank. Then, click <span class="bold">Next</span> to open the Document, Alias, and Session page.
                                 </p>
                              </li>
                              <li>
                                 <p>On the Document, Alias, and Session page, enter <code class="codeph">MEDIA_UPLOAD_TABLE</code> for the Document Table. Then, click <span class="bold">Apply.</span></p>
                              </li>
                              <li>
                                 <p>Restart Oracle HTTP Server for the changes to take effect.</p>
                              </li>
                           </ol>
                        </dd>
                        <dt class="dlterm"><a name="GUID-40568052-61CE-429F-B5AD-3AFD9EF47722__GUID-C6D60E93-4A84-4E67-8B40-42A775240E99">
                              <!-- --></a>Step 3. Authorize the use of the <span class="bold"><code class="codeph">SCOTTCW</code></span> DAD and <span class="bold"><code class="codeph">SCOTT</code></span> schema with the Code Wizard.
                        </dt>
                        <dd>
                           <ol>
                              <li>
                                 <p>Enter the Code Wizard's administration URL into your browser's location bar, then enter the <code class="codeph">ORDSYS</code> user name and password when prompted by the browser, for example:
                                 </p><pre class="oac_no_warn" dir="ltr">http://<span class="italic"><code class="codeph">&lt;hostname&gt;</code></span>:<span class="italic"><code class="codeph">&lt;port-number&gt;</code></span>/ordcwadmin
</pre></li>
                              <li>
                                 <p>Select the DAD authorization function from the Code Wizard's <span class="bold">Main menu</span> and click <span class="bold">Next</span>. Enter the name of the demonstration DAD, <code class="codeph">SCOTTCW</code>, and the user name <code class="codeph">SCOTT</code>, then click <span class="bold">Apply</span>. Click <span class="bold">Done</span> when the confirmation window is displayed.
                                 </p>
                              </li>
                           </ol>
                        </dd>
                        <dt class="dlterm"><a name="GUID-40568052-61CE-429F-B5AD-3AFD9EF47722__GUID-2FDE9AA9-4790-4788-BC44-FE0335A6DDE7">
                              <!-- --></a>Step 4. Change DADs to the <span class="bold"><code class="codeph">SCOTTCW</code></span> DAD.
                        </dt>
                        <dd>
                           <ol>
                              <li>
                                 <p>Click <span class="bold">Change DAD</span> from the Code Wizard's <span class="bold">Main menu</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Click <span>Change to SCOTTCW</span>, if it is not already selected, then click <span class="bold">Next</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Enter the user name <code class="codeph">SCOTT</code> and the password for the user SCOTT when prompted for the user name and password, then click <span class="bold">OK</span>.
                                 </p>
                                 <p>The <span class="bold">Main menu</span> now displays the current DAD as <code class="codeph">SCOTTCW</code> and the current schema as <code class="codeph">SCOTT</code>.
                                 </p>
                              </li>
                           </ol>
                        </dd>
                        <dt class="dlterm"><a name="GUID-40568052-61CE-429F-B5AD-3AFD9EF47722__GUID-8032A213-4ACE-498C-9EAB-EDEE17F70F9C">
                              <!-- --></a>Step 5. Create and test the media upload procedure. 
                        </dt>
                        <dd>
                           <p>Click <span class="bold">Create media upload procedure</span> from the <span class="bold">Main menu</span>, then click <span class="bold">Next</span>.
                           </p>
                           <ol>
                              <li>
                                 <p>Select the database table and procedure type.</p>
                                 <ol type="a">
                                    <li>
                                       <p>Click the <span class="bold">CW_IMAGES_TABLE</span> database table.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Standalone procedure</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Next</span>.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>Select the PL/SQL document upload table.</p>
                                 <p>If there are no document tables in the <code class="codeph">SCOTT</code> schema, the Code Wizard displays a message indicating this situation. In this case, accept the default table name provided, <code class="codeph">CW_SAMPLE_UPLOAD_TABLE</code>, then click<span class="bold"> Next</span>.
                                 </p>
                                 <p>If there are existing document tables, but the <code class="codeph">CW_SAMPLE_UPLOAD_TABLE</code> is not among them, click <span class="bold">Create new document table</span>, accept the default table name provided, <code class="codeph">CW_SAMPLE_UPLOAD_TABLE</code>, then click <span class="bold">Next</span>.
                                 </p>
                                 <p>If the <code class="codeph">CW_SAMPLE_UPLOAD_TABLE</code> document table already exists, ensure that the <span class="bold">Use existing document table</span> and the <span class="bold">CW_SAMPLE_UPLOAD_TABLE</span> options are selected. Click <span class="bold">Next</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Select the data access and media columns.</p>
                                 <ol type="a">
                                    <li>
                                       <p>Click <span class="bold">IMAGE (ORDIMAGE)</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">ID (Primary key)</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Conditional insert or update</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Next</span>.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>Select additional columns and procedure names.</p>
                                 <ol type="a">
                                    <li>
                                       <p>Ensure that <span class="bold">DESCRIPTION</span> checkmarked because this column has a <code class="codeph">NOT NULL</code> constraint. (The <span class="bold">LOCATION</span> column is not checkmarked by default as there are no constraints on this column.)
                                       </p>
                                    </li>
                                    <li>
                                       <p>Accept the procedure name provided, <code class="codeph">UPLOAD_CW_IMAGES_TABLE_IMAGE</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Create procedure in the database</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Next</span>.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>Review the following selected procedure creation options that are displayed:</p><pre class="oac_no_warn" dir="ltr">Procedure type:        Standalone
Table name:            CW_IMAGES_TABLE
Media column(s):       IMAGE (ORDIMAGE)
Key column:            ID
Additional column(s):  DESCRIPTION
Table access mode:     Conditional update or insert
Procedure name:        UPLOAD_CW_IMAGES_TABLE_IMAGE
Function:              Create procedure in the database
</pre><p>Click <span class="bold">Finish</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Compile the procedure and review the generated source information.</p>
                                 <p>The Code Wizard displays this message:</p><pre class="oac_no_warn" dir="ltr">Procedure created successfully: UPLOAD_CW_IMAGES_TABLE_IMAGE
</pre><ol type="a">
                                    <li>
                                       <p>At the option<span class="bold"> Click to display generated source:</span>, click <span class="bold">View</span> to view the generated source in another window. A copy of the generated source is shown at the end of Step 5, substep 6g.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Close the window after looking at the generated source.</p>
                                    </li>
                                    <li>
                                       <p>Accept the <span class="bold">DAD:</span> name provided, <code class="codeph">SCOTTCW</code>, then click <span class="bold">Test</span> to produce another window that displays a template file upload form that you can use to test the generated procedure.
                                       </p>
                                    </li>
                                    <li>
                                       <p>To customize the template file upload form, select <span class="bold">Save As...</span> from your browser's <span class="bold">File</span> menu to save the HTML source for editing.
                                       </p>
                                    </li>
                                    <li>
                                       <p>To test the template upload form, enter this information:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>For the <span class="bold">ID:</span> column, enter the number <code class="codeph">1</code> as the row's primary key.
                                             </p>
                                          </li>
                                          <li>
                                             <p>For the <span class="bold">IMAGE</span> column, click <span class="bold">Browse...</span> and choose an image file to upload to the database.
                                             </p>
                                          </li>
                                          <li>
                                             <p>For the <span class="bold">DESCRIPTION</span> column, enter a brief description of the image.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Click <span class="bold">Upload media</span>.
                                             </p>
                                          </li>
                                       </ul>
                                       <p>The Code Wizard displays a template completion window with the heading <span class="bold">Oracle Multimedia Code Wizard: Template Upload Procedure</span>, and, if the procedure is successful, the message: <code class="codeph">Media uploaded successfully</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Close the window.</p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Done</span> on the <span class="bold">Compile procedure and review generated source</span> window to return to the <span class="bold">Main menu</span> of the Code Wizard.
                                       </p>
                                    </li>
                                 </ol>
                                 <p>A copy of the generated image upload procedure follows:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE UPLOAD_CW_IMAGES_TABLE_IMAGE
  ( in_ID IN VARCHAR2,
    in_IMAGE IN VARCHAR2 DEFAULT NULL,
    in_DESCRIPTION IN VARCHAR2 DEFAULT NULL )
AS
  local_IMAGE ORDSYS.ORDIMAGE := ORDSYS.ORDIMAGE();
  local_ID CW_IMAGES_TABLE.ID%TYPE := NULL;
  upload_size     INTEGER;
  upload_mimetype VARCHAR2( 128 );
  upload_blob     BLOB;
BEGIN
  --
  -- Update the existing row.
  --
  UPDATE CW_IMAGES_TABLE mtbl
    SET mtbl.IMAGE = local_IMAGE,
        mtbl.DESCRIPTION = in_DESCRIPTION
    WHERE mtbl.ID = in_ID
    RETURN mtbl.ID INTO local_ID;
  --
  -- Conditionally insert a new row if no existing row is updated.
  --
  IF local_ID IS NULL
  THEN
    --
    -- Insert the new row into the table.
    --
    INSERT INTO CW_IMAGES_TABLE ( ID, IMAGE, DESCRIPTION )
      VALUES ( in_ID, local_IMAGE, in_DESCRIPTION );
  END IF;
  --
  -- Select Oracle Multimedia object(s) for update.
  --
  SELECT mtbl.IMAGE INTO local_IMAGE
    FROM CW_IMAGES_TABLE mtbl WHERE mtbl.ID = in_ID FOR UPDATE;
  --
  -- Store media data for the column in_IMAGE.
  --
  IF in_IMAGE IS NOT NULL
  THEN
    SELECT dtbl.doc_size, dtbl.mime_type, dtbl.blob_content INTO
           upload_size, upload_mimetype, upload_blob
      FROM CW_IMAGE_UPLOAD_TABLE dtbl WHERE dtbl.name = in_IMAGE;
    IF upload_size &amp;gt; 0
    THEN
      dbms_lob.copy( local_IMAGE.source.localData, 
                     upload_blob, 
                     upload_size );
      local_IMAGE.setLocal();
      BEGIN
        local_IMAGE.setProperties();
      EXCEPTION
        WHEN OTHERS THEN
          local_IMAGE.contentLength := upload_size;
          local_IMAGE.mimeType := upload_mimetype;
      END;
    END IF;
    DELETE FROM CW_IMAGE_UPLOAD_TABLE dtbl WHERE dtbl.name = in_IMAGE;
  END IF;
  --
  -- Update Oracle Multimedia objects in the table.
  --
  UPDATE CW_IMAGES_TABLE mtbl
    SET mtbl.IMAGE = local_IMAGE
    WHERE mtbl.ID = in_ID;
  --
  -- Display the template completion message.
  --
  htp.print( '&amp;lt;html&amp;gt;' );
  htp.print( '&amp;lt;title&amp;gt;Oracle Multimedia Code Wizard: Template Upload
Procedure&amp;lt;/title&amp;gt;' );
  htp.print( '&amp;lt;body&amp;gt;' );
  htp.print( '&amp;lt;h2&amp;gt; Oracle Multimedia Code Wizard:
Template Upload Procedure&amp;lt;/h2&amp;gt;' );
  htp.print( 'Media uploaded successfully.' );
  htp.print( '&amp;lt;/body&amp;gt;' );
  htp.print( '&amp;lt;/html&amp;gt;' );
END UPLOAD_CW_IMAGES_TABLE_IMAGE;
</pre><p>The previous image upload procedure declares these input parameters and variables:</p>
                                 <ol type="a">
                                    <li>
                                       <p>In the declaration section, the procedure declares three input parameters: <code class="codeph">in_ID</code>, <code class="codeph">in_IMAGE</code>, and <code class="codeph">in_DESCRIPTION</code>, then initializes the latter two to <code class="codeph">NULL</code>. 
                                       </p>
                                    </li>
                                    <li>
                                       <p>In the subprogram section, the following variables are declared:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>The variable <code class="codeph">local_IMAGE</code> is assigned the data type ORDSYS.ORDIMAGE and initialized with an empty BLOB using the ORDIMAGE( ) constructor.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The variable <code class="codeph">local_ID</code> takes the same data type as the <code class="codeph">ID</code> column in the table <code class="codeph">CW_IMAGES_TABLE</code> and is initialized to <code class="codeph">NULL</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Three additional variables are declared <code class="codeph">upload_size</code>, <code class="codeph">upload_mimetype</code>, and <code class="codeph">upload_blob</code>, which are later given values from comparable column names <code class="codeph">doc_size</code>, <code class="codeph">mime_type</code>, and <code class="codeph">blob_content</code> from the document table <code class="codeph">CW_IMAGE_UPLOAD_TABLE</code>, using a SELECT statement in preparation for copying the content of the image BLOB data to the ORDSYS.ORDIMAGE.source.localData attribute.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ol>
                                 <p>Within the outer BEGIN...END executable statement section, the following operations are executed:</p>
                                 <ol type="a">
                                    <li>
                                       <p>Update the existing row in the table <code class="codeph">CW_IMAGES_TABLE</code> for the <code class="codeph">IMAGE</code> and <code class="codeph">DESCRIPTION</code> columns and return the value of <code class="codeph">local_ID</code> where the value of the <code class="codeph">ID</code> column is the value of the <code class="codeph">in_ID</code> input parameter.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If the value returned of <code class="codeph">local_ID</code> is <code class="codeph">NULL</code>, conditionally insert a new row into the table <code class="codeph">CW_IMAGES_TABLE</code> and initialize the instance of the ORDImage object type in the <code class="codeph">image</code> column with an empty BLOB.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Select the ORDImage object column <code class="codeph">IMAGE</code> in the table <code class="codeph">CW_IMAGES_TABLE</code> for update where the value of the <code class="codeph">ID</code> column is the value of the <code class="codeph">in_ID</code> input parameter.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Select a row for the <code class="codeph">doc_size</code>, <code class="codeph">mime_type</code>, and <code class="codeph">blob_content</code> columns from the document table and pass the values to the <code class="codeph">upload_size</code>, <code class="codeph">upload_mimetype</code>, and <code class="codeph">upload_blob</code> variables where the value of the document table <code class="codeph">Name</code> column is the value of the <code class="codeph">in_IMAGE</code> input parameter.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Perform a DBMS_LOB copy of the BLOB data from the table <code class="codeph">CW_IMAGE_UPLOAD_TABLE</code> into the ORDSYS.ORDIMAGE.source.localData attribute, then call the setLocal( ) method to indicate that the image data is stored locally in the BLOB, and ORDImage methods are to look for corresponding data in the source.localData attribute.
                                       </p>
                                    </li>
                                    <li>
                                       <p>In the inner executable block, call the ORDImage setProperties( ) method to read the image data to get the values of the object attributes and store them in the image object attributes for the ORDImage object.</p>
                                    </li>
                                    <li>
                                       <p>If the setProperties( ) call fails, catch the exception and call the contentLength( ) method to get the size of the image and call the mimeType( ) method to get the MIME type of the image.</p>
                                    </li>
                                    <li>
                                       <p>Delete the row of data from the document table <code class="codeph">CW_IMAGE_UPLOAD_TABLE</code> that was copied to the row in the table <code class="codeph">CW_IMAGES_TABLE</code> where the value of the <code class="codeph">Name</code> column is the value of the <code class="codeph">in_IMAGE</code> input parameter.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Update the ORDImage object <code class="codeph">IMAGE</code> column in the table <code class="codeph">CW_IMAGES_TABLE</code> with the content of the variable <code class="codeph">local_IMAGE</code> where the value of the <code class="codeph">ID</code> column is the value of the <code class="codeph">in_ID</code> input parameter.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Display a completion message on the HTML page to indicate that the media uploaded successfully using the <code class="codeph">htp.print</code> function from the PL/SQL Web Toolkit.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                        </dd>
                        <dt class="dlterm"><a name="GUID-40568052-61CE-429F-B5AD-3AFD9EF47722__GUID-DD210AB6-916A-4CB2-9BC5-A6092F15BC0B">
                              <!-- --></a>Step 6. Create and test a media retrieval.
                        </dt>
                        <dd>
                           <p>Select <span class="bold">Create media retrieval procedure</span> from the <span class="bold">Main menu</span>, then click <span class="bold">Next</span>.
                           </p>
                           <ol>
                              <li>
                                 <p>Select the database table and procedure type.</p>
                                 <ol type="a">
                                    <li>
                                       <p>Click <span class="bold">CW_IMAGES_TABLE</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Standalone procedure</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Next</span>.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>Select the media column and key column.</p>
                                 <ol type="a">
                                    <li>
                                       <p>Click <span class="bold">IMAGE (ORDIMAGE)</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">ID (Primary key)</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Next</span>.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>Select the procedure name and parameter name.</p>
                                 <ol type="a">
                                    <li>
                                       <p>Accept the procedure name provided, <code class="codeph">GET_CW_IMAGES_TABLE_IMAGE</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Accept the parameter name provided, <code class="codeph">MEDIA_ID</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Create procedure in the database</span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Next</span>.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>Review the following selected procedure creation options:</p>
                              </li>
                              <li><pre class="oac_no_warn" dir="ltr">Procedure type:        Standalone
Table name:            CW_IMAGES_TABLE
Media column(s):       IMAGE (ORDIMAGE)
Key column:            ID
Procedure name:        GET_CW_IMAGES_TABLE_IMAGE
Parameter Name:        MEDIA_ID
Function:              Create procedure in the database
</pre><p>Click <span class="bold">Next</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Compile the procedure and review the generated source.</p>
                                 <p>The Code Wizard displays this message:</p><pre class="oac_no_warn" dir="ltr">Procedure created successfully: GET_CW_IMAGES_TABLE_IMAGE
</pre><ol type="a">
                                    <li>
                                       <p>Click <span class="bold">View</span> to view the generated source in another window. Close the window after looking at the generated source. A copy of the generated source is shown at the end of Step 6, substep 5e.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Review the URL format used to retrieve images using the <code class="codeph">GET_CW_IMAGES_TABLE_IMAGE</code> procedure.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Enter the number <code class="codeph">1</code> as the Key parameter, then click <span class="bold">Test</span> to test the procedure by retrieving the image uploaded previously.
                                       </p>
                                       <p>The retrieved image is displayed in another window.</p>
                                    </li>
                                    <li>
                                       <p>Close the window.</p>
                                    </li>
                                    <li>
                                       <p>Click <span class="bold">Done</span> to return to the <span class="bold">Main menu</span>.
                                       </p>
                                    </li>
                                 </ol>
                                 <p>A copy of the generated image retrieval procedure follows:</p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE GET_CW_IMAGES_TABLE_IMAGE (
 MEDIA_ID IN VARCHAR2 )
AS
  localObject ORDSYS.ORDIMAGE;
  localBlob  BLOB;
  localBfile BFILE;
  httpStatus NUMBER;
  lastModDate VARCHAR2(256);
BEGIN
  --
  -- Retrieve the object from the database into a local object.
  --
  BEGIN
    SELECT mtbl.IMAGE INTO localObject FROM CW_IMAGES_TABLE mtbl
      WHERE mtbl.ID = MEDIA_ID;
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      ordplsgwyutil.resource_not_found( 'MEDIA_ID', MEDIA_ID );
      RETURN;
  END;

  --
  -- Check the update time if the browser sent an If-Modified-Since header.
  --
  IF ordplsgwyutil.cache_is_valid( localObject.getUpdateTime() )
  THEN
    owa_util.status_line( ordplsgwyutil.http_status_not_modified );
    RETURN;
  END IF;

  --
  -- Figure out where the image is.
  --
  IF localObject.isLocal() THEN
    --
    -- Data is stored locally in the localData BLOB attribute.
    --
    localBlob := localObject.getContent();
    owa_util.mime_header( localObject.getMimeType(), FALSE );
    ordplsgwyutil.set_last_modified( localObject.getUpdateTime() );
    owa_util.http_header_close();
    IF owa_util.get_cgi_env( 'REQUEST_METHOD' ) &amp;lt;&amp;gt; 'HEAD' THEN
      wpg_docload.download_file( localBlob );
    END IF;
  ELSIF UPPER( localObject.getSourceType() ) = 'FILE' THEN

    --
    -- Data is stored as a file from which ORDSource creates 
    -- a BFILE.
    --
    localBfile  := localObject.getBFILE();
    owa_util.mime_header( localObject.getMimeType(), FALSE );
    ordplsgwyutil.set_last_modified( localObject.getUpdateTime() );
    owa_util.http_header_close();
    IF owa_util.get_cgi_env( 'REQUEST_METHOD' ) &amp;lt;&amp;gt; 'HEAD' THEN
      wpg_docload.download_file( localBfile );
    END IF;

  ELSIF UPPER( localObject.getSourceType() ) = 'HTTP' THEN    --
    -- The image is referenced as an HTTP entity, so we have to 
    -- redirect the client to the URL that ORDSource provides.
    --
    owa_util.redirect_url( localObject.getSource() );
  ELSE
    --
    -- The image is stored in an application-specific data
    -- source type for which no default action is available.
    --
    NULL;
  END IF;
END GET_CW_IMAGES_TABLE_IMAGE;
</pre><p>The image retrieval procedure shown previously declares these input parameters and variables:</p>
                                 <ol type="a">
                                    <li>
                                       <p>In the declaration section, the procedure declares one input parameter: <code class="codeph">MEDIA_ID</code>. 
                                       </p>
                                    </li>
                                    <li>
                                       <p>In the subprogram section, the following variables are declared:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>The variable <code class="codeph">localObject</code> is assigned the data type ORDSYS.ORDIMAGE.
                                             </p>
                                          </li>
                                          <li>
                                             <p>The variable <code class="codeph">localBlob</code> is a BLOB data type, the variable <code class="codeph">localBfile</code> is a BFILE data type, <code class="codeph">httpStatus</code> is a NUMBER, and <code class="codeph">lastModDate</code> is a VARCHAR2 with a maximum size of 256 characters.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                 </ol>
                                 <p>Within the outer BEGIN...END executable statement section, the following operations are executed:</p>
                                 <ol type="a">
                                    <li>
                                       <p>Select the ORDImage object column <code class="codeph">IMAGE</code> in the table <code class="codeph">CW_IMAGES_TABLE</code> where the value of the <code class="codeph">ID</code> column is the value of the <code class="codeph">MEDIA_ID</code> input parameter.
                                       </p>
                                    </li>
                                    <li>
                                       <p>In the inner executable block, when no data is found, raise an exception and call the <code class="codeph">resource_not_found</code> function of the PL/SQL Gateway and get the value of the <code class="codeph">MEDIA_ID</code> input parameter.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Check the update time if the browser sent an If-Modified-Since header by calling the getUpdateTime( ) method passed into the <code class="codeph">cache_is_valid</code> function of the PL/SQL Gateway.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If the cache is valid, send an HTTP status code to the client using the PL/SQL Web Toolkit <code class="codeph">owa_util</code> package <code class="codeph">status_line</code> procedure passing in the call to the <code class="codeph">http_status_not_modified</code> function. 
                                       </p>
                                    </li>
                                    <li>
                                       <p>Determine where the image data is stored; call the ORDImage isLocal( ) method, which returns a Boolean expression of <span>true</span> if the image data is stored locally in the BLOB, then get the handle to the local BLOB. 
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>If the value is <span>true</span>, assign the variable <code class="codeph">localBlob</code> the ORDImage getContent( ) method to get the handle of the local BLOB containing the image data.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Call the ORDImage getMimeType( ) method to determine the image's MIME type and pass this to the <code class="codeph">owa_util.mime_header</code> procedure and keep the HTTP header open.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Call the ORDImage getUpdateTime( ) method to get the time the image was last modified and pass this to the <code class="codeph">ordplsgwyutil.set_last_modified</code> procedure. 
                                             </p>
                                          </li>
                                          <li>
                                             <p>Close the HTTP header by calling the <code class="codeph">owa_util.http_header_close( )</code> procedure.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Call the <code class="codeph">owa_util.get_cgi_env</code> procedure and if the value of the request method is not <code class="codeph">HEAD</code>, then use the <code class="codeph">wpg_docload.download_file</code> procedure to pass in the value of <code class="codeph">localBlob</code> that contains the LOB locator of the BLOB containing the image data to download the image from the database.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p>If the ORDImage isLocal( ) method returns false, call the ORDImage getSourceType( ) method to determine if the value is <code class="codeph">FILE</code>; if so, then the image data is stored as an external file on the local file system. Then, get the LOB locator of the BFILE containing the image data.
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>Assign the variable <code class="codeph">localBfile</code> the ORDImage getBfile( ) method to get the LOB locator of the BFILE containing the image data. 
                                             </p>
                                          </li>
                                          <li>
                                             <p>Call the ORDImage getMimeType( ) method to determine the image's MIME type and pass this to the <code class="codeph">owa_util.mime_header</code> procedure and keep the HTTP header open.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Call the ORDImage getUpdateTime( ) method to get the time the image was last modified and pass this to the <code class="codeph">ordplsgwyutil.set_last_modified</code> procedure. 
                                             </p>
                                          </li>
                                          <li>
                                             <p>Close the HTTP header by calling the <code class="codeph">owa_util.http_header_close()</code> procedure.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Call the <code class="codeph">owa_util.get_cgi_env</code> procedure and if the value of the request method is not <code class="codeph">HEAD</code>, then use the <code class="codeph">wpg_docload.download_file</code> procedure to pass in the value of <code class="codeph">localBfile</code> that contains the LOB locator of the BFILE containing the image data to download the image from the file.
                                             </p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p>If the ORDImage isLocal( ) method returns false, call the ORDImage getSourceType( ) method to determine if the value is <code class="codeph">HTTP</code>; if so, then the image data is stored at an HTTP URL location, which then redirects the client to the URL that ORDSource provides using the <code class="codeph">owa_util.redirect_url</code> procedure.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If the ORDImage isLocal( ) method returns false, call the ORDImage getSourceType( ) method to determine if the value is <code class="codeph">FILE</code> or <code class="codeph">HTTP</code>; if it is neither, then the image is stored in an application-specific data source type that is not recognized or supported by Oracle Multimedia.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                        </dd>
                     </dl>
                     <div class="infoboxnotealso" id="GUID-40568052-61CE-429F-B5AD-3AFD9EF47722__GUID-2C27A363-BDFA-4436-9461-5372B75757A5">
                        <p class="notep1">See Also:</p>
                        <p><a href="../dbseg/configuring-authentication.html#DBSEG33223" target="_blank"><span class="italic">Oracle Database Security Guide</span> </a>for more information about creating secure passwords
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="IMURG4540"></a><div class="props_rev_3"><a id="GUID-AEF16B1A-06A3-4D48-BE09-9C33ACAE19DA" name="GUID-AEF16B1A-06A3-4D48-BE09-9C33ACAE19DA"></a><h3 id="IMURG-GUID-AEF16B1A-06A3-4D48-BE09-9C33ACAE19DA" class="sect3"><span class="enumeration_section">4.4 </span>Known Restrictions of the Oracle Multimedia Code Wizard
               </h3>
               <div>
                  <p>The Code Wizard supports the features of Oracle Multimedia, with a few known restrictions.</p>
                  <p>The following restrictions are known for the Oracle Multimedia Code Wizard:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Tables with composite primary keys are not supported.</p>
                        <p>To use a table with a composite primary key, create an upload or download procedure, then edit the generated source to support all the primary key columns. For example, for a media retrieval procedure, this might involve adding an additional parameter, then specifying that parameter in the <code class="codeph">where</code> clause of the SELECT statement.
                        </p>
                     </li>
                     <li>
                        <p>User object types containing embedded Oracle Multimedia object types are not recognized by the Oracle Multimedia Code Wizard.</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>