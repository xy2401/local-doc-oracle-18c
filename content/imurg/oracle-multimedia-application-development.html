<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle Multimedia enables you to develop either traditional client/server or two-tier applications, or multitier applications. Either method can then deploy Web applications to run on an application server tier, be tightly integrated with Oracle Database, and enable users to access the application from their desktop through a Web browser.">
      <meta name="description" content="Oracle Multimedia enables you to develop either traditional client/server or two-tier applications, or multitier applications. Either method can then deploy Web applications to run on an application server tier, be tightly integrated with Oracle Database, and enable users to access the application from their desktop through a Web browser.">
      <title>Oracle Multimedia Application Development</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content="Oracle Multimedia enables you to develop either traditional client/server or two-tier applications, or multitier applications. Either method can then deploy Web applications to run on an application server tier, be tightly integrated with Oracle Database, and enable users to access the application from their desktop through a Web browser.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="multimedia-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-07T03:26:44-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E84257-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="introduction-to-oracle-multimedia.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-multimedia-photo-album-sample-application.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multimedia User's Guide">
    <meta name="dcterms.isVersionOf" content="IMURG">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="introduction-to-oracle-multimedia.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-multimedia-photo-album-sample-application.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Oracle Multimedia Application Development</li>
            </ol>
            <a id="GUID-96F6CC70-1D4E-49BD-975C-0E116F643034" name="GUID-96F6CC70-1D4E-49BD-975C-0E116F643034"></a><a id="IMURG2000"></a>
            
            <h2 id="IMURG-GUID-96F6CC70-1D4E-49BD-975C-0E116F643034" class="sect2"><span class="enumeration_chapter">2 </span> Oracle Multimedia Application Development
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Multimedia enables you to develop either traditional client/server or two-tier applications, or multitier applications. Either method can then deploy Web applications to run on an application server tier, be tightly integrated with Oracle Database, and enable users to access the application from their desktop through a Web browser.</p>
               <p>You can create production quality Oracle Multimedia applications for use in a production environment where users can interact with the application through either the standalone client interface or a Web browser. For Web applications, which are based on standards such as TCP/IP, HTTP, HTML, XML, and XHTML, this capability is facilitated by rapid developments in the underlying technology. As key software components become more tightly integrated, developers' tasks to design, create, and manage Web applications become faster, easier, and simpler to implement.</p>
               <p>Several tools and languages can be used for application development with multimedia data. This chapter describes them in these sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="oracle-multimedia-application-development.html#GUID-42072A41-48AD-411B-B9D7-3DBC0BF114AC" title="Oracle SQL Developer is a tool that allows standalone graphical browsing and development of database schema objects.">Developing Multimedia Applications Using SQL Developer</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-multimedia-application-development.html#GUID-0571BB60-05BB-4C78-9BA3-137020BC72E1" title="Oracle Application Express is a rapid development tool for Web applications on Oracle Database.">Developing Multimedia Applications Using Application Express</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-multimedia-application-development.html#GUID-C6419B08-0FBF-40A1-BDDA-7B429C3A3745" title="Using the Java database connectivity (JDBC) interface, Oracle Multimedia enables users to embed anonymous PL/SQL code blocks to quickly develop Java applications for use on any tier (client, application server, or database) to manipulate and modify audio, image, and video data, or heterogeneous media data stored in a database.">Developing Multimedia Applications Using Java and JDBC</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-multimedia-application-development.html#GUID-263CE3BA-9B63-4B2E-AC4A-FE7B5D2968D6" title="Using the PL/SQL application programming interface, Oracle Multimedia enables users to develop PL/SQL applications to manipulate audio, image, and video data, or heterogeneous media data stored in a database.">Developing Multimedia Applications Using PL/SQL</a></p>
                  </li>
                  <li>
                     <p><a href="oracle-multimedia-application-development.html#GUID-5CC45704-BBBC-4403-9413-E5F0D23CBBEB" title="You can use the PL/SQL Gateway and PL/SQL Web Toolkit to develop Web applications in PL/SQL.">Developing PL/SQL Web Applications</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-96F6CC70-1D4E-49BD-975C-0E116F643034__GUID-98AF1CE3-E65A-401B-A9D4-40074EB1A57F">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="oracle-multimedia-photo-album-sample-application.html#GUID-4F64BE39-7F90-4B17-838F-3BF9163D729E" title="The Oracle Multimedia PL/SQL Web Toolkit Photo Album sample application is a media upload and retrieval Web application using Oracle Multimedia object types. This application uses the PL/SQL Gateway and PL/SQL Web Toolkit.">Oracle Multimedia PL/SQL Photo Album Sample Application</a> for a description of the Oracle Multimedia Photo Album sample Web application, which uses PL/SQL scripts to demonstrate how to develop Web applications to upload and retrieve media data stored in a database
                        </p>
                     </li>
                     <li>
                        <p><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-27A7994A-7D2C-474E-B759-EAC45C65CBDD" title="The Oracle Multimedia Code Wizard sample application for the PL/SQL Gateway creates PL/SQL procedures for the PL/SQL Gateway to upload and retrieve multimedia data stored in a database using Oracle Multimedia object types.">Oracle Multimedia Code Wizard Sample Application for the PL/SQL Gateway</a> for a description of the Oracle Multimedia Code Wizard application, which lets you create PL/SQL stored procedures for the PL/SQL Gateway for uploading and retrieving media data stored in a database using Oracle Multimedia object types
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect2"><a id="GUID-42072A41-48AD-411B-B9D7-3DBC0BF114AC" name="GUID-42072A41-48AD-411B-B9D7-3DBC0BF114AC"></a><h3 id="IMURG-GUID-42072A41-48AD-411B-B9D7-3DBC0BF114AC" class="sect3"><span class="enumeration_section">2.1 </span>Developing Multimedia Applications Using SQL Developer
               </h3>
               <div>
                  <p>Oracle SQL Developer is a tool that allows standalone graphical browsing and development of database schema objects.</p>
                  <div class="section">
                     <p>Oracle SQL Developer supports the BLOB and BFILE data types. Developers who store their multimedia data in BLOBs and BFILEs can use Oracle SQL Developer for their multimedia applications.</p>
                     <p>Follow these steps to view an image that is stored in the database as a BLOB:</p>
                     <ol>
                        <li>
                           <p>Find the table you created in the list of tables in SQL Developer.</p>
                        </li>
                        <li>
                           <p>Create a new row for importing images into your table. Then, import one or more images into the table.</p>
                        </li>
                        <li>
                           <p>Go to the Query Result area to view the properties of any imported image.</p>
                        </li>
                        <li>
                           <p>Select the BLOB in the column for the image you want to view. Then, double click the left mouse button.</p>
                           <p>A pencil icon displays to the right of the BLOB you selected.</p>
                        </li>
                        <li>
                           <p>Click the pencil icon to open the <span class="wintitle">View Value</span> window.
                           </p>
                        </li>
                        <li>
                           <p>In the <kbd class="userinput">View As:</kbd> field, check <kbd class="userinput">Image</kbd>.
                           </p>
                           <p>The image you selected is displayed on the <span class="wintitle">Saved Image</span> tab.
                           </p>
                        </li>
                     </ol>
                     <div class="infoboxnotealso" id="GUID-42072A41-48AD-411B-B9D7-3DBC0BF114AC__GUID-51C5207B-FDAE-4ACA-AFE5-BC805ED964C4">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p></p>
                           </li>
                           <li>
                              <p><a href="https://docs.oracle.com/en/database/oracle/sql-developer/18.2/rptug/index.html" target="_blank">Oracle SQL Developer User’s Guide</a> for more information about using SQL Developer with BLOBs and BFILEs and with multimedia data
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/imurg&amp;id=mm_otn_index" target="_blank"><span class="italic">Oracle Multimedia</span></a> on the Oracle Technology Network Web site for additional examples and other resources
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-0571BB60-05BB-4C78-9BA3-137020BC72E1" name="GUID-0571BB60-05BB-4C78-9BA3-137020BC72E1"></a><h3 id="IMURG-GUID-0571BB60-05BB-4C78-9BA3-137020BC72E1" class="sect3"><span class="enumeration_section">2.2 </span>Developing Multimedia Applications Using Application Express
               </h3>
               <div>
                  <p>Oracle Application Express is a rapid development tool for Web applications on Oracle Database.</p>
                  <div class="section">
                     <p>Built-in features such as user interface themes, navigational controls, form handlers, and flexible reports, enable users of Oracle Application Express to accelerate the application development process.</p>
                     <p>Oracle Application Express provides support for BLOB and BFILE data types. Developers who store their multimedia data in BLOBs or BFILEs can use Oracle Application Express for rapid application development.</p>
                     <div class="infoboxnotealso" id="GUID-0571BB60-05BB-4C78-9BA3-137020BC72E1__GUID-9FDE6073-563E-412E-B50A-9344996858FA">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/imurg&amp;id=HTMDB03000" target="_blank"><span><cite>Oracle Application Express App Builder User’s Guide</cite></span></a> for information about building multimedia applications with Oracle Application Express
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="IMURG11895"></a><a id="IMURG11816"></a><a id="IMURG11817"></a><a id="IMURG11818"></a><a id="IMURG11819"></a><a id="IMURG11820"></a><a id="IMURG11821"></a><a id="IMURG11822"></a><a id="IMURG11815"></a><div class="props_rev_3"><a id="GUID-C6419B08-0FBF-40A1-BDDA-7B429C3A3745" name="GUID-C6419B08-0FBF-40A1-BDDA-7B429C3A3745"></a><h3 id="IMURG-GUID-C6419B08-0FBF-40A1-BDDA-7B429C3A3745" class="sect3"><span class="enumeration_section">2.3 </span>Developing Multimedia Applications Using Java and JDBC
               </h3>
               <div>
                  <p>Using the Java database connectivity (JDBC) interface, Oracle Multimedia enables users to embed anonymous PL/SQL code blocks to quickly develop Java applications for use on any tier (client, application server, or database) to manipulate and modify audio, image, and video data, or heterogeneous media data stored in a database. </p>
                  <div class="section">
                     <p>The following subsections describe how to use Java and JDBC to develop multimedia applications:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-multimedia-application-development.html#GUID-C8A5B476-513C-4B6B-A00C-880FD0595C63" title="This topic uses an example to show how to upload multimedia data in Java.">Media Upload in Java</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-multimedia-application-development.html#GUID-8122D542-0700-4AD7-90AD-AF2F154694DF" title="This topic uses an example to show how to retrieve the properties of image data in Java.">Retrieval of Image Properties in Java</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-multimedia-application-development.html#GUID-347CA2E3-F52E-414C-80AB-A03CEFD0A37B" title="This topic uses an example to show how to generate a thumbnail image from an existing image in Java.">Thumbnail Image Creation in Java</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-multimedia-application-development.html#GUID-44F0EC46-A8D0-4714-A488-375F25459004" title="This topic demonstrates proper error handling practices using code examples. These examples show how to handle some common Oracle Multimedia errors and other types of errors in Java programs.">Handling Oracle Multimedia Exceptions in Java</a></p>
                        </li>
                     </ul>
                     <p>The examples in this section assume a table, with these two columns: a numeric identifier (<code class="codeph">id</code>), and a binary large object (BLOB) to hold the image itself (<code class="codeph">image_blob</code>).
                     </p><pre class="pre codeblock"><code>create table image_blob_table ( id number primary key, image_blob BLOB)
lob(image_blob) store as securefile;</code></pre><div class="infoboxnotealso" id="GUID-C6419B08-0FBF-40A1-BDDA-7B429C3A3745__GUID-4C20FF0D-AA97-4177-BE4E-199DFB93B522">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../jjdbc/introducing-JDBC.html#JJDBC28025" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for more information about using JDBC
                              </p>
                           </li>
                           <li>
                              <p><a href="../aivug/introduction-to-oracle-multimedia.html#AIVUG-GUID-1FB8150E-0092-4787-BB01-3D32A17E8F5B" target="_blank"><span><cite>Oracle Multimedia Reference</cite></span></a> for more information about the Oracle Multimedia PL/SQL packages and object interfaces
                              </p>
                           </li>
                           <li>
                              <p><a href="../imdcm/changes-in-this-release-for-oracle-multimedia-dicom-guide.html#IMDCM13870" target="_blank"><span class="italic">Oracle Multimedia DICOM Developer's Guide</span></a> for more information about Oracle Multimedia DICOM features and enhancements
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="props_rev_3"><a id="GUID-C8A5B476-513C-4B6B-A00C-880FD0595C63" name="GUID-C8A5B476-513C-4B6B-A00C-880FD0595C63"></a><h4 id="IMURG-GUID-C8A5B476-513C-4B6B-A00C-880FD0595C63" class="sect4"><span class="enumeration_section">2.3.1 </span>Media Upload in Java
                  </h4>
                  <div>
                     <p>This topic uses an example to show how to upload multimedia data in Java.</p>
                     <div class="section">
                        <p>The following example shows how to import multimedia data from the file system into the database in a Java application.</p><pre class="pre codeblock"><code>public void writeImageToDatabase(int id, String fileName )
            throws SQLException, IOException
                      {
       //Define the PL/SQL block to insert the new row.

       final String INSERT_BLOB = "DECLARE "
                    + "    src_id        NUMBER; "
                    + "BEGIN "
                    + "    src_id := ?;"
                    + "    DELETE FROM image_blob_table WHERE id=src_id; "
                    + "    INSERT INTO image_blob_table t (id, image_blob) "
                    + "           VALUES(src_id, empty_blob()) "
                    + "           RETURNING t.image_blob INTO ?; "
                    + "END;";
       try {

             //Create the statement object.
             final OracleCallableStatement pstmt =
                   (OracleCallableStatement)connection.prepareCall
                   (INSERT_BLOB);

             //Binding the variables to the statement.
             pstmt.setInt(1, id); //ID
             pstmt.registerOutParameter(2, OracleTypes.BLOB);
             pstmt.execute(); //Execute the PL/SQL statement.

             //Get the BLOB locator from the table.
             BLOB blob = pstmt.getBLOB(2);
             File binaryFile = new File(fileName);
             FileInputStream instream = new FileInputStream(binaryFile);

             //Retrieve the ideal buffer size to use in writing to the BLOB.
             int size = 1024*1024; // 1MB.
             byte[] buffer = new byte[size];
             int read = -1;
             long position =1;

             //Read the file to the byte array buffer, then write it to the BLOB.
             while ((read = instream.read(buffer)) != -1)

                {
                      blob.setBytes(position,buffer,0,read);
                      position+=read;
                }

                instream.close();
                connection.commit();


       } catch (FileNotFoundException e) {
               throw new FileNotFoundException("File " + fileName +" not Found.");
       } catch (IOException e) {
               throw new IOException("Error while reading " + fileName);

       }

           }</code></pre><p>Call writeImageToDatabase( ) passing the row id and source file path:</p><pre class="pre codeblock"><code>//Write data from a local file into a BLOB in the database.
quickstart.writeImageToDatabase(1, "flowers.jpg");</code></pre><div class="infoboxnote" id="GUID-C8A5B476-513C-4B6B-A00C-880FD0595C63__GUID-0FA1C745-583D-4B9A-B1CD-9939D3D470F3">
                           <p class="notep1">Note:</p>
                           <p>If the autoCommit flag on the connection is set to true, or is not set (the default is true), the following error is returned when you attempt to select a row with a BLOB column for update:</p><pre class="pre codeblock"><code>java.sql.SQLException: ORA-22990: LOB locators cannot span transactions
</code></pre><p>You can set the autocommit flag to false as follows:</p><pre class="pre codeblock"><code>conn.setautoCommit(false);</code></pre></div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-8122D542-0700-4AD7-90AD-AF2F154694DF" name="GUID-8122D542-0700-4AD7-90AD-AF2F154694DF"></a><h4 id="IMURG-GUID-8122D542-0700-4AD7-90AD-AF2F154694DF" class="sect4"><span class="enumeration_section">2.3.2 </span>Retrieval of Image Properties in Java
                  </h4>
                  <div>
                     <p>This topic uses an example to show how to retrieve the properties of image data in Java.</p>
                     <div class="section">
                        <p>After the image data is imported from the file system into the table <code class="codeph">image_blob_table</code>, the database does not know what the binary bytes in the BLOB column <code class="codeph">image_blob</code> represent. The following example shows how to use the ORDSYS.ORD_IMAGE.getProperties( ) procedure of the Oracle Multimedia PL/SQL package to extract the image properties into the Java application.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="pre codeblock"><code>public HashMap &lt;String, Object&gt; getProperties_example_j(int id )
       throws SQLException
  {
//Define the PL/SQL block to extract the properties.
final String getPropertiesStmt = "DECLARE "
         + "    src                         BLOB; "
         + "    img_mimeType                VARCHAR2(32); "
         + "    img_width                   INTEGER; "
         + "    img_height                  INTEGER; "
         + "    img_contentLength           INTEGER; "
         + "    img_fileFormat             VARCHAR2(32); "
         + "    img_contentFormat           VARCHAR2(32); "
         + "    img_compressionFormat      VARCHAR2(32); "
         + "BEGIN "
         + "    SELECT image_blob INTO src FROM image_blob_table"
         + "           WHERE id=?; "
         + "    ORDSYS.ORD_IMAGE.getProperties(src, "
         + "                  img_mimeType, "
         + "                  img_width, "
         + "                  img_height, "
         + "                  img_fileFormat, "
         + "                  img_compressionFormat, "
         + "                  img_contentFormat, "
         + "                  img_contentLength); "
         + "    ? := img_mimeType; "
         + "    ? := img_width; "
         + "    ? := img_height; "
         + "    ? := img_contentLength; "
         + "    ? := img_fileFormat; "
         + "    ? := img_contentFormat;"
         + "    ? := img_compressionFormat; "
         + "END;";

//Create the statement object.
final OracleCallableStatement pstmt =
     (OracleCallableStatement)connection.prepareCall(getPropertiesStmt);

//Binding the variables to the statement.
pstmt.setInt(1, id);
pstmt.registerOutParameter(2, OracleTypes.VARCHAR);
pstmt.registerOutParameter(3, OracleTypes.INTEGER);
pstmt.registerOutParameter(4, OracleTypes.INTEGER);
pstmt.registerOutParameter(5, OracleTypes.INTEGER);
pstmt.registerOutParameter(6, OracleTypes.VARCHAR);
pstmt.registerOutParameter(7, OracleTypes.VARCHAR);
pstmt.registerOutParameter(8, OracleTypes.VARCHAR);

//Execute the statement.
pstmt.execute();

//Create a HashMap object and populate it with the properties.
HashMap&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();
map.put("mimeType", pstmt.getString(2));
map.put("width", pstmt.getInt(3) );
map.put("height", pstmt.getInt(4));
map.put("contentLength", pstmt.getInt(5));
map.put("fileFormat", pstmt.getString(6));
map.put("contentFormat", pstmt.getString(7));
map.put("compressionFormat", pstmt.getString(8));

return map;
   }</code></pre><p>Call getProperties_example_j( ) passing the id, then iterate over the HashMap to print the properties.</p><pre class="pre codeblock"><code>System.out.println("Original image properties");
       HashMap&lt;String, Object&gt; attributesMap= quickstart.getProperties_example_j(1);
       //Iterate over the HashMap.
       for (Map.Entry&lt;String, Object&gt; entry : attributesMap.entrySet()) {
              System.out.println(entry.getKey() + " = " + entry.getValue());
       }</code></pre><div class="infoboxnote" id="GUID-8122D542-0700-4AD7-90AD-AF2F154694DF__GUID-FA86D6ED-58AE-4E7D-8F14-C7183309A71E">
                           <p class="notep1">Note:</p>
                           <p>If the image data that is in the <code class="codeph">image_blob</code> column is not a supported format for Oracle Multimedia (for example: PSD), the following error is returned.
                           </p><pre class="pre codeblock"><code>     Exception in thread "main" java.sql.SQLException: ORA-29400: data cartridge error</code></pre></div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-347CA2E3-F52E-414C-80AB-A03CEFD0A37B" name="GUID-347CA2E3-F52E-414C-80AB-A03CEFD0A37B"></a><h4 id="IMURG-GUID-347CA2E3-F52E-414C-80AB-A03CEFD0A37B" class="sect4"><span class="enumeration_section">2.3.3 </span>Thumbnail Image Creation in Java
                  </h4>
                  <div>
                     <p>This topic uses an example to show how to generate a thumbnail image from an existing image in Java.</p>
                     <div class="section">
                        <p>The Oracle Multimedia ORD_IMAGE PL/SQL package includes several image processing operations that you can invoke within the database. To generate a thumbnail image from an existing image, you can use the ORDSYS.ORD_IMAGE.thumbnail( ) procedure of the Oracle Multimedia PL/SQL package.</p>
                        <p>The following example shows how to create a thumbnail image from a source BLOB.</p><pre class="pre codeblock"><code> public void thumbnail_example_j(int src_id, int dst_id ) throws SQLException
 {
      //Define the PL/SQL block to create a thumbnail.
      final String createThumbnailStmt  = "DECLARE "
               + "    src_blob      BLOB;"
               + "    dst_blob      BLOB;"
               + "    src_id        NUMBER;"
               + "    dst_id        NUMBER;"
               + "BEGIN"
               + "    src_id := ?;"
               + "    dst_id := ?;"
               + "    DELETE FROM image_blob_table WHERE id = dst_id;"
               + "    INSERT INTO image_blob_table(id, image_blob) "
               + "           VALUES (dst_id, empty_blob()) "
               + "           RETURNING image_blob INTO dst_blob;"
               + "    SELECT image_blob INTO src_blob FROM image_blob_table"
               + "           WHERE id = src_id;"
               + "    ORDSYS.ORD_IMAGE.thumbnail(src_blob,dst_blob);"
               + "    UPDATE image_blob_table SET image_blob = dst_blob"
               + "           WHERE id = dst_id; "
               + "END;";

      final OracleCallableStatement pstmt =
           (OracleCallableStatement)connection.prepareCall(createThumbnailStmt);

      //Binding the variables to the statement.
      pstmt.setInt(1, src_id);
      pstmt.setInt(2, dst_id);
      //Execute the statement.
      pstmt.execute();
      connection.commit();
 }
</code></pre><p>Call thumbnail_example_j( ) passing the source and destination ids.</p><pre class="pre codeblock"><code>      //Create a thumbnail.
   quickstart.thumbnail_example_j(1,2);</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-44F0EC46-A8D0-4714-A488-375F25459004" name="GUID-44F0EC46-A8D0-4714-A488-375F25459004"></a><h4 id="IMURG-GUID-44F0EC46-A8D0-4714-A488-375F25459004" class="sect4"><span class="enumeration_section">2.3.4 </span>Handling Oracle Multimedia Exceptions in Java
                  </h4>
                  <div>
                     <p>This topic demonstrates proper error handling practices using code examples. These examples show how to handle some common Oracle Multimedia errors and other types of errors in Java programs.</p>
                     <div class="section">
                        <p>Possible errors that can occur during run time should always be handled in your application. This practice enables the program to continue its operation even when it encounters a run-time error. This practice also enables users to know what went wrong during program operation. Proper error handling practices ensure that, whenever possible, you are always able to recover from an error while running an application. In addition, proper error handling provides you with the information you need so you always know what went wrong.</p>
                        <p>When handling exceptions, Java uses the try/catch block. For example, in Java, the exception can appear as follows:</p><pre class="oac_no_warn" dir="ltr">try {
    //&lt;some program logic&gt;)
}
catch (exceptionName a) {
//Exception logic
}
finally {
//Execute logic if try block is executed even if an exception is caught
}
</pre><p>When you design, code, and debug your application, you are aware of the places in your program where processing might stop due to a failure to anticipate an error. Those are the places in your program where you must add exception handling blocks to handle the potential errors.</p>
                        <p>The examples in this section describe exception handling using the try/catch block.</p>
                        <p>The following subsections provide additional details and examples of exception handling in Java:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="oracle-multimedia-application-development.html#GUID-58A37BBF-988C-4DD4-9751-527F9B8F37A1" title="This topic shows how to handle exceptions when setting properties for unknown image formats in Java.">Handling the Setting of Properties for Unknown Image Formats in Java</a></p>
                           </li>
                           <li>
                              <p><a href="oracle-multimedia-application-development.html#GUID-2732B9CC-0E91-4F16-A5AC-D3D39652CCA0" title="This topic shows how to handle exceptions when processing images with unknown formats in Java.">Handling Image Processing for Unknown Image Formats in Java</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-44F0EC46-A8D0-4714-A488-375F25459004__GUID-CC547B8B-4F71-424D-9394-6B35EE8168B7">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../jjdev/Oracle-JVM-exception-handling.html#JJDEV13293" target="_blank"><span class="italic">Oracle Database Java Developer's Guide</span></a> for more information about handling Java exceptions
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../jjdbc/JDBC-getting-started.html#JJDBC28078" target="_blank"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for more information about handling Java exceptions using JDBC
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div class="props_rev_3"><a id="GUID-58A37BBF-988C-4DD4-9751-527F9B8F37A1" name="GUID-58A37BBF-988C-4DD4-9751-527F9B8F37A1"></a><h5 id="IMURG-GUID-58A37BBF-988C-4DD4-9751-527F9B8F37A1" class="sect5"><span class="enumeration_section">2.3.4.1 </span>Handling the Setting of Properties for Unknown Image Formats in Java
                     </h5>
                     <div>
                        <p>This topic shows how to handle exceptions when setting properties for unknown image formats in Java.</p>
                        <div class="section">
                           <p>The following try/catch block shows how to handle exceptions on the setProperties( ) method:</p><pre class="oac_no_warn" dir="ltr">    try
    {
      img.setProperties();
      return true;
    }
    catch (SQLException e)
    {
      return false;
    }
</pre><p>If an exception is thrown, the setProperties( ) method returns false to indicate failure; otherwise it returns true.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-2732B9CC-0E91-4F16-A5AC-D3D39652CCA0" name="GUID-2732B9CC-0E91-4F16-A5AC-D3D39652CCA0"></a><h5 id="IMURG-GUID-2732B9CC-0E91-4F16-A5AC-D3D39652CCA0" class="sect5"><span class="enumeration_section">2.3.4.2 </span>Handling Image Processing for Unknown Image Formats in Java
                     </h5>
                     <div>
                        <p>This topic shows how to handle exceptions when processing images with unknown formats in Java.</p>
                        <div class="section">
                           <p>If an application tries to process an image in cases when the image format is unknown, then when the application calls the processCopy( ) method, the application always fails. To work around this potential problem, the application uses the following try/catch block to catch any SQL exceptions:</p><pre class="oac_no_warn" dir="ltr">        try
        {
            image.processCopy( "maxScale=50,50", thumb );
        }
        catch ( SQLException e )
        {
            thumb.deleteContent();
            thumb.setContentLength( 0 );
        }
</pre><p>In this example, when the image format is unknown and a thumbnail image cannot be created, the application catches the SQL exception and calls the deleteContent( ) method to delete the content of the thumbnail image, and then calls the setContentLength( ) method to set its length to zero.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="IMURG2100"></a><div class="props_rev_3"><a id="GUID-263CE3BA-9B63-4B2E-AC4A-FE7B5D2968D6" name="GUID-263CE3BA-9B63-4B2E-AC4A-FE7B5D2968D6"></a><h3 id="IMURG-GUID-263CE3BA-9B63-4B2E-AC4A-FE7B5D2968D6" class="sect3"><span class="enumeration_section">2.4 </span>Developing Multimedia Applications Using PL/SQL
               </h3>
               <div>
                  <p>Using the PL/SQL application programming interface, Oracle Multimedia enables users to develop PL/SQL applications to manipulate audio, image, and video data, or heterogeneous media data stored in a database.</p>
                  <div class="section">
                     <p>PL/SQL is a completely portable, high-performance transaction processing language that combines the data manipulation power of SQL with the data processing power of procedural languages.</p>
                     <p>This topic briefly describes how to manipulate Oracle Multimedia database objects with the PL/SQL application programming interface (API). The following Oracle Multimedia object types are available for storing media in the database:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>ORDAudio</p>
                        </li>
                        <li>
                           <p>ORDDicom</p>
                        </li>
                        <li>
                           <p>ORDDoc</p>
                        </li>
                        <li>
                           <p>ORDImage</p>
                        </li>
                        <li>
                           <p>ORDVideo</p>
                        </li>
                     </ul>
                     <p>Although this topic primarily discusses the Oracle Multimedia object types, the PL/SQL API can also be used to manipulate multimedia data stored directly in BLOBs or BFILEs. The following Oracle Multimedia PL/SQL packages are available for manipulating multimedia data in the database:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>ORD_AUDIO</p>
                        </li>
                        <li>
                           <p>ORD_DICOM</p>
                        </li>
                        <li>
                           <p>ORD_DOC</p>
                        </li>
                        <li>
                           <p>ORD_IMAGE</p>
                        </li>
                        <li>
                           <p>ORD_VIDEO</p>
                        </li>
                     </ul>
                     <p>The examples in this section use the Oracle Database Sample Schemas, which are available on GitHub.</p>
                     <p>The following subsections describe how to develop multimedia applications using PL/SQL:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="oracle-multimedia-application-development.html#GUID-0DFA5C56-E49B-4357-8873-D016144C5B7D" title="This topic describes how to set up directory objects and grant privileges for reading and writing multimedia data to the file system using PL/SQL.">Setting Up Directory Objects for Media Import and Export</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-multimedia-application-development.html#GUID-F51CB292-EA98-4841-8529-7A97FC33BF71" title="This topic uses an example to show how to upload multimedia data in PL/SQL.">Media Upload in PL/SQL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-multimedia-application-development.html#GUID-619B718A-CEFB-48B7-9FC6-DC4B94D1CB60" title="This topic uses examples to show how to query multimedia data in PL/SQL.">Media Query in PL/SQL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-multimedia-application-development.html#GUID-752CE143-808C-438E-A8A5-1D728EE1DF0F" title="This topic uses an example to show how to download multimedia data in PL/SQL.">Media Download in PL/SQL</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-multimedia-application-development.html#GUID-29499457-88B2-445A-A8DB-2F664FA2FB2F" title="This topic demonstrates proper error handling practices using code examples. These examples show how to handle some common Oracle Multimedia errors and other types of errors in PL/SQL programs.">Handling Oracle Multimedia Exceptions in PL/SQL</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-263CE3BA-9B63-4B2E-AC4A-FE7B5D2968D6__GUID-13E7A690-7367-4F07-8009-0A0F3655CD69">
                        <p class="notep1">See Also:</p>
                        <p><a href="../aivug/introduction-to-oracle-multimedia.html#AIVUG1000" target="_blank"><span class="italic">Oracle Multimedia Reference</span></a> for details about the Oracle Multimedia PL/SQL packages and object types
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="IMURG11537"></a><div class="props_rev_3"><a id="GUID-0DFA5C56-E49B-4357-8873-D016144C5B7D" name="GUID-0DFA5C56-E49B-4357-8873-D016144C5B7D"></a><h4 id="IMURG-GUID-0DFA5C56-E49B-4357-8873-D016144C5B7D" class="sect4"><span class="enumeration_section">2.4.1 </span>Setting Up Directory Objects for Media Import and Export
                  </h4>
                  <div>
                     <p>This topic describes how to set up directory objects and grant privileges for reading and writing multimedia data to the file system using PL/SQL.</p>
                     <div class="section">
                        <p>To access files with PL/SQL, you must create a directory object in the database that points to a directory that is accessible by the database server. For example, the following command creates the <code class="codeph">MEDIA_DIR</code> directory in the sample schema:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE DIRECTORY MEDIA_DIR AS
    'c:\oracle\product\10.2.0\db_1\demo\schema\product_media';
</pre><p>To retrieve media data from the database to a file, you must grant the write permission on the specified directory to the appropriate user. For example:</p><pre class="oac_no_warn" dir="ltr">GRANT WRITE ON DIRECTORY MEDIA_DIR TO SCOTT;
</pre><p>To upload media data from a file to the database, you must grant the read permission on the specified directory to the appropriate user. For example:</p><pre class="oac_no_warn" dir="ltr">GRANT READ ON DIRECTORY MEDIA_DIR TO SCOTT;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="IMURG11543"></a><div class="props_rev_3"><a id="GUID-F51CB292-EA98-4841-8529-7A97FC33BF71" name="GUID-F51CB292-EA98-4841-8529-7A97FC33BF71"></a><h4 id="IMURG-GUID-F51CB292-EA98-4841-8529-7A97FC33BF71" class="sect4"><span class="enumeration_section">2.4.2 </span>Media Upload in PL/SQL
                  </h4>
                  <div>
                     <p>This topic uses an example to show how to upload multimedia data in PL/SQL.</p>
                     <div class="section">
                        <p>Media upload means importing media data from the file system into the database tablespaces. The following series of steps is typical:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Insert a new row into the table, creating new objects by using the object constructor of the Oracle Multimedia object type.</span></li>
                        <li><span>Call the import method of the Oracle Multimedia object to bring the data from the file system into the database.</span></li>
                        <li><span>Call the setProperties method of the Oracle Multimedia object to determine and populate the attributes of the object.</span></li>
                        <li><span>Update the table so that the Oracle Multimedia object in the table contains the attribute values extracted in the previous step.</span></li>
                     </ol>
                     <div class="section">
                        <p>The PL/SQL code that implements these steps for inserting a new row in the <code class="codeph">PM.ONLINE_MEDIA</code> table is shown in this example:
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  img ORDImage;
  aud ORDAudio;
  vid ORDVideo;
  ctx RAW(64) := NULL;
BEGIN
  -- Insert a new row into the pm.online_media table.
  DELETE FROM pm.online_media WHERE product_id = 3003;
  INSERT INTO pm.online_media 
         (product_id, 
          product_photo, 
          product_audio,
          product_video)
  VALUES (3003, 
          ORDSYS.ORDImage('FILE','MEDIA_DIR','laptop.jpg',0),
          ORDSYS.ORDAudio('FILE','MEDIA_DIR','laptop.mpa',0),
          ORDSYS.ORDVideo('FILE','MEDIA_DIR','laptop.rm',0))
  RETURNING product_photo, product_audio, product_video
  INTO img, aud, vid;
  
  -- Bring the media into the database and populate the attributes.

    -- ORDImage.import also calls ORDImage.setProperties.
  img.import(ctx); 
  
  aud.import(ctx);
  aud.setProperties(ctx);
 
  vid.import(ctx);
  vid.setProperties(ctx);
    
  -- Update the table with the properties we have extracted.
  UPDATE pm.online_media
  SET    product_photo = img,
         product_audio = aud,
         product_video = vid
  WHERE  product_id = 3003;
  
  COMMIT;
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="IMURG11539"></a><a id="IMURG11540"></a><a id="IMURG11541"></a><a id="IMURG11538"></a><div class="props_rev_3"><a id="GUID-619B718A-CEFB-48B7-9FC6-DC4B94D1CB60" name="GUID-619B718A-CEFB-48B7-9FC6-DC4B94D1CB60"></a><h4 id="IMURG-GUID-619B718A-CEFB-48B7-9FC6-DC4B94D1CB60" class="sect4"><span class="enumeration_section">2.4.3 </span>Media Query in PL/SQL
                  </h4>
                  <div>
                     <p>This topic uses examples to show how to query multimedia data in PL/SQL.</p>
                     <p>You can include media attributes (for example: height, width, and MIME type) in standard SQL queries by using accessor methods (for example: getHeight, getWidth, and getMimeType). <a href="oracle-multimedia-application-development.html#GUID-619B718A-CEFB-48B7-9FC6-DC4B94D1CB60__CHDEDEEB">Example 2-1</a>, <a href="oracle-multimedia-application-development.html#GUID-619B718A-CEFB-48B7-9FC6-DC4B94D1CB60__CHDECAFF">Example 2-2</a>, and <a href="oracle-multimedia-application-development.html#GUID-619B718A-CEFB-48B7-9FC6-DC4B94D1CB60__CHDFJIAA">Example 2-3</a> show how to use these accessor methods to query one or more object attributes for image, audio, and video objects, respectively.
                     </p>
                     <div class="example" id="GUID-619B718A-CEFB-48B7-9FC6-DC4B94D1CB60__CHDEDEEB">
                        <p class="titleinexample">Example 2-1 Image Query (Height, Width, and MimeType Attributes)</p><pre class="oac_no_warn" dir="ltr">SELECT t.product_id                  id,
       t.product_photo.getHeight()   height,
       t.product_photo.getWidth()    width,
       t.product_photo.getMimeType() mimetype
  FROM pm.online_media t;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-619B718A-CEFB-48B7-9FC6-DC4B94D1CB60__CHDECAFF">
                        <p class="titleinexample">Example 2-2 Audio Query (MimeType Attribute)</p><pre class="oac_no_warn" dir="ltr">SELECT t.product_id                  id,
       t.product_audio.getMimeType() mimetype
  FROM pm.online_media t;</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-619B718A-CEFB-48B7-9FC6-DC4B94D1CB60__CHDFJIAA">
                        <p class="titleinexample">Example 2-3 Video Query (MimeType Attribute)</p><pre class="oac_no_warn" dir="ltr">SELECT t.product_id                  id,
       t.product_video.getMimeType() mimetype
  FROM pm.online_media t;</pre></div>
                     <!-- class="example" -->
                  </div>
               </div><a id="IMURG11542"></a><div class="props_rev_3"><a id="GUID-752CE143-808C-438E-A8A5-1D728EE1DF0F" name="GUID-752CE143-808C-438E-A8A5-1D728EE1DF0F"></a><h4 id="IMURG-GUID-752CE143-808C-438E-A8A5-1D728EE1DF0F" class="sect4"><span class="enumeration_section">2.4.4 </span>Media Download in PL/SQL
                  </h4>
                  <div>
                     <p>This topic uses an example to show how to download multimedia data in PL/SQL.</p>
                     <div class="section">
                        <p>To download media from the database into a file on the file system, call the export method of the Oracle Multimedia object. The following code example exports the image in the row with product_id <code class="codeph">3117</code> to a file named <code class="codeph">3117.jpg</code> in the directory <code class="codeph">MEDIA_DIR</code>. This code example highlights in bold the PL/SQL statements where this export operation takes place.
                        </p><pre class="oac_no_warn" dir="ltr">DECLARE
  img ORDImage;
  ctx RAW(64) := NULL;
BEGIN
  SELECT  product_photo 
    INTO  img 
    FROM  pm.online_media
    WHERE <span class="bold"><code class="codeph">product_id = 3117</code></span>;
  <span class="bold"><code class="codeph">img.export(ctx, 'FILE', 'MEDIA_DIR', '3117.jpg');</code></span>
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="IMURG11544"></a><div class="props_rev_3"><a id="GUID-29499457-88B2-445A-A8DB-2F664FA2FB2F" name="GUID-29499457-88B2-445A-A8DB-2F664FA2FB2F"></a><h4 id="IMURG-GUID-29499457-88B2-445A-A8DB-2F664FA2FB2F" class="sect4"><span class="enumeration_section">2.4.5 </span>Handling Oracle Multimedia Exceptions in PL/SQL
                  </h4>
                  <div>
                     <p>This topic demonstrates proper error handling practices using code examples. These examples show how to handle some common Oracle Multimedia errors and other types of errors in PL/SQL programs.</p>
                     <div class="section">
                        <p>Possible errors that can occur during run time should always be handled in your application. This practice enables the program to continue its operation even when it encounters a run-time error. This practice also enables users to know what went wrong during program operation. Proper error handling practices ensure that, whenever possible, you are always able to recover from an error while running an application. In addition, proper error handling provides you with the information you need so you always know what went wrong.</p>
                        <p>When handling exceptions, PL/SQL uses exception blocks. For example, in PL/SQL, the exception can appear as follows:</p><pre class="oac_no_warn" dir="ltr">BEGIN
&lt;some program logic&gt;
EXCEPTION
     WHEN OTHERS THEN
     &lt;some exception logic&gt;
END;
</pre><p>When you design, code, and debug your application, you are aware of the places in your program where processing might stop due to a failure to anticipate an error. Those are the places in your program where you must add exception handling blocks to handle the potential errors. </p>
                        <p>These examples are extracted from the PL/SQL sample applications that are described in <a href="oracle-multimedia-photo-album-sample-application.html#GUID-4F64BE39-7F90-4B17-838F-3BF9163D729E" title="The Oracle Multimedia PL/SQL Web Toolkit Photo Album sample application is a media upload and retrieval Web application using Oracle Multimedia object types. This application uses the PL/SQL Gateway and PL/SQL Web Toolkit.">Oracle Multimedia PL/SQL Photo Album Sample Application</a> and <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-27A7994A-7D2C-474E-B759-EAC45C65CBDD" title="The Oracle Multimedia Code Wizard sample application for the PL/SQL Gateway creates PL/SQL procedures for the PL/SQL Gateway to upload and retrieve multimedia data stored in a database using Oracle Multimedia object types.">Oracle Multimedia Code Wizard Sample Application for the PL/SQL Gateway</a>.
                        </p>
                        <p>The following subsections provide additional details and examples of exception handling in PL/SQL:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="oracle-multimedia-application-development.html#GUID-42CFCBD0-3DA3-4477-899C-742AA0F3EDF5" title="This topic shows how to handle exceptions when setting properties for unknown image formats in PL/SQL.">Handling the Setting of Properties for Unknown Image Formats in PL/SQL</a></p>
                           </li>
                           <li>
                              <p><a href="oracle-multimedia-application-development.html#GUID-C8E88CDE-0DEA-4C68-B722-B780766881D3" title="This topic shows how to handle exceptions when setting properties for unknown image formats in PL/SQL.">Handling Image Processing for Unknown Image Formats in PL/SQL</a></p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-29499457-88B2-445A-A8DB-2F664FA2FB2F__GUID-25AF5600-743E-42E2-90BE-273A07EE8DAC">
                           <p class="notep1">See Also:</p>
                           <p><a href="../lnpls/plsql-error-handling.html#LNPLS007" target="_blank"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for more information about handling PL/SQL exceptions
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div><a id="IMURG11545"></a><div class="props_rev_3"><a id="GUID-42CFCBD0-3DA3-4477-899C-742AA0F3EDF5" name="GUID-42CFCBD0-3DA3-4477-899C-742AA0F3EDF5"></a><h5 id="IMURG-GUID-42CFCBD0-3DA3-4477-899C-742AA0F3EDF5" class="sect5"><span class="enumeration_section">2.4.5.1 </span>Handling the Setting of Properties for Unknown Image Formats in PL/SQL
                     </h5>
                     <div>
                        <p>This topic shows how to handle exceptions when setting properties for unknown image formats in PL/SQL.</p>
                        <div class="section">
                           <p>If your program tries to set the properties of an uploaded image (it reads the image data to get the values of the object attributes so it can store them in the appropriate attribute fields) and the image format is not recognized, then the setProperties( ) method fails. To catch this exception and work around this potential problem, the application uses the following exception block:</p><pre class="oac_no_warn" dir="ltr">BEGIN
   new_image.setProperties();
EXCEPTION
   WHEN OTHERS THEN
         new_image.contentLength := upload_size;
         new_image.mimeType := upload_mime_type;
END;
</pre><p>In this example, this exception handler sets the MIME type and length of the image based on the values from the upload table described at the beginning of the <code class="codeph">insert_new_photo</code> procedure. The browser sets a MIME type header when the file is uploaded. The application reads this header to set the ORDImage field.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="IMURG11546"></a><div class="props_rev_3"><a id="GUID-C8E88CDE-0DEA-4C68-B722-B780766881D3" name="GUID-C8E88CDE-0DEA-4C68-B722-B780766881D3"></a><h5 id="IMURG-GUID-C8E88CDE-0DEA-4C68-B722-B780766881D3" class="sect5"><span class="enumeration_section">2.4.5.2 </span>Handling Image Processing for Unknown Image Formats in PL/SQL
                     </h5>
                     <div>
                        <p>This topic shows how to handle exceptions when setting properties for unknown image formats in PL/SQL.</p>
                        <div class="section">
                           <p>If your program tries to process an image in cases when the image format is unknown, the processCopy( ) method always fails. To work around this potential problem, the application uses the following exception block:</p><pre class="oac_no_warn" dir="ltr">BEGIN
   new_image.processCopy( 'maxScale=50,50', new_thumb);
EXCEPTION
   WHEN OTHERS THEN
      new_thumb.deleteContent();
      new_thumb.contentLength := 0;
END;
</pre><p>In this example from the Oracle Multimedia PL/SQL Web Toolkit Photo Album application, when the image format is unknown and a thumbnail image cannot be created, this exception handler deletes the content of the thumbnail image and sets its length to zero.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div><a id="IMURG2200"></a><div class="props_rev_3"><a id="GUID-5CC45704-BBBC-4403-9413-E5F0D23CBBEB" name="GUID-5CC45704-BBBC-4403-9413-E5F0D23CBBEB"></a><h3 id="IMURG-GUID-5CC45704-BBBC-4403-9413-E5F0D23CBBEB" class="sect3"><span class="enumeration_section">2.5 </span>Developing PL/SQL Web Applications
               </h3>
               <div>
                  <p>You can use the PL/SQL Gateway and PL/SQL Web Toolkit to develop Web applications in PL/SQL.</p>
                  <div class="section">
                     <div class="infoboxnote" id="GUID-5CC45704-BBBC-4403-9413-E5F0D23CBBEB__GUID-76DFF675-F8EF-446E-9869-DC0219AB8120">
                        <p class="notep1">Note:</p>
                        <p>The use of the PL/SQL Gateway and PL/SQL Web Toolkit is suitable for applications that require tight control of the HTTP communication and HTML generation. For other applications, consider using Oracle Application Express, which provides more features and a convenient graphical interface to ease application development.</p>
                     </div>
                     <p>Developing Web applications using PL/SQL consists of developing one or more PL/SQL packages consisting of sets of stored procedures that interact with Web browsers through HTTP. Stored procedures can be executed in several ways:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>From a hypertext link that calls a stored procedure when it is selected</p>
                        </li>
                        <li>
                           <p>By clicking <span class="bold">Submit</span> on an HTML form to denote the completion of a task such as filling out a form supplied on the HTML page
                           </p>
                        </li>
                        <li>
                           <p>By passing parameters to a stored procedure based on user choices from a list</p>
                        </li>
                     </ul>
                     <p>Information in the stored procedure, such as tagged HTML text, is displayed in the Web browser as a Web page. These dynamic Web pages are generated by the database and are based on the database contents and the input parameters passed in to the stored procedure. Using PL/SQL stored procedures is especially efficient and powerful for generating dynamic Web page content. </p>
                     <p>Use Oracle Multimedia when media data such as images, audio, video, or combinations of all three are to be uploaded into and retrieved from database tables, using the functions and procedures in the Oracle Multimedia PL/SQL packages or the Oracle Multimedia object types and their respective sets of methods.</p>
                     <p>Media upload procedures first perform a SQL INSERT operation to insert a row of data in the media table, which also initializes instances of the respective multimedia columns with an empty BLOB. Next, a SQL SELECT FOR UPDATE operation selects the multimedia columns for update. Finally a SQL UPDATE operation updates the multimedia columns. Oracle Multimedia procedures or methods are called to perform these tasks:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Initialize the multimedia columns with an empty BLOB.</p>
                        </li>
                        <li>
                           <p>Set attributes to indicate media data is stored internally in a BLOB, when using Oracle Multimedia object types.</p>
                        </li>
                        <li>
                           <p>Get values of the multimedia attributes and store them.</p>
                        </li>
                        <li>
                           <p>When exceptions occur, determine the length of the BLOB content and its MIME type.</p>
                        </li>
                     </ul>
                     <p>Media retrieval operations involve these tasks:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Retrieving the multimedia data from the database</p>
                        </li>
                        <li>
                           <p>Checking the cache validity of the multimedia data based on its updated time in contrast to that of the HTTP header time</p>
                        </li>
                        <li>
                           <p>Determining where the media data is located: in the database, in a BFILE, or at a URL location; then, getting the media, and downloading it for display on an HTML page</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-multimedia-photo-album-sample-application.html#GUID-4F64BE39-7F90-4B17-838F-3BF9163D729E" title="The Oracle Multimedia PL/SQL Web Toolkit Photo Album sample application is a media upload and retrieval Web application using Oracle Multimedia object types. This application uses the PL/SQL Gateway and PL/SQL Web Toolkit.">Oracle Multimedia PL/SQL Photo Album Sample Application</a></li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-5CC45704-BBBC-4403-9413-E5F0D23CBBEB__GUID-D06D59A4-AC71-4EE3-93CE-DC4C83D87F98">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/imurg&amp;id=HTMDB03000" target="_blank"><span><cite>Oracle Application Express App Builder User’s Guide</cite></span></a> for information about using Oracle Application Express
                           </p>
                        </li>
                        <li>
                           <p><a href="../adfns/web-applications.html#ADFNS-GUID-B7C7170E-69AC-42D2-9597-451B1053209E" target="_blank"><span><cite>Oracle Database Development Guide</cite></span></a> for more information about using PL/SQL Gateway and PL/SQL Web Toolkit
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <a id="IMURG11549"></a><a id="IMURG11550"></a><a id="IMURG11548"></a><a id="IMURG11547"></a><div class="props_rev_3"><a id="GUID-5D68B5F6-160B-401B-B3B0-180FE46B4459" name="GUID-5D68B5F6-160B-401B-B3B0-180FE46B4459"></a><h4 id="IMURG-GUID-5D68B5F6-160B-401B-B3B0-180FE46B4459" class="sect4"><span class="enumeration_section">2.5.1 </span>Using the PL/SQL Gateway and PL/SQL Web Toolkit
                  </h4>
                  <div>
                     <p>You can use the mod_plsql Gateway (a plug-in of Oracle HTTP Server) or the embedded version of the PLSQL Gateway that runs in the XML DB HTTP Listener in the database, to listen for browser requests, to execute stored PL/SQL procedures in the database, and to generate an HTML page containing data and code for the response returned to the Web browser for display.</p>
                     <div class="section">
                        <p>Oracle HTTP Server serves mainly the static HTML files, images, and so on, that a Web application uses, and is usually located in the file system where Oracle HTTP Server is installed. Oracle HTTP Server contains modules or plug-ins that extend its functions. One of these modules supplied by Oracle is the mod_plsql module, also known as the PL/SQL Gateway. The PL/SQL Gateway serves data dynamically from the database to Web browsers by calling PL/SQL stored procedures. The PL/SQL Gateway receives requests from a Web browser that are mapped to PL/SQL stored procedure calls. PL/SQL stored procedures retrieve data from the database and generate an HTTP response containing the data and code from the PL/SQL Web Toolkit to display the generated Web page in a Web browser. The PL/SQL Web Toolkit contains a set of packages (including <code class="codeph">htp</code>, <code class="codeph">htf</code>, and <code class="codeph">owa</code> ) that can be used in the stored procedures to get information about the request, construct HTML tags, and return header information to the client Web browser.
                        </p>
                        <p>The following figure shows these main components: Oracle HTTP Server, the Web browser, and the database.</p>
                        <div class="figure" id="GUID-5D68B5F6-160B-401B-B3B0-180FE46B4459__GUID-D4DF3518-6B05-438F-A746-63F0DF41C7B6">
                           <p class="titleinfigure">Figure 2-1 Components of a PL/SQL Web Application</p><img id="GUID-5D68B5F6-160B-401B-B3B0-180FE46B4459__GUID-AD924828-6510-4940-AC68-0B099B-42A08842" src="img/imurg001b.png" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows" longdesc="img_text/imurg001b.html"><br><a href="img_text/imurg001b.html">Description of "Figure 2-1 Components of a PL/SQL Web Application"</a></div>
                        <!-- class="figure" -->
                        <p>The numbers in the preceding figure represent steps that describe how a client Web browser request is turned into a Web page response from the execution of the PL/SQL procedure:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>A client Web browser sends a PL/SQL server page or servlet request to Oracle HTTP Server.</span></li>
                        <li><span>Oracle HTTP Server routes the request to the PL/SQL Gateway (mod_plsql).</span></li>
                        <li><span>The PL/SQL Gateway forwards the request to the database using configuration information stored in the database access descriptor (DAD) and connects to the database.</span></li>
                        <li><span>The PL/SQL Gateway prepares the call parameters and invokes the PL/SQL package and the PL/SQL stored procedure in the application.</span></li>
                        <li><span>The PL/SQL procedure generates an HTML page using data from the database and special packages in the PL/SQL Web Toolkit accessed from the database. The PL/SQL Web Toolkit contains a set of packages, including <code class="codeph">htp</code>, <code class="codeph">htf</code>, and <code class="codeph">owa</code>, which are used in the stored procedures to get information about the request, construct HTML tags, and return header information to the client Web browser as the response returned to the PL/SQL Gateway.</span></li>
                        <li><span>The PL/SQL Gateway sends the response to Oracle HTTP Server.</span></li>
                        <li><span>Oracle HTTP Server sends the response to the client Web browser for display as a formatted Web page.</span></li>
                     </ol>
                     <div class="example" id="GUID-5D68B5F6-160B-401B-B3B0-180FE46B4459__BABDDDBD">
                        <p class="titleinexample">Example 2-4 URL Format to Invoke mod_plsql in a Web Browser</p><pre class="oac_no_warn" dir="ltr">protocol://hostname[:port number]/DAD-name/[[!][schema name.]
 [package name.]procedure_name[?query_string]]</pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5D68B5F6-160B-401B-B3B0-180FE46B4459__CCHFEFDJ">
                        <p class="titleinexample">Example 2-5 URL Format to Invoke mod_plsql for the Photo Album Application</p><pre class="oac_no_warn" dir="ltr">protocol://<span class="italic"><code class="codeph">&lt;hostname&gt;</code></span>[:<span class="italic"><code class="codeph">&lt;port-number&gt;</code></span>]/DAD-name/]procedure_name
</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p>Usually, the returned formatted Web page has one or more additional links, and each link, when selected, sends another request to the database through the PL/SQL Gateway to execute one or more stored procedures. The generated response displays data on the client Web page usually with additional links, which, when selected, execute more stored procedures that return the generated response for display as yet another formatted Web page, and so on.</p>
                        <p>Web application developers who use the PL/SQL Gateway create a PL/SQL package specification and body that describe procedures and functions that comprise the application. The package specification defines the procedures and functions used by the application, and the package body is the implementation of each procedure and function. All packages are compiled and stored in the database to perform specific operations for accessing data in the database and formatting HTML output for Web page presentation.</p>
                        <p>Oracle HTTP Server maps a URL entered in a browser to a specific PL/SQL procedure stored in the database. It does this by storing specific configuration information in a DAD for each stored procedure. Thus, each DAD contains the database connection information that the Web server requires to translate the URL entered into a database connection to call the stored procedure.</p>
                        <p>Oracle HTTP Server listens for a request, routes the request to the PL/SQL Gateway, which forwards it to the database. Configuration information values stored in a DAD determine the database alias to use, the connection string to use for remote access, the procedure to use for uploading or downloading documents, and the user name and password information to enable access to the database. From the Web browser, the user specifies the URL that invokes the PL/SQL Gateway. The URL has a defined format for specifying all the required and optional parameters, including the location of the DAD and the name of the PL/SQL stored procedure to run, as shown in <a href="oracle-multimedia-application-development.html#GUID-5D68B5F6-160B-401B-B3B0-180FE46B4459__BABDDDBD">Example 2-4</a>.
                        </p>
                        <p>To use the Oracle Multimedia Photo Album sample application and the PL/SQL Web Toolkit, the URL can be simplified to the format shown in <a href="oracle-multimedia-application-development.html#GUID-5D68B5F6-160B-401B-B3B0-180FE46B4459__CCHFEFDJ">Example 2-5</a>.
                        </p>
                        <p>When the URL is entered in the Web browser, it includes the protocol (HTTP or HTTPS), the name of the hosting Web server, and the port number on which it is listening to handle requests. Next, the specified virtual path includes <code class="codeph">/pls/&lt;DAD-name&gt;</code> to indicate that the Web server is configured to invoke mod_plsql, and the location of the DAD on the Web server.
                        </p>
                        <p>In <a href="oracle-multimedia-application-development.html#GUID-5D68B5F6-160B-401B-B3B0-180FE46B4459__BABDDDBD">Example 2-4</a>, the last five parameters include the exclamation point (!) character, schema name, package name, procedure name, and query string. From the syntax, the exclamation point, schema name, package name, and query string parameters are optional; only the procedure name is required.
                        </p>
                        <p>The exclamation point indicates that flexible parameter passing is being used. The schema name, if omitted, is resolved based on the user name. The package name, if omitted, means the procedure is standalone. The query string parameters are for the stored procedure and follow a special format. Of these five parameters, the procedure name must be specified in both the DAD and the URL. The other four parameters are specified in either the DAD or the URL, or not at all, depending on the application. </p>
                        <p>The URL displays the home page for the specified DAD. When the URL is entered in the address field of the Web browser page, it invokes either the specified DAD location only, or the specified DAD location along with the procedure name, or the specified DAD location along with the <code class="codeph">schema.package.procedure</code> name. The response is returned as an HTML page. The HTML page contains the requested data and any other specified code for display in the client's Web browser. The Code Wizard demonstrates how this operation works. For example, to invoke the Code Wizard administration URL, enter the following URL:
                        </p><pre class="oac_no_warn" dir="ltr">http://<span class="italic"><code class="codeph">&lt;hostname&gt;</code></span>:<code class="codeph">&lt;port-number&gt;</code>/pls/ordcwadmin
</pre><p>The virtual path includes <code class="codeph">pls</code> to indicate that the Web server is configured to invoke mod_plsql, followed by the name of the DAD used for the Code Wizard administrator, <code class="codeph">ordcwadmin</code>. 
                        </p>
                        <p>When the HTML page is displayed, it resolves to the following URL for the Code Wizard administrator:</p><pre class="oac_no_warn" dir="ltr">http://<span class="italic"><code class="codeph">&lt;hostname&gt;</code></span>:<span class="italic"><code class="codeph">&lt;port-number&gt;</code></span>/pls/ordcwadmin/ORDCWPKG.menu
</pre><p><code class="codeph">ORDCWPKG.menu</code> represents the <code class="codeph">package.procedure</code> name, which is specified as the default home page in the <code class="codeph">ordcwadmin</code> DAD. 
                        </p>
                        <p>When the PL/SQL Gateway is invoked, it uses the stateless model and does not permit a transaction to span across multiple HTTP requests. In this stateless model, applications typically can create a session to maintain state by using one of these techniques: HTTP cookies, a hidden HTML field as an HTML form element of the HTML Form package, or storage of vital information in database tables for query.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="oracle-multimedia-photo-album-sample-application.html#GUID-4F64BE39-7F90-4B17-838F-3BF9163D729E" title="The Oracle Multimedia PL/SQL Web Toolkit Photo Album sample application is a media upload and retrieval Web application using Oracle Multimedia object types. This application uses the PL/SQL Gateway and PL/SQL Web Toolkit.">Oracle Multimedia PL/SQL Photo Album Sample Application</a></li>
                           <li><a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html#GUID-27A7994A-7D2C-474E-B759-EAC45C65CBDD" title="The Oracle Multimedia Code Wizard sample application for the PL/SQL Gateway creates PL/SQL procedures for the PL/SQL Gateway to upload and retrieve multimedia data stored in a database using Oracle Multimedia object types.">Oracle Multimedia Code Wizard Sample Application for the PL/SQL Gateway</a></li>
                        </ul>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>