<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Image files can contain information about the content of the images, the image pixel data, and image metadata.">
      <meta name="description" content="Image files can contain information about the content of the images, the image pixel data, and image metadata.">
      <title>Working with Metadata in Oracle Multimedia Images</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User's Guide ">
      <meta property="og:description" content="Image files can contain information about the content of the images, the image pixel data, and image metadata.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="multimedia-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-07T03:26:44-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E84257-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-multimedia-tuning-tips-for-dbas.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Multimedia User's Guide">
    <meta name="dcterms.isVersionOf" content="IMURG">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-multimedia-code-wizard-sample-application-plsql-gateway.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-multimedia-tuning-tips-for-dbas.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Working with Metadata in Oracle Multimedia Images </li>
            </ol>
            <a id="GUID-44CDCBB1-6180-4B21-92BD-AE84ECCF44D9" name="GUID-44CDCBB1-6180-4B21-92BD-AE84ECCF44D9"></a><a id="IMURG3500"></a>
            
            <h2 id="IMURG-GUID-44CDCBB1-6180-4B21-92BD-AE84ECCF44D9" class="sect2"><span class="enumeration_chapter">5 </span> Working with Metadata in Oracle Multimedia Images 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Image files can contain information about the content of the images, the image pixel data, and image metadata.</p>
               <p>In general, data about data is referred to as <a href="multimedia-glossary.html#GUID-4A413E30-1E51-4E9D-BF9E-CBB152A20E90"><span class="xrefglossterm">metadata</span></a>. In this case, metadata refers to additional information about the actual images, which is stored in the image files along with the images.
               </p>
               <p>This chapter includes these sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-0F2BDAC8-7331-4218-B5D8-B4250F926F26" title="Several types of metadata can be stored in an image file, and each type can serve a different purpose.">Metadata Concepts</a></p>
                  </li>
                  <li>
                     <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-54B24DB3-ECDF-450F-9AC8-67EEF68128D0" title="For a number of image file formats, Oracle Multimedia can extract and manage a limited set of metadata attributes. These attributes include: height, width, contentLength, fileFormat, contentFormat, compressionFormat, and mimeType. For a limited number of image file formats, Oracle Multimedia can extract a rich set of metadata attributes. This metadata is represented in schema-based XML documents. These XML documents can be stored in a database, indexed, searched, updated, and made available to applications using the standard mechanisms of Oracle Database.">Oracle Multimedia Image Metadata Concepts</a></p>
                  </li>
                  <li>
                     <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-26F1AE74-27D5-45E5-9717-941CA120F0D6" title="Oracle Multimedia supports metadata extraction and metadata embedding for the GIF, TIFF, and JPEG file formats.">Image File Formats</a></p>
                  </li>
                  <li>
                     <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-FC68AED2-6304-4639-A8DA-E96E30A0C801" title="The term image metadata format refers to the standard protocols and techniques used to store image metadata within an image file.">Image Metadata Formats</a></p>
                  </li>
                  <li>
                     <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-B5D93789-DA4C-498B-BA41-819DCEBCD673" title="After metadata has been extracted from the binary image file, the next step is to represent the metadata in a form that can be easily stored, indexed, queried, updated, and presented.">Representing Metadata Outside Images</a></p>
                  </li>
                  <li>
                     <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-186845EF-620A-4301-B76E-7F32A83B3F8D" title="This topic introduces a set of examples that show how to extract and embed image metadata using a table from the Oracle Multimedia PL/SQL Web Toolkit Photo Album sample application.">Oracle Multimedia Image Metadata Examples</a></p>
                  </li>
                  <li>
                     <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-479A14AC-EB6D-4066-B7DC-862BA05FDB81" title="This topic includes a list of references for more information about working with image metadata.">Metadata References</a></p>
                  </li>
               </ul>
            </div><a id="IMURG3510"></a><div class="props_rev_3"><a id="GUID-0F2BDAC8-7331-4218-B5D8-B4250F926F26" name="GUID-0F2BDAC8-7331-4218-B5D8-B4250F926F26"></a><h3 id="IMURG-GUID-0F2BDAC8-7331-4218-B5D8-B4250F926F26" class="sect3"><span class="enumeration_section">5.1 </span>Metadata Concepts
               </h3>
               <div>
                  <p>Several types of metadata can be stored in an image file, and each type can serve a different purpose.</p>
                  <p>One type, <a href="multimedia-glossary.html#GUID-88079D82-5710-4F2F-ABD5-29FF63652F74"><span class="xrefglossterm">technical metadata</span></a>, is used to describe an image in a technical sense. For example, technical metadata can include attributes about an image, such as its height and width, in pixels, or the type of compression used to store it. 
                  </p>
                  <p>Another type, <a href="multimedia-glossary.html#GUID-5CB168A0-261A-409D-9D07-A54CD0911555"><span class="xrefglossterm">content metadata</span></a>, can further describe the content of an image, the name of the photographer, and the date and time when a photograph was taken.
                  </p>
                  <p>Metadata is stored in image files using a variety of mechanisms. Digital cameras and scanners automatically insert metadata into the images they create. Digital photograph processing applications like Adobe Photoshop enable users to add or edit metadata to be stored with the image. Annotating digital images with additional metadata is a common practice in photographic and news gathering applications, for image archiving usages, and at the consumer level.</p>
                  <p>Storing metadata with image data in the same containing file provides encapsulation. With encapsulation, both types of data can be shared and exchanged reliably as one unit. Metadata that is stored in the image file format is referred to as <a href="multimedia-glossary.html#GUID-2E8E33FC-2A34-467F-BA5C-25E307506000"><span class="xrefglossterm">embedded metadata</span></a>.
                  </p>
               </div>
            </div><a id="IMURG3520"></a><div class="props_rev_3"><a id="GUID-54B24DB3-ECDF-450F-9AC8-67EEF68128D0" name="GUID-54B24DB3-ECDF-450F-9AC8-67EEF68128D0"></a><h3 id="IMURG-GUID-54B24DB3-ECDF-450F-9AC8-67EEF68128D0" class="sect3"><span class="enumeration_section">5.2 </span>Oracle Multimedia Image Metadata Concepts
               </h3>
               <div>
                  <p>For a number of image file formats, Oracle Multimedia can extract and manage a limited set of metadata attributes. These attributes include: height, width, contentLength, fileFormat, contentFormat, compressionFormat, and mimeType. For a limited number of image file formats, Oracle Multimedia can extract a rich set of metadata attributes. This metadata is represented in schema-based XML documents. These XML documents can be stored in a database, indexed, searched, updated, and made available to applications using the standard mechanisms of Oracle Database.</p>
                  <p>Oracle Multimedia can also write or embed metadata supplied by users into a limited number of image file formats. The application provides the metadata as a schema-based XML document. Oracle Multimedia processes the XML document and writes the metadata into the image file.</p>
               </div>
            </div><a id="IMURG3530"></a><div class="props_rev_3"><a id="GUID-26F1AE74-27D5-45E5-9717-941CA120F0D6" name="GUID-26F1AE74-27D5-45E5-9717-941CA120F0D6"></a><h3 id="IMURG-GUID-26F1AE74-27D5-45E5-9717-941CA120F0D6" class="sect3"><span class="enumeration_section">5.3 </span>Image File Formats
               </h3>
               <div>
                  <p>Oracle Multimedia supports metadata extraction and metadata embedding for the GIF, TIFF, and JPEG file formats.</p>
                  <div class="infoboxnotealso" id="GUID-26F1AE74-27D5-45E5-9717-941CA120F0D6__GUID-1643713C-F939-43F7-AA3E-DE5740FCA7A3">
                     <p class="notep1">See Also:</p>
                     <p><a href="../aivug/image-file-compression-formats-for-oracle-multimedia.html#AIVUG30000" target="_blank"><span class="italic">Oracle Multimedia Reference</span></a> for information about the image file formats supported by Oracle Multimedia
                     </p>
                  </div>
               </div>
            </div><a id="IMURG3540"></a><div class="props_rev_3"><a id="GUID-FC68AED2-6304-4639-A8DA-E96E30A0C801" name="GUID-FC68AED2-6304-4639-A8DA-E96E30A0C801"></a><h3 id="IMURG-GUID-FC68AED2-6304-4639-A8DA-E96E30A0C801" class="sect3"><span class="enumeration_section">5.4 </span>Image Metadata Formats
               </h3>
               <div>
                  <p>The term image metadata format refers to the standard protocols and techniques used to store image metadata within an image file.</p>
                  <p>The following subsections describe the embedded image metadata formats supported by Oracle Multimedia:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-7911232F-993C-4D7C-990D-86E11231CDC5" title="Oracle Multimedia supports the extraction of EXIF metadata from TIFF and JPEG file formats.">EXIF</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-BAFA857B-305C-485E-B773-8A99C300D387" title="Oracle Multimedia supports the extraction of IPTC metadata from TIFF and JPEG file formats.">IPTC&#x2013;IIM</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-7EF26E6B-E735-4CFF-95EA-D5AB3565AA70" title="Oracle Multimedia supports the extraction of XMP metadata from GIF, TIFF, and JPEG file formats. Oracle Multimedia also supports writing XMP data packets into GIF, TIFF, and JPEG file formats.">XMP</a></p>
                     </li>
                  </ul>
               </div><a id="IMURG11645"></a><div class="props_rev_3"><a id="GUID-7911232F-993C-4D7C-990D-86E11231CDC5" name="GUID-7911232F-993C-4D7C-990D-86E11231CDC5"></a><h4 id="IMURG-GUID-7911232F-993C-4D7C-990D-86E11231CDC5" class="sect4"><span class="enumeration_section">5.4.1 </span>EXIF
                  </h4>
                  <div>
                     <p>Oracle Multimedia supports the extraction of EXIF metadata from TIFF and JPEG file formats.</p>
                     <div class="section">
                        <p>The Exchangeable Image File Format (EXIF) is the standard for image file storage for digital still cameras. It was developed by the Japan Electronic Industry Development Association (JEIDA) as a standard way of storing images created by digital cameras and metadata about the images. EXIF image metadata can be stored in TIFF and JPEG format images.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="IMURG11646"></a><div class="props_rev_3"><a id="GUID-BAFA857B-305C-485E-B773-8A99C300D387" name="GUID-BAFA857B-305C-485E-B773-8A99C300D387"></a><h4 id="IMURG-GUID-BAFA857B-305C-485E-B773-8A99C300D387" class="sect4"><span class="enumeration_section">5.4.2 </span>IPTC&#x2013;IIM
                  </h4>
                  <div>
                     <p>Oracle Multimedia supports the extraction of IPTC metadata from TIFF and JPEG file formats.</p>
                     <div class="section">
                        <p>The International Press Telecommunications Council-Information Interchange Model (IPTC-IIM) Version 4 is a standard developed jointly by the International Press Telecommunications Council and the Newspaper Association of America. This metadata standard is designed to capture information that is important to the activities of news gathering, reporting, and publishing. These information records are commonly referred to as IPTC tags.</p>
                        <p>The use of embedded IPTC tags in image file formats became widespread with the use of the Adobe Photoshop tool for image editing. IPTC metadata can be stored in TIFF and JPEG format images.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="IMURG11647"></a><div class="props_rev_3"><a id="GUID-7EF26E6B-E735-4CFF-95EA-D5AB3565AA70" name="GUID-7EF26E6B-E735-4CFF-95EA-D5AB3565AA70"></a><h4 id="IMURG-GUID-7EF26E6B-E735-4CFF-95EA-D5AB3565AA70" class="sect4"><span class="enumeration_section">5.4.3 </span>XMP
                  </h4>
                  <div>
                     <p>Oracle Multimedia supports the extraction of XMP metadata from GIF, TIFF, and JPEG file formats. Oracle Multimedia also supports writing XMP data packets into GIF, TIFF, and JPEG file formats.</p>
                     <div class="section">
                        <p>The Extensible Metadata Platform (XMP) is a standard metadata format, developed by Adobe, for the creation, processing, and interchange of metadata in a variety of applications. XMP uses Resource Description Framework (RDF) technology for data modeling. XMP also defines how the data model is serialized (converted to a byte stream), and embedded within an image file.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="IMURG3550"></a><div class="props_rev_3"><a id="GUID-B5D93789-DA4C-498B-BA41-819DCEBCD673" name="GUID-B5D93789-DA4C-498B-BA41-819DCEBCD673"></a><h3 id="IMURG-GUID-B5D93789-DA4C-498B-BA41-819DCEBCD673" class="sect3"><span class="enumeration_section">5.5 </span>Representing Metadata Outside Images
               </h3>
               <div>
                  <p>After metadata has been extracted from the binary image file, the next step is to represent the metadata in a form that can be easily stored, indexed, queried, updated, and presented.</p>
                  <p>Oracle Multimedia returns image metadata in XML documents. These documents are based on XML schemas that Oracle Multimedia registers with the database. Each type of image metadata has a separate XML schema. These XML schemas are used by the metadata procedures and methods of the ORD_IMAGE PL/SQL package and the ORDImage object type, respectively.</p>
                  <p>The XML documents can be stored in XMLType columns within the database. These documents are easily searched and processed using the wide range of standards-based XML technologies provided by Oracle XML DB.</p>
                  <div class="infoboxnotealso" id="GUID-B5D93789-DA4C-498B-BA41-819DCEBCD673__GUID-7F265F4E-A64A-4441-9B54-39FC2613FF30">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../aivug/oracle-multimedia-metadata-xml-schemas.html#AIVUG65000" target="_blank"><span class="italic">Oracle Multimedia Reference</span></a> for complete definitions of the XML schemas supported by Oracle Multimedia
                           </p>
                        </li>
                        <li>
                           <p><a href="../adxdb/query-and-update-XML.html#ADXDB0400" target="_blank"><span class="italic">Oracle XML DB Developer's Guide</span></a> for more information about the XML technologies provided by Oracle XML DB
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="IMURG3560"></a><div class="props_rev_3"><a id="GUID-186845EF-620A-4301-B76E-7F32A83B3F8D" name="GUID-186845EF-620A-4301-B76E-7F32A83B3F8D"></a><h3 id="IMURG-GUID-186845EF-620A-4301-B76E-7F32A83B3F8D" class="sect3"><span class="enumeration_section">5.6 </span>Oracle Multimedia Image Metadata Examples
               </h3>
               <div>
                  <p>This topic introduces a set of examples that show how to extract and embed image metadata using a table from the Oracle Multimedia PL/SQL Web Toolkit Photo Album sample application.</p>
                  <p>The following examples of metadata extraction and embedding use the <code class="codeph">photos</code> table, which is defined by the Photo Album sample application. The implementation of the Photo Album sample application is defined in the PL/SQL package <code class="codeph">PHOTO_ALBUM</code>. 
                  </p>
                  <p>The <code class="codeph">photos</code> table stores two instances of an image: the full-size photograph and a thumbnail image. This table can also store up to four different image metadata documents. These documents are stored in the columns named <code class="codeph">metaORDImage</code>, <code class="codeph">metaEXIF</code>, <code class="codeph">metaIPTC</code>, and <code class="codeph">metaXMP</code>, and represent image metadata from the ORDImage, EXIF, IPTC, and XMP metadata formats, respectively. The metadata columns are of type XMLType, and they are bound to the corresponding metadata XML schemas that Oracle Multimedia provides.
                  </p>
                  <p>The following subsections describe some operations you can perform with image metadata using the ORDImage object type:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-68D48753-5C4C-4AAF-B735-249B11581594" title="Before you can extract or embed metadata, you must create the table and columns where the metadata is to be stored.">Creating a Table for Metadata Storage</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-77F65E73-4627-407D-8923-A329453A60C7" title="This topic uses an example to show how to extract image metadata.">Extracting Image Metadata</a></p>
                     </li>
                     <li>
                        <p><a href="working-with-metadata-in-oracle-multimedia-images.html#GUID-3898ABB8-1ECF-4AF5-B5AC-89A61755BA95" title="This topic uses an example to show how to embed image metadata.">Embedding Image Metadata</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-186845EF-620A-4301-B76E-7F32A83B3F8D__GUID-9AD3963E-9763-491A-A439-A4480E726FE3">
                     <p class="notep1">Note:</p>These examples could have used BLOBs to store the image and thumbnail image, and the ORD_IMAGE PL/SQL package instead of ORDImage object methods.
                  </div>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="oracle-multimedia-photo-album-sample-application.html#GUID-4F64BE39-7F90-4B17-838F-3BF9163D729E" title="The Oracle Multimedia PL/SQL Web Toolkit Photo Album sample application is a media upload and retrieval Web application using Oracle Multimedia object types. This application uses the PL/SQL Gateway and PL/SQL Web Toolkit.">Oracle Multimedia PL/SQL Photo Album Sample Application</a></li>
                     </ul>
                  </div>
               </div>
               <a id="IMURG11648"></a><div class="props_rev_3"><a id="GUID-68D48753-5C4C-4AAF-B735-249B11581594" name="GUID-68D48753-5C4C-4AAF-B735-249B11581594"></a><h4 id="IMURG-GUID-68D48753-5C4C-4AAF-B735-249B11581594" class="sect4"><span class="enumeration_section">5.6.1 </span>Creating a Table for Metadata Storage
                  </h4>
                  <div>
                     <p>Before you can extract or embed metadata, you must create the table and columns where the metadata is to be stored.</p>
                     <div class="section">
                        <p>The following PL/SQL code segment creates the <code class="codeph">photos</code> table with four XMLTYPE columns (<code class="codeph">metaORDImage</code>, <code class="codeph">metaEXIF</code>, <code class="codeph">metaIPTC</code>, and <code class="codeph">metaXMP</code>) to store each type of image metadata, and two ORDIMAGE columns (<code class="codeph">image</code> and <code class="codeph">thumb</code>) for the original image and the thumbnail image, respectively. Although this example shows the use of the ORDImage object type, the columns <code class="codeph">image</code> and <code class="codeph">thumb</code> could be of type BLOB rather than ORDImage.
                        </p>
                        <p>Each metadata column is bound to its corresponding metadata schema. For example, the column <code class="codeph">metaEXIF</code> is bound to the XML schema with namespace <code class="codeph">http://xmlns.oracle.com/ord/meta/exif</code>, and is defined as the XML element <code class="codeph">exifMetadata</code>.
                        </p>
                        <p>The code statements where the image metadata columns are defined and bound to XML schemas are highlighted in bold.</p><pre class="oac_no_warn" dir="ltr">--
-- Create the PHOTOS table
--
CREATE TABLE photos( id           NUMBER PRIMARY KEY,
                     description  VARCHAR2(40) NOT NULL,
                     <span class="bold">metaORDImage XMLTYPE,</span>
                     <span class="bold">metaEXIF     XMLTYPE,</span>
                     <span class="bold">metaIPTC     XMLTYPE,</span>
                     <span class="bold">metaXMP      XMLTYPE,</span>
                     image        ORDSYS.ORDIMAGE,
                     thumb        ORDSYS.ORDIMAGE )
--
-- store full-size images and thumbnail images as SecureFiles LOBs
--
LOB(image.source.localdata) STORE AS SECUREFILE
LOB(thumb.source.localdata) STORE AS SECUREFILE
-- and bind the XMLType columns to the Oracle Multimedia metadata schemas
<span class="bold">XMLType COLUMN metaORDImage</span>
  XMLSCHEMA "http://xmlns.oracle.com/ord/meta/ordimage"
  ELEMENT "ordImageAttributes"
<span class="bold">XMLType COLUMN metaEXIF</span>
  XMLSCHEMA "http://xmlns.oracle.com/ord/meta/exif"
  ELEMENT "exifMetadata"
<span class="bold">XMLType COLUMN metaIPTC</span>
  XMLSCHEMA "http://xmlns.oracle.com/ord/meta/iptc"
  ELEMENT "iptcMetadata"
<span class="bold">XMLType COLUMN metaXMP</span>
  XMLSCHEMA "http://xmlns.oracle.com/ord/meta/xmp"
  ELEMENT "xmpMetadata";</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="IMURG11649"></a><div class="props_rev_3"><a id="GUID-77F65E73-4627-407D-8923-A329453A60C7" name="GUID-77F65E73-4627-407D-8923-A329453A60C7"></a><h4 id="IMURG-GUID-77F65E73-4627-407D-8923-A329453A60C7" class="sect4"><span class="enumeration_section">5.6.2 </span>Extracting Image Metadata
                  </h4>
                  <div>
                     <p>This topic uses an example to show how to extract image metadata.</p>
                     <div class="section">
                        <p>The following PL/SQL procedure extracts metadata from an image and stores it in the specified columns in the <code class="codeph">photos</code> table you created. This procedure demonstrates the getMetadata( ) method, which returns an array of XML documents. The root element of each document is examined to determine the metadata type. The UPDATE statement stores the documents in the corresponding columns in the <code class="codeph">photos</code> table.
                        </p>
                        <p>The code statement where the getMetadata( ) method is called is highlighted in bold.</p><pre class="oac_no_warn" dir="ltr">--
-- fetch the metadata and sort the results
--
PROCEDURE extractMetadata(inID IN INTEGER)
IS
  img ORDSYS.ORDIMAGE;
  metav XMLSequenceType;
  meta_root VARCHAR2(40);
  xmlORD XMLType;
  xmlXMP XMLType;
  xmlEXIF XMLType;
  xmlIPTC XMLType;
 
BEGIN
 
-- select the image
SELECT image
INTO img
FROM PHOTOS
WHERE id = inID;

-- extract all the metadata
<span class="bold">metav := img.getMetadata( 'ALL' );</span>
 
-- process the result array to discover what types of metadata were
returned
FOR i IN 1..metav.count() LOOP
  meta_root := metav(i).getRootElement();
  CASE meta_root
    WHEN 'ordImageAttributes' THEN xmlORD := metav(i);
    WHEN 'xmpMetadata' THEN xmlXMP := metav(i);
    WHEN 'iptcMetadata' THEN xmlIPTC := metav(i);
    WHEN 'exifMetadata' THEN xmlEXIF := metav(i);
    ELSE NULL;
  END CASE;
END LOOP;

-- Update metadata columns
--
UPDATE photos
SET metaORDImage = xmlORD,
    metaEXIF = xmlEXIF,
    metaIPTC = xmlIPTC,
    metaXMP = xmlXMP
WHERE id = inID;
 
END extractMetadata;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="IMURG11650"></a><div class="props_rev_3"><a id="GUID-3898ABB8-1ECF-4AF5-B5AC-89A61755BA95" name="GUID-3898ABB8-1ECF-4AF5-B5AC-89A61755BA95"></a><h4 id="IMURG-GUID-3898ABB8-1ECF-4AF5-B5AC-89A61755BA95" class="sect4"><span class="enumeration_section">5.6.3 </span>Embedding Image Metadata
                  </h4>
                  <div>
                     <p>This topic uses an example to show how to embed image metadata.</p>
                     <div class="section">
                        <p>The following PL/SQL procedure demonstrates the putMetadata( ) method. This procedure accepts six arguments. The <code class="codeph">entry_id</code> argument identifies the image in the <code class="codeph">photos</code> table to be updated. The remaining arguments (<code class="codeph">title</code>, <code class="codeph">creator</code>, <code class="codeph">date</code>, <code class="codeph">description</code>, and <code class="codeph">copyright</code>) are strings to be formatted into an XMP packet and embedded within the target image.
                        </p>
                        <p>This example creates an XML document instance based on the Oracle Multimedia XML schema for XMP metadata. (This schema is preregistered with Oracle XML DB. ) The schema for XMP metadata defines a single, global element <code class="codeph">&lt;xmpMetadata&gt;</code>. The &lt;xmpMetadata&gt; element contains a single, well-formed RDF document. The RDF document contains a single <code class="codeph">&lt;RDF&gt;</code> element, which is derived from the <code class="codeph">rdf</code> namespace. This RDF document is constructed using elements defined by the Dublin Core schema.
                        </p>
                        <p>The call to the putMetadata( ) method embeds the metadata document into the image file. The UPDATE statement stores the new image and the new metadata back in the <code class="codeph">photos</code> table.
                        </p>
                        <p>The code statement where the putMetadata( ) method is called is highlighted in bold.</p><pre class="oac_no_warn" dir="ltr">--
-- write the metadata to the image
--
PROCEDURE write_metadata( entry_id IN VARCHAR2,
                          title IN VARCHAR2,
                          creator IN VARCHAR2,
                          date IN VARCHAR2,
                          description IN VARCHAR2,
                          copyright IN VARCHAR2 )
IS
  img ORDSYS.ORDImage;
  xmp XMLType;
  buf VARCHAR2(5000);
BEGIN
-- select the image
SELECT image
INTO img
FROM PHOTOS
WHERE id = entry_id FOR UPDATE;

-- Create the XMP packet it must be schema valid
-- to "http://xmlns.oracle.com/ord/meta/xmp"
-- and contain an &lt;RDF&gt; element. This example uses
-- the Dublin Core schema.

/* An example XML instance document
 
&lt;xmpMetadata xmlns="http://xmlns.oracle.com/ord/meta/xmp" 
              xsi:schemaLocation="http://xmlns.oracle.com/ord/meta/xmp 
              http://xmlns.oracle.com/ord/meta/xmp" 
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
 
  &lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"&gt;
    &lt;rdf:Description about="" xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;
      &lt;dc:title&gt;A Winter Day&lt;/dc:title&gt;
      &lt;dc:creator&gt;Frosty S. Man&lt;/dc:creator&gt;
      &lt;dc:date&gt;21-Dec-2004&lt;/dc:date&gt;
      &lt;dc:description&gt;a sleigh ride&lt;/dc:description&gt;
      &lt;dc:copyright&gt;North Pole Inc.&lt;/dc:copyright&gt;
    &lt;/rdf:Description&gt;
  &lt;/rdf:RDF&gt;
&lt;/xmpMetadata&gt;
 
*/
 
buf := '&lt;xmpMetadata xmlns="http://xmlns.oracle.com/ord/meta/xmp"
         xsi:schemaLocation="http://xmlns.oracle.com/ord/meta/xmp
         http://xmlns.oracle.com/ord/meta/xmp"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" &gt;
  &lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"&gt;
  &lt;rdf:Description about="" xmlns:dc="http://purl.org/dc/elements/1.1/"&gt;';
 
IF title IS NOT NULL THEN
  buf := buf || '&lt;dc:title&gt;' || htf.escape_sc(title) || '&lt;/dc:title&gt;';
END IF;
 
IF creator IS NOT NULL THEN
  buf := buf || '&lt;dc:creator&gt;' || htf.escape_sc(creator)
             || '&lt;/dc:creator&gt;';
END IF;
IF date IS NOT NULL THEN
  buf := buf || '&lt;dc:date&gt;' || htf.escape_sc(date)
             || '&lt;/dc:date&gt;';
END IF;
IF description IS NOT NULL THEN
  buf := buf || '&lt;dc:description&gt;' || htf.escape_sc(description)
             || '&lt;/dc:description&gt;';
END IF;
IF copyright IS NOT NULL THEN
  buf := buf || '&lt;dc:copyright&gt;' || htf.escape_sc(copyright)
             || '&lt;/dc:copyright&gt;';
END IF;
 
buf := buf || '
  &lt;/rdf:Description&gt;
  &lt;/rdf:RDF&gt;
  &lt;/xmpMetadata&gt;';

-- create the XML document
xmp := XMLType.createXML(buf, 'http://xmlns.oracle.com/ord/meta/xmp');
 
-- write the metadata
<span class="bold">img.putMetadata( xmp, 'XMP' );</span>
 
-- update the image
UPDATE photos
SET image = img,
    metaXMP = xmp
WHERE id = entry_id;
 
END write_Metadata;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="IMURG3570"></a><div class="props_rev_3"><a id="GUID-479A14AC-EB6D-4066-B7DC-862BA05FDB81" name="GUID-479A14AC-EB6D-4066-B7DC-862BA05FDB81"></a><h3 id="IMURG-GUID-479A14AC-EB6D-4066-B7DC-862BA05FDB81" class="sect3"><span class="enumeration_section">5.7 </span>Metadata References
               </h3>
               <div>
                  <p>This topic includes a list of references for more information about working with image metadata.</p>
                  <p>The following Web sites provide information about standards and technologies related to working with metadata in images.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Dublin Core, a standard schema for Dublin core elements</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/imurg&amp;id=dublincore_org" target="_blank"><span class="italic">Dublin Core Metadata Initiative</span></a></p>
                     </li>
                     <li>
                        <p>Extensible Metadata Platform (XMP), an open source file labeling technology for embedding metadata into files</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/imurg&amp;id=adobe_com_xmp" target="_blank"><span class="italic">Extensible Metadata Platform</span></a></p>
                     </li>
                     <li>
                        <p>Resource Description Framework (RDF), a standard model for interchanging data on the Web (See <span class="italic">RDF Primer</span>)
                        </p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/imurg&amp;id=w3_org_rdf" target="_blank"><span class="italic">Resource Description Framework</span></a></p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>