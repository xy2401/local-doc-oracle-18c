<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Oracle Trace File Analyzer monitors your logs for significant problems, such as internal errors like ORA-00600, or node evictions.">
      <meta name="description" content="Oracle Trace File Analyzer monitors your logs for significant problems, such as internal errors like ORA-00600, or node evictions.">
      <title>Automatic Diagnostic Collections</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User’s Guide">
      <meta property="og:description" content="Oracle Trace File Analyzer monitors your logs for significant problems, such as internal errors like ORA-00600, or node evictions.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.1.1">
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-03-04T16:09:07-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83825-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      <meta name="dcterms.release" content="Release 18">
      <link rel="prev" href="quick-start-guide.html" title="Previous" type="text/html">
      <link rel="next" href="ondemand-diagnostic-collection.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide">
    <meta name="dcterms.isVersionOf" content="ATNMS">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="quick-start-guide.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="ondemand-diagnostic-collection.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User’s Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="diagnose-troubleshoot-issues-errors.html" property="item" typeof="WebPage"><span property="name">Collecting Diagnostic Data and Triaging, Diagnosing, and Resolving Issues</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Automatic Diagnostic Collections</li>
            </ol>
            <a id="GUID-45A5F39E-B1A6-4F89-947D-EA9E8FBA7ED5" name="GUID-45A5F39E-B1A6-4F89-947D-EA9E8FBA7ED5"></a>
            
            <h2 id="ATNMS-GUID-45A5F39E-B1A6-4F89-947D-EA9E8FBA7ED5" class="sect2"><span class="enumeration_chapter">15 </span>Automatic Diagnostic Collections
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Trace File Analyzer monitors your logs for significant problems, such as internal errors like <code class="codeph">ORA-00600</code>, or node evictions.
               </p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="automatic-diagnostic-collection.html#GUID-7F20FDA6-C06D-460D-991A-7F4F0EB1BDE7">Collecting Diagnostics Automatically</a><br>This section explains automatic diagnostic collection concepts.
                  </li>
                  <li class="ulchildlink"><a href="automatic-diagnostic-collection.html#GUID-43E119D1-5111-4721-83C6-4ED118E4308C">Configuring Email Notification Details</a><br>Configure Oracle Trace File Analyzer to send an email to the registered email address after an automatic collection completes.
                  </li>
               </ul>
            </div>
            
            <div class="sect2"><a id="GUID-7F20FDA6-C06D-460D-991A-7F4F0EB1BDE7" name="GUID-7F20FDA6-C06D-460D-991A-7F4F0EB1BDE7"></a><h3 id="ATNMS-GUID-7F20FDA6-C06D-460D-991A-7F4F0EB1BDE7" class="sect3"><span class="enumeration_section">15.1 </span>Collecting Diagnostics Automatically
               </h3>
               <div>
                  <p>This section explains automatic diagnostic collection concepts.</p>
                  <p>If Oracle Trace File Analyzer detects any problems, then it carries out the following actions:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Runs necessary diagnostics and collects all relevant log data at the time of a problem</p>
                     </li>
                     <li>
                        <p>Trims log files around the time of the problem so that Oracle Trace File Analyzer collects only what is necessary for diagnosis</p>
                     </li>
                     <li>
                        <p>Collects and packages all trimmed diagnostics from all nodes in the cluster, consolidating everything on a single node</p>
                     </li>
                     <li>
                        <p>Stores diagnostic collections in the Oracle Trace File Analyzer repository</p>
                     </li>
                     <li>
                        <p>Sends you email notification of the problem and details of diagnostic collection that is ready for upload to Oracle Support</p>
                     </li>
                  </ul>
                  <div class="p">
                     <div class="figure" id="GUID-7F20FDA6-C06D-460D-991A-7F4F0EB1BDE7__GUID-9F39AB11-695E-4694-9703-02FFE52167BD">
                        <p class="titleinfigure">Figure 15-1 Automatic Diagnostic Collections</p><img src="img/tfa-automatic-collections-18c.png" alt="Description of Figure 15-1 follows" title="Description of Figure 15-1 follows" longdesc="img_text/tfa-automatic-collections-18c.html"><br><a href="img_text/tfa-automatic-collections-18c.html">Description of "Figure 15-1 Automatic Diagnostic Collections"</a></div>
                     <!-- class="figure" -->
                  </div>
                  <p>Oracle Trace File Analyzer uses a flood control mechanism. Repeated errors do not flood the system with automatic collections.</p>
                  <p>Identifying an event triggers the start point for a collection and five minutes later Oracle Trace File Analyzer starts collecting diagnostic data. Starting five minutes later is to capture any other relevant events together. If events are still occurring after five minutes, then diagnostic collection continues to wait. Oracle Trace File Analyzer waits for 30 seconds with no events occurring, up to a further five minutes.</p>
                  <p>If events are still occurring after 10 minutes, then a diagnostic collection happens. A new collection point starts.</p>
                  <p>After the collection is complete, Oracle Trace File Analyzer sends email notification that includes the location of the collection, to the relevant recipients.</p>
                  <p>If your environment can make a connection to <span class="bold">oracle.com</span>, you can then use Oracle Trace File Analyzer to upload the collection to a Service Request.
                  </p><pre class="pre codeblock"><code>$ tfactl set autodiagcollect=<code class="codeph">ON|OFF</code></code></pre><p>Automatic collections are <code class="codeph">ON</code> by default.
                  </p>
                  <div class="tblformal" id="GUID-7F20FDA6-C06D-460D-991A-7F4F0EB1BDE7__GUID-7B9BA79C-01D8-4306-A484-A321DEFAF646">
                     <p class="titleintable">Table 15-1 Log Entries that Trigger Automatic collection</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Log Entries that Trigger Automatic collection" summary="This table lists and describes log entries that trigger automatic collection." frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d33579e100">String Pattern</th>
                              <th align="left" valign="bottom" width="20%" id="d33579e102">Log Monitored</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d33579e106" headers="d33579e100 ">
                                 <p><code class="codeph">ORA-297(01|02|03|08|09|10|40)</code></p>
                                 <p><code class="codeph">ORA-00600</code></p>
                                 <p><code class="codeph">ORA-07445</code></p>
                                 <p><code class="codeph">ORA-04(69|([7-8][0-9]|9([0-3]|[5-8])))</code></p>
                                 <p><code class="codeph">ORA-32701</code></p>
                                 <p><code class="codeph">ORA-00494</code></p>
                                 <p>System State dumped</p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d33579e106 d33579e102 ">
                                 <p>Alert Log - Oracle Database</p>
                                 <p>Alert Log - Oracle ASM</p>
                                 <p>Alert Log - Oracle ASM Proxy</p>
                                 <p>Alert Log - Oracle ASM IO Server</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d33579e137" headers="d33579e100 ">
                                 <p><code class="codeph">CRS-016(07|10|11|12)</code></p>
                              </td>
                              <td align="left" valign="top" width="20%" headers="d33579e137 d33579e102 ">
                                 <p>Alert Log - CRS</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="ondemand-diagnostic-collection.html#GUID-FFAA01BE-6891-4C67-85B2-65D664F8B1CB" title="To enable collection uploads, configure Oracle Trace File Analyzer with your My Oracle Support user name and password.">Uploading Collections to Oracle Support</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-43E119D1-5111-4721-83C6-4ED118E4308C" name="GUID-43E119D1-5111-4721-83C6-4ED118E4308C"></a><h3 id="ATNMS-GUID-43E119D1-5111-4721-83C6-4ED118E4308C" class="sect3"><span class="enumeration_section">15.2 </span>Configuring Email Notification Details
               </h3>
               <div>
                  <p>Configure Oracle Trace File Analyzer to send an email to the registered email address after an automatic collection completes.</p>
                  <div class="p">To send emails, configure the system on which Oracle Trace Analyzer is running. You must configure notification with a user email address to enable it to work. </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2">To configure email notification details:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>To set the notification email to use for a specific <code class="codeph">ORACLE_HOME</code>, include the operating system owner in the command:</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl set notificationAddress=<span class="variable">os_user</span>:<span class="variable">email</span></code></pre></div>
                           <div class="p">For example:<pre class="pre codeblock"><code>tfactl set notificationAddress=oracle:some.body@example.com</code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>To set the notification email to use for any <code class="codeph">ORACLE_HOME</code>:</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl set notificationAddress=<span class="variable">email</span></code></pre></div>
                           <div class="p">For example:<pre class="pre codeblock"><code>tfactl set notificationAddress=another.body@example.com</code></pre></div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Do the following after receiving the notification email:</span><ol type="a">
                           <li><span>To find the root cause, inspect the referenced collection details.</span></li>
                           <li><span>If you can fix the issue, then resolve the underlying cause of the problem.</span></li>
                           <li><span>If you do not know the root cause of the problem, then log an SR with Oracle Support, and upload the collection details.</span></li>
                        </ol>
                     </li>
                  </ol>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>