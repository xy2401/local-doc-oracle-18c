<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="These are the PL/SQL bugs in Oracle Database 18c.">
      <meta name="description" content="These are the PL/SQL bugs in Oracle Database 18c.">
      <title>PL/SQL Known Bugs</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Release Notes">
      <meta property="og:description" content="These are the PL/SQL bugs in Oracle Database 18c.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Release Notes">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="oracle-database-release-notes.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-15T21:36:07-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E89587-12">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="open-bugs-for-all-platforms.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-asm-bugs.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Oracle Database Release Notes">
    <meta name="dcterms.isVersionOf" content="RNRDM">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="open-bugs-for-all-platforms.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-asm-bugs.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Release Notes</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="issues-all-platforms.html" property="item" typeof="WebPage"><span property="name">Issues Affecting All Platforms for Oracle Database 18c</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="open-bugs-for-all-platforms.html" property="item" typeof="WebPage"><span property="name">Open Bugs Affecting All Platforms</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">PL/SQL Known Bugs</li>
            </ol>
            <a id="GUID-4801B459-73BC-491C-8A14-FC95908D9C4D" name="GUID-4801B459-73BC-491C-8A14-FC95908D9C4D"></a>
            
            <h2 id="RNRDM-GUID-4801B459-73BC-491C-8A14-FC95908D9C4D" class="sect2">PL/SQL Known Bugs</h2>
         </header>
         <div class="ind">
            <p>These are the PL/SQL bugs in Oracle Database 18c.</p>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="pl-sql-bugs.html#GUID-A0EB14E7-D759-46F4-B438-A5F6DB1C3761">Bug 5910872</a><br></li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="open-bugs-for-all-platforms.html#GUID-FA6B67B2-4423-499A-AD31-DE1176CF6A41" title="This section describes known bugs in Oracle Database 18c that affect all platforms.">Open Bugs Affecting All Platforms</a></p>
                  </div>
               </div>
            </div>
            
            <div class="props_rev_3"><a id="GUID-A0EB14E7-D759-46F4-B438-A5F6DB1C3761" name="GUID-A0EB14E7-D759-46F4-B438-A5F6DB1C3761"></a><h3 id="RNRDM-GUID-A0EB14E7-D759-46F4-B438-A5F6DB1C3761" class="sect3">Bug 5910872</h3>
               <div>
                  <div class="section">
                     <p>In Oracle Database releases prior to 18c, the PL/SQL compiler collected metadata for a PL/SQL package type argument and all of its nested types, and inserted that data into dictionary tables such that the data could be viewed using the <code class="codeph">ALL</code>, <code class="codeph">DBA</code>, and <code class="codeph">USER_ARGUMENTS</code> user views. For instance, consider the following type declarations in the package <code class="codeph">NestedTypesExample</code>:
                     </p><pre class="pre codeblock"><code>Type Level2Record is RECORD (Field1 NUMBER); Type Level1Collection is TABLE of 
Level2Record index by binary_integer; Type Level0Record is RECORD (Field1 
Level1Collection); Procedure NestedTypesProc (Param1 Level0Record);</code></pre><p>When the <code class="codeph">ALL</code>, <code class="codeph">DBA</code>, and <code class="codeph">USER_ARGUMENTS</code> user views are queried, the top-level type of the <code class="codeph">NestedTypeProc</code> procedure,<code class="codeph"> parameter Param1</code>, <code class="codeph">Level0Record</code>, is returned along with an expanded description of all the nested types within <code class="codeph">Level0Record</code>.
                     </p><pre class="pre codeblock"><code>SQL&gt; select argument_name,type_subname,position,sequence,data_level from 
user_arguments where object_name='NESTEDTYPESPROC'; 
ARGUMENT_NAME    TYPE_SUBNAME       POSITION    SEQUENCE  DATA_LEVEL 
---------------  -----------------  ----------  --------  ---------- 
PARAM1           LEVEL0RECORD              1           1           0 
FIELD1           LEVEL1COLLECTION          1           2           1 
                 LEVEL2RECORD              1           3           2 
FIELD1                                     1           4           3</code></pre><p>This metadata is stored because the PL/SQL package type descriptive metadata was not user accessible in the way that metadata is accessible for top-level object types. With top-level object types and collections, you can query <code class="codeph">ALL_TYPES</code> and the associated user views, <code class="codeph">ALL_TYPE_ATTRS</code> and <code class="codeph">ALL_COLL_TYPES</code>, to obtain type metadata. However, before Oracle Database 12<span class="italic">c</span> Release 1 (12.1), type metadata for PL/SQL package types, such as records and packaged collections, could not be obtained. Therefore, function or procedure parameters that referenced those PL/SQL package types resulted in publishing all of the metadata about these types in the <code class="codeph">ARGUMENTS</code> views, including any nested types.
                     </p>
                     <p>Deeply nested types can consume extensive memory in the <code class="codeph">SYS</code> tablespace. Also, because there is no way to share the type metadata in the <code class="codeph">ARGUMENTS</code> views, each parameter with deeply nested types requires its own redundant copy of the type metadata. Copious amounts of metadata in the <code class="codeph">ARGUMENTS</code> views and <code class="codeph">SYS</code> tablespace can lead to various issues, including PL/SQL compiler performance degradation. The degradation occurs because of the time it takes PL/SQL to update rows in the underlying dictionary tables.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-A0EB14E7-D759-46F4-B438-A5F6DB1C3761__GUID-5B700E8A-306E-48C2-8B1F-63D373420BAD">Workaround:</p>
                     <p>In Oracle Database 12<span class="italic">c</span> Release 1 (12.1), PL/SQL introduced enhanced support for package types, including the new user views, <code class="codeph">ALL_PLSQL_TYPES</code>, <code class="codeph">ALL_PLSQL_TYPE_ATTRS</code>, and <code class="codeph">ALL_PLSQL_COLL_TYPES</code>. As the names imply, these views allow users to query metadata about PL/SQL package types.
                     </p>
                     <p>Because of the package type support that was added with Oracle Database 12<span class="italic">c</span> Release 1 (12.1), there was no longer a need for the PL/SQL compiler to insert large amounts of descriptive metadata into the <code class="codeph">ARGUMENTS</code> views. A single row of metadata that includes the type name was all that was required in the <code class="codeph">ARGUMENTS</code> views for each parameter type. You can obtain a full description of the type name, and any nested types, in a query against the PL/SQL type views.
                     </p>
                     <p>Beginning with Oracle Database 18c, the <code class="codeph">ARGUMENTS</code> views contain fewer rows. In particular, only top-level (<code class="codeph">DATA_LEVEL=0</code>) items are stored in the <code class="codeph">ARGUMENTS</code> views.
                     </p>
                     <p>For instance, the query shown returns the following reduced number of rows (only those rows where <code class="codeph">DATA_LEVEL=0</code>) when run in Oracle Database 18c:
                     </p><pre class="pre codeblock"><code>ARGUMENT_NAME    TYPE_SUBNAME       POSITION    SEQUENCE  DATA_LEVEL 
---------------  -----------------  ----------  --------  ---------- 
PARAM1           LEVEL0RECORD              1           1           0</code></pre><p><code class="codeph">OCIDescribeAny()</code> is based on the same metadata used by the <code class="codeph">ARGUMENTS</code> views. <code class="codeph">OCIDescribeAny()</code> also returns a single row for each parameter type, instead of the multiple rows commonly returned before the change in Oracle Database 12<span class="italic">c</span> Release 1 (12.1).
                     </p>
                     <p><code class="codeph">ALL</code>, <code class="codeph">DBA</code>, and <code class="codeph">USER_ARGUMENTS</code> user views also contain a new column type, <code class="codeph">TYPE_OBJECT_TYPE</code>. To determine the type of the type described by <code class="codeph">TYPE_OWNER</code>, <code class="codeph">TYPE_NAME</code> and <code class="codeph">TYPE_SUBNAME</code>, use the <code class="codeph">TYPE_OBJECT_TYPE</code> column. The possible values include <code class="codeph">TABLE</code>, <code class="codeph">VIEW</code>, <code class="codeph">PACKAGE</code>, and <code class="codeph">TYPE</code>.
                     </p>
                     <p>If you require the previous behavior for collecting argument metadata, then you can set events to <code class="codeph">events='10946, level 65536'</code>. Setting this event reverts the <code class="codeph">ARGUMENTS</code> views to the behavior in Oracle Database releases earlier than Oracle Database 18c, in which <code class="codeph">DATA_LEVEL</code> can be greater than <code class="codeph">0</code>, and descriptive metadata for the type and any nested types are included in the view. If you make this change, then you must recompile the affected packages after you set the event. When you recompile the affected packages, the compiler recollects the additional metadata. This event also reverts <code class="codeph">OCIDescribeAny()</code> to the behavior in releases earlier than Oracle Database 18c.
                     </p>
                     <p>Starting in Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2), if you entered a procedure with no arguments, then the <code class="codeph">ARGUMENTS</code> views did not have any rows. This is an additional change separate from the row reduction change to the <code class="codeph">ARGUMENTS</code> views. Before Oracle Database 12<span class="italic">c</span> Release 1 (12.1.0.2), a procedure with no arguments was presented as a single row in the <code class="codeph">ARGUMENTS</code> views.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="pl-sql-bugs.html#GUID-4801B459-73BC-491C-8A14-FC95908D9C4D" title="These are the PL/SQL bugs in Oracle Database 18c.">PL/SQL Known Bugs</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>