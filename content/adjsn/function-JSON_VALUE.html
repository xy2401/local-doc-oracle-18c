<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="SQL/JSON function json_value selects a scalar value from JSON data and returns it as a SQL value.">
      <meta name="description" content="SQL/JSON function json_value selects a scalar value from JSON data and returns it as a SQL value.">
      <title>SQL/JSON Function JSON_VALUE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="JSON Developer's Guide">
      <meta property="og:description" content="SQL/JSON function json_value selects a scalar value from JSON data and returns it as a SQL value.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="JSON Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="json-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-22T14:01:42-08:00">
      <meta name="dcterms.title" content="JSON Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="2015, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83706-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="condition-JSON_EXISTS.html" title="Previous" type="text/html">
      <link rel="next" href="function-JSON_QUERY.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ADJSN">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="condition-JSON_EXISTS.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="function-JSON_QUERY.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">JSON Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="query-json-data.html" property="item" typeof="WebPage"><span property="name">Query JSON Data</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">SQL/JSON Function JSON_VALUE</li>
            </ol>
            <a id="GUID-0565F0EE-5F13-44DD-8321-2AC142959215" name="GUID-0565F0EE-5F13-44DD-8321-2AC142959215"></a>
            
            <h2 id="ADJSN-GUID-0565F0EE-5F13-44DD-8321-2AC142959215" class="sect2"><span class="enumeration_chapter">15 </span>SQL/JSON Function JSON_VALUE
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>SQL/JSON function <code class="codeph">json_value</code> selects a <span class="italic">scalar</span> value from JSON data and returns it as a SQL value. 
               </p>
               <div class="section">
                  <p>You can also use <code class="codeph">json_value</code> to create function-based B-tree indexes for use with JSON data — see <a href="indexes-for-json-data.html#GUID-8A1B098E-D4FE-436E-A715-D8B465655C0D" title="You can index JSON data as you would any data of the type you use to store it. In addition, you can define a JSON search index, which is useful for both ad hoc structural queries and full-text queries.">Indexes for JSON Data</a>.
                  </p>
                  <p>Function <code class="codeph">json_value</code> has two required arguments and accepts optional returning and error clauses.
                  </p>
                  <p>The first argument to <code class="codeph">json_value</code> is a SQL expression that returns an instance of a scalar SQL data type (that is, not an object or collection data type). It can be of data type <code class="codeph">VARCHAR2</code>, <code class="codeph">BLOB</code>, <code class="codeph">or CLOB</code>. It can be a table or view column value, a PL/SQL variable, or a bind variable with proper casting. The result of evaluating the SQL expression is used as the <span class="italic">context item</span> for evaluating the path expression.
                  </p>
                  <p>The second argument to <code class="codeph">json_value</code> is a SQL/JSON path expression followed by optional clauses <code class="codeph">RETURNING</code>, <code class="codeph">ON ERROR</code>, and <code class="codeph">ON EMPTY</code>. The path expression must target a single scalar value, or else an error occurs.
                  </p>
                  <p>The <span class="italic">default</span> error-handling behavior is <code class="codeph">NULL ON ERROR</code>, which means that no value is returned if an error occurs — an error is not raised. In particular, if the path expression targets a non-scalar value, such as an array, no error is raised, by default. To ensure that an error is raised, use <code class="codeph">ERROR ON ERROR</code>.
                  </p>
                  <div class="infoboxnote" id="GUID-0565F0EE-5F13-44DD-8321-2AC142959215__GUID-42EC1D20-D6AC-40FC-935E-11F83178558D">
                     <p class="notep1">Note:</p>
                     <p>Each field name in a given JSON object is not necessarily unique; the same field name may be repeated. The streaming evaluation that Oracle Database employs always uses only one of the object members that have a given field name; any other members with the same field name are ignored. It is unspecified which of multiple such members is used.</p>
                     <p>See also <a href="conditions-is-json-and-is-not-json.html#GUID-305EFFC0-B7AA-4752-90A0-3DA895A93FAE" title="By default, field names need not be unique for a given JSON object. But you can specify that particular JSON data is to be considered well-formed only if none of its objects have duplicate field names.">Unique Versus Duplicate Fields in JSON Objects</a>.
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section"></div>
               <!-- class="section" -->
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-0565F0EE-5F13-44DD-8321-2AC142959215__GUID-F1A8DDCD-EFB9-45C1-968F-0935A3E4D865">
                     <p class="notep1">See Also:</p>
                     <p><a href="../sqlrf/JSON_VALUE.html#SQLRF56668" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information about <code class="codeph">json_value</code></p>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="function-JSON_VALUE.html#GUID-FD4E6FFA-8865-4682-B66A-79F77CBACD50">Using SQL/JSON Function JSON_VALUE With a Boolean JSON Value</a><br>JSON has the Boolean values <code class="codeph">true</code> and <code class="codeph">false</code>. When SQL/JSON function <code class="codeph">json_value</code> evaluates a SQL/JSON path expression and the result is JSON <code class="codeph">true</code> or <code class="codeph">false</code>, it can be returned to PL/SQL as a <code class="codeph">BOOLEAN</code> value, or it can be returned to SQL as the <code class="codeph">VARCHAR2</code> value <code class="codeph">'true'</code> or <code class="codeph">'false'</code>.
                  </li>
                  <li class="ulchildlink"><a href="function-JSON_VALUE.html#GUID-932E0BDE-E78E-4052-A053-A0618276FD7A">SQL/JSON Function JSON_VALUE Applied to a null JSON Value</a><br>SQL/JSON function <code class="codeph">json_value</code> applied to JSON value <code class="codeph">null</code> returns SQL <code class="codeph">NULL</code>, not the SQL string <code class="codeph">'null'</code>. This means, in particular, that you cannot use <code class="codeph">json_value</code> to distinguish the JSON value <code class="codeph">null</code> from the absence of a value; SQL <code class="codeph">NULL</code> indicates both cases.
                  </li>
                  <li class="ulchildlink"><a href="function-JSON_VALUE.html#GUID-EE2FCC3C-3CAC-428D-9A33-85A563ABB00F">JSON_VALUE as JSON_TABLE</a><br>SQL/JSON function <code class="codeph">json_value</code> can be viewed as a special case of function <code class="codeph">json_table</code>. 
                  </li>
               </ul>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-DE9F29D3-1C23-4271-9DCD-E585866576D2" title="SQL/JSON query functions json_value and json_query accept an optional RETURNING clause, which specifies the data type of the value returned by the function. This clause and the default behavior (no RETURNING clause) are described here.">RETURNING Clause for SQL/JSON Query Functions</a></li>
                     <li><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-55344240-B1F0-490A-89BF-1526FA0546D4" title="Some SQL/JSON query functions and conditions accept an optional error clause, which specifies handling for a runtime error that is raised by the function or condition. This clause and the default behavior (no error clause) are summarized here.">Error Clause for SQL/JSON Query Functions and Conditions</a></li>
                     <li><a href="clauses-used-in-functions-and-conditions-for-json.html#GUID-3176ECEA-BBCE-4C7C-AB24-7FCE250B8443" title="SQL/JSON query functions json_value, json_query, and json_table accept an optional ON EMPTY clause, which specifies the handling to use when a targeted JSON field is absent from the data queried. This clause and the default behavior (no ON EMPTY clause) are described here.">Empty-Field Clause for SQL/JSON Query Functions</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="query-json-data.html#GUID-119E5069-77F2-45DC-B6F0-A1B312945590" title="You can query JSON data using a simple dot notation or, for more functionality, using SQL/JSON functions and conditions. You can create and query a data guide that summarizes the structure and type information of a set of JSON documents.">Query JSON Data</a></p>
                  </div>
               </div>
            </div>
            <a id="ADXDB6265"></a><a id="ADXDB6264"></a><div class="props_rev_3"><a id="GUID-FD4E6FFA-8865-4682-B66A-79F77CBACD50" name="GUID-FD4E6FFA-8865-4682-B66A-79F77CBACD50"></a><h3 id="ADJSN-GUID-FD4E6FFA-8865-4682-B66A-79F77CBACD50" class="sect3"><span class="enumeration_section">15.1 </span>Using SQL/JSON Function JSON_VALUE With a Boolean JSON Value
               </h3>
               <div>
                  <p>JSON has the Boolean values <code class="codeph">true</code> and <code class="codeph">false</code>. When SQL/JSON function <code class="codeph">json_value</code> evaluates a SQL/JSON path expression and the result is JSON <code class="codeph">true</code> or <code class="codeph">false</code>, it can be returned to PL/SQL as a <code class="codeph">BOOLEAN</code> value, or it can be returned to SQL as the <code class="codeph">VARCHAR2</code> value <code class="codeph">'true'</code> or <code class="codeph">'false'</code>.
                  </p>
                  <div class="section">
                     <p>In PL/SQL code, <code class="codeph">BOOLEAN</code> is a valid PL/SQL return type for built-in PL/SQL function <code class="codeph">json_value</code>. <a href="function-JSON_VALUE.html#GUID-FD4E6FFA-8865-4682-B66A-79F77CBACD50__EXAMPLE-133-F0C76E9B">Example 15-1</a> illustrates this.
                     </p>
                     <p>Oracle SQL has no Boolean data type, so a string  (<code class="codeph">VARCHAR2</code>) value is used to return a JSON Boolean value. <a href="function-JSON_VALUE.html#GUID-FD4E6FFA-8865-4682-B66A-79F77CBACD50__CACFHCDC">Example 15-2</a> illustrates this — the query returns the string <code class="codeph">'true'</code>.
                     </p>
                     <p>SQL/JSON function <code class="codeph">json_table</code> generalizes other SQL/JSON query functions such as <code class="codeph">json_value</code>. When you use it to project a JSON Boolean value, <code class="codeph">json_value</code> is used implicitly, and the resulting SQL value is returned as a <code class="codeph">VARCHAR2</code> value. The data type of the projection column must therefore be <code class="codeph">VARCHAR2</code>.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-FD4E6FFA-8865-4682-B66A-79F77CBACD50__EXAMPLE-133-F0C76E9B">
                     <p class="titleinexample">Example 15-1 JSON_VALUE: Returning a JSON Boolean Value to PL/SQL as BOOLEAN</p>
                     <p>PL/SQL also has exception handling. This example uses clause <code class="codeph">ERROR ON ERROR</code>, to raise an error (which can be handled by user code) in case of error.
                     </p><pre class="pre codeblock"><code>DECLARE
  b BOOLEAN;
  jsonData CLOB;
BEGIN
  SELECT po_document INTO jsonData FROM j_purchaseorder WHERE rownum = 1;
   &nbsp;&nbsp;b := json_value(jsonData, '$.AllowPartialShipment'
                    <span class="bold">RETURNING BOOLEAN</span>
                    <span class="bold">ERROR ON ERROR</span>);
END;
/&nbsp;</code></pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-FD4E6FFA-8865-4682-B66A-79F77CBACD50__CACFHCDC">
                     <p class="titleinexample">Example 15-2 JSON_VALUE: Returning a JSON Boolean Value to SQL as VARCHAR2</p><pre class="pre codeblock"><code>SELECT json_value(po_document, '$.AllowPartialShipment')
  FROM j_purchaseorder;</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="function-JSON_VALUE.html#GUID-EE2FCC3C-3CAC-428D-9A33-85A563ABB00F" title="SQL/JSON function json_value can be viewed as a special case of function json_table.">JSON_VALUE as JSON_TABLE</a></li>
                        <li><a href="function-JSON_TABLE.html#GUID-5CDC25A8-A516-44B8-9C8F-0CE666933903" title="SQL/JSON function json_table generalizes SQL/JSON condition json_exists and SQL/JSON functions json_value and json_query. Everything that you can do using these functions you can do using json_table. For the jobs they accomplish, the syntax of these functions is simpler to use than is the syntax of json_table.">JSON_TABLE Generalizes SQL/JSON Query Functions and Conditions</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="function-JSON_VALUE.html#GUID-0565F0EE-5F13-44DD-8321-2AC142959215" title="SQL/JSON function json_value selects a scalar value from JSON data and returns it as a SQL value.">SQL/JSON Function JSON_VALUE</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB6286"></a><div class="props_rev_3"><a id="GUID-932E0BDE-E78E-4052-A053-A0618276FD7A" name="GUID-932E0BDE-E78E-4052-A053-A0618276FD7A"></a><h3 id="ADJSN-GUID-932E0BDE-E78E-4052-A053-A0618276FD7A" class="sect3"><span class="enumeration_section">15.2 </span>SQL/JSON Function JSON_VALUE Applied to a null JSON Value
               </h3>
               <div>
                  <p>SQL/JSON function <code class="codeph">json_value</code> applied to JSON value <code class="codeph">null</code> returns SQL <code class="codeph">NULL</code>, not the SQL string <code class="codeph">'null'</code>. This means, in particular, that you cannot use <code class="codeph">json_value</code> to distinguish the JSON value <code class="codeph">null</code> from the absence of a value; SQL <code class="codeph">NULL</code> indicates both cases.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="function-JSON_VALUE.html#GUID-0565F0EE-5F13-44DD-8321-2AC142959215" title="SQL/JSON function json_value selects a scalar value from JSON data and returns it as a SQL value.">SQL/JSON Function JSON_VALUE</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="ADXDB6383"></a><a id="ADXDB6382"></a><div class="props_rev_3"><a id="GUID-EE2FCC3C-3CAC-428D-9A33-85A563ABB00F" name="GUID-EE2FCC3C-3CAC-428D-9A33-85A563ABB00F"></a><h3 id="ADJSN-GUID-EE2FCC3C-3CAC-428D-9A33-85A563ABB00F" class="sect3"><span class="enumeration_section">15.3 </span>JSON_VALUE as JSON_TABLE
               </h3>
               <div>
                  <p>SQL/JSON function <code class="codeph">json_value</code> can be viewed as a special case of function <code class="codeph">json_table</code>. 
                  </p>
                  <p><a href="function-JSON_VALUE.html#GUID-EE2FCC3C-3CAC-428D-9A33-85A563ABB00F__CACFCDEI">Example 15-3</a> illustrates the equivalence: the two <code class="codeph">SELECT</code> statements have the same effect.
                  </p>
                  <p>In addition to perhaps helping you understand <code class="codeph">json_value</code> better, this equivalence is important practically, because it means that you can use either function to get the same effect. 
                  </p>
                  <p>In particular, if you use <code class="codeph">json_value</code> more than once, or you use it in combination with <code class="codeph">json_exists</code> or <code class="codeph">json_query</code> (which can also be expressed using <code class="codeph">json_table</code>), to access the same data, then a single invocation of <code class="codeph">json_table</code> presents the advantage that the data is parsed only once.
                  </p>
                  <p>Because of this, the optimizer often automatically rewrites multiple invocations of <code class="codeph">json_exists</code>, <code class="codeph">json_value</code> and <code class="codeph">json_query</code> (any combination) to fewer invocations of <code class="codeph">json_table</code>.
                  </p>
                  <div class="section"></div>
                  <!-- class="section" -->
                  <div class="example" id="GUID-EE2FCC3C-3CAC-428D-9A33-85A563ABB00F__CACFCDEI">
                     <p class="titleinexample">Example 15-3 JSON_VALUE Expressed Using JSON_TABLE</p><pre class="pre codeblock"><code>SELECT <span class="bold">json_value</span>(<span class="italic">column</span>, <span class="italic">json_path</span> <span class="bold">RETURNING</span> <span class="italic">data_type</span> <span class="italic">error_hander</span> <span class="bold">ON ERROR</span>)
  FROM <span class="italic">table</span>;

SELECT <span class="italic">jt.column_alias</span>
  FROM <span class="italic">table</span>,
       <span class="bold">json_table</span>(<span class="italic">column</span>, <span class="bold">'$'</span> <span class="italic">error_handler</span> ON ERROR
         <span class="bold">COLUMNS</span> ("<span class="italic">COLUMN_ALIAS</span>" <span class="italic">data_type</span> <span class="bold">PATH</span> <span class="italic">json_path</span>)) <span class="bold">AS</span> "<span class="italic">JT</span>";
</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="function-JSON_TABLE.html#GUID-5CDC25A8-A516-44B8-9C8F-0CE666933903" title="SQL/JSON function json_table generalizes SQL/JSON condition json_exists and SQL/JSON functions json_value and json_query. Everything that you can do using these functions you can do using json_table. For the jobs they accomplish, the syntax of these functions is simpler to use than is the syntax of json_table.">JSON_TABLE Generalizes SQL/JSON Query Functions and Conditions</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="function-JSON_VALUE.html#GUID-0565F0EE-5F13-44DD-8321-2AC142959215" title="SQL/JSON function json_value selects a scalar value from JSON data and returns it as a SQL value.">SQL/JSON Function JSON_VALUE</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>