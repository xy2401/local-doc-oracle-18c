<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Before installing Oracle Grid Infrastructure, you must identify and determine how many devices are available for use by Oracle ASM, the amount of free disk space available on each disk, and the redundancy level to use with Oracle ASM.">
      <meta name="description" content="Before installing Oracle Grid Infrastructure, you must identify and determine how many devices are available for use by Oracle ASM, the amount of free disk space available on each disk, and the redundancy level to use with Oracle ASM.">
      <title>Identifying Storage Requirements for Using Oracle ASM for Shared Storage</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Grid Infrastructure Installation and Upgrade Guide">
      <meta property="og:description" content="Before installing Oracle Grid Infrastructure, you must identify and determine how many devices are available for use by Oracle ASM, the amount of free disk space available on each disk, and the redundancy level to use with Oracle ASM.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Grid Infrastructure Installation and Upgrade Guide for Microsoft Windows">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="grid-infrastructure-installation-and-upgrade-guide-microsoft-windows.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-11-15T23:27:28-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2012, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83915-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="configuring-storage-for-oracle-asm.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-clusterware-storage-requirements.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Grid Infrastructure Installation and Upgrade Guide for Microsoft Windows">
    <meta name="dcterms.isVersionOf" content="CWWIN">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="configuring-storage-for-oracle-asm.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-clusterware-storage-requirements.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Grid Infrastructure Installation and Upgrade Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="configuring-storage-for-oracle-asm.html" property="item" typeof="WebPage"><span property="name">Configuring Storage for Oracle Automatic Storage Management</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Identifying Storage Requirements for Using Oracle ASM for Shared Storage</li>
            </ol>
            <a id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706" name="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706"></a>
            
            <h2 id="CWWIN-GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706" class="sect2"><span class="enumeration_section">7.1 </span>Identifying Storage Requirements for Using Oracle ASM for Shared Storage
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Before installing Oracle Grid Infrastructure, you must identify and determine how many devices are available for use by Oracle ASM, the amount of free disk space available on each disk, and the redundancy level to use with Oracle ASM. </p>
               <div class="section">
                  <p>When Oracle ASM provides redundancy, you must have sufficient capacity in each disk group to manage a re-creation of data that is lost after a failure of one or two failure groups. </p>
                  <div class="infobox-tip" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-308BE25E-8C2B-43CF-BAC1-46A26C6D6572">
                     <p class="notep1">Tip:</p>As you progress through the following steps, make a list of the raw device names you intend to use to create the Oracle ASM disk groups and have this information available during the Oracle Grid Infrastructure installation or when creating your Oracle RAC database.
                  </div>
               </div>
               <!-- class="section" -->
               <ol>
                  <li class="stepexpand"><span>Plan your Oracle ASM disk groups requirement. If you choose to store the Grid Infrastructure Management Repository (GIMR) on a separate Oracle ASM disk group, then you require two separate Oracle ASM disk groups, one for OCR and voting files and the other for the GIMR.</span></li>
                  <li class="stepexpand"><span>Determine whether you want to use Oracle ASM for Oracle Database files, recovery files, or all file types. Oracle Database files include data files, control files, redo log files, the server parameter file, and the password file.</span><div>
                        <div class="infoboxnote" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-92B17E05-78BA-47F7-A05C-02BA68BD9D52">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>You do not have to use the same storage mechanism for Oracle Database files and recovery files. You can use a shared file system for one file type and Oracle ASM for the other.</p>
                              </li>
                              <li>
                                 <p>There are two types of Oracle Clusterware files: OCR files and voting files. You must use Oracle ASM to store OCR and voting files.</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </li>
                  <li class="stepexpand"><span>Choose the Oracle ASM redundancy level to use for the Oracle ASM disk group.</span><div>
                        <p>The redundancy level that you choose for the Oracle ASM disk group determines how Oracle ASM mirrors files in the disk group, and determines the number of disks and amount of disk space that you require. Except when using external redundancy, Oracle ASM mirrors all Oracle Clusterware files in separate failure groups within a disk group. A quorum failure group, a special type of failure group, contains mirror copies of voting files when voting files are stored in normal or high redundancy disk groups. The disk groups that contain Oracle Clusterware files (OCR and voting files) have a higher minimum number of failure groups than other disk groups because the voting files are stored in quorum failure groups in the Oracle ASM disk group.</p>
                        <p>A <span class="bold">quorum failure group</span> is a special type of failure group that stores the Oracle Clusterware voting files. The quorum failure group ensures that a quorum of the specified failure groups are available. When Oracle ASM mounts a disk group that contains Oracle Clusterware files, the quorum failure group determines if the disk group can be mounted in the event of the loss of one or more failure groups. Disks in the quorum failure group do not contain user data, therefore a quorum failure group is not considered when determining redundancy requirements in respect to storing user data.
                        </p>
                        <p>The redundancy levels are as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>High redundancy</p>
                              <p>In a high redundancy disk group, Oracle ASM uses three-way mirroring to increase performance and provide the highest level of reliability. A high redundancy disk group requires a minimum of three disk devices (or three failure groups). The effective disk space in a high redundancy disk group is <span class="italic">one-third</span> the sum of the disk space in all of its devices.
                              </p>
                              <p>For Oracle Clusterware files, a high redundancy disk group requires a minimum of five disk devices and provides five voting files and one OCR (one primary and two secondary copies). For example, your deployment may consist of three regular failure groups and two quorum failure groups. Note that not all failure groups can be quorum failure groups, even though voting files need all five disks. With high redundancy, the cluster can survive the loss of two failure groups.</p>
                              <p>While high redundancy disk groups provide a high level of data protection, you should consider the greater cost of additional storage devices before deciding to select high redundancy disk groups.</p>
                           </li>
                           <li>
                              <p>Normal redundancy</p>
                              <p>In a normal redundancy disk group, to increase performance and reliability, Oracle ASM by default uses two-way mirroring. A normal redundancy disk group requires a minimum of two disk devices (or two failure groups). The effective disk space in a normal redundancy disk group is <span class="italic">half</span> the sum of the disk space in all of its devices.
                              </p>
                              <p>For Oracle Clusterware files, a normal redundancy disk group requires a minimum of three disk devices and provides three voting files and one OCR (one primary and one secondary copy). For example, your deployment may consist of two regular failure groups and one quorum failure group. With normal redundancy, the cluster can survive the loss of one failure group.</p>
                              <p>If you are not using a storage array providing independent protection against data loss for storage, then Oracle recommends that you select normal redundancy.</p>
                           </li>
                           <li>
                              <p>External redundancy</p>
                              <p>An external redundancy disk group requires a minimum of one disk device. The effective disk space in an external redundancy disk group is the sum of the disk space in all of its devices.</p>
                              <p>Because Oracle ASM does not mirror data in an external redundancy disk group, Oracle recommends that you use external redundancy with storage devices such as RAID, or other similar devices that provide their own data protection mechanisms.</p>
                           </li>
                           <li>
                              <p>Flex redundancy</p>
                              <p>A flex redundancy disk group is a type of redundancy disk group with features such as flexible file redundancy, mirror splitting, and redundancy change. A flex disk group can consolidate files with different redundancy requirements into a single disk group. It also provides the capability for databases to change the redundancy of its files. A disk group is a collection of file groups, each associated with one database. A quota group defines the maximum storage space or quota limit of a group of databases within a disk group.</p>
                              <p>In a flex redundancy disk group, Oracle ASM uses three-way mirroring of Oracle ASM metadata to increase performance and provide reliability. For database data, you can choose no mirroring (unprotected), two-way mirroring (mirrored), or three-way mirroring (high). A flex redundancy disk group requires a minimum of three disk devices (or three failure groups).</p>
                           </li>
                           <li>
                              <p>Extended redundancy</p>
                              <p>Extended redundancy disk group has similar features as the flex redundancy disk group. Extended redundancy is available when you configure an Oracle Extended Cluster. Extended redundancy extends Oracle ASM data protection to cover failure of sites by placing enough copies of data in different failure groups of each site. A site is a collection of failure groups. For extended redundancy with three sites, for example, two data sites, and one quorum failure group, the minimum number of disks is seven (three disks each for two data sites and one quorum failure group outside the two data sites). The maximum number of supported sites for extended redundancy is three. In an extended redundancy disk group, each site maintains the user data redundancy as specified by the file group attribute. Each site can host data failure groups and quorum failure groups for a given disk group. For example, if the file group redundancy is specified as 2 or 3, each site has 2 or 3 mirrors respectively, provided there are enough failure groups to accommodate the mirrors. See About Oracle Extended Clusters for more information about selecting redundancy levels for extended clusters.</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-3DEAA7FC-5E20-4839-9EF2-1DE1B901DC7B">
                           <p class="notep1">Note:</p>You can alter the redundancy level of the disk group after a disk group is created. For example, you can convert a normal or high redundancy disk group to a flex redundancy disk group. Within a flex redundancy disk group, file redundancy can change among three possible values: unprotected, mirrored, or high.
                        </div>
                     </div>
                  </li>
                  <li class="stepexpand"><span>Determine the total amount of disk space that you require for the Oracle Clusterware files using Oracle ASM for shared storage.</span><div>
                        <p>If an Oracle ASM instance is running on the system, then you can use an existing disk group to meet these storage requirements. If necessary, you can add disks to an existing disk group during the database installation.</p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>Determine an allocation unit size. </span><div>
                        <p>Every Oracle ASM disk is divided into allocation units (AU). An <span class="bold">allocation unit</span> is the fundamental unit of allocation within a disk group. You can select the AU Size value from 1, 2, 4, 8, 16, 32 or 64 MB, depending on the specific disk group compatibility level. For flex disk groups, the default value for AU size is set to 4 MB. For external, normal, and high redundancy disk groups, the default AU size is 1 MB.
                        </p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>For Oracle Clusterware installations, you must also add additional disk space for the Oracle ASM metadata. You can use the following formula to calculate the disk space requirements (in MB) for OCR and voting files, and the Oracle ASM metadata:</span><div><pre class="pre codeblock"><code>total = [2 * ausize * disks] + [redundancy * (ausize * (all_client_instances + nodes + disks + 32) + 
   (64 * nodes) + clients + 543)]</code></pre><p>redundancy = Number of mirrors: external = 1, normal = 2, high = 3, flex = 3<br>
ausize = Metadata AU size in megabytes<br>
nodes = Number of nodes in cluster<br>
clients - Number of database instances for each node<br>
disks - Number of disks in disk group
                        </p>
                        <p>For example, for a four-node Oracle RAC installation, using three disks in a normal redundancy disk group, you require an additional 5293 MB of space: [2 * 4 * 3] + [2 * (4 * (4 * (4 + 1)+ 30)+ (64 * 4)+ 533)] = 5293 MB</p>
                     </div>
                  </li>
                  <li class="stepexpand"><span>Optionally, identify failure groups for the Oracle ASM disk group devices.</span><div>
                        <div class="infoboxnote" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-8015694E-2118-446E-BFBE-D60F1A7966EC">
                           <p class="notep1">Note:</p>You only have to complete this step if you plan to use an installation method that includes configuring Oracle ASM disk groups before installing Oracle RAC, or creating an Oracle RAC database.
                        </div>
                        <p>If you intend to use a normal or high redundancy disk group, then you can further protect your database against hardware failure by associating a set of disk devices in a custom failure group. <span class="bold">Failure groups</span> define Oracle ASM disks that share a common potential failure mechanism. By default, each device comprises its own failure group.
                        </p>
                        <p>If two disk devices in a normal redundancy disk group are attached to the same Host Bus Adapter (HBA), then the disk group becomes unavailable if the controller fails. The HBA in this example is a single point of failure. To protect against failures of this type, you could use two HBA fabric paths, each with two disks, and define a failure group for the disks attached to each HBA. This configuration enables the disk group to tolerate the failure of one HBA fabric path.</p>
                        <div class="infoboxnote" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-A4BEB879-FE95-4870-85B0-7563B9030067">
                           <p class="notep1">Note:</p>You can define custom failure groups during installation of Oracle Grid Infrastructure. You can also define failure groups after installation of Oracle Grid Infrastructure using the GUI tool ASMCA, the command-line tool <code class="codeph">asmcmd</code>, or SQL commands. If you define custom failure groups, then you must specify a minimum of two failure groups for normal redundancy disk groups and three failure groups for high redundancy disk groups.
                        </div>
                     </div>
                  </li>
                  <li class="stepexpand"><span>If you are sure that a suitable disk group does not exist on the system, then install or identify appropriate disk devices to add to a new disk group. Use the following guidelines when identifying appropriate disk devices:</span><div>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The disk devices must be owned by the user performing the grid installation.</p>
                           </li>
                           <li>
                              <p>All the devices in an Oracle ASM disk group must be the same size and have the same performance characteristics.</p>
                           </li>
                           <li>
                              <p>Do not specify multiple partitions on a single physical disk as a disk group device. Oracle ASM expects each disk group device to be on a separate physical disk.</p>
                           </li>
                           <li>
                              <p>Although you can specify a logical volume as a device in an Oracle ASM disk group, Oracle does not recommend their use because it adds a layer of complexity that is unnecessary with Oracle ASM. Oracle recommends that if you choose to use a logical volume manager, then use the logical volume manager to represent a single logical unit number (LUN) without striping or mirroring, so that you can minimize the effect on storage performance of the additional storage layer.</p>
                           </li>
                        </ul>
                     </div>
                  </li>
               </ol>
               <div class="section">
                  <div class="infoboxnotealso" id="GUID-D15877EC-1CA5-4B86-A8F1-606C9C5C3706__GUID-88F23859-C7E5-4F3D-9AF8-4DE71F1DDBAC">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../ostmg/mirroring-diskgroup-redundancy.html#OSTMG-GUID-9AAB5AE7-D819-4CDA-9552-4B41C3383C73" target="_blank"><span><cite>Oracle Automatic Storage Management Administrator's Guide</cite></span></a> for more information about Oracle ASM file, quota, and failure groups
                           </p>
                        </li>
                        <li>
                           <p><a href="storage-checklist-for-oracle-grid-infrastructure.html#GUID-206F3A25-E57F-4A8D-8333-DB917846C309" title="Review the checklist for storage hardware and configuration requirements for Oracle Grid Infrastructure installation.">Storage Checklist for Oracle Grid Infrastructure</a></p>
                        </li>
                        <li>
                           <p><a href="oracle-clusterware-storage-requirements.html#GUID-F011F2EC-595E-4806-9B8B-15DB32A91180" title="Use this information to determine the minimum number of disks and the minimum disk space requirements based on the redundancy type, for installing Oracle Clusterware files, and installing the starter database, for various Oracle Cluster deployments.">Oracle Clusterware Storage Space Requirements</a> to determine the minimum number of disks and the minimum disk space requirements for installing Oracle Clusterware files, and installing the starter database, where you have voting files in a separate disk group.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="about-oracle-extended-clusters.html#GUID-C12A6024-A46D-48F5-A443-E08C28AFC716" title="An Oracle Extended Cluster consists of nodes that are located in multiple locations called sites.">About Oracle Extended Clusters</a></li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="configuring-storage-for-oracle-asm.html#GUID-48B060FD-36DC-4D7B-BAD8-C86902C7CF40" title="Identify storage requirements and Oracle Automatic Storage Management (Oracle ASM) disk group options.">Configuring Storage for Oracle Automatic Storage Management</a></p>
                  </div>
               </div>
            </div>
            
         </div>
      </article>
   </body>
</html>