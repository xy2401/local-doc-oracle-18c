<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="SQL Test Case Builder is a tool that automatically gathers information needed to reproduce the problem in a different database instance.">
      <meta name="description" content="SQL Test Case Builder is a tool that automatically gathers information needed to reproduce the problem in a different database instance.">
      <title>Gathering Diagnostic Data with SQL Test Case Builder</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Tuning Guide ">
      <meta property="og:description" content="SQL Test Case Builder is a tool that automatically gathers information needed to reproduce the problem in a different database instance.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Tuning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T12:42:59-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2013, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E84296-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="monitoring-database-operations.html" title="Previous" type="text/html">
      <link rel="next" href="performing-application-tracing.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Tuning Guide">
    <meta name="dcterms.isVersionOf" content="TGSQL">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="monitoring-database-operations.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="performing-application-tracing.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Tuning Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="monitoring-and-tracing-sql.html" property="item" typeof="WebPage"><span property="name">Monitoring and Tracing SQL</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Gathering Diagnostic Data with SQL Test Case Builder</li>
            </ol>
            <a id="GUID-5207C3C6-C459-4CA7-A12A-6D9CC2485197" name="GUID-5207C3C6-C459-4CA7-A12A-6D9CC2485197"></a>
            
            <h2 id="TGSQL-GUID-5207C3C6-C459-4CA7-A12A-6D9CC2485197" class="sect2"><span class="enumeration_chapter">22 </span>Gathering Diagnostic Data with SQL Test Case Builder
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><strong class="term">SQL Test Case Builder</strong> is a tool that automatically gathers information needed to reproduce the problem in a different database instance. 
               </p>
               <p>A <strong class="term">SQL test case</strong> is a set of information that enables a developer to reproduce the execution plan for a specific SQL statement that has encountered a performance problem.
               </p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-F4A2878D-311C-45F0-8747-81E4398F2BDC">Purpose of SQL Test Case Builder</a><br>SQL Test Case Builder automates the process of gathering and reproducing information about a problem and the environment in which it occurred.
                  </li>
                  <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-78C2FCFC-FA60-4E86-A5F0-DA7CCC1AD987">Concepts for SQL Test Case Builder</a><br>Key concepts for SQL Test Case Builder include SQL incidents, types of information recorded, and the form of the output.
                  </li>
                  <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-C28E1EFD-3F92-4BF1-AE92-9230581712BD">User Interfaces for SQL Test Case Builder</a><br>You can access SQL Test Case Builder either through Cloud Control or using PL/SQL on the command line.
                  </li>
                  <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE">Running SQL Test Case Builder</a><br>You can run SQL Test Case Builder using Cloud Control.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="monitoring-and-tracing-sql.html#GUID-CA494EFF-53D7-4345-9576-8FED65F35AAE" title="Use DBMS_MONITOR to track database operations, SQL Test Case Builder to package information relating to a performance problem, and SQL Trace to generate diagnostic data for problem SQL statements.">Monitoring and Tracing SQL</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL94868"></a><div class="props_rev_3"><a id="GUID-F4A2878D-311C-45F0-8747-81E4398F2BDC" name="GUID-F4A2878D-311C-45F0-8747-81E4398F2BDC"></a><h3 id="TGSQL-GUID-F4A2878D-311C-45F0-8747-81E4398F2BDC" class="sect3"><span class="enumeration_section">22.1 </span>Purpose of SQL Test Case Builder
               </h3>
               <div>
                  <p>SQL Test Case Builder automates the process of gathering and reproducing information about a problem and the environment in which it occurred.</p>
                  <p>For most SQL components, obtaining a reproducible test case is the most important factor in bug resolution speed. It is also the longest and most painful step for users. The goal of SQL Test Case Builder is to gather as much as information related to an SQL incident as possible, and then package it in a way that enables Oracle staff to reproduce the problem on a different system.</p>
                  <p>The output of SQL Test Case Builder is a set of scripts in a predefined directory. These scripts contain the commands required to re-create all the necessary objects and the environment on another database instance. After the test case is ready, you can create a zip file of the directory and move it to another database, or upload the file to Oracle Support.</p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-5207C3C6-C459-4CA7-A12A-6D9CC2485197" title="SQL Test Case Builder is a tool that automatically gathers information needed to reproduce the problem in a different database instance.">Gathering Diagnostic Data with SQL Test Case Builder</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL94869"></a><div class="props_rev_3"><a id="GUID-78C2FCFC-FA60-4E86-A5F0-DA7CCC1AD987" name="GUID-78C2FCFC-FA60-4E86-A5F0-DA7CCC1AD987"></a><h3 id="TGSQL-GUID-78C2FCFC-FA60-4E86-A5F0-DA7CCC1AD987" class="sect3"><span class="enumeration_section">22.2 </span>Concepts for SQL Test Case Builder
               </h3>
               <div>
                  <p>Key concepts for SQL Test Case Builder include SQL incidents, types of information recorded, and the form of the output.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-1FA91A0F-ACC1-4849-845D-86AB312A866E">SQL Incidents</a><br>In the fault diagnosability infrastructure of Oracle Database, an <strong class="term">incident</strong> is a single occurrence of a problem.
                     </li>
                     <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-0D666C9D-8B0E-4FC5-8EC1-6FBC65475C66">What SQL Test Case Builder Captures</a><br>SQL Test Case Builder captures permanent information about a SQL query and its environment.
                     </li>
                     <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-3E77892C-9259-4361-93FC-0C643AA51A88">Output of SQL Test Case Builder</a><br>The output of the SQL Test Case Builder is a set of files that contains commands required to re-create the environment and all necessary objects.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-5207C3C6-C459-4CA7-A12A-6D9CC2485197" title="SQL Test Case Builder is a tool that automatically gathers information needed to reproduce the problem in a different database instance.">Gathering Diagnostic Data with SQL Test Case Builder</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94870"></a><div class="props_rev_3"><a id="GUID-1FA91A0F-ACC1-4849-845D-86AB312A866E" name="GUID-1FA91A0F-ACC1-4849-845D-86AB312A866E"></a><h4 id="TGSQL-GUID-1FA91A0F-ACC1-4849-845D-86AB312A866E" class="sect4"><span class="enumeration_section">22.2.1 </span>SQL Incidents
                  </h4>
                  <div>
                     <p>In the fault diagnosability infrastructure of Oracle Database, an <strong class="term">incident</strong> is a single occurrence of a problem.
                     </p>
                     <p>A <a href="glossary.html#GUID-2A5C7F1F-4709-4C53-A3B7-8005160D8E74"><span class="xrefglossterm">SQL incident</span></a> is a SQL-related problem. When a problem (critical error) occurs multiple times, the database creates an incident for each occurrence. Incidents are timestamped and tracked in the Automatic Diagnostic Repository (ADR). Each incident has a numeric incident ID, which is unique within the ADR.
                     </p>
                     <p>SQL Test Case Builder is accessible any time on the command line. In Oracle Enterprise Manager Cloud Control (Cloud Control), the SQL Test Case pages are only available after a SQL incident is found.</p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-1FA91A0F-ACC1-4849-845D-86AB312A866E__GUID-C5A44A57-C14F-4A6A-B0DB-B7934FFD938C">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../cncpt/oracle-database-instance.html#CNCPT1913" target="_blank"><span><cite>Oracle Database Concepts</cite></span></a> for a conceptual overview of ADR
                              </p>
                           </li>
                           <li>
                              <p><a href="../admin/managing-diagnostic-data.html#ADMIN12290" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn how to investigate, report, and resolve a problem
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-78C2FCFC-FA60-4E86-A5F0-DA7CCC1AD987" title="Key concepts for SQL Test Case Builder include SQL incidents, types of information recorded, and the form of the output.">Concepts for SQL Test Case Builder</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94871"></a><div class="props_rev_3"><a id="GUID-0D666C9D-8B0E-4FC5-8EC1-6FBC65475C66" name="GUID-0D666C9D-8B0E-4FC5-8EC1-6FBC65475C66"></a><h4 id="TGSQL-GUID-0D666C9D-8B0E-4FC5-8EC1-6FBC65475C66" class="sect4"><span class="enumeration_section">22.2.2 </span>What SQL Test Case Builder Captures
                  </h4>
                  <div>
                     <p>SQL Test Case Builder captures permanent information about a SQL query and its environment.</p>
                     <p>The information includes the query being executed, table and index definitions (but not the actual data), PL/SQL packages and program units, optimizer statistics, SQL plan baselines, and initialization parameter settings. Starting in <span>Oracle Database 12c</span>, SQL Test Case Builder also captures and replays transient information, including information only available as part of statement execution. 
                     </p>
                     <p>SQL Test Case Builder supports the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Adaptive plans</p>
                           <p>SQL Test Case Builder captures inputs to the decisions made regarding adaptive plans, and replays them at each decision point. For adaptive plans, the final statistics value at each buffering statistics collector is sufficient to decide on the final plan.</p>
                        </li>
                        <li>
                           <p>Automatic memory management</p>
                           <p>The database automatically handles the memory requested for each SQL operation. Actions such as sorting can affect performance significantly. SQL Test Case Builder keeps track of the memory activities, for example, where the database allocated memory and how much it allocated.</p>
                        </li>
                        <li>
                           <p>Dynamic statistics</p>
                           <p>Regathering <a href="glossary.html#GUID-453737A7-931A-49D1-AA5C-AFB14D9837FB"><span class="xrefglossterm">dynamic statistics</span></a> on a different database does not always generate the same results, for example, when data is missing. To reproduce the problem, SQL Test Case Builder exports the dynamic statistics result from the source database. In the testing database, SQL Test Case Builder reuses the same values captured from the source database instead of regathering dynamic statistics.
                           </p>
                        </li>
                        <li>
                           <p>Multiple execution support</p>
                           <p>SQL Test Case Builder can capture dynamic information accumulated during multiple executions of the query. This capability is important for automatic reoptimization.</p>
                        </li>
                        <li>
                           <p>Compilation environment and bind values replay</p>
                           <p>The compilation environment setting is an important part of the query optimization context. SQL Test Case Builder captures nondefault settings altered by the user when running the problem query in the source database. If any nondefault parameter values are used, SQL Test Case Builder re-establishes the same values before running the query.</p>
                        </li>
                        <li>
                           <p>Object statistics history</p>
                           <p>The statistics history for objects is helpful to determine whether a plan change was caused by a change in statistics values. <code class="codeph">DBMS_STATS</code> stores the history in the data dictionary. SQL Test Case Builder stores this statistics data into a staging table during export. During import, SQL Test Case Builder automatically reloads the statistics history data into the target database from the staging table.
                           </p>
                        </li>
                        <li>
                           <p>Statement history</p>
                           <p>The statement history is important for diagnosing problems related to adaptive cursor sharing, statistics feedback, and cursor sharing bugs. The history includes execution plans and compilation and execution statistics.</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-0D666C9D-8B0E-4FC5-8EC1-6FBC65475C66__GUID-C7361FF5-20C7-4948-B5DD-AF9F1C7B4DC8">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="query-optimizer-concepts.html#GUID-5A1EB094-1A9E-4B69-9BE5-39BDA2B3253C" title="An adaptive query plan enables the optimizer to make a plan decision for a statement during execution.">Adaptive Query Plans</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="optimizer-statistics-concepts.html#GUID-620CB826-10A2-4937-8DAD-2B41475AE47F" title="By default, when optimizer statistics are missing, stale, or insufficient, the database automatically gathers dynamic statistics during a parse. The database uses recursive SQL to scan a small random sample of table blocks.">Supplemental Dynamic Statistics</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="query-optimizer-concepts.html#GUID-D23F8328-A4CF-4211-8C9B-79B826F34A32" title="In automatic reoptimization, the optimizer changes a plan on subsequent executions after the initial execution.">Automatic Reoptimization</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-sql-plan-baselines.html#GUID-7024369A-F98D-48E4-921C-C899485C954F" title="This chapter explains the concepts and tasks relating to SQL plan management using the DBMS_SPM package.">Managing SQL Plan Baselines</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_STATS.html#ARPLS059" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about the <code class="codeph">DBMS_STATS</code> package
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-78C2FCFC-FA60-4E86-A5F0-DA7CCC1AD987" title="Key concepts for SQL Test Case Builder include SQL incidents, types of information recorded, and the form of the output.">Concepts for SQL Test Case Builder</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94872"></a><div class="props_rev_3"><a id="GUID-3E77892C-9259-4361-93FC-0C643AA51A88" name="GUID-3E77892C-9259-4361-93FC-0C643AA51A88"></a><h4 id="TGSQL-GUID-3E77892C-9259-4361-93FC-0C643AA51A88" class="sect4"><span class="enumeration_section">22.2.3 </span>Output of SQL Test Case Builder
                  </h4>
                  <div>
                     <p>The output of the SQL Test Case Builder is a set of files that contains commands required to re-create the environment and all necessary objects.</p>
                     <p>By default, SQL Test Case Builder stores the files in the following location, where <span class="italic">incnum</span> refers to the incident number and <span class="italic">runnum</span> refers to the run number:
                     </p><pre class="pre codeblock"><code>$ADR_HOME/incident/incdir_<span class="italic">incnum</span>/SQLTCB_<span class="italic">runnum</span>
</code></pre><p>For example, a valid output file name could be as follows:</p><pre class="pre codeblock"><code>$ORACLE_HOME/log/diag/rdbms/dbsa/dbsa/incident/incdir_2657/SQLTCB_1
</code></pre><p>You can specify a nondefault location by creating an Oracle directory and invoking <code class="codeph">DBMS_SQLDIAG.EXPORT_SQL_TESTCASE</code>, as in the following example:
                     </p><pre class="pre codeblock"><code>CREATE OR REPLACE DIRECTORY my_tcb_dir_exp '/tmp';
 
BEGIN 
  DBMS_SQLDIAG.EXPORT_SQL_TESTCASE (
    directory =&gt; 'my_tcb_dir_exp'
,   sql_text  =&gt; 'SELECT COUNT(*) FROM sales'
,   testcase  =&gt; tco
);
END;</code></pre></div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-3E77892C-9259-4361-93FC-0C643AA51A88__GUID-CFDC8A99-E396-4AF5-A4D3-2FD4413D5EC5">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/managing-diagnostic-data.html#ADMIN11008" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn about the structure of the ADR repository
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-78C2FCFC-FA60-4E86-A5F0-DA7CCC1AD987" title="Key concepts for SQL Test Case Builder include SQL incidents, types of information recorded, and the form of the output.">Concepts for SQL Test Case Builder</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL94873"></a><div class="props_rev_3"><a id="GUID-C28E1EFD-3F92-4BF1-AE92-9230581712BD" name="GUID-C28E1EFD-3F92-4BF1-AE92-9230581712BD"></a><h3 id="TGSQL-GUID-C28E1EFD-3F92-4BF1-AE92-9230581712BD" class="sect3"><span class="enumeration_section">22.3 </span>User Interfaces for SQL Test Case Builder
               </h3>
               <div>
                  <p>You can access SQL Test Case Builder either through Cloud Control or using PL/SQL on the command line.</p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-3B9C9026-DD36-44FA-A346-C84C2E30779A">Graphical Interface for SQL Test Case Builder</a><br>Within Cloud Control, you can access SQL Test Case Builder from the Incident Manager page or the Support Workbench page.
                     </li>
                     <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB">Command-Line Interface for SQL Test Case Builder</a><br>The <code class="codeph">DBMS_SQLDIAG</code> package performs tasks relating to SQL Test Case Builder.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-5207C3C6-C459-4CA7-A12A-6D9CC2485197" title="SQL Test Case Builder is a tool that automatically gathers information needed to reproduce the problem in a different database instance.">Gathering Diagnostic Data with SQL Test Case Builder</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94874"></a><div class="props_rev_3"><a id="GUID-3B9C9026-DD36-44FA-A346-C84C2E30779A" name="GUID-3B9C9026-DD36-44FA-A346-C84C2E30779A"></a><h4 id="TGSQL-GUID-3B9C9026-DD36-44FA-A346-C84C2E30779A" class="sect4"><span class="enumeration_section">22.3.1 </span>Graphical Interface for SQL Test Case Builder
                  </h4>
                  <div>
                     <p>Within Cloud Control, you can access SQL Test Case Builder from the Incident Manager page or the Support Workbench page.</p>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C">Accessing the Incident Manager</a><br>From the Incidents and Problems section on the Database Home page, you can navigate to the Incident Manager.
                        </li>
                        <li class="ulchildlink"><a href="sql-test-case-builder.html#GUID-82F02C36-11DC-486B-B299-E242E4B10490">Accessing the Support Workbench</a><br>From the Oracle Database menu, you can navigate to the Support Workbench.
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-C28E1EFD-3F92-4BF1-AE92-9230581712BD" title="You can access SQL Test Case Builder either through Cloud Control or using PL/SQL on the command line.">User Interfaces for SQL Test Case Builder</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94837"></a><div class="props_rev_3"><a id="GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C" name="GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C"></a><h5 id="TGSQL-GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C" class="sect5"><span class="enumeration_section">22.3.1.1 </span>Accessing the Incident Manager
                     </h5>
                     <div>
                        <p>From the Incidents and Problems section on the Database Home page, you can navigate to the Incident Manager.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C__GUID-40ADF328-61A7-4759-903B-2EDC5B729DBF">To access the Incident Manager:</p>
                           <ol>
                              <li>
                                 <p>Log in to Cloud Control with the appropriate credentials.</p>
                              </li>
                              <li>
                                 <p>Under the <span class="bold">Targets</span> menu, select <span class="bold">Databases</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>In the list of database targets, select the target for the Oracle Database instance that you want to administer.</p>
                              </li>
                              <li>
                                 <p>If prompted for database credentials, then enter the minimum credentials necessary for the tasks you intend to perform.</p>
                              </li>
                              <li>
                                 <p>In the Incidents and Problems section, locate the SQL incident to be investigated.</p>
                                 <p>In the following example, the <code class="codeph">ORA 600</code> error is a SQL incident.
                                 </p>
                                 <div class="figure" id="GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C__GUID-591D2F54-1C35-48BD-BD9A-8D2EDADE3115"><img src="img/incidents_and_problems.gif" alt="Description of incidents_and_problems.gif follows" title="Description of incidents_and_problems.gif follows" longdesc="img_text/incidents_and_problems.html"><br><a href="img_text/incidents_and_problems.html">Description of the illustration incidents_and_problems.gif</a></div>
                                 <!-- class="figure" -->
                              </li>
                              <li>
                                 <p>Click the summary of the incident.</p>
                                 <p>The Problem Details page of the Incident Manager appears.</p>
                                 <div class="figure" id="GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C__GUID-7A952FA8-0358-40B0-8D8D-6F11BF57909C"><img src="img/problem_details.gif" alt="Description of problem_details.gif follows" title="Description of problem_details.gif follows" longdesc="img_text/problem_details.html"><br><a href="img_text/problem_details.html">Description of the illustration problem_details.gif</a></div>
                                 <!-- class="figure" -->
                                 <p>The Support Workbench page appears, with the incidents listed in a table.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section"></div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C__GUID-2ED3D211-E994-4FDA-BD8B-6755928E75AF">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="../admin/managing-diagnostic-data.html#ADMIN12299" target="_blank"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> to learn how to view problems with the Cloud Control Support Workbench
                                 </p>
                              </li>
                              <li>
                                 <p>Online help for Cloud Control</p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-3B9C9026-DD36-44FA-A346-C84C2E30779A" title="Within Cloud Control, you can access SQL Test Case Builder from the Incident Manager page or the Support Workbench page.">Graphical Interface for SQL Test Case Builder</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94875"></a><div class="props_rev_3"><a id="GUID-82F02C36-11DC-486B-B299-E242E4B10490" name="GUID-82F02C36-11DC-486B-B299-E242E4B10490"></a><h5 id="TGSQL-GUID-82F02C36-11DC-486B-B299-E242E4B10490" class="sect5"><span class="enumeration_section">22.3.1.2 </span>Accessing the Support Workbench
                     </h5>
                     <div>
                        <p>From the Oracle Database menu, you can navigate to the Support Workbench.</p>
                        <div class="section">
                           <p class="subhead3" id="GUID-82F02C36-11DC-486B-B299-E242E4B10490__GUID-85D8EDDE-533B-44F7-A027-2CB5FF9C2A79">To access the Support Workbench:</p>
                           <ol>
                              <li>
                                 <p>Log in to Cloud Control with the appropriate credentials.</p>
                              </li>
                              <li>
                                 <p>Under the <span class="bold">Targets</span> menu, select <span class="bold">Databases</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>In the list of database targets, select the target for the Oracle Database instance that you want to administer.</p>
                              </li>
                              <li>
                                 <p>If prompted for database credentials, then enter the minimum credentials necessary for the tasks you intend to perform.</p>
                              </li>
                              <li>
                                 <p>From the <span class="bold">Oracle Database</span> menu, select <span class="bold">Diagnostics</span>, then <span class="bold">Support Workbench</span>.
                                 </p>
                                 <p>The Support Workbench page appears, with the incidents listed in a table.</p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-82F02C36-11DC-486B-B299-E242E4B10490__GUID-5497E9E8-0696-40F5-BA94-3F8C94D02FC0">
                           <p class="notep1">See Also:</p>
                           <p>Online help for Cloud Control</p>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-3B9C9026-DD36-44FA-A346-C84C2E30779A" title="Within Cloud Control, you can access SQL Test Case Builder from the Incident Manager page or the Support Workbench page.">Graphical Interface for SQL Test Case Builder</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL94877"></a><a id="TGSQL94876"></a><div class="props_rev_3"><a id="GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB" name="GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB"></a><h4 id="TGSQL-GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB" class="sect4"><span class="enumeration_section">22.3.2 </span>Command-Line Interface for SQL Test Case Builder
                  </h4>
                  <div>
                     <p>The <code class="codeph">DBMS_SQLDIAG</code> package performs tasks relating to SQL Test Case Builder.
                     </p>
                     <div class="section">
                        <p>This package consists of various subprograms for the SQL Test Case Builder, some of which are listed in the following table.</p>
                        <div class="tblformal" id="GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB__BABHBBHG">
                           <p class="titleintable">Table 22-1 SQL Test Case Functions in DBMS_SQLDIAG</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="SQL Test Case Functions in DBMS_SQLDIAG" summary="SQL Test Case Functions in DBMS_SQLDIAG" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="42%" id="d115476e1620">Procedure</th>
                                    <th align="left" valign="bottom" width="58%" id="d115476e1623">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d115476e1628" headers="d115476e1620 ">
                                       <p><code class="codeph">EXPORT_SQL_TESTCASE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d115476e1628 d115476e1623 ">
                                       <p>Exports a SQL test case to a user-specified directory</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d115476e1636" headers="d115476e1620 ">
                                       <p><code class="codeph">EXPORT_SQL_TESTCASE_DIR_BY_INC</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d115476e1636 d115476e1623 ">
                                       <p>Exports a SQL test case corresponding to the incident ID passed as an argument</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d115476e1644" headers="d115476e1620 ">
                                       <p><code class="codeph">EXPORT_SQL_TESTCASE_DIR_BY_TXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d115476e1644 d115476e1623 ">
                                       <p>Exports a SQL test case corresponding to the SQL text passed as an argument</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="42%" id="d115476e1652" headers="d115476e1620 ">
                                       <p><code class="codeph">IMPORT_SQL_TESTCASE</code></p>
                                    </td>
                                    <td align="left" valign="top" width="58%" headers="d115476e1652 d115476e1623 ">
                                       <p>Imports a SQL test case into a schema</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-BE5ECC60-8033-40B5-BB0A-5803A78416DB__GUID-8BC887CC-119B-4A4A-A30E-CB553A23A1E2">
                        <p class="notep1">See Also:</p>
                        <p><a href="../arpls/DBMS_SQLDIAG.html#ARPLS203" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn more about the <code class="codeph">DBMS_SQLDIAG</code> package
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-C28E1EFD-3F92-4BF1-AE92-9230581712BD" title="You can access SQL Test Case Builder either through Cloud Control or using PL/SQL on the command line.">User Interfaces for SQL Test Case Builder</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL94879"></a><a id="TGSQL94878"></a><div class="props_rev_3"><a id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE" name="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE"></a><h3 id="TGSQL-GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE" class="sect3"><span class="enumeration_section">22.4 </span>Running SQL Test Case Builder
               </h3>
               <div>
                  <p>You can run SQL Test Case Builder using Cloud Control.</p>
                  <div class="section">
                     <p class="subhead2" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-3651A53A-1B0B-4CE1-ABBC-20DE9F28C858">Assumptions</p>
                     <p>This tutorial assumes the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You ran the following <code class="codeph">EXPLAIN PLAN</code> statement as user <code class="codeph">sh</code>, which causes an internal error:
                           </p><pre class="pre codeblock"><code>EXPLAIN PLAN FOR
  SELECT unit_cost, sold
  FROM   costs c,
         ( SELECT /*+ merge */ p.prod_id, SUM(quantity_sold) AS sold
           FROM   products p, sales s
           WHERE  p.prod_id = s.prod_id
           GROUP BY p.prod_id ) v
  WHERE  c.prod_id = v.prod_id;
</code></pre></li>
                        <li>
                           <p>In the Incidents and Problems section on the Database Home page, a SQL incident generated by the internal error appears.</p>
                        </li>
                        <li>
                           <p>You access the Incident Details page, as explained in <span class="q">"<a href="sql-test-case-builder.html#GUID-355F7C1F-42B6-47E9-B8E6-BE47DD587A8C" title="From the Incidents and Problems section on the Database Home page, you can navigate to the Incident Manager.">Accessing the Incident Manager</a>"</span>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-8A4E526C-E064-4BC8-92AB-C6C47617BAF8">To run SQL Test Case Builder:</p>
                     <ol>
                        <li>
                           <p>Click the Incidents tab.</p>
                           <p>The Problem Details page appears.</p>
                           <div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-A4AEE60C-E98A-47E3-BA6D-FB2BB02335D4"><img src="img/problem_details_summary.gif" alt="Description of problem_details_summary.gif follows" title="Description of problem_details_summary.gif follows" longdesc="img_text/problem_details_summary.html"><br><a href="img_text/problem_details_summary.html">Description of the illustration problem_details_summary.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Click the summary for the incident.</p>
                           <p>The Incident Details page appears.</p>
                           <div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-879564EF-C896-4291-A3AA-A77C7AB3434D"><img src="img/incident_details.gif" alt="Description of incident_details.gif follows" title="Description of incident_details.gif follows" longdesc="img_text/incident_details.html"><br><a href="img_text/incident_details.html">Description of the illustration incident_details.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>In Guided Resolution, click <span class="bold">View Diagnostic Data</span>.
                           </p>
                           <p>The Incident Details: <span class="italic">incident_number</span> page appears.
                           </p>
                           <div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-D74DAA7C-5D91-4BED-BA98-4BCD687F3E31"><img src="img/incident_details_num.gif" alt="Description of incident_details_num.gif follows" title="Description of incident_details_num.gif follows" longdesc="img_text/incident_details_num.html"><br><a href="img_text/incident_details_num.html">Description of the illustration incident_details_num.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>In the Application Information section, click <span class="bold">Additional Diagnostics</span>.
                           </p>
                           <p>The Additional Diagnostics subpage appears.</p>
                           <div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-21292F72-13C3-46C2-BFA5-FE3233FBC06E"><img src="img/additional_diagnostics.gif" alt="Description of additional_diagnostics.gif follows" title="Description of additional_diagnostics.gif follows" longdesc="img_text/additional_diagnostics.html"><br><a href="img_text/additional_diagnostics.html">Description of the illustration additional_diagnostics.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Select <span class="bold">SQL Test Case Builder</span>, and then click <span class="bold">Run</span>.
                           </p>
                           <p>The Run User Action page appears.</p>
                           <div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-1FEB47A1-98AC-422F-BAC0-EC53D791A7A5"><img src="img/run_user_action.gif" alt="Description of run_user_action.gif follows" title="Description of run_user_action.gif follows" longdesc="img_text/run_user_action.html"><br><a href="img_text/run_user_action.html">Description of the illustration run_user_action.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Select a sampling percentage (optional), and then click <span class="bold">Submit</span>.
                           </p>
                           <p>After processing completes, the Confirmation page appears.</p>
                           <div class="figure" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-09B3E1CB-BC3C-4FB6-8348-4F278BC98AD1"><img src="img/sqltcb_confirmation.gif" alt="Description of sqltcb_confirmation.gif follows" title="Description of sqltcb_confirmation.gif follows" longdesc="img_text/sqltcb_confirmation.html"><br><a href="img_text/sqltcb_confirmation.html">Description of the illustration sqltcb_confirmation.gif</a></div>
                           <!-- class="figure" -->
                        </li>
                        <li>
                           <p>Access the SQL Test Case files in the location described in <span class="q">"<a href="sql-test-case-builder.html#GUID-3E77892C-9259-4361-93FC-0C643AA51A88" title="The output of the SQL Test Case Builder is a set of files that contains commands required to re-create the environment and all necessary objects.">Output of SQL Test Case Builder</a>"</span>.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-0880A048-4B85-49AE-B9B3-3BFA37F2F2EE__GUID-EDCF1E11-46C2-499E-8159-FFCB3BA640B1">
                     <p class="notep1">See Also:</p>
                     <p>Online help for Cloud Control</p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="sql-test-case-builder.html#GUID-5207C3C6-C459-4CA7-A12A-6D9CC2485197" title="SQL Test Case Builder is a tool that automatically gathers information needed to reproduce the problem in a different database instance.">Gathering Diagnostic Data with SQL Test Case Builder</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>