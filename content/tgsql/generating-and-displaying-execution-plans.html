<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="A thorough understanding of execution plans is essential to SQL tuning.">
      <meta name="description" content="A thorough understanding of execution plans is essential to SQL tuning.">
      <title>Generating and Displaying Execution Plans</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Tuning Guide ">
      <meta property="og:description" content="A thorough understanding of execution plans is essential to SQL tuning.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Tuning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-tuning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-11T12:42:59-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2013, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E84296-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/18">
      
      <link rel="prev" href="query-execution-plans.html" title="Previous" type="text/html">
      <link rel="next" href="reading-execution-plans.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"18","element_name":"Release 18","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Tuning Guide">
    <meta name="dcterms.isVersionOf" content="TGSQL">
    <meta name="dcterms.release" content="Release 18">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="query-execution-plans.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="reading-execution-plans.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Tuning Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="query-execution-plans.html" property="item" typeof="WebPage"><span property="name">Query Execution Plans</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Generating and Displaying Execution Plans</li>
            </ol>
            <a id="GUID-60E30B1C-342B-4D71-B154-C26623D6A3B1" name="GUID-60E30B1C-342B-4D71-B154-C26623D6A3B1"></a><a id="TGSQL271"></a>
            
            <h2 id="TGSQL-GUID-60E30B1C-342B-4D71-B154-C26623D6A3B1" class="sect2"><span class="enumeration_chapter">6 </span>Generating and Displaying Execution Plans
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>A thorough understanding of execution plans is essential to SQL tuning.</p>
               <p>This chapter contains the following topics:</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-EB015E00-82E3-4BEA-A8A4-4F7225F548D6">Introduction to Execution Plans</a><br>The combination of the steps that Oracle Database uses to execute a statement is an <strong class="term">execution plan</strong>. 
                  </li>
                  <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-FFAEEE3D-8D66-46F5-A405-5ABBCF3CF03D">About Plan Generation and Display</a><br>The <code class="codeph">EXPLAIN PLAN</code> statement displays execution plans that the optimizer chooses for <code class="codeph">SELECT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">INSERT</code>, and <code class="codeph">DELETE</code> statements. 
                  </li>
                  <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-BE9E3808-81AF-4868-B8B2-656E3940B892">Generating Plan Output Using the EXPLAIN PLAN Statement</a><br>The <code class="codeph">EXPLAIN PLAN</code> statement enables you to examine the execution plan that the optimizer chose for a SQL statement.
                  </li>
                  <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-5E88AD7F-D5FF-4003-B721-9126352CE414">Displaying PLAN_TABLE Output</a><br>You can use scripts or a package to display the plan output.
                  </li>
               </ul>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>Parent topic:</strong> <a href="query-execution-plans.html#GUID-BE44BB45-C061-4F3A-8F18-4AAC5F74C68A" title="If a query has suboptimal performance, the execution plan is the key tool for understanding the problem and supplying a solution.">Query Execution Plans</a></p>
                  </div>
               </div>
            </div>
            <a id="TGSQL272"></a><div class="props_rev_3"><a id="GUID-EB015E00-82E3-4BEA-A8A4-4F7225F548D6" name="GUID-EB015E00-82E3-4BEA-A8A4-4F7225F548D6"></a><h3 id="TGSQL-GUID-EB015E00-82E3-4BEA-A8A4-4F7225F548D6" class="sect3"><span class="enumeration_section">6.1 </span>Introduction to Execution Plans
               </h3>
               <div>
                  <p>The combination of the steps that Oracle Database uses to execute a statement is an <strong class="term">execution plan</strong>. 
                  </p>
                  <p>Each step either retrieves rows of data physically from the database or prepares them for the user issuing the statement. An execution plan includes an <a href="glossary.html#GUID-22DF198C-4310-4307-BF29-DCE765725BD4"><span class="xrefglossterm">access path</span></a> for each table that the statement accesses and an ordering of the tables (the <a href="glossary.html#GUID-4AF1D36D-F72C-4049-925A-BA2C169A0500"><span class="xrefglossterm">join order</span></a>) with the appropriate <a href="glossary.html#GUID-C4F1E78D-0262-4517-9DE6-8D835DCEC709"><span class="xrefglossterm">join method</span></a>.
                  </p>
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-60E30B1C-342B-4D71-B154-C26623D6A3B1" title="A thorough understanding of execution plans is essential to SQL tuning.">Generating and Displaying Execution Plans</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="TGSQL274"></a><div class="props_rev_3"><a id="GUID-FFAEEE3D-8D66-46F5-A405-5ABBCF3CF03D" name="GUID-FFAEEE3D-8D66-46F5-A405-5ABBCF3CF03D"></a><h3 id="TGSQL-GUID-FFAEEE3D-8D66-46F5-A405-5ABBCF3CF03D" class="sect3"><span class="enumeration_section">6.2 </span>About Plan Generation and Display
               </h3>
               <div>
                  <p>The <code class="codeph">EXPLAIN PLAN</code> statement displays execution plans that the optimizer chooses for <code class="codeph">SELECT</code>, <code class="codeph">UPDATE</code>, <code class="codeph">INSERT</code>, and <code class="codeph">DELETE</code> statements. 
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-23BE135E-3C29-4A55-93E8-17163F6C4801">About the Plan Explanation</a><br>A statement <span class="bold">execution plan</span> is the sequence of operations that the database performs to run the statement.
                     </li>
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-30C0114A-084A-45C8-B6A7-C4D91B6A35AE">Why Execution Plans Change</a><br>Execution plans can and do change as the underlying optimizer inputs change.
                     </li>
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-ABEBB449-C1BD-4008-8ECB-8613B5278F80">Guideline for Minimizing Throw-Away</a><br>Examining an explain plan enables you to look for rows that are thrown-away.
                     </li>
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-E348705A-6FA5-4869-BD13-2806DACBF4ED">Guidelines for Evaluating Execution Plans Using EXPLAIN PLAN</a><br>The execution plan operation alone cannot differentiate between well-tuned statements and those that perform suboptimally.
                     </li>
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-E2463C7B-F71A-4F06-85D3-1AF3D4D71CE8">EXPLAIN PLAN Restrictions</a><br>Oracle Database does not support <code class="codeph">EXPLAIN PLAN</code> for statements performing implicit type conversion of date bind variables. 
                     </li>
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-948FF9B7-F728-46C3-98B4-AC3EFD362E65">Guidelines for Creating PLAN_TABLE</a><br>The <code class="codeph">PLAN_TABLE</code> is automatically created as a public synonym to a global temporary table. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-60E30B1C-342B-4D71-B154-C26623D6A3B1" title="A thorough understanding of execution plans is essential to SQL tuning.">Generating and Displaying Execution Plans</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL95114"></a><div class="props_rev_3"><a id="GUID-23BE135E-3C29-4A55-93E8-17163F6C4801" name="GUID-23BE135E-3C29-4A55-93E8-17163F6C4801"></a><h4 id="TGSQL-GUID-23BE135E-3C29-4A55-93E8-17163F6C4801" class="sect4"><span class="enumeration_section">6.2.1 </span>About the Plan Explanation
                  </h4>
                  <div>
                     <p>A statement <span class="bold">execution plan</span> is the sequence of operations that the database performs to run the statement.
                     </p>
                     <p>The <a href="glossary.html#GUID-8C474809-DFD4-4EA6-90FE-A17882D07E58"><span class="xrefglossterm">row source tree</span></a> is the core of the execution plan. The tree shows the following information:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>An ordering of the tables referenced by the statement</p>
                        </li>
                        <li>
                           <p>An access method for each table mentioned in the statement</p>
                        </li>
                        <li>
                           <p>A join method for tables affected by join operations in the statement</p>
                        </li>
                        <li>
                           <p>Data operations like filter, sort, or aggregation</p>
                        </li>
                     </ul>
                     <p>In addition to the row source tree, the plan table contains information about the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Optimization, such as the cost and cardinality of each operation</p>
                        </li>
                        <li>
                           <p>Partitioning, such as the set of accessed partitions</p>
                        </li>
                        <li>
                           <p>Parallel execution, such as the distribution method of join inputs</p>
                        </li>
                     </ul>
                     <p>You can use the <code class="codeph">EXPLAIN PLAN</code> results to determine whether the optimizer chose a particular execution plan, such as a nested loops join. The results also help you to understand the optimizer decisions, such as why the optimizer chose a nested loops join instead of a hash join.
                     </p>
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-23BE135E-3C29-4A55-93E8-17163F6C4801__GUID-4C0770EA-67D2-40EA-8725-5346A73BCF7A">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p> <span class="q">"<a href="sql-processing.html#GUID-E052E274-586D-4D76-960F-B831140F7B94" title="The row source generator is software that receives the optimal execution plan from the optimizer and produces an iterative execution plan that is usable by the rest of the database.">SQL Row Source Generation</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/tgsql&amp;id=SQLRF01601" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn about the <code class="codeph">EXPLAIN PLAN</code> statement
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-FFAEEE3D-8D66-46F5-A405-5ABBCF3CF03D" title="The EXPLAIN PLAN statement displays execution plans that the optimizer chooses for SELECT, UPDATE, INSERT, and DELETE statements.">About Plan Generation and Display</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94693"></a><div class="props_rev_3"><a id="GUID-30C0114A-084A-45C8-B6A7-C4D91B6A35AE" name="GUID-30C0114A-084A-45C8-B6A7-C4D91B6A35AE"></a><h4 id="TGSQL-GUID-30C0114A-084A-45C8-B6A7-C4D91B6A35AE" class="sect4"><span class="enumeration_section">6.2.2 </span>Why Execution Plans Change
                  </h4>
                  <div>
                     <p>Execution plans can and do change as the underlying optimizer inputs change.</p>
                     <p><code class="codeph">EXPLAIN PLAN</code> output shows how the database would run the SQL statement when the statement was explained. This plan can differ from the actual execution plan a SQL statement uses because of differences in the execution environment and explain plan environment. 
                     </p>
                     <div class="infoboxnote" id="GUID-30C0114A-084A-45C8-B6A7-C4D91B6A35AE__GUID-6040AF75-3CD3-4B80-8F25-8A9BBE385F10">
                        <p class="notep1">Note:</p>
                        <p>To avoid possible SQL performance regression that may result from execution plan changes, consider using SQL plan management.</p>
                     </div>
                     <p>This section contains the following topics:</p>
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-94D7E339-9310-4482-A1BC-26F74D2BED89">Different Schemas</a><br>Schemas can differ for various reasons.
                        </li>
                        <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-4A42068F-93FA-4E04-9574-1E96423C8EBC">Different Costs</a><br>Even if the schemas are the same, the optimizer can choose different execution plans when the costs are different. 
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-30C0114A-084A-45C8-B6A7-C4D91B6A35AE__GUID-877FCF73-4E3C-4FF0-A09D-CF1522BDF86B">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="overview-of-sql-plan-management.html#GUID-F1C45056-F998-43E5-B362-83F88DA49E58" title="SQL plan management is a preventative mechanism that enables the optimizer to automatically manage execution plans, ensuring that the database uses only known or verified plans.">Overview of SQL Plan Management</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../arpls/DBMS_SPM.html#ARPLS150" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> to learn about the <code class="codeph">DBMS_SPM</code> package
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-FFAEEE3D-8D66-46F5-A405-5ABBCF3CF03D" title="The EXPLAIN PLAN statement displays execution plans that the optimizer chooses for SELECT, UPDATE, INSERT, and DELETE statements.">About Plan Generation and Display</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94694"></a><div class="props_rev_3"><a id="GUID-94D7E339-9310-4482-A1BC-26F74D2BED89" name="GUID-94D7E339-9310-4482-A1BC-26F74D2BED89"></a><h5 id="TGSQL-GUID-94D7E339-9310-4482-A1BC-26F74D2BED89" class="sect5"><span class="enumeration_section">6.2.2.1 </span>Different Schemas 
                     </h5>
                     <div>
                        <p>Schemas can differ for various reasons.</p>
                        <p>Principal reasons include the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The execution and explain plan occur on different databases.</p>
                           </li>
                           <li>
                              <p>The user explaining the statement is different from the user running the statement. Two users might be pointing to different objects in the same database, resulting in different execution plans.</p>
                           </li>
                           <li>
                              <p>Schema changes (often changes in indexes) between the two operations.</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-30C0114A-084A-45C8-B6A7-C4D91B6A35AE" title="Execution plans can and do change as the underlying optimizer inputs change.">Why Execution Plans Change</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div><a id="TGSQL94695"></a><div class="props_rev_3"><a id="GUID-4A42068F-93FA-4E04-9574-1E96423C8EBC" name="GUID-4A42068F-93FA-4E04-9574-1E96423C8EBC"></a><h5 id="TGSQL-GUID-4A42068F-93FA-4E04-9574-1E96423C8EBC" class="sect5"><span class="enumeration_section">6.2.2.2 </span>Different Costs
                     </h5>
                     <div>
                        <p>Even if the schemas are the same, the optimizer can choose different execution plans when the costs are different. </p>
                        <p>Some factors that affect the costs include the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Data volume and statistics</p>
                           </li>
                           <li>
                              <p>Bind variable types and values</p>
                           </li>
                           <li>
                              <p>Initialization parameters set globally or at session level</p>
                           </li>
                        </ul>
                     </div>
                     <div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-30C0114A-084A-45C8-B6A7-C4D91B6A35AE" title="Execution plans can and do change as the underlying optimizer inputs change.">Why Execution Plans Change</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL94697"></a><a id="TGSQL94696"></a><div class="props_rev_3"><a id="GUID-ABEBB449-C1BD-4008-8ECB-8613B5278F80" name="GUID-ABEBB449-C1BD-4008-8ECB-8613B5278F80"></a><h4 id="TGSQL-GUID-ABEBB449-C1BD-4008-8ECB-8613B5278F80" class="sect4"><span class="enumeration_section">6.2.3 </span>Guideline for Minimizing Throw-Away
                  </h4>
                  <div>
                     <p>Examining an explain plan enables you to look for rows that are thrown-away.</p>
                     <div class="section">
                        <p>The database often throws away rows in the following situations:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Full scans</p>
                           </li>
                           <li>
                              <p>Unselective range scans</p>
                           </li>
                           <li>
                              <p>Late predicate filters</p>
                           </li>
                           <li>
                              <p>Wrong join order</p>
                           </li>
                           <li>
                              <p>Late filter operations</p>
                           </li>
                        </ul>
                        <p>In the plan shown in <a href="generating-and-displaying-execution-plans.html#GUID-ABEBB449-C1BD-4008-8ECB-8613B5278F80__CACBFFCA">Example 6-1</a>, the last step is a very <a href="glossary.html#GUID-EFB55786-83D3-4DFF-A534-052B0BF3BA62"><span class="xrefglossterm">unselective</span></a> range scan that is executed 76,563 times, accesses 11,432,983 rows, throws away 99% of them, and retains 76,563 rows. Why access 11,432,983 rows to realize that only 76,563 rows are needed?
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-ABEBB449-C1BD-4008-8ECB-8613B5278F80__CACBFFCA">
                        <p class="titleinexample">Example 6-1 Looking for Thrown-Away Rows in an Explain Plan</p><pre class="pre codeblock"><code>Rows      Execution Plan
--------  ----------------------------------------------------
      12  SORT AGGREGATE
       2   SORT GROUP BY
   76563    NESTED LOOPS
   76575     NESTED LOOPS
      19      TABLE ACCESS FULL CN_PAYRUNS_ALL
   76570      TABLE ACCESS BY INDEX ROWID CN_POSTING_DETAILS_ALL
   76570       INDEX RANGE SCAN (object id 178321)
   76563     TABLE ACCESS BY INDEX ROWID CN_PAYMENT_WORKSHEETS_ALL
11432983      INDEX RANGE SCAN (object id 186024)</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-FFAEEE3D-8D66-46F5-A405-5ABBCF3CF03D" title="The EXPLAIN PLAN statement displays execution plans that the optimizer chooses for SELECT, UPDATE, INSERT, and DELETE statements.">About Plan Generation and Display</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94698"></a><div class="props_rev_3"><a id="GUID-E348705A-6FA5-4869-BD13-2806DACBF4ED" name="GUID-E348705A-6FA5-4869-BD13-2806DACBF4ED"></a><h4 id="TGSQL-GUID-E348705A-6FA5-4869-BD13-2806DACBF4ED" class="sect4"><span class="enumeration_section">6.2.4 </span>Guidelines for Evaluating Execution Plans Using EXPLAIN PLAN
                  </h4>
                  <div>
                     <p>The execution plan operation alone cannot differentiate between well-tuned statements and those that perform suboptimally.</p>
                     <div class="section">
                        <p>For example, an <code class="codeph">EXPLAIN PLAN</code> output that shows that a statement uses an index does not necessarily mean that the statement runs efficiently. Sometimes indexes are extremely inefficient. In this case, a good practice is to examine the following:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The columns of the index being used</p>
                           </li>
                           <li>
                              <p>Their selectivity (fraction of table being accessed)</p>
                           </li>
                        </ul>
                        <p>It is best to use <code class="codeph">EXPLAIN PLAN</code> to determine an access plan, and then later prove that it is the optimal plan through testing. When evaluating a plan, examine the statement's actual resource consumption.
                        </p>
                        <p>This section contains the following topics:</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-D890C710-BD3C-422B-A130-7092A35008EB">Guidelines for Evaluating Plans Using the V$SQL_PLAN Views</a><br>As an alternative to running the <code class="codeph">EXPLAIN PLAN</code> command and displaying the plan, you can display the plan by querying the <code class="codeph">V$SQL_PLAN</code> view. 
                        </li>
                     </ul>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-FFAEEE3D-8D66-46F5-A405-5ABBCF3CF03D" title="The EXPLAIN PLAN statement displays execution plans that the optimizer chooses for SELECT, UPDATE, INSERT, and DELETE statements.">About Plan Generation and Display</a></p>
                        </div>
                     </div>
                  </div>
                  <a id="TGSQL94699"></a><div class="props_rev_3"><a id="GUID-D890C710-BD3C-422B-A130-7092A35008EB" name="GUID-D890C710-BD3C-422B-A130-7092A35008EB"></a><h5 id="TGSQL-GUID-D890C710-BD3C-422B-A130-7092A35008EB" class="sect5"><span class="enumeration_section">6.2.4.1 </span>Guidelines for Evaluating Plans Using the V$SQL_PLAN Views
                     </h5>
                     <div>
                        <p>As an alternative to running the <code class="codeph">EXPLAIN PLAN</code> command and displaying the plan, you can display the plan by querying the <code class="codeph">V$SQL_PLAN</code> view. 
                        </p>
                        <div class="section">
                           <p><code class="codeph">V$SQL_PLAN</code> contains the execution plan for every statement stored in the shared SQL area. Its definition is similar to <code class="codeph">PLAN_TABLE</code>. 
                           </p>
                           <p>The advantage of <code class="codeph">V$SQL_PLAN</code> over <code class="codeph">EXPLAIN PLAN</code> is that you do not need to know the compilation environment that was used to execute a particular statement. For <code class="codeph">EXPLAIN PLAN</code>, you would need to set up an identical environment to get the same plan when executing the statement.
                           </p>
                           <p>The <code class="codeph">V$SQL_PLAN_STATISTICS</code> view provides the actual execution statistics for every operation in the plan, such as the number of output rows and elapsed time. All statistics, except the number of output rows, are cumulative. For example, the statistics for a join operation also includes the statistics for its two inputs. The statistics in <code class="codeph">V$SQL_PLAN_STATISTICS</code> are available for cursors that have been compiled with the <code class="codeph">STATISTICS_LEVEL</code> initialization parameter set to <code class="codeph">ALL</code>.
                           </p>
                           <p>The <code class="codeph">V$SQL_PLAN_STATISTICS_ALL</code> view enables side by side comparisons of the estimates that the optimizer provides for the number of rows and elapsed time. This view combines both <code class="codeph">V$SQL_PLAN</code> and <code class="codeph">V$SQL_PLAN_STATISTICS</code> information for every cursor.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                     <div>
                        <div class="infoboxnotealso" id="GUID-D890C710-BD3C-422B-A130-7092A35008EB__GUID-F1B6BB66-6FBD-45E8-915A-0D914E1C923D">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="reading-execution-plans.html#GUID-D7331098-AEF5-49A2-98A1-3039E2A5900C" title="The PLAN_TABLE used by the EXPLAIN PLAN statement contains the columns listed in this topic.">PLAN_TABLE Columns</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="monitoring-database-operations.html#GUID-C941CE9D-97E1-42F8-91ED-4949B2B710BF" title="This chapter describes how to monitor SQL and PL/SQL.">Monitoring Database Operations</a>"</span> for information about the <code class="codeph">V$SQL_PLAN_MONITOR</code> view
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/tgsql&amp;id=REFRN-GUID-87561B21-721C-42EB-8E3D-28251C9BC50C" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for more information about <code class="codeph">V$SQL_PLAN</code> views
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/tgsql&amp;id=REFRN-GUID-16B23F95-8644-407A-A6C8-E85CADFA61FF" target="_blank"><span><cite>Oracle Database Reference</cite></span></a> for information about the <code class="codeph">STATISTICS_LEVEL</code> initialization parameter
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <div class="familylinks">
                           <div class="parentlink">
                              <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-E348705A-6FA5-4869-BD13-2806DACBF4ED" title="The execution plan operation alone cannot differentiate between well-tuned statements and those that perform suboptimally.">Guidelines for Evaluating Execution Plans Using EXPLAIN PLAN</a></p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div><a id="TGSQL94700"></a><div class="props_rev_3"><a id="GUID-E2463C7B-F71A-4F06-85D3-1AF3D4D71CE8" name="GUID-E2463C7B-F71A-4F06-85D3-1AF3D4D71CE8"></a><h4 id="TGSQL-GUID-E2463C7B-F71A-4F06-85D3-1AF3D4D71CE8" class="sect4"><span class="enumeration_section">6.2.5 </span>EXPLAIN PLAN Restrictions
                  </h4>
                  <div>
                     <p>Oracle Database does not support <code class="codeph">EXPLAIN PLAN</code> for statements performing implicit type conversion of date bind variables. 
                     </p>
                     <div class="section">
                        <p>With bind variables in general, the <code class="codeph">EXPLAIN PLAN</code> output might not represent the real execution plan. 
                        </p>
                        <p>From the text of a SQL statement, <code class="codeph">TKPROF</code> cannot determine the types of the bind variables. It assumes that the type is <code class="codeph">VARCHAR</code>, and gives an error message otherwise. You can avoid this limitation by putting appropriate type conversions in the SQL statement.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E2463C7B-F71A-4F06-85D3-1AF3D4D71CE8__GUID-4B4164F5-E704-4BB2-84A2-A846D3A9FE43">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="performing-application-tracing.html#GUID-440D3AD4-B302-408E-8627-FE8032DD09F9" title="This chapter explains what end-to-end application tracing is, and how to generate and read trace files.">Performing Application Tracing</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="performing-application-tracing.html#GUID-2D5E244C-1852-40F0-B222-3DBA59380A56" title="If you are not aware of the values being bound at run time, then it is possible to fall into the argument trap.">Guideline for Avoiding the Argument Trap</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/tgsql&amp;id=SQLRF-GUID-A3C0D836-BADB-44E5-A5D4-265BA5968483" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn more about SQL data types
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-FFAEEE3D-8D66-46F5-A405-5ABBCF3CF03D" title="The EXPLAIN PLAN statement displays execution plans that the optimizer chooses for SELECT, UPDATE, INSERT, and DELETE statements.">About Plan Generation and Display</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94701"></a><div class="props_rev_3"><a id="GUID-948FF9B7-F728-46C3-98B4-AC3EFD362E65" name="GUID-948FF9B7-F728-46C3-98B4-AC3EFD362E65"></a><h4 id="TGSQL-GUID-948FF9B7-F728-46C3-98B4-AC3EFD362E65" class="sect4"><span class="enumeration_section">6.2.6 </span>Guidelines for Creating PLAN_TABLE
                  </h4>
                  <div>
                     <p>The <code class="codeph">PLAN_TABLE</code> is automatically created as a public synonym to a global temporary table. 
                     </p>
                     <div class="section">
                        <p>This temporary table holds the output of <code class="codeph">EXPLAIN PLAN</code> statements for all users. <code class="codeph">PLAN_TABLE</code> is the default sample output table into which the <code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> statement inserts rows describing execution plans.
                        </p>
                        <p>While a <code class="codeph">PLAN_TABLE</code> table is automatically set up for each user, you can use the SQL script <code class="codeph">catplan.sql</code> to manually create the global temporary table and the <code class="codeph">PLAN_TABLE</code> synonym. The name and location of this script depends on your operating system. On UNIX and Linux, the script is located in the <code class="codeph">$ORACLE_HOME/rdbms/admin</code> directory.
                        </p>
                        <p>For example, start a SQL*Plus session, connect with <code class="codeph">SYSDBA</code> privileges, and run the script as follows:
                        </p><pre class="pre codeblock"><code>@$ORACLE_HOME/rdbms/admin/catplan.sql
</code></pre><p>Oracle recommends that you drop and rebuild your local <code class="codeph">PLAN_TABLE</code> table after upgrading the version of the database because the columns might change. This can cause scripts to fail or cause <code class="codeph">TKPROF</code> to fail, if you are specifying the table.
                        </p>
                        <p>If you do not want to use the name <code class="codeph">PLAN_TABLE</code>, create a new synonym after running the <code class="codeph">catplan.sql</code> script. For example:
                        </p><pre class="pre codeblock"><code>CREATE OR REPLACE PUBLIC SYNONYM my_plan_table for plan_table$</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-948FF9B7-F728-46C3-98B4-AC3EFD362E65__GUID-6FF1242C-8932-4D90-A755-4047E8E67509">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="reading-execution-plans.html#GUID-D7331098-AEF5-49A2-98A1-3039E2A5900C" title="The PLAN_TABLE used by the EXPLAIN PLAN statement contains the columns listed in this topic.">PLAN_TABLE Columns</a>"</span> for a description of the columns in the table
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/tgsql&amp;id=SQLRF-GUID-A806C82F-1171-478E-A910-F9C6C42739B2" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> to learn about <code class="codeph">CREATE SYNONYM</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-FFAEEE3D-8D66-46F5-A405-5ABBCF3CF03D" title="The EXPLAIN PLAN statement displays execution plans that the optimizer chooses for SELECT, UPDATE, INSERT, and DELETE statements.">About Plan Generation and Display</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL273"></a><div class="props_rev_3"><a id="GUID-BE9E3808-81AF-4868-B8B2-656E3940B892" name="GUID-BE9E3808-81AF-4868-B8B2-656E3940B892"></a><h3 id="TGSQL-GUID-BE9E3808-81AF-4868-B8B2-656E3940B892" class="sect3"><span class="enumeration_section">6.3 </span>Generating Plan Output Using the EXPLAIN PLAN Statement
               </h3>
               <div>
                  <p>The <code class="codeph">EXPLAIN PLAN</code> statement enables you to examine the execution plan that the optimizer chose for a SQL statement.
                  </p>
                  <p>This section contains the following topics:</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-E4ED3145-8ABD-4F40-B044-9AEFBD89409C">Explaining a SQL Statement: Basic Steps</a><br>Use <code class="codeph">EXPLAIN PLAN</code> to store the plan for a SQL statement in <code class="codeph">PLAN_TABLE</code>.
                     </li>
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-102A6D99-3193-4628-BC35-74501F46D13A">Executing EXPLAIN PLAN Using a Statement ID</a><br>With multiple statements, you can specify a statement identifier and use that to identify your specific execution plan.
                     </li>
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-A377E279-4983-4750-917D-17C48ED3D1DB">Directing EXPLAIN PLAN Output to a Nondefault Table</a><br>You can specify the <code class="codeph">INTO</code> clause to specify a different table.
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-60E30B1C-342B-4D71-B154-C26623D6A3B1" title="A thorough understanding of execution plans is essential to SQL tuning.">Generating and Displaying Execution Plans</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-E4ED3145-8ABD-4F40-B044-9AEFBD89409C" name="GUID-E4ED3145-8ABD-4F40-B044-9AEFBD89409C"></a><h4 id="TGSQL-GUID-E4ED3145-8ABD-4F40-B044-9AEFBD89409C" class="sect4"><span class="enumeration_section">6.3.1 </span>Explaining a SQL Statement: Basic Steps
                  </h4>
                  <div>
                     <p>Use <code class="codeph">EXPLAIN PLAN</code> to store the plan for a SQL statement in <code class="codeph">PLAN_TABLE</code>.
                     </p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E4ED3145-8ABD-4F40-B044-9AEFBD89409C__GUID-EA194E3F-7937-4E81-922A-74670325E653">Prerequisites</p>
                        <p>This task assumes that a sample output table named <code class="codeph">PLAN_TABLE</code> exists in your schema. If this table does not exist, then run the SQL script <code class="codeph">catplan.sql</code>.
                        </p>
                        <p>To execute <code class="codeph">EXPLAIN PLAN</code>, you must have the following privileges:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You must have the privileges necessary to insert rows into an existing output table that you specify to hold the execution plan</p>
                           </li>
                           <li>
                              <p>You must also have the privileges necessary to execute the SQL statement for which you are determining the execution plan. If the SQL statement accesses a view, then you must have privileges to access any tables and views on which the view is based. If the view is based on another view that is based on a table, then you must have privileges to access both the other view and its underlying table.</p>
                           </li>
                        </ul>
                        <p>To examine the execution plan produced by an <code class="codeph">EXPLAIN PLAN</code> statement, you must have the privileges necessary to query the output table.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E4ED3145-8ABD-4F40-B044-9AEFBD89409C__GUID-47181F89-96CE-4223-9E2A-68B57EFE1B2D">To explain a statement:</p>
                        <ol>
                           <li>
                              <p>Start SQL*Plus or SQL Developer, and log in to the database as a user with the requisite permissions.</p>
                           </li>
                           <li>
                              <p>Include the <code class="codeph">EXPLAIN PLAN FOR</code> clause immediately before the SQL statement.
                              </p>
                              <p>The following example explains the plan for a query of the <code class="codeph">employees</code> table:
                              </p><pre class="pre codeblock"><code>EXPLAIN PLAN FOR
  SELECT e.last_name, d.department_name, e.salary
  FROM   employees e, departments d
  WHERE  salary &lt; 3000
  AND    e.department_id = d.department_id
  ORDER BY salary DESC;</code></pre></li>
                           <li>
                              <p>After issuing the <code class="codeph">EXPLAIN PLAN</code> statement, use a script or package provided by Oracle Database to display the most recent plan table output. 
                              </p>
                              <p>The following example uses the <code class="codeph">DBMS_XPLAN.DISPLAY</code> function:
                              </p><pre class="pre codeblock"><code>SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY(format =&gt; 'ALL'));</code></pre></li>
                           <li>
                              <p>Review the plan output.</p>
                              <p>For example, the following plan shows a hash join:</p><pre class="pre codeblock"><code>SQL&gt; SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY(format =&gt; 'ALL'));
Plan hash value: 3556827125

-----------------------------------------------------------------------------------
| Id  | Operation           | Name        | Rows  | Bytes | Cost (%CPU)| Time     |
-----------------------------------------------------------------------------------
|   0 | SELECT STATEMENT    |             |     4 |   124 |     5  (20)| 00:00:01 |
|   1 |  SORT ORDER BY      |             |     4 |   124 |     5  (20)| 00:00:01 |
|*  2 |   HASH JOIN         |             |     4 |   124 |     4   (0)| 00:00:01 |
|*  3 |    TABLE ACCESS FULL| EMPLOYEES   |     4 |    60 |     2   (0)| 00:00:01 |
|   4 |    TABLE ACCESS FULL| DEPARTMENTS |    27 |   432 |     2   (0)| 00:00:01 |
-----------------------------------------------------------------------------------

Query Block Name / Object Alias (identified by operation id):
-------------------------------------------------------------

   1 - SEL$1
   3 - SEL$1 / E@SEL$1
   4 - SEL$1 / D@SEL$1

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - access("E"."DEPARTMENT_ID"="D"."DEPARTMENT_ID")
   3 - filter("SALARY"&lt;3000)

Column Projection Information (identified by operation id):
-----------------------------------------------------------

   1 - (#keys=1) INTERNAL_FUNCTION("E"."SALARY")[22],
       "E"."LAST_NAME"[VARCHAR2,25], "D"."DEPARTMENT_NAME"[VARCHAR2,30]
   2 - (#keys=1) "E"."LAST_NAME"[VARCHAR2,25], "SALARY"[NUMBER,22],
       "D"."DEPARTMENT_NAME"[VARCHAR2,30], "D"."DEPARTMENT_NAME"[VARCHAR2,30]
   3 - "E"."LAST_NAME"[VARCHAR2,25], "SALARY"[NUMBER,22],
       "E"."DEPARTMENT_ID"[NUMBER,22]
   4 - "D"."DEPARTMENT_ID"[NUMBER,22], "D"."DEPARTMENT_NAME"[VARCHAR2,30]

Note
-----
   - this is an adaptive plan
</code></pre><p>The execution order in <code class="codeph">EXPLAIN PLAN</code> output begins with the line that is the furthest indented to the right. The next step is the parent of that line. If two lines are indented equally, then the top line is normally executed first.
                              </p>
                              <div class="infoboxnote" id="GUID-E4ED3145-8ABD-4F40-B044-9AEFBD89409C__GUID-66B035BC-615D-4E4A-802F-5CB013E2503A">
                                 <p class="notep1">Note:</p>
                                 <p>The steps in the <code class="codeph">EXPLAIN PLAN</code> output in this chapter may be different on your database. The optimizer may choose different execution plans, depending on database configurations.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-E4ED3145-8ABD-4F40-B044-9AEFBD89409C__GUID-B00A245A-AB43-499D-9F45-BFDB36DF6CAB">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="generating-and-displaying-execution-plans.html#GUID-948FF9B7-F728-46C3-98B4-AC3EFD362E65" title="The PLAN_TABLE is automatically created as a public synonym to a global temporary table.">Guidelines for Creating PLAN_TABLE</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="generating-and-displaying-execution-plans.html#GUID-5E88AD7F-D5FF-4003-B721-9126352CE414" title="You can use scripts or a package to display the plan output.">Displaying PLAN_TABLE Output</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/tgsql&amp;id=SQLRF-GUID-FD540872-4ED3-4936-96A2-362539931BA0" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for the syntax and semantics of <code class="codeph">EXPLAIN PLAN</code></p>
                           </li>
                        </ul>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-BE9E3808-81AF-4868-B8B2-656E3940B892" title="The EXPLAIN PLAN statement enables you to examine the execution plan that the optimizer chose for a SQL statement.">Generating Plan Output Using the EXPLAIN PLAN Statement</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94703"></a><a id="TGSQL94702"></a><div class="props_rev_3"><a id="GUID-102A6D99-3193-4628-BC35-74501F46D13A" name="GUID-102A6D99-3193-4628-BC35-74501F46D13A"></a><h4 id="TGSQL-GUID-102A6D99-3193-4628-BC35-74501F46D13A" class="sect4"><span class="enumeration_section">6.3.2 </span>Executing EXPLAIN PLAN Using a Statement ID
                  </h4>
                  <div>
                     <p>With multiple statements, you can specify a statement identifier and use that to identify your specific execution plan.</p>
                     <div class="section">
                        <p>Before using <code class="codeph">SET STATEMENT ID</code>, remove any existing rows for that statement ID. In the following example, <code class="codeph">st1</code> is specified as the statement identifier.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-102A6D99-3193-4628-BC35-74501F46D13A__CACCJJCJ">
                        <p class="titleinexample">Example 6-2 Using EXPLAIN PLAN with the STATEMENT ID Clause</p><pre class="pre codeblock"><code>EXPLAIN PLAN
  SET STATEMENT_ID = 'st1' FOR
  SELECT last_name FROM employees;</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-BE9E3808-81AF-4868-B8B2-656E3940B892" title="The EXPLAIN PLAN statement enables you to examine the execution plan that the optimizer chose for a SQL statement.">Generating Plan Output Using the EXPLAIN PLAN Statement</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94705"></a><a id="TGSQL94704"></a><div class="props_rev_3"><a id="GUID-A377E279-4983-4750-917D-17C48ED3D1DB" name="GUID-A377E279-4983-4750-917D-17C48ED3D1DB"></a><h4 id="TGSQL-GUID-A377E279-4983-4750-917D-17C48ED3D1DB" class="sect4"><span class="enumeration_section">6.3.3 </span>Directing EXPLAIN PLAN Output to a Nondefault Table
                  </h4>
                  <div>
                     <p>You can specify the <code class="codeph">INTO</code> clause to specify a different table.
                     </p>
                     <div class="section">
                        <p>The following statement directs output to <code class="codeph">my_plan_table</code>:
                        </p><pre class="pre codeblock"><code>EXPLAIN PLAN
  INTO my_plan_table FOR
  SELECT last_name FROM employees;
</code></pre><p>You can specify a statement ID when using the <code class="codeph">INTO</code> clause, as in the following statement:
                        </p><pre class="pre codeblock"><code>EXPLAIN PLAN
   SET STATEMENT_ID = 'st1'
   INTO my_plan_table FOR
   SELECT last_name FROM employees;</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="infoboxnotealso" id="GUID-A377E279-4983-4750-917D-17C48ED3D1DB__GUID-EE83465E-9679-4EC0-A1E0-AB640F548B09">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/tgsql&amp;id=SQLRF01601" target="_blank"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for a complete description of <code class="codeph">EXPLAIN PLAN</code> syntax.
                        </p>
                     </div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-BE9E3808-81AF-4868-B8B2-656E3940B892" title="The EXPLAIN PLAN statement enables you to examine the execution plan that the optimizer chose for a SQL statement.">Generating Plan Output Using the EXPLAIN PLAN Statement</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="TGSQL94706"></a><div class="props_rev_3"><a id="GUID-5E88AD7F-D5FF-4003-B721-9126352CE414" name="GUID-5E88AD7F-D5FF-4003-B721-9126352CE414"></a><h3 id="TGSQL-GUID-5E88AD7F-D5FF-4003-B721-9126352CE414" class="sect3"><span class="enumeration_section">6.4 </span>Displaying PLAN_TABLE Output
               </h3>
               <div>
                  <p>You can use scripts or a package to display the plan output.</p>
                  <div class="section">
                     <p>After you have explained the plan, use the following SQL scripts or PL/SQL package provided by Oracle Database to display the most recent plan table output:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">utlxpls.sql</code> 
                           </p>
                           <p>This script displays the plan table output for serial processing. <a href="generating-and-displaying-execution-plans.html#GUID-D89C4CB8-6081-4DFF-98AC-25F3DC905093__CACIDEEA">Example 6-4</a> is an example of the plan table output when using the <code class="codeph">utlxpls.sql</code> script.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">utlxplp.sql</code></p>
                           <p>This script displays the plan table output including parallel execution columns.</p>
                        </li>
                        <li>
                           <p><code class="codeph">DBMS_XPLAN.DISPLAY</code> table function 
                           </p>
                           <p>This function accepts options for displaying the plan table output. You can specify:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>A plan table name if you are using a table different than <code class="codeph">PLAN_TABLE</code></p>
                              </li>
                              <li>
                                 <p>A statement ID if you have set a statement ID with the <code class="codeph">EXPLAIN PLAN</code></p>
                              </li>
                              <li>
                                 <p>A format option that determines the level of detail: <code class="codeph">BASIC</code>, <code class="codeph">SERIAL</code>, <code class="codeph">TYPICAL</code>, and <code class="codeph">ALL</code></p>
                              </li>
                           </ul>
                           <p>Examples of using <code class="codeph">DBMS_XPLAN</code> to display <code class="codeph">PLAN_TABLE</code> output are:
                           </p><pre class="pre codeblock"><code>SELECT PLAN_TABLE_OUTPUT FROM TABLE(DBMS_XPLAN.DISPLAY());

SELECT PLAN_TABLE_OUTPUT 
  FROM TABLE(DBMS_XPLAN.DISPLAY('MY_PLAN_TABLE', 'st1','TYPICAL'));</code></pre><p>This section contains the following topics:</p>
                           <div class="infoboxnotealso" id="GUID-5E88AD7F-D5FF-4003-B721-9126352CE414__GUID-2FD03CE5-2A08-49CF-A2A1-F0726D52A496">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/tgsql&amp;id=ARPLS378" target="_blank"><span><cite>Oracle Database PL/SQL Packages and Types Reference</cite></span></a> for more information about the <code class="codeph">DBMS_XPLAN</code> package
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-D89C4CB8-6081-4DFF-98AC-25F3DC905093">Displaying an Execution Plan: Example</a><br>This example uses <code class="codeph">EXPLAIN PLAN</code> to examine a SQL statement that selects the <code class="codeph">employee_id</code>, <code class="codeph">job_title</code>, <code class="codeph">salary</code>, and <code class="codeph">department_name</code> for the employees whose IDs are less than 103.
                     </li>
                     <li class="ulchildlink"><a href="generating-and-displaying-execution-plans.html#GUID-51E46694-0C6B-4FDA-8C2F-0D7D7536D5F8">Customizing PLAN_TABLE Output</a><br>If you have specified a statement identifier, then you can write your own script to query the <code class="codeph">PLAN_TABLE</code>. 
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-60E30B1C-342B-4D71-B154-C26623D6A3B1" title="A thorough understanding of execution plans is essential to SQL tuning.">Generating and Displaying Execution Plans</a></p>
                     </div>
                  </div>
               </div>
               <a id="TGSQL94707"></a><a id="TGSQL94708"></a><a id="TGSQL275"></a><div class="props_rev_3"><a id="GUID-D89C4CB8-6081-4DFF-98AC-25F3DC905093" name="GUID-D89C4CB8-6081-4DFF-98AC-25F3DC905093"></a><h4 id="TGSQL-GUID-D89C4CB8-6081-4DFF-98AC-25F3DC905093" class="sect4"><span class="enumeration_section">6.4.1 </span>Displaying an Execution Plan: Example
                  </h4>
                  <div>
                     <p>This example uses <code class="codeph">EXPLAIN PLAN</code> to examine a SQL statement that selects the <code class="codeph">employee_id</code>, <code class="codeph">job_title</code>, <code class="codeph">salary</code>, and <code class="codeph">department_name</code> for the employees whose IDs are less than 103.
                     </p>
                     <div class="example" id="GUID-D89C4CB8-6081-4DFF-98AC-25F3DC905093__CACIGEFB">
                        <p class="titleinexample">Example 6-3 Using EXPLAIN PLAN</p><pre class="pre codeblock"><code>EXPLAIN PLAN FOR
  SELECT e.employee_id, j.job_title, e.salary, d.department_name
  FROM   employees e, jobs j, departments d
  WHERE  e.employee_id &lt; 103
  AND    e.job_id = j.job_id 
  AND    e.department_id = d.department_id;
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-D89C4CB8-6081-4DFF-98AC-25F3DC905093__CACIDEEA">
                        <p class="titleinexample">Example 6-4 EXPLAIN PLAN Output</p>
                        <p>The following output table shows the execution plan that the optimizer chose to execute the SQL statement in <a href="generating-and-displaying-execution-plans.html#GUID-D89C4CB8-6081-4DFF-98AC-25F3DC905093__CACIGEFB">Example 6-3</a>: 
                        </p><pre class="pre codeblock"><code>-----------------------------------------------------------------------------------
| Id  | Operation                     |  Name        | Rows  | Bytes | Cost (%CPU)|
-----------------------------------------------------------------------------------
|   0 | SELECT STATEMENT              |              |     3 |   189 |    10  (10)|
|   1 |  NESTED LOOPS                 |              |     3 |   189 |    10  (10)|
|   2 |   NESTED LOOPS                |              |     3 |   141 |     7  (15)|
|*  3 |    TABLE ACCESS FULL          | EMPLOYEES    |     3 |    60 |     4  (25)|
|   4 |    TABLE ACCESS BY INDEX ROWID| JOBS         |    19 |   513 |     2  (50)|
|*  5 |     INDEX UNIQUE SCAN         | JOB_ID_PK    |     1 |       |            |
|   6 |   TABLE ACCESS BY INDEX ROWID | DEPARTMENTS  |    27 |   432 |     2  (50)|
|*  7 |    INDEX UNIQUE SCAN          | DEPT_ID_PK   |     1 |       |            |
-----------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------
   3 - filter("E"."EMPLOYEE_ID"&lt;103)
   5 - access("E"."JOB_ID"="J"."JOB_ID")
   7 - access("E"."DEPARTMENT_ID"="D"."DEPARTMENT_ID"

------------------------------------------------------------------------------------------------
| Id | Operation                       | Name          | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------------
|  0 | SELECT STATEMENT                |               |     3 |   189 |     8  (13)| 00:00:01 |
|  1 |  NESTED LOOPS                   |               |       |       |            |          |
|  2 |   NESTED LOOPS                  |               |     3 |   189 |     8  (13)| 00:00:01 |
|  3 |    MERGE JOIN                   |               |     3 |   141 |     5  (20)| 00:00:01 |
|  4 |     TABLE ACCESS BY INDEX ROWID | JOBS          |    19 |   513 |     2   (0)| 00:00:01 |
|  5 |      INDEX FULL SCAN            | JOB_ID_PK     |    19 |       |     1   (0)| 00:00:01 |
|* 6 |     SORT JOIN                   |               |     3 |    60 |     3  (34)| 00:00:01 |
|  7 |      TABLE ACCESS BY INDEX ROWID| EMPLOYEES     |     3 |    60 |     2   (0)| 00:00:01 |
|* 8 |       INDEX RANGE SCAN          | EMP_EMP_ID_PK |     3 |       |     1   (0)| 00:00:01 |
|* 9 |    INDEX UNIQUE SCAN            | DEPT_ID_PK    |     1 |       |     0   (0)| 00:00:01 |
| 10 |   TABLE ACCESS BY INDEX ROWID   | DEPARTMENTS   |     1 |    16 |     1   (0)| 00:00:01 |
------------------------------------------------------------------------------------------------
 
Predicate Information (identified by operation id):
---------------------------------------------------
 
   6 - access("E"."JOB_ID"="J"."JOB_ID")
       filter("E"."JOB_ID"="J"."JOB_ID")
   8 - access("E"."EMPLOYEE_ID"&lt;103)
   9 - access("E"."DEPARTMENT_ID"="D"."DEPARTMENT_ID")</code></pre></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-5E88AD7F-D5FF-4003-B721-9126352CE414" title="You can use scripts or a package to display the plan output.">Displaying PLAN_TABLE Output</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div><a id="TGSQL94709"></a><div class="props_rev_3"><a id="GUID-51E46694-0C6B-4FDA-8C2F-0D7D7536D5F8" name="GUID-51E46694-0C6B-4FDA-8C2F-0D7D7536D5F8"></a><h4 id="TGSQL-GUID-51E46694-0C6B-4FDA-8C2F-0D7D7536D5F8" class="sect4"><span class="enumeration_section">6.4.2 </span>Customizing PLAN_TABLE Output
                  </h4>
                  <div>
                     <p>If you have specified a statement identifier, then you can write your own script to query the <code class="codeph">PLAN_TABLE</code>. 
                     </p>
                     <div class="section">
                        <p>For example:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Start with ID = 0 and given <code class="codeph">STATEMENT_ID</code>.
                              </p>
                           </li>
                           <li>
                              <p>Use the <code class="codeph">CONNECT BY</code> clause to walk the tree from parent to child, the join keys being <code class="codeph">STATEMENT_ID = PRIOR STATMENT_ID</code> and <code class="codeph">PARENT_ID = PRIOR ID</code>.
                              </p>
                           </li>
                           <li>
                              <p>Use the pseudo-column <code class="codeph">LEVEL</code> (associated with <code class="codeph">CONNECT BY</code>) to indent the children.
                              </p><pre class="pre codeblock"><code>SELECT cardinality "Rows",
   lpad(' ',level-1)||operation||' '||options||' '||object_name "Plan"
  FROM PLAN_TABLE
CONNECT BY prior id = parent_id
        AND prior statement_id = statement_id
  START WITH id = 0
        AND statement_id = 'st1'
  ORDER BY id;

   Rows Plan
------- ----------------------------------------
        SELECT STATEMENT
         TABLE ACCESS FULL EMPLOYEES
</code></pre><p>The <code class="codeph">NULL</code> in the <code class="codeph">Rows</code> column indicates that the optimizer does not have any statistics on the table. Analyzing the table shows the following:
                              </p><pre class="pre codeblock"><code>   Rows Plan
------- ----------------------------------------
  16957 SELECT STATEMENT
  16957  TABLE ACCESS FULL EMPLOYEES
</code></pre><p>You can also select the <code class="codeph">COST</code>. This is useful for comparing execution plans or for understanding why the optimizer chooses one execution plan over another.
                              </p>
                              <div class="infoboxnote" id="GUID-51E46694-0C6B-4FDA-8C2F-0D7D7536D5F8__GUID-42DE2A10-328A-49B3-9B35-B8DA225B6B7C">
                                 <p class="notep1">Note:</p>
                                 <p>These simplified examples are not valid for recursive&nbsp;SQL. </p>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>Parent topic:</strong> <a href="generating-and-displaying-execution-plans.html#GUID-5E88AD7F-D5FF-4003-B721-9126352CE414" title="You can use scripts or a package to display the plan output.">Displaying PLAN_TABLE Output</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>